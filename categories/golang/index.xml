<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Golang (Go ì–¸ì–´) on Jinsu Playground</title><link>https://umi0410.github.io/categories/golang/</link><description>Recent content in Golang (Go ì–¸ì–´) on Jinsu Playground</description><generator>Hugo -- gohugo.io</generator><language>ko-kr</language><lastBuildDate>Wed, 24 Nov 2021 03:46:54 +0900</lastBuildDate><atom:link href="https://umi0410.github.io/categories/golang/index.xml" rel="self" type="application/rss+xml"/><item><title>ì¿¼ë¦¬ ìµœì í™”í•˜ê¸° - ì¡°íšŒìˆ˜ì™€ ê°™ì€ Count ì„±ê²©ì˜ ì‘ì—… ìµœì í™”í•˜ê¸° (N+1 ë¬¸ì œ ê´€ë ¨, feat. Redis)</title><link>https://umi0410.github.io/blog/optimizing-count-query-strategy/</link><pubDate>Wed, 24 Nov 2021 03:46:54 +0900</pubDate><guid>https://umi0410.github.io/blog/optimizing-count-query-strategy/</guid><description>&lt;img src="https://umi0410.github.io/blog/optimizing-count-query-strategy/index.png" alt="Featured image of post ì¿¼ë¦¬ ìµœì í™”í•˜ê¸° - ì¡°íšŒìˆ˜ì™€ ê°™ì€ Count ì„±ê²©ì˜ ì‘ì—… ìµœì í™”í•˜ê¸° (N+1 ë¬¸ì œ ê´€ë ¨, feat. Redis)" />&lt;h2 id="ì‹œì‘í•˜ë©°">ì‹œì‘í•˜ë©°&lt;/h2>
&lt;p>&lt;img src="https://umi0410.github.io/blog/optimizing-count-query-strategy/monitoring.png"
width="1012"
height="437"
srcset="https://umi0410.github.io/blog/optimizing-count-query-strategy/monitoring_hu3985549258cc81ebaf9b1ddb4dd53245_70044_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/optimizing-count-query-strategy/monitoring_hu3985549258cc81ebaf9b1ddb4dd53245_70044_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="Sentry monitoring - ëŠë ¤ì§„ API Latency"
class="gallery-image"
data-flex-grow="231"
data-flex-basis="555px"
>&lt;/p>
&lt;p>&lt;strong>ì§§ì€ ì˜ìƒì„ ë°”íƒ•ìœ¼ë¡œ ë°°í‹€ì„ í•  ìˆ˜ ìˆëŠ” ì„œë¹„ìŠ¤ë¥¼ &lt;code>Spring Boot MVC&lt;/code> + &lt;code>JPA&lt;/code>ë¡œ ê°œë°œ&lt;/strong>í•˜ë˜ ì¤‘ ìœ„ì™€ ê°™ì´ API &lt;strong>Latencyê°€ ì²˜ì°¸í•˜ê²Œë„ ëŠë¦° ìš”ì²­&lt;/strong>ë“¤ì´ ê°ì§€ë˜ê¸° ì‹œì‘í–ˆìŠµë‹ˆë‹¤. ê·¸ë™ì•ˆì€ ì¿¼ë¦¬ ìµœì í™”ë³´ë‹¤ëŠ” ë¡œì§ ê°œë°œì´ ë” ìš°ì„ ì‹œí•˜ë‹¤ë³´ë‹ˆ ì¿¼ë¦¬ ìµœì í™”ë¥¼ ë¯¸ë¤„ì™”ëŠ”ë°,
ì´ë²ˆ ê¸°íšŒì— ì´ì— ëŒ€í•´ ë‹¤ë¤„ë³´ë ¤í•©ë‹ˆë‹¤. ê°„ë‹¨í•˜ê²Œ ì½”ë“œë¥¼ ì§œì„œ í…ŒìŠ¤íŠ¸í•´ë³´ëŠë¼ Go ì–¸ì–´ë¥¼ ì´ìš©í–ˆì§€ë§Œ &lt;strong>JPAë¥¼ ì´ìš©í•˜ë“  ë­˜ ì´ìš©í•˜ë“  ë¬¸ì œì™€ ê·¸ì— ëŒ€í•œ í•´ê²°ì±…ì˜ ìš”ì§€ëŠ” ë™ì¼í•  ê²ƒ&lt;/strong>ì…ë‹ˆë‹¤.&lt;/p>
&lt;p>ì•„ë¬´ë˜ë„ ë°±ì—”ë“œì—ì„œ APIë¥¼ ê°œë°œí•˜ë©´ì„œ íŒŒì¼ ë°ì´í„°ë¥¼ ì£¼ê³  ë°›ëŠ” ê²Œ ì•„ë‹ˆë¼ë©´ ì£¼ë¡œ Latencyê°€ ëŠ˜ì–´ë‚˜ëŠ” ì´ìœ ëŠ” ë‹¤ìŒê³¼ ê°™ì„ ê²ƒì…ë‹ˆë‹¤.&lt;/p>
&lt;ul>
&lt;li>ë„ˆë¬´ ë§ì€ Write&lt;/li>
&lt;li>ë¶ˆí•„ìš”í•œ Column(í•„ë“œ) í˜¹ì€ ê´€ê³„ë¥¼ Eager Loading. ì¶”ê°€ì ìœ¼ë¡œ ê²½ìš°ì— ë”°ë¼ &lt;strong>N+1 ì¿¼ë¦¬ ë¬¸ì œ&lt;/strong> ë°œìƒ&lt;/li>
&lt;li>í•„ìš”í•œ Column(í•„ë“œ) í˜¹ì€ ê´€ê³„ë¥¼ ë’¤ëŠ¦ê²Œ Lazy Loading. ì¶”ê°€ì ìœ¼ë¡œ ê²½ìš°ì— ë”°ë¼ &lt;strong>N+1 ì¿¼ë¦¬ ë¬¸ì œ&lt;/strong> ë°œìƒ&lt;/li>
&lt;li>&lt;strong>ìš”ì²­ë§ˆë‹¤ ë§¤ë²ˆ ìˆ˜í–‰ë˜ëŠ” Joinì´ë‚˜ ì¼ì¢…ì˜ ì—°ì‚°ë“¤&lt;/strong>&lt;/li>
&lt;/ul>
&lt;blockquote>
&lt;p>&lt;code>N+1&lt;/code> ì¿¼ë¦¬ ë¬¸ì œ? - Nê°œì˜ ë°ì´í„°ë¥¼ ì¡°íšŒí•œ ê²½ìš°, ê° ë°ì´í„°ë“¤ì˜ ì—°ê´€ ê´€ê³„ë¥¼ ì¶”ê°€ì ìœ¼ë¡œ ì¡°íšŒí•˜ê¸° ìœ„í•´ í•œ ë²ˆì”© ë” ì¡°íšŒí•´ì•¼í•˜ëŠ” ë¬¸ì œ&amp;hellip; ì•„ì£¼ ì•…ëª… ë†’ì€ ë¬¸ì œë¡œ ìë£Œë¥¼ ì‰½ê²Œ ì°¾ì•„ë³¼ ìˆ˜ ìˆë‹¤.&lt;/p>
&lt;/blockquote>
&lt;p>ì‚¬ì‹¤ ì–´ë–»ê²Œ ë³´ë©´ N+1 ì¿¼ë¦¬ ë¬¸ì œê°€ ì›Œë‚™ ì•…ëª…ì´ ë†’ì•„ ê·¸ì— ëŒ€í•œ í•´ê²°ì±…ë“¤ë„ ê°„ë‹¨í•˜ê²ŒëŠ” ë§ì´ ì†Œê°œë˜ëŠ” ê²ƒ ê°™ê¸°ë„ í•©ë‹ˆë‹¤. ë”°ë¼ì„œ ì´ë²ˆ ê¸€ì—ì„œëŠ” ì¡°ê¸ˆì€ íŠ¹ì´í•˜ê²Œ &lt;strong>ì¡°íšŒìˆ˜ë‚˜ ëŒ“ê¸€ ê°œìˆ˜ì²˜ëŸ¼ ì¼ì¢…ì˜ Count ê¸°ëŠ¥ì´ í•„ìš”í•œ ê²½ìš°ì˜ N+1 ì¿¼ë¦¬ ë¬¸ì œë‚˜ ìš”ì²­ë§ˆë‹¤ ë§¤ë²ˆ ìˆ˜í–‰ë˜ëŠ” Joinì´ë‚˜ ì—°ì‚°ë“¤ë¡œ ì¸í•œ
ì˜¤ë²„í—¤ë“œë“¤ì„ ì¤„ì—¬ ìµœì í™”&lt;/strong>í•˜ëŠ” ë°©ë²•ì€ ì–´ë–¤ ê²ƒë“¤ì´ ìˆì„ì§€ì— ëŒ€í•œ ì œ ê³ ë¯¼ì„ ì†Œê°œí•´ë³´ë ¤ í•©ë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;strong>&lt;em>(ì´ ê¸€ì€ RDBë¥¼ ë©”ì¸ DBë¡œ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ì‘ì„±í–ˆìŠµë‹ˆë‹¤.)&lt;/em>&lt;/strong>&lt;/p>
&lt;h2 id="ì˜ìƒ-ì¡°íšŒìˆ˜-ê°™ì€-count-ì„±ê²©ì˜-ê°’ì—-ëŒ€í•œ-ì‘ì—…ì„-ìµœì í™”í•˜ì§€-ì•Šìœ¼ë©´">ì˜ìƒ ì¡°íšŒìˆ˜ ê°™ì€ Count ì„±ê²©ì˜ ê°’ì— ëŒ€í•œ ì‘ì—…ì„ ìµœì í™”í•˜ì§€ ì•Šìœ¼ë©´?!&lt;/h2>
&lt;ul>
&lt;li>ìŸì•„ì§€ëŠ” ì˜ìƒ ì¡°íšŒ ì´ë²¤íŠ¸ë§ˆë‹¤ RDBì— ë°ì´í„°ë¥¼ Write =&amp;gt; RDBì— ë„ˆë¬´ í° ë¶€í•˜&lt;/li>
&lt;li>ë§¤ë²ˆ íŠ¹ì • ì˜ìƒê³¼ ê´€ë ¨ëœ ì¡°íšŒ ë‚´ì—­ì„ RDBì—ì„œ Join í›„ ê·¸ ê°œìˆ˜ë¥¼ ê³„ì‚° =&amp;gt; RDBì— ë¶€í•˜, ëŠë¦° ì‘ì—…&lt;/li>
&lt;li>RDBì— ì˜ìƒ ì¡°íšŒ ì´ë²¤íŠ¸ë¥¼ Writeí•  ë•Œ ì˜ìƒ ì •ë³´ í…Œì´ë¸”ì— view_count ì»¬ëŸ¼ì„ ì¶”ê°€í•œ ë’¤ view_count ì»¬ëŸ¼ì— ì¡°íšŒìˆ˜ë¥¼ ìºì‹œ =&amp;gt; ìºì‹œ ì •í™•ë„ ë¬¸ì œ, í…Œì´ë¸” ì •ì˜ ë³€ê²½ í•„ìš”&lt;/li>
&lt;/ul>
&lt;p>ì˜ìƒ ì¡°íšŒìˆ˜ ê°™ì€ Count ì„±ê²©ì˜ ê°’ì„ ìµœì í™”í•´ì£¼ì§€ ì•Šìœ¼ë©´ ìœ„ì™€ ê°™ì€ ë¬¸ì œë“¤ì´ ë°œìƒí•  ìˆ˜ ìˆë‹¤ê³  ë´…ë‹ˆë‹¤.&lt;/p>
&lt;p>ë”°ë¼ì„œ ì˜ìƒ ì¡°íšŒ ì´ë²¤íŠ¸ì²˜ëŸ¼ ìŸì•„ì§€ëŠ” ë°ì´í„°ëŠ” ë„ˆë¬´ ë§ì€ Write ìš”ì²­ì€ RDBê°€ ì•„ë‹Œ NoSQLì„ ì‚¬ìš©í•˜ëŠ” ê²Œ ì¢‹ì„ ìˆ˜ ìˆì„ ê²ƒì…ë‹ˆë‹¤.&lt;/p>
&lt;p>í•˜ì§€ë§Œ NoSQLì— ì˜ìƒ ì¡°íšŒ ì´ë²¤íŠ¸ë¥¼ ì €ì¥í•œë‹¤ í•´ë„ ë§¤ë²ˆ ì˜ìƒ ì¡°íšŒ ë‚´ì—­ì„ ê°€ì ¸ì˜¨ ë’¤ ê·¸ ê°œìˆ˜ë¥¼ ê³„ì‚°í•˜ëŠ” ë°©ì‹ì€ ì–´ë–¤ DBë¥¼ ì‚¬ìš©í•˜ë˜ ë¶ˆí•„ìš”í•œ Readë„ ë§ì´ ë°œìƒí•  ê²ƒì´ê³ , ë‹¹ì—°íˆ ëŠë¦¬ê² ì£ . ë§Œì•½ ì–´ë–¤ ì˜ìƒì˜ ì¡°íšŒìˆ˜ê°€ 10ë§Œì¸ ê²½ìš° 10ë§Œê°œì˜ ì´ë²¤íŠ¸ë“¤ì„ ì¡°íšŒí•œ ë’¤ ê·¸ ê°œìˆ˜ë¥¼ ì´ìš©í•´ì•¼í• í…Œë‹ˆ ë§ì…ë‹ˆë‹¤.
ê²½ìš°ì— ë”°ë¼ì„œëŠ” ì˜ìƒ ì¡°íšŒ ì‹œ ê° ì˜ìƒì— ëŒ€í•œ ì¡°íšŒ ë‚´ì—­ì„ ì¶”ê°€ì ìœ¼ë¡œ ì¡°íšŒí•˜ê²Œ ë˜ëŠ” N+1 ì¿¼ë¦¬ ë¬¸ì œë¥¼ ê²ªì„ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>ë”°ë¼ì„œ &lt;strong>&lt;code>view_count&lt;/code> ê°™ì€ columnì„ ì¶”ê°€ì ìœ¼ë¡œ ë‘ëŠ” ê±´ ì–´ë–¨ê¹Œ&lt;/strong>ì‹¶ê¸°ë„ í•©ë‹ˆë‹¤ë§Œ ì¼ë°˜ì ìœ¼ë¡œëŠ” &lt;strong>ë™ì‹œì„± ì´ìŠˆë¡œ ì¸í•´ view_countì˜ ì •í™•ë„ê°€ ë–¨ì–´ì§€ê²Œ ë  ê²ƒ&lt;/strong>ì…ë‹ˆë‹¤. ë˜í•œ &lt;strong>ìŠ¤í‚¤ë§ˆê°€ ê°•ìš”ë˜ëŠ” RDBì˜ íŠ¹ì„±ì— ì˜í•´ í…Œì´ë¸” ì •ì˜ê°€ ë³€ê²½ë˜ì–´ì•¼í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤&lt;/strong>.&lt;/p>
&lt;blockquote>
&lt;p>ë™ì‹œì„± ì´ìŠˆ - ë§Œì•½ 100ëª…ì˜ ìœ ì €ì— ëŒ€í•œ ì˜ìƒ ì¡°íšŒë¥¼ ë™ì‹œì— ì²˜ë¦¬í•˜ëŠ” ê²½ìš° 100ê°œì˜ ìŠ¤ë ˆë“œëŠ” ëª¨ë‘ view_count=0 ìœ¼ë¡œ ì¡°íšŒë¥¼ í•œ ë’¤ ìì‹ ì˜ ì¡°íšŒ ì´ë²¤íŠ¸ë¡œ ì¸í•œ +1ì„ ë”í•´ view_count=1ë¡œ ì—…ë°ì´íŠ¸ ì»¤ë§¨ë“œë¥¼ ë‚ ë¦¬ê² ì§€ë§Œ ì‚¬ì‹¤ view_countëŠ” 1ì´ ì•„ë‹Œ 100ì´ ë˜ì–´ì•¼ ì •í™•í•œ ê²ƒì´ë‹¤.&lt;/p>
&lt;/blockquote>
&lt;h2 id="redisë¥¼-ë„ì…í•´ë³´ë©´-ì–´ë–¨ê¹Œ">Redisë¥¼ ë„ì…í•´ë³´ë©´ ì–´ë–¨ê¹Œ&lt;/h2>
&lt;p>&lt;code>Redis&lt;/code>ëŠ” ë©”ëª¨ë¦¬ë¥¼ ê¸°ë°˜ìœ¼ë¡œí•˜ëŠ” Key-Value í˜•íƒœì˜ NoSQLë¼ì„œ ì¼ë°˜ì ì¸ RDBì— ë¹„í•´ ì•„ì£¼ ë¹ ë¥´ë©´ì„œ ì‹±ê¸€ ìŠ¤ë ˆë“œ ê¸°ë°˜ì´ê¸° ë•Œë¬¸ì— ì •í™•í•œ Countì™€ Incrementê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤. ë”°ë¼ì„œ ì•„ê¹Œ ë°œìƒí–ˆë˜ ë¬¸ì œë“¤ì„ ë‹¤ìŒê³¼ ê°™ì´ í•´ê²°í•  ìˆ˜ ìˆì„ ê²ƒì…ë‹ˆë‹¤.&lt;/p>
&lt;ul>
&lt;li>
&lt;p>ìŸì•„ì§€ëŠ” ì˜ìƒ ì¡°íšŒ ì´ë²¤íŠ¸ë§ˆë‹¤ RDBì— ë°ì´í„°ë¥¼ Write&lt;/p>
&lt;p>=&amp;gt; &lt;del>RDBì— ë„ˆë¬´ í° ë¶€í•˜&lt;/del> (X), &lt;strong>ë¹ ë¥¸ Write&lt;/strong> (O)&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ë§¤ë²ˆ íŠ¹ì • ì˜ìƒê³¼ ê´€ë ¨ëœ ì¡°íšŒ ë‚´ì—­ì„ RDBì—ì„œ Join í›„ ê·¸ ê°œìˆ˜ë¥¼ ê³„ì‚°&lt;/p>
&lt;p>=&amp;gt; &lt;del>RDBì— ë¶€í•˜, ëŠë¦° ì‘ì—…&lt;/del> (X), &lt;strong>Redisì— ìµœê·¼ ì¡°íšŒ ë‚´ì—­ì„ ì €ì¥&lt;/strong>, ìƒí™©ì— ë”°ë¼ NoSQLì—ì„œ Replicateí•´ì„œ ì˜êµ¬í™”í•˜ëŠ” ê²ƒë„ ì¢‹ìŒ (O)&lt;/p>
&lt;/li>
&lt;li>
&lt;p>RDBì— ì˜ìƒ ì¡°íšŒ ì´ë²¤íŠ¸ë¥¼ Writeí•  ë•Œ ì˜ìƒ ì •ë³´ í…Œì´ë¸”ì— view_count ì»¬ëŸ¼ì„ ì¶”ê°€í•œ ë’¤ view_count ì»¬ëŸ¼ì— ì¡°íšŒìˆ˜ë¥¼ ìºì‹œ&lt;/p>
&lt;p>=&amp;gt; &lt;del>ìºì‹œ ì •í™•ë„ ë¬¸ì œ&lt;/del> (X), &lt;strong>Redisì˜ ì‹±ê¸€ìŠ¤ë ˆë“œ ê¸°ë°˜ì˜ ì •í™•í•œ ê³„ì‚°&lt;/strong>&lt;/p>
&lt;p>=&amp;gt; &lt;del>í…Œì´ë¸” ì •ì˜ ë³€ê²½ í•„ìš”&lt;/del> (X), &lt;strong>NoSQLì˜ ìœ ì—°í•¨&lt;/strong> (O)&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>ì´ëŸ° ì´ìœ ë¡œ ì¸í•´ ì¶”í›„ì— &lt;strong>ì¡°íšŒìˆ˜ë‚˜ ëŒ“ê¸€ ìˆ˜, íŒ”ë¡œì›Œ ìˆ˜ ë“±ë“±ì— ëŒ€í•´ Redisë¥¼ ì´ìš©í•˜ë©´ ì–´ë–¨ê¹Œ ì‹¶ì€ ìƒê°ì´ ë“œë„¤ìš”~!&lt;/strong> ê·¸ëŸ¼ ì‹¤ì œë¡œ ì•ì„œ ì†Œê°œí–ˆë˜ ë¬¸ì œ ìƒí™©ì´ë‚˜ í•´ê²° ë°©ë²•ë“¤ì´ ê°ê° ì„±ëŠ¥ì´ ì–´ë–¨ì§€ ì§ì ‘ ë°ì´í„°ì™€ ì¿¼ë¦¬ë¥¼ ì´ìš©í•´ ì‹¤í—˜í•´ë³´ê² ìŠµë‹ˆë‹¤.&lt;/p>
&lt;h2 id="ì‹¤ì œ-ì‹¤í—˜ì„-í†µí•´-ê°ê°ì˜-ë°©ì‹-ì„±ëŠ¥-ë¹„êµ">ì‹¤ì œ ì‹¤í—˜ì„ í†µí•´ ê°ê°ì˜ ë°©ì‹ ì„±ëŠ¥ ë¹„êµ&lt;/h2>
&lt;h3 id="ìƒí™©-ì†Œê°œ">ìƒí™© ì†Œê°œ&lt;/h3>
&lt;ul>
&lt;li>Localì—ì„œ Redis container, MySQL containerì„ ì´ìš©. Goì–¸ì–´ë¡œ ê°€ë³ê²Œ ì• í”Œë¦¬ì¼€ì´ì…˜ ì‘ì„±&lt;/li>
&lt;li>MySQLì˜ Video í…Œì´ë¸”ì— 1000ê°œì˜ ì˜ìƒ ë°ì´í„° ì¡´ì¬. ì¡°íšŒìˆ˜ë¥¼ ìºì‹œí•´ë†“ì€ view_count ì»¬ëŸ¼ ì¡´ì¬.&lt;/li>
&lt;li>MySQLì˜ View í…Œì´ë¸”ì— ì•½ 2ì²œë§Œ ê°œì˜ ì¡°íšŒ ë‚´ì—­ ì¡´ì¬.(ì¦‰ ì˜ìƒ ë‹¹ ìˆ˜ì²œê°œì˜ ì¡°íšŒ ë‚´ì—­ ì¡´ì¬) ì¸ë±ìŠ¤ëŠ” ì˜ ê±¸ì–´ë†“ìŒ.&lt;/li>
&lt;li>Redisì— &lt;code>key=video_view_count:{{video_id}}&lt;/code>, &lt;code>value={{view_count}}&lt;/code> í˜•íƒœë¡œ view_count ìºì‹œ&lt;/li>
&lt;li>&lt;strong>ëœë¤í•˜ê²Œ 5ê°œì˜ ì˜ìƒì— ëŒ€í•œ ì •ë³´ë¥¼ ì œê³µí•  ê²ƒì¸ë° ì´ë•Œ ì¡°íšŒìˆ˜ë„ í¬í•¨ë˜ì–´ì•¼í•œë‹¤.&lt;/strong>&lt;/li>
&lt;/ul>
&lt;h3 id="ë¹„êµí• -ë°©ì‹ë“¤-ì†Œê°œ">ë¹„êµí•  ë°©ì‹ë“¤ ì†Œê°œ&lt;/h3>
&lt;ul>
&lt;li>&lt;strong>Select í›„ Redisì— ìºì‹œëœ ì¡°íšŒìˆ˜ ì´ìš©&lt;/strong>
&lt;ul>
&lt;li>ì˜ìƒì— ëŒ€í•œ ì •ë³´ ìì²´ëŠ” Video í…Œì´ë¸”ì„ ì´ìš©í•´ Read&lt;/li>
&lt;li>ì¡°íšŒìˆ˜ëŠ” Redisì— ìºì‹œëœ ê°’ì„ MGETì„ í†µí•´ ë°°ì¹˜(ë²Œí¬)ë¡œ ì¡°íšŒí•´ì™€ì„œ ì´ìš©&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;strong>Select í•˜ë©° Columnì— ìºì‹œëœ ì¡°íšŒìˆ˜ ì´ìš©&lt;/strong>
&lt;ul>
&lt;li>ì˜ìƒ ì •ë³´ì™€ ì¡°íšŒìˆ˜ ëª¨ë‘ Video í…Œì´ë¸”ì„ í†µí•´ ë°”ë¡œ Read&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;strong>Select í›„ Batchë¡œ In-Query&lt;/strong>
&lt;ul>
&lt;li>JPAë¥¼ ì´ìš©í•˜ë©´ì„œ í”íˆ ë°œìƒí–ˆë˜ N+1 ì¿¼ë¦¬ë¥¼ Batchë¡œ í•´ê²°í•  ë•Œì™€ ë™ì¼í•˜ê²Œ Video í…Œì´ë¸” ì¡°íšŒ í›„ View í…Œì´ë¸”ì—ì„œ view.id in (?,?,&amp;hellip;) ì˜ í˜•íƒœë¡œ In-Queryë¥¼ ì´ìš©&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;strong>Select í›„ ë‚˜ì¤‘ì— ê°ê°ì„ Join&lt;/strong>
&lt;ul>
&lt;li>N+1 ì¿¼ë¦¬ ë¬¸ì œ ê·¸ ìì²´..!&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="ì‹¤í—˜-ê²°ê³¼">ì‹¤í—˜ ê²°ê³¼&lt;/h3>
&lt;p>&lt;img src="https://umi0410.github.io/blog/optimizing-count-query-strategy/result-1.png"
width="2520"
height="783"
srcset="https://umi0410.github.io/blog/optimizing-count-query-strategy/result-1_hu2b8142f32263cafd399ddd7e1ab96ace_456229_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/optimizing-count-query-strategy/result-1_hu2b8142f32263cafd399ddd7e1ab96ace_456229_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="ì‹¤í—˜ ê²°ê³¼ 1"
class="gallery-image"
data-flex-grow="321"
data-flex-basis="772px"
>&lt;/p>
&lt;ol>
&lt;li>ğŸ¥‡ &lt;strong>Select í•˜ë©° Columnì— ìºì‹œëœ ì¡°íšŒìˆ˜ ì´ìš©&lt;/strong>&lt;/li>
&lt;li>ğŸ¥ˆ &lt;strong>Select í›„ Redisì— ìºì‹œëœ ì¡°íšŒìˆ˜ ì´ìš©&lt;/strong>&lt;/li>
&lt;li>ğŸ¥‰ &lt;strong>Select í›„ ë‚˜ì¤‘ì— ê°ê°ì„ Join&lt;/strong>&lt;/li>
&lt;li>&lt;strong>Select í›„ Batchë¡œ In-Query&lt;/strong>&lt;/li>
&lt;/ol>
&lt;p>ìš°ì„ ì€ ì–´ë–¤ ìª½ìœ¼ë¡œë“  ìºì‹±ì„ ì´ìš©í•˜ëŠ” ê²Œ ì°¸ ë¹ ë¥´êµ¬ë‚˜ ì‹¶ì—ˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ì¡°ê¸ˆ ì˜ì•„í•  ìˆ˜ ìˆëŠ” ë¶€ë¶„ë“¤ë„ ì¡´ì¬í•˜ëŠ”ë°ìš”.&lt;/p>
&lt;ol>
&lt;li>&lt;strong>Redisì— ì¡°íšŒìˆ˜ë¥¼ ìºì‹±í•œ ê²½ìš°ë³´ë‹¤ MySQLì— ìºì‹±í•œ ê²½ìš°ê°€ ë” ë¹ ë¥´ë„¤..?&lt;/strong>&lt;/li>
&lt;/ol>
&lt;p>ì–´ë–»ê²Œë³´ë©´ ë‹¹ì—°í•˜ê² ì§€ë§Œ &lt;strong>MySQLì—ì„œ Join ì—†ì´ view_countë¥¼ ì¡°íšŒí•  ìˆ˜ë§Œ ìˆë‹¤ë©´ Redisë¥¼ ê±°ì¹˜ëŠ” ê²ƒë³´ë‹¤ MySQLë§Œìœ¼ë¡œ ì²˜ë¦¬í•˜ëŠ” ê²ƒì´ ë” ë¹ ë¥¼ ê²ƒ&lt;/strong>ì…ë‹ˆë‹¤.&lt;/p>
&lt;p>í•˜ì§€ë§Œ Redisë¥¼ ì‚¬ìš©í•˜ëŠ” ì´ìœ ê°€ Read ì†ë„ë•Œë¬¸ë§Œì€ ì•„ë‹ ê²ƒì…ë‹ˆë‹¤. ì•ì„œ ë§ì”€ë“œë¦° ëŒ€ë¡œ &lt;strong>ì‹±ê¸€ ìŠ¤ë ˆë“œ ê¸°ë°˜ì˜ ì •í™•í•œ count&lt;/strong>ê°€ ê°€ëŠ¥í•  ê²ƒì´ê³ , RDBì˜ &lt;strong>í…Œì´ë¸” ìŠ¤í‚¤ë§ˆë¥¼ ë³€ê²½í•  í•„ìš”ë„ ì—†ì£ &lt;/strong>.&lt;/p>
&lt;p>ê·¸ë¦¬ê³  ë¬´ì—‡ë³´ë‹¤ ì˜ìƒ ì¡°íšŒ ì´ë²¤íŠ¸ ë°œìƒë§ˆë‹¤ RDBì˜ íŠ¹ì • rowì˜ ì¡°íšŒìˆ˜ë¥¼ +1 í•˜ì—¬ update í•˜ëŠ” ê²ƒë³´ë‹¤ëŠ” redisì—ì„œ incrementí•˜ëŠ” ê²ƒì´ ë¹ ë¥¼ ê²ƒì…ë‹ˆë‹¤! ì¦‰, &lt;strong>writeê¹Œì§€ ê³ ë ¤í•˜ë©´ ì†ë„ ì¸¡ë©´ì—ì„œë„ redisê°€ ë¹ ë¥¼ ê²ƒ&lt;/strong>ì…ë‹ˆë‹¤.&lt;/p>
&lt;ol start="2">
&lt;li>&lt;strong>N+1 ì¿¼ë¦¬ ë¬¸ì œë¥¼ ì•¼ê¸°í•˜ëŠ” ë°©ì‹ì´ Batchë¡œ In-Queryí•˜ëŠ” ë°©ì‹ë³´ë‹¤ ë¹ ë¥´ë„¤..?&lt;/strong>&lt;/li>
&lt;/ol>
&lt;p>ì´ ë¶€ë¶„ì€ ì •í™•í•œ ì›ì¸ì€ ëª¨ë¥´ê² ì§€ë§Œ ì•„ë§ˆ ì¶”ì¸¡ì»¨ëŒ€ Batch ë°©ì‹ìœ¼ë¡œ í•œ ë²ˆì— ëª‡ ë§Œê°œ ìˆ˜ì¤€ì˜ ë„ˆë¬´ë‚˜ ë§ì€ ë°ì´í„°ë¥¼ ì¹´í‹°ì…˜ ê³±ìœ¼ë¡œ ì¡°íšŒí•œ ë’¤ ê° videoì˜ ì¡°íšŒìˆ˜ ë‚´ì—­ìœ¼ë¡œ ë„£ì–´ì£¼ë ¤ë‹¤ë³´ë‹ˆ ì¡°íšŒ í›„ ì—°ì‚°ì´ ë§ì€ ì‹œê°„ì„ ì¡ì•„ë¨¹ì€ ê²Œ ì•„ë‹ê¹Œ ì‹¶ìŠµë‹ˆë‹¤.
ë°˜ë©´ N+1 ì¿¼ë¦¬ ë°©ì‹ì€ ê° videoì— ëŒ€í•´ í•œ ë²ˆì”© ì¿¼ë¦¬í•œ ë’¤ ë°”ë¡œ ê·¸ ê²°ê³¼ count í•  ìˆ˜ ìˆìœ¼ë‹ˆ ì´ëŸ° íŠ¹ìˆ˜í•œ ê²½ìš°(ë°ì´í„°ê°€ ì—„~ì²­ ë§ì€ ê²½ìš°)ì—ëŠ” ì˜¤íˆë ¤ Batch ë°©ì‹ì´ ëŠë¦´ ìˆ˜ ìˆëŠ” ê²Œ ì•„ë‹ê¹Œ ì‹¶ìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>ì‹¤ì œë¡œ ì¡°íšŒìˆ˜ê°€ ì•½ 10ê°œ ì •ë„ì¸ ì˜ìƒì„ ë˜‘ê°™ì´ 5ê°œ ì¡°íšŒí•´ë³´ë‹ˆ ìš°ë¦¬ì˜ ì¼ë°˜ì ì¸ ì˜ˆìƒëŒ€ë¡œ Batch ë°©ì‹ì´ N+1 ì¿¼ë¦¬ë³´ë‹¤ ë¹¨ëëŠ”ë°ìš”! ì•„ë§ˆ ì¹´í‹°ì…˜ ê³±ì´ ì¼ì–´ë‚¬ì§€ë§Œ ì–‘ ìì²´ê°€ ì ì€ ì¿¼ë¦¬ ê²°ê³¼ë¥¼ ì²˜ë¦¬í•˜ëŠ” ê²ƒì´ redisì™€ì˜ Në²ˆì˜ í†µì‹ ì´ ë” ëŠë¦¬ê¸° ë•Œë¬¸ì´ ì•„ë‹ê¹Œ ì‹¶ìŠµë‹ˆë‹¤.&lt;/p>
&lt;h2 id="ì¡°íšŒìˆ˜ë¥¼-ìœ„í•´-ê°€ì¥-ì´ìƒì ì¸-ì•„í‚¤í…ì³ëŠ”">ì¡°íšŒìˆ˜ë¥¼ ìœ„í•´ ê°€ì¥ ì´ìƒì ì¸ ì•„í‚¤í…ì³ëŠ”?!&lt;/h2>
&lt;p>&lt;img src="https://umi0410.github.io/blog/optimizing-count-query-strategy/architecture.png"
width="1315"
height="1236"
srcset="https://umi0410.github.io/blog/optimizing-count-query-strategy/architecture_hu2e0266c55b356006b8efd84bbe6e386e_394889_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/optimizing-count-query-strategy/architecture_hu2e0266c55b356006b8efd84bbe6e386e_394889_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="ìƒìƒ ì† ì•„í‚¤í…ì³"
class="gallery-image"
data-flex-grow="106"
data-flex-basis="255px"
>&lt;/p>
&lt;p>ì‹¤í—˜ ê²°ê³¼ì—ì„œë„ Redisë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ë‚˜ì˜ì§€ ì•Šì€ ê²ƒìœ¼ë¡œ ë³´ì—¬ì§‘ë‹ˆë‹¤. ê·¸ë˜ì„œ ì €ë¼ë©´ ì •ë§ ì´ëŸ° ì‹ìœ¼ë¡œ &lt;strong>ìµœì í™”ë¥¼ í•´ë³¼ ìˆ˜ ìˆëŠ” ê¸°íšŒê°€ ìˆë‹¤ë©´ Redisë¥¼ ë„ì…&lt;/strong>í•´ë³¼ ê²ƒ ê°™ìŠµë‹ˆë‹¤. ê·¸ ë™ì•ˆ ìˆ˜ì—†ì´ ê³ í†µë°›ì•„ì™”ë˜ N+1 ì¿¼ë¦¬ ë¬¸ì œë„ ì–´ëŠ ì •ë„ í•´ê²°í•  ìˆ˜ ìˆê² ì£ ?!
&lt;strong>ë¶ˆí•„ìš”í•œ ì–‘ë°©í–¥ ì—°ê´€ ê´€ê³„ëŠ” ìµœëŒ€í•œ ë‹¨ë°©í–¥ ì—°ê´€ ê´€ê³„ë¡œ ì œí•œí•˜ê³ , Countê°€ í•„ìš”í•  ë•Œ ê° ì—”í‹°í‹°ë§ˆë‹¤ì˜ íŠ¹ì • Count ê°’ì„ ìœ„í•´ Në²ˆì˜ ì¿¼ë¦¬ë¥¼ ìˆ˜í–‰í•  í•„ìš”ë„ ì—†ì–´ì§ˆ ê²ƒ&lt;/strong>ì…ë‹ˆë‹¤.&lt;/p>
&lt;p>í•˜ì§€ë§Œ Redisë¥¼ ë„ì…í•œë‹¤ê³  ë§Œì‚¬ê°€ í•´ê²°ë˜ëŠ” ê²ƒì€ ì•„ë‹ ê²ƒì…ë‹ˆë‹¤. RedisëŠ” ì˜ì†ì„±ì´ ë³´ì¥ë˜ì§€ ì•Šìœ¼ë¯€ë¡œ ì˜ìƒ ì¡°íšŒ ë‚´ì—­ì´ ì¦ë°œí•´ë²„ë¦´ ìˆ˜ë„ ìˆê³ , ì–‘ì´ í•œì •ì ì¼ ìˆ˜ ìˆì£ . ê·¸ë˜ì„œ ì €ëŠ” ë‹¨ìˆœ Redis ë¿ë§Œ ì•„ë‹ˆë¼ ë‹¤ìŒê³¼ ê°™ì€ ë°©ì‹ì€ ì–´ë–¨ê¹Œ ìƒê°í•´ë³´ê³  ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;ul>
&lt;li>&lt;strong>ìµœê·¼ ì˜ìƒ ì¡°íšŒ ë‚´ì—­&lt;/strong>ì€ &lt;code>view_histories:{{username}}&lt;/code> í˜•íƒœì˜ key, &lt;code>{{video_id}}&lt;/code> í˜•íƒœì˜ valueë¡œ 1ì°¨ì ìœ¼ë¡œ Redisì— ì €ì¥í•œë‹¤. &lt;strong>ì¡°íšŒìˆ˜&lt;/strong>ëŠ” &lt;code>view_count:{{vide_id}}&lt;/code> í˜•íƒœì˜ key, &lt;code>{{view_count}}&lt;/code> í˜•íƒœì˜ valueë¡œ Redisì— ìºì‹œí•œë‹¤.
&lt;ul>
&lt;li>ìµœê·¼ ì˜ìƒ ì¡°íšŒ ë‚´ì—­ì„ redisë¥¼ í†µí•´ ë¹ ë¥´ê²Œ ì½ê³  ì“¸ ìˆ˜ ìˆë‹¤.&lt;/li>
&lt;li>ì˜ìƒ ì¡°íšŒìˆ˜ë¥¼ Redisì˜ Incrementë¡œ ë¹„êµì  ì •í™•í•˜ê²Œ ê³„ì‚°í•  ìˆ˜ ìˆë‹¤.&lt;/li>
&lt;li>ìœ ì €ì˜ ìµœê·¼ ì˜ìƒ ì¡°íšŒ ë‚´ì—­ì„ ê° ìœ ì €ë³„ë¡œ TTLì„ ê±¸ ìˆ˜ ìˆë‹¤. =&amp;gt; Redis ë©”ëª¨ë¦¬ ì ˆì•½&lt;/li>
&lt;li>ì˜ìƒì˜ ì¡°íšŒìˆ˜ë¥¼ ì˜ìƒë³„ë¡œ TTL ê±¸ ìˆ˜ ìˆë‹¤ =&amp;gt; Redis ë©”ëª¨ë¦¬ ì ˆì•½&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>ì˜ìƒ ì¡°íšŒ ì´ë²¤íŠ¸ ì €ì¥ ì‹œ Redisì˜ &lt;code>event:video_viewed&lt;/code> ë¼ëŠ” keyì˜ Listì— ì•ì„œ ì–¸ê¸‰í•œ ì¡°íšŒ ë‚´ì—­ê³¼ ë™ì¼í•œ ì¡°íšŒ ë‚´ì—­ì„ ì €ì¥í•œë‹¤.(ë©”ì‹œì§€ íì— Enqueueí•˜ëŠ” ëŠë‚Œ)
&lt;ul>
&lt;li>SQS ê°™ì€ Message queueëŠ” ì¡°íšŒìˆ˜ ì´ë²¤íŠ¸ê°€ ìŸì•„ì§€ëŠ” ê²ƒì— ë¹„í•´ latencyê°€ ëŠë¦¼. ë”°ë¼ì„œ Redisë¥¼ íë¡œ ì‚¬ìš©í•˜ëŠ” ê²ƒë„ ê´œì°®ì•„ë³´ì„.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Redis &lt;code>event:video_viewed&lt;/code> ë¼ëŠ” Listì—ì„œ ì¡°íšŒ ì´ë²¤íŠ¸ë¥¼ ë½‘ì•„ ì„œë²„ë¦¬ìŠ¤í•œ NoSQLì¸ DynamoDBì— ìœ ì €ì˜ ì¡°íšŒ ë‚´ì—­ì„ ì˜êµ¬ì ìœ¼ë¡œ ì €ì¥í•œë‹¤.
&lt;ul>
&lt;li>ì˜ìƒ ì¡°íšŒ ë‚´ì—­ì„ redisì— ìºì‹œí•  ë¿ë§Œ ì•„ë‹ˆë¼ ì˜êµ¬ì ìœ¼ë¡œ ì €ì¥í•˜ê¸° ìœ„í•¨.&lt;/li>
&lt;li>ë§ˆì¹˜ Redisë¥¼ ë²„í¼, Write-back cacheë¡œ ì´ìš©í•˜ëŠ” ëŠë‚Œì¸ë° NoSQLì´ë¼í•´ë„ ì£¼ê¸°ì ì¸ Bulk writeì€ ì£¼ê¸°ë•Œë§ˆë‹¤ ë¶€ë‹´ë  ìˆ˜ ìˆìŒ. ê·¸ë¦¬ê³  ì¡°íšŒ ì´ë²¤íŠ¸ëŠ” ê³„ì† ê³„ì† ë¹ ë¥´ê²Œ í™•ì¥ë  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— NoSQL ì¤‘ì—ë„ ì„œë²„ë¦¬ìŠ¤ì¸ DynamoDBë¥¼ ì‚¬ìš©í•˜ë©´ ì–´ë–¨ê¹Œ ì‹¶ìŒ. (ì£¼ì˜: DynamoDB ì•ˆì¨ë´„&amp;hellip;)&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;p>(ë‹¨ ìœ„ì˜ ì•„í‚¤í…ì³ëŠ” ì œ ê°œì¸ì ì¸ ìƒê°ì¼ ë¿, ì‹¤ì œë¡œëŠ” ì–´ë–»ê²Œë“¤ ì‚¬ìš©í•˜ì‹œëŠ”ì§€ ê¶ê¸ˆí•˜ë„¤ìš”..! ì´ë ‡ê²Œ ì§ì ‘ í•œ í•„ë“œì— ëŒ€í•´ ë³µì¡í•œ ë°©ì‹ì„ ì´ìš©í•˜ê¸°ë³´ë‹¨ ì¢€ ë” ë‹¨ìˆœíˆ ìºì‹± í”„ë ˆì„ì›Œí¬ë¥¼ ì´ìš©í•˜ëŠ” ê²ƒë„ ì¢‹ì€ ì„ íƒì§€ì¼ ìˆ˜ë„ ìˆì„ ê²ƒ ê°™êµ¬ìš”.)&lt;/p>
&lt;h2 id="ë§ˆì¹˜ë©°">ë§ˆì¹˜ë©°&lt;/h2>
&lt;p>ì´ë ‡ê²Œ Count ì„±í–¥ì˜ ì‘ì—…ì„ ì–´ë–»ê²Œ ìµœì í™”í•  ìˆ˜ ìˆì„ì§€ ìƒìƒê³¼ ì‹¤í—˜ì„ í†µí•´ ì •ë¦¬í•´ë´¤ìŠµë‹ˆë‹¤. ì¤‘ìš”í•œ ê²ƒì€ í•˜ë‚˜ì˜ ì •ë‹µì´ ì¡´ì¬í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆê³ , ì²˜í•œ ìƒí™©ë§ˆë‹¤ ì²œì°¨ë§Œë³„ì˜ ì†”ë£¨ì…˜ë“¤ì´ ìˆì„í…Œë‹ˆ ê°ê°ì„ ì˜ ë¹„êµí•´ë³´ê³  ì˜ PoC í•œ ë’¤ ì‚¬ìš©í•˜ëŠ” ê²ƒì¸ ë“¯í•©ë‹ˆë‹¤.&lt;/p>
&lt;p>ìºì‹œë‚˜ Redisì— ëŒ€í•´ ê´€ì‹¬ì´ ë§ì€ í¸ì´ì§€ë§Œ, ì•„ì§ ë§ì´ ë¶€ì¡±í•˜ë‹¤ë³´ë‹ˆ ì¢‹ì€ ë§ì”€ ëŒ“ê¸€ë¡œ ë‹¬ì•„ì£¼ì‹œë©´ ê°ì‚¬íˆ ë°°ì›Œë‚˜ê°€ê² ìŠµë‹ˆë‹¤~! ê°ì‚¬í•©ë‹ˆë‹¤.&lt;/p></description></item><item><title>ì¿ ë®¤ MVP ê°œë°œê¸°</title><link>https://umi0410.github.io/blog/khumu/khumu-dev-review/</link><pubDate>Sat, 02 Oct 2021 15:46:54 +0900</pubDate><guid>https://umi0410.github.io/blog/khumu/khumu-dev-review/</guid><description>&lt;img src="https://umi0410.github.io/blog/khumu/khumu-dev-review/thumbnail-wide.png" alt="Featured image of post ì¿ ë®¤ MVP ê°œë°œê¸°" />&lt;h2 id="ì‹œì‘í•˜ë©°">ì‹œì‘í•˜ë©°&lt;/h2>
&lt;p>&lt;img src="https://umi0410.github.io/blog/khumu/khumu-dev-review/capture-1.png"
width="1013"
height="1155"
srcset="https://umi0410.github.io/blog/khumu/khumu-dev-review/capture-1_hu433d33708cf0291dbd8161dbb824d8fb_187522_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/khumu/khumu-dev-review/capture-1_hu433d33708cf0291dbd8161dbb824d8fb_187522_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="87"
data-flex-basis="210px"
>
&lt;img src="https://umi0410.github.io/blog/khumu/khumu-dev-review/capture-3.png"
width="1013"
height="1155"
srcset="https://umi0410.github.io/blog/khumu/khumu-dev-review/capture-3_hue6e8e89a961b43eadf4d283e6a162e24_87932_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/khumu/khumu-dev-review/capture-3_hue6e8e89a961b43eadf4d283e6a162e24_87932_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="87"
data-flex-basis="210px"
>&lt;/p>
&lt;ul>
&lt;li>&lt;a class="link" href="https://github.com/khu-dev" target="_blank" rel="noopener"
>Github&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://play.google.com/store/apps/details?id=com.khumu.android" target="_blank" rel="noopener"
>PlayStore ì¶œì‹œ&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://khumu.oopy.io/" target="_blank" rel="noopener"
>í”„ë¡œì íŠ¸ ë° íŒ€ ì†Œê°œ í˜ì´ì§€&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>í•™êµ ìˆ˜ì—…ì„ ë“£ë‹¤ë³´ë‹ˆ í•œ í•™ê¸°ì— 2ê°œ 3ê°œì˜ í”„ë¡œì íŠ¸ë¥¼ ê°œë°œí•´ì•¼í•˜ëŠ” ê²½ìš°ê°€ ìˆì—ˆìŠµë‹ˆë‹¤. ì™„ì „ ê°œë°œì´ ì²˜ìŒì´ì—ˆë˜ ì‹œê¸°ì—ëŠ” ì´ëŸ¬í•œ
ì–‘ì ì¸ ê°œë°œ ì†ì—ì„œë„ ë°°ìš¸ ì ì´ ë§ì•˜ì§€ë§Œ ì–´ëŠ ì •ë„ ì§€ë‚˜ê³  ë‚˜ë‹ˆ ì–‘ì ì¸ ê°œë°œ ì†ì—ì„œëŠ” í¬ê²Œ ë°°ìš¸ ì ì´ ëŠê»´ì§€ì§€ ì•Šì•˜ê³ , ë¨¸ë¦¬ê°€ ì•„ë‹Œ
ì†ìœ¼ë¡œ ê°œë°œì„ í•˜ê³  ìˆëŠ” ëŠë‚Œì„ ë°›ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>ë”°ë¼ì„œ ì €ëŠ” ë‹¨ìˆœíˆ ì°ì–´ë‚´ê¸° ì‹ì˜ ê°œë°œì„ ë°˜ë³µí•˜ê¸° ë³´ë‹¤ëŠ” &lt;strong>í•œ ì„œë¹„ìŠ¤ë¥¼ ê¾¸ì¤€íˆ ê°œë°œí•´ë‚˜ê°€ë©° ê·¸ ì†ì— ë§ì€ ìƒê°ì„ ë‹´ì•„ë‚´ê³ ì&lt;/strong> í–ˆìŠµë‹ˆë‹¤.
ì²˜ìŒì—ëŠ” ê°€ë³ê²Œ ê´€ì‹¬ìˆë˜ ê¸°ìˆ ë“¤ì„ ììœ ë¡­ê²Œ ì ìš©í•´ë³¼ ìˆ˜ ìˆëŠ” &lt;strong>ê°œë°œ ë†€ì´í„°&lt;/strong>ë¥¼ ë§Œë“¤ê³ ì í•˜ëŠ” ë§ˆìŒì— ì‹œì‘í–ˆê³  ì œê°€ ê´€ì‹¬ìˆë˜ ê¸°ìˆ ë“¤ì€ ë‹¤ìŒê³¼ ê°™ì•˜ìŠµë‹ˆë‹¤.&lt;/p>
&lt;ul>
&lt;li>&lt;code>Kubernetes&lt;/code>&lt;/li>
&lt;li>&lt;code>Golang&lt;/code>ì„ ì´ìš©í•œ ì„œë²„ ê°œë°œ&lt;/li>
&lt;li>&lt;code>TDD&lt;/code>&lt;/li>
&lt;li>&lt;code>MSA&lt;/code>, &lt;code>DDD&lt;/code>(Domain Driven Design)&lt;/li>
&lt;li>&lt;code>ArgoCD&lt;/code>ë¥¼ ì´ìš©í•œ CD(Continuous deploy &amp;amp; delivery)&lt;/li>
&lt;/ul>
&lt;p>ë² í”„ í•˜ë‚˜ì™€ í•¨ê»˜ ì‹œì‘í–ˆë˜ ì„œë¹„ìŠ¤ì—ì„œ ê¸°ì¡´ì— ì¹œë¶„ì´ ì—†ë˜ ë””ìì´ë„ˆë‹˜, ê°œë°œìë‹˜ë“¤ì´ ì¶”ê°€ë˜ë©´ì„œ &lt;strong>ë¦¬ë”ë¡œì„œ ì±…ì„ê°ì´ ì¡°ê¸ˆ ìƒê²¨ë‚˜ê¸°ë„ í–ˆê³ ,
ê¸°ê°„ì´ ê¸¸ì–´ì§€ë‹¤ë³´ë‹ˆ ë‹¨ìˆœíˆ ê°œë°œ ë†€ì´í„°ë³´ë‹¤ëŠ” ì¶œì‹œë¥¼ í•´ë³´ìëŠ” ëª©í‘œ&lt;/strong>ë¥¼ ê°–ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>ê·¸ë¦¬ê³  ëŒ€ë¶€ë¶„ì˜ ì½”ë“œë¥¼ ì˜¤í”ˆì†ŒìŠ¤ë¡œ ê´€ë¦¬í•˜ê³  ìˆëŠ”ë° ê°œì¸ì ìœ¼ë¡œëŠ” í•™ìƒë“¤ì´ ì‹¤ì œ í”„ë¡œë•ì…˜ ìˆ˜ì¤€ì˜ ì‘ì—…ì— ì°¸ì—¬í•´ë³¼ ìˆ˜ ìˆëŠ” ê²½í—˜ì´
ë§ì§€ ì•Šì€ë° ìš°ë¦¬ &lt;strong>í•™êµ í•™ìƒë“¤ì€ ìì‹ ì´ ì‚¬ìš©í•˜ëŠ” ì˜¤í”ˆì†ŒìŠ¤ ì„œë¹„ìŠ¤ì¸ ì¿ ë®¤ì— ììœ ë¡­ê²Œ ê¸°ì—¬í•¨ìœ¼ë¡œì¨ ì‹¤ì œ ê°œë°œì— ì°¸ì—¬í•´ë³¼ ìˆ˜ ìˆëŠ” ê¸°íšŒì˜ ì¥ì´ ë˜ì—ˆìœ¼ë©´&lt;/strong> í•˜ëŠ”
ê¿ˆì´ ìˆìŠµë‹ˆë‹¤. ì•„ë¬´ë˜ë„ í•™ìƒë“¤ì´ ê°ì ë‹¤ë¥¸ ê°œë°œ ì–¸ì–´ì™€ ê´€ì‹¬ì‚¬ë¥¼ ê°–ë‹¤ë³´ë‹ˆ MSAë¥¼ ì„ íƒí•œ ê²ƒì´ ì´ ë¶€ë¶„ì— ìˆì–´ì„œëŠ” ì¢‹ê²Œ ì‘ìš©í•  ìˆ˜ ìˆì„ ê²ƒ ê°™ë„¤ìš”.&lt;/p>
&lt;h2 id="ì¿ ë®¤-ë­í•˜ëŠ”-ì„œë¹„ìŠ¤ì§€">ì¿ ë®¤? ë­í•˜ëŠ” ì„œë¹„ìŠ¤ì§€?&lt;/h2>
&lt;p>&lt;strong>ì¿ ë®¤ëŠ” ê³µì§€ì‚¬í•­ í‘¸ì‹œ ì•Œë¦¼ê³¼ êµë‚´ ì»¤ë®¤ë‹ˆí‹°ë¥¼ ì£¼ë¡œ ì œê³µí•˜ëŠ” ì„œë¹„ìŠ¤&lt;/strong>ì—ìš”!
ê²½í¬ëŒ€í•™êµì˜ í©ë¿Œë ¤ì§„ ê³µì§€ì‚¬í•­ì„ í•œ ê³³ì—ì„œ ì¡°íšŒí•  ìˆ˜ ìˆê³ , ìƒˆë¡œìš´ ê³µì§€ì‚¬í•­ì€ ì„ íƒì ìœ¼ë¡œ í‘¸ì‹œì•Œë¦¼ì„ ë°›ì•„ë³¼ ìˆ˜ ìˆë‹µë‹ˆë‹¤.
ë˜í•œ êµë‚´ ì»¤ë®¤ë‹ˆí‹°ë¡œì„œ í•™êµ ì¸ì¦ì´ í•™êµ ì‚¬ì´íŠ¸ì™€ ì—°ë™ë˜ì–´ ê°„í¸í•˜ê³  ë‹¤ì–‘í•œ ì£¼ì œì— ê±¸ì³ í•™ìƒë“¤ì˜ ì˜ê²¬ì´ ì ê·¹ ë°˜ì˜ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
ë³´í†µì˜ ì»¤ë®¤ë‹ˆí‹°ëŠ” ê²Œì‹œíŒ í˜•íƒœë¡œ êµ¬í˜„ë˜ì–´ ê²Œì‹œíŒì„ í•˜ë‚˜ í•˜ë‚˜ ì°¾ì•„ë‹¤ë…€ì•¼ í•˜ì§€ë§Œ &lt;strong>ì¿ ë®¤ëŠ” ë§ˆì¹˜ ì¸ìŠ¤íƒ€ì—ì„œ í•´ì‹œíƒœê·¸ë“¤ì„ íŒ”ë¡œìš°í•˜ë“¯
ê²Œì‹œíŒì„ íŒ”ë¡œìš° í•´ë‘ë©´ í”¼ë“œì—ì„œ ìì‹ ì´ íŒ”ë¡œìš° í•´ë‘” ê²Œì‹œê¸€ì„ ëª¨ë‘ ëª¨ì•„ë³¼ ìˆ˜ ìˆì–´ìš”&lt;/strong>.&lt;/p>
&lt;h2 id="ë‚´ê°€-ì¢‹ì•„í•˜ëŠ”-ìƒê°ì´-ë‹´ê¸´-ê°œë°œ">ë‚´ê°€ ì¢‹ì•„í•˜ëŠ” ìƒê°ì´ ë‹´ê¸´ ê°œë°œ&lt;/h2>
&lt;p>ì €ëŠ” &lt;del>ë‹¨ìˆœí•˜ê²Œ ì†ìœ¼ë¡œ í•˜ëŠ” ê°œë°œ&lt;/del>ë³´ë‹¨ ì´ëŸ° ì €ëŸ° &lt;strong>ìƒê°ë“¤ì´ ë‹´ê²¨ìˆëŠ” ê°œë°œì„ ì¢‹ì•„í•˜ê³  ê·¸ì— ëŒ€í•´ ììœ ë¡­ê²Œ ì–˜ê¸°ë‚˜ëˆ„ëŠ” ì‹œê°„ì„ ì‚¬ë‘&lt;/strong>í•©ë‹ˆë‹¤.
ì œê°€ ì¿ ë®¤ë¥¼ ê°œë°œí•˜ë©´ì„œ í–ˆë˜ ê³ ë¯¼ë“¤ê³¼ ê·¸ëŸ° ìƒê°ë“¤ì„ ì–´ë–»ê²Œ ë…¹ì—¬ëƒˆëŠ”ì§€ ê°„ë‹¨íˆ ì •ë¦¬í•´ë³´ê² ìŠµë‹ˆë‹¤.&lt;/p>
&lt;h4 id="restfulí•˜ê²Œ-apië¥¼-ê°œë°œí•´ë‚˜ê°€ë ¤ë©´-ì–´ë–»ê²Œ-í•´ì•¼í• ê¹Œ">&amp;lsquo;RESTfulí•˜ê²Œ APIë¥¼ ê°œë°œí•´ë‚˜ê°€ë ¤ë©´ ì–´ë–»ê²Œ í•´ì•¼í• ê¹Œ?&amp;rsquo;&lt;/h4>
&lt;p>&lt;code>RESTfulí•˜ë‹¤&lt;/code>ëŠ” ë§ì˜ ì •ì˜ëŠ” ì´ê³³ ì €ê³³ ë‹¤ë“¤ ë‹¤ë¥´ê²Œ í‘œí˜„í•˜ê³ ë“¤ ìˆëŠ” ê²ƒ ê°™ì§€ë§Œ &lt;strong>HTTP methodë¡œ ë™ì‘&lt;/strong>ì„, &lt;strong>URLë¡œ ë¦¬ìŠ¤ì†Œ&lt;/strong>ë¥¼ ë‚˜íƒ€ë‚´ëŠ” ì ì€ ê³µí†µì ìœ¼ë¡œ í‘œí˜„ë˜ëŠ” íŠ¹ì§•ì¸ ê²ƒ ê°™ìŠµë‹ˆë‹¤.
ê·¸ë˜ì„œ &lt;code>CRUD&lt;/code>ëŠ” Post, Get, Patch, Delete ë“±ì˜ ë©”ì†Œë“œì™€ ì—°ê²°ë˜ì£ . ê·¼ë° ë¶„ëª… &lt;strong>CRUDì™€ ê¹”ë”íˆ ë§ì•„ë–¨ì–´ì§€ì§€ ì•ŠëŠ” ì‘ì—…ë“¤ì´ ì¡´ì¬í•©ë‹ˆë‹¤!&lt;/strong>&lt;/p>
&lt;p>ê´€ë ¨ ê¸€&lt;/p>
&lt;ul>
&lt;li>&lt;a class="link" href="https://softwareengineering.stackexchange.com/questions/323415/how-to-design-a-rest-api-to-handle-non-crud-operations" target="_blank" rel="noopener"
>How to design a REST API to handle non-CRUD operations?&lt;/a> - Stack exchange&lt;/li>
&lt;li>&lt;a class="link" href="https://stackoverflow.com/questions/41742926/rest-api-design-for-non-crud-actions-e-g-save-deploy-execute-code" target="_blank" rel="noopener"
>REST API design for non-CRUD actions, e.g. save, deploy, execute code&lt;/a> - Stackoverflow&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://umi0410.github.io/blog/khumu/khumu-dev-review/toss.png"
width="2401"
height="1270"
srcset="https://umi0410.github.io/blog/khumu/khumu-dev-review/toss_hu81accd9c19897ba0af7fdadc906af6cb_682192_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/khumu/khumu-dev-review/toss_hu81accd9c19897ba0af7fdadc906af6cb_682192_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="189"
data-flex-basis="453px"
>
ì¶œì²˜ - &lt;a class="link" href="https://toss.im/slash-21/sessions/1-7" target="_blank" rel="noopener"
>https://toss.im/slash-21/sessions/1-7&lt;/a>&lt;/p>
&lt;p>ìœ„ì™€ ê°™ì´ &lt;strong>í† ìŠ¤ì—ì„œë„ RESTfulí•˜ì§€ ì•Šì€ APIë“¤ì— ëŒ€í•´ ê³ ë¯¼&lt;/strong>ì„ ë§ì´ í–ˆë˜ ê²ƒ ê°™ê³  ì´ ê²½ìš° ë‹¤ìŒê³¼ ê°™ì€ ì»¨ë²¤ì…˜ë“¤ì„ ì ìš©í•œ ê²ƒ ê°™ìŠµë‹ˆë‹¤.&lt;/p>
&lt;ol>
&lt;li>Pathì˜ ë§ˆì§€ë§‰ì— ë™ì‘ì„ ë‚˜íƒ€ë‚´ëŠ” ë™ì‚¬ë¥¼ ì ìš©&lt;/li>
&lt;li>ì´ëŸ° APIë“¤ì€ POST ë©”ì†Œë“œë¥¼ ì´ìš©&lt;/li>
&lt;/ol>
&lt;pre tabindex="0">&lt;code># ê¸°ì¡´ ë°©ì‹
ì¢‹ì•„ìš” ìƒì„± POST /likes {article: 1}
ì¢‹ì•„ìš” ì‚­ì œ DELETE /likes/{{like_id}}
# ê°œì„ í•œ ë°©ì‹
ì¢‹ì•„ìš” POST /articles/1/like
ì¢‹ì•„ìš” ì·¨ì†Œ POST /articles/1/unlike
&lt;/code>&lt;/pre>&lt;p>ì‹¤ì œ ì¿ ë®¤ ì‘ì—…ì„ ì˜ˆë¡œ ë“¤ìë©´ ê²Œì‹œê¸€ì— ëŒ€í•œ ì¢‹ì•„ìš” ì‘ì—… ìˆ˜í–‰ ì‹œ ìœ„ì™€ ê°™ì´ APIë¥¼ ì¢€ ë” ì§ê´€ì ìœ¼ë¡œ ê°œì„ í–ˆìŠµë‹ˆë‹¤.
ê¸°ì¡´ì—ëŠ” ì¢‹ì•„ìš” ê¸°ëŠ¥ì„ êµ¬í˜„í•˜ê¸° ìœ„í•´ likeë¼ëŠ” ë¦¬ì†ŒìŠ¤ë¡œ ì´ìš©í•˜ë©´ì„œ like ë¦¬ì†ŒìŠ¤ì— ëŒ€í•œ ìƒì„±, ì‚­ì œì— ë§µí•‘ì‹œì¼°ìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>í•˜ì§€ë§Œ ì´ëŠ” ë‹¤ì†Œ ê¸°ê³„ì ì´ê³  APIë¥¼ ì‚¬ìš©í•˜ì—¬ ê°œë°œí•˜ëŠ” í´ë¼ì´ì–¸íŠ¸(ì‚¬ëŒ)ì…ì¥ì—ì„œëŠ” ì™€ë‹¿ì§€ ì•Šì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
ë˜í•œ í´ë¼ì´ì–¸íŠ¸ëŠ” ì¢‹ì•„ìš”ë¥¼ ì·¨ì†Œí•˜ë ¤ë©´ ìì‹ ì´ ì·¨ì†Œí•˜ê³ ì í•˜ëŠ” ì¢‹ì•„ìš” ë‚´ì—­ì˜ IDë¥¼ ì•Œì•„ì•¼í•˜ë¯€ë¡œ ë¶ˆí¸í•˜ì£ .&lt;/p>
&lt;p>ê·¸ë˜ì„œ ì•„ë˜ì™€ ê°™ì´ API í˜•íƒœë¥¼ ê°œì„ í–ˆê³ , í´ë¼ì´ì–¸íŠ¸ëŠ” ì¢€ ë” í¸ë¦¬í•˜ê²Œ APIë¥¼ ì´ìš©í•  ìˆ˜ ìˆì–´ì¡ŒìŠµë‹ˆë‹¤~!&lt;/p>
&lt;h4 id="apiì˜-latencyë¥¼-ì¤„ì´ê¸°-ìœ„í•´ì„œëŠ”-ì–´ë–»ê²Œ-í•´ì•¼í• ê¹Œ">&amp;lsquo;APIì˜ Latencyë¥¼ ì¤„ì´ê¸° ìœ„í•´ì„œëŠ” ì–´ë–»ê²Œ í•´ì•¼í• ê¹Œ?&amp;rsquo;&lt;/h4>
&lt;p>ê°œë°œì„ í•˜ë‹¤ë³´ë‹ˆ ë°ì´í„°ê°€ ê·¸ë ‡ê²Œ ë§ì€ ê²ƒë„ ì•„ë‹Œë° ì–´ëŠ ìˆœê°„ë¶€í„° &lt;strong>latencyê°€ ê¸¸ë‹¤&lt;/strong>ëŠ” ëŠë‚Œì„ ë°›ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.
ê·¸ë˜ì„œ ì–´ë–»ê²Œ latencyë¥¼ ì¤„ì¼ ìˆ˜ ìˆì„ê¹Œë¥¼ ì•Œì•„ë³´ê²Œ ëì£ .
ì£¼ëœ ì›ì¸ì€ &lt;code>N+1&lt;/code> ë¬¸ì œë¼ê³  ë¶ˆë¦¬ëŠ” DB Queryê°€ ì´ìŠˆì˜€ë˜ ê²ƒ ê°™ìŠµë‹ˆë‹¤.
ê²Œì‹œê¸€ì„ ì—¬ëŸ¬ ê°œ ì¡°íšŒí•œ ë’¤ ë§µí•‘ì„ í•  ë•Œ &lt;strong>ê²Œì‹œê¸€ í•˜ë‚˜ í•˜ë‚˜ë§ˆë‹¤ì˜ ëŒ“ê¸€ ê°œìˆ˜, ì¢‹ì•„ìš” ê°œìˆ˜, ë¶ë§ˆí¬ ê°œìˆ˜ ë“±ì„ ìˆœì°¨ì ìœ¼ë¡œ ì¡°íšŒí•˜ë‹¤ë³´ë‹ˆ
ì´ ë¶€ë¶„ì—ì„œ ë³‘ëª©ì´ ë°œìƒ&lt;/strong>í•œ ê²ƒì´ì—ˆì–´ìš”!&lt;/p>
&lt;p>ì €ëŠ” ì´ ë¶€ë¶„ì—ì„œ &lt;code>redis&lt;/code>ë¥¼ ì ìš©í•´ë³´ì•˜ê³  redisë¥¼ ì ìš©í•˜ì ìƒí™©ë§ˆë‹¤ ë‹¤ë¥´ê² ì§€ë§Œ ëŒ€ì²´ë¡œ &lt;strong>latencyê°€ ì•½ 1/5ë¡œ ì¤„ì–´ë“œëŠ” íš¨ê³¼&lt;/strong>ë¥¼ ì–»ì„ ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.
redisë¥¼ ì ìš©í•˜ë˜ ë‹¹ì‹œì—” N+1 ë¬¸ì œì™€ ê·¸ê²ƒì„ Fetch join(í˜¹ì€ Eager loading)ë¡œ í•´ê²°í•˜ëŠ” ë°©ë²•ì— ëŒ€í•œ ì¸ì§€ ìì²´ê°€ ì—†ì—ˆì–´ì„œ
redisë¥¼ ì ìš©í–ˆë˜ ê²ƒ ê°™ì€ë° Fetch joinìœ¼ë¡œë„ ê¸€ì„ ì“°ë©´ì„œ ìƒê°í•´ë³´ë‹ˆ ê°„ë‹¨íˆ í•´ê²°í•  ìˆ˜ ìˆì—ˆì„ ê²ƒ ê°™ê¸´í•˜ë„¤ìš”.&lt;/p>
&lt;p>ì‹œê°„ì´ ëœë‹¤ë©´ redis ë¿ë§Œ ì•„ë‹ˆë¼ fetch joinë„ ì ìš©í•´ì„œ ë” ìµœì í™”í•´ë³¼ ìˆ˜ ìˆìœ¼ë©´ ì¢‹ì„ ê²ƒ ê°™ì•„ìš”. ê·¸ë˜ë„ redisë¥¼ ì¨ë³´ë©´ì„œ
ë§ì€ ê²ƒë“¤ì„ ë°°ì›Œë³¼ ìˆ˜ ìˆì—ˆë˜ ê²ƒ ê°™ì•„ ì¬ë¯¸ìˆì—ˆìŠµë‹ˆë‹¤! ã…ã…&lt;/p>
&lt;h4 id="msaì—ì„œ-ê´€ì‹¬ì‚¬ì±…ì„-ë¶„ë¦¬ë¥¼-ì–´ë–»ê²Œ-í• -ìˆ˜-ìˆì„ê¹Œ">&amp;lsquo;MSAì—ì„œ ê´€ì‹¬ì‚¬/ì±…ì„ ë¶„ë¦¬ë¥¼ ì–´ë–»ê²Œ í•  ìˆ˜ ìˆì„ê¹Œ?&amp;rsquo;&lt;/h4>
&lt;p>&lt;img src="https://umi0410.github.io/blog/khumu/khumu-dev-review/microservice-data-share.png"
width="279"
height="177"
srcset="https://umi0410.github.io/blog/khumu/khumu-dev-review/microservice-data-share_hue99fd32b7750fe5cc1fc1d45e05b3df2_4025_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/khumu/khumu-dev-review/microservice-data-share_hue99fd32b7750fe5cc1fc1d45e05b3df2_4025_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="157"
data-flex-basis="378px"
>&lt;/p>
&lt;p>ì¶œì²˜: &lt;a class="link" href="https://docs.microsoft.com/ko-kr/azure/architecture/microservices/design/data-considerations" target="_blank" rel="noopener"
>ë§ˆì´í¬ë¡œ ì„œë¹„ìŠ¤ì— ëŒ€í•œ ë°ì´í„° ê³ ë ¤ ì‚¬í•­ - ë§ˆì´í¬ë¡œì†Œí”„íŠ¸ ë¸”ë¡œê·¸&lt;/a>&lt;/p>
&lt;p>ì²˜ìŒ ì¿ ë®¤ë¥¼ ì„¤ê³„í•˜ë©´ì„œ MSAë¥¼ ë„ì…í•˜ê³ ì í–ˆì„ ë•ŒëŠ” ì–´ë–»ê²Œ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ë¥¼ ë‚˜ëˆ ì•¼í• ê¹Œì— ëŒ€í•œ ê³ ë ¤ê°€ ê±°ì˜ ì—†ì—ˆë˜ ê²ƒ ê°™ìŠµë‹ˆë‹¤.
ì§€ê¸ˆì€ DDDë¥¼ ê³µë¶€í•˜ë©° ë†’ì€ ì‘ì§‘ë„ì™€ ë…ë¦½ì„±ì„ ì·¨í•˜ë©´ì„œ ì„œë¹„ìŠ¤ë¥¼ ë‚˜ëˆ„ëŠ” ê²Œ ì¢‹ê² ë‹¤ëŠ” ìƒê°ì´ ë“¤ì§€ë§Œ ë‹¹ì‹œì—” ê·¸ëƒ¥ ë‚˜ëˆ„ê³  ì‹¶ì€ ëŒ€ë¡œ ë‚˜ëˆ ë²„ë ¸ë˜ ê²ƒ ê°™ìŠµë‹ˆë‹¤.
ì•½ê°„ ì˜¤ë²„ ì—”ì§€ë‹ˆì–´ë§ì´ ë  ìˆ˜ ìˆëŠ” ì„¤ê³„ë¥¼ í•œ ê²ƒì€ ê·¸ë ‡ë‹¤ì¹˜ê³  ê·¸ ì†ì—ì„œ ì„œë¹„ìŠ¤ë“¤ì„ êµ¬í˜„í•´ ë‚˜ê°ˆ ë•Œì—ë„ ì‹¤ìˆ˜í–ˆë˜ ê²ƒì´ í•˜ë‚˜ ìˆìŠµë‹ˆë‹¤. ë°”ë¡œ ìœ„ì˜ ì‚¬ì§„ì²˜ëŸ¼ ë‹¤ë¥¸ ì„œë¹„ìŠ¤ê°€ í•˜ë‚˜ì˜ DBë¥¼
ë°”ë¼ë³´ë©´ ì•ˆëœë‹¤ëŠ” ì›ì¹™ì„ ì–´ê¸´ ê²ƒì¸ë°ìš”.&lt;/p>
&lt;p>&lt;img src="https://umi0410.github.io/blog/khumu/khumu-dev-review/comment-capture.png"
width="1079"
height="662"
srcset="https://umi0410.github.io/blog/khumu/khumu-dev-review/comment-capture_hucb87beda3a5f625f0903c63dddfd736f_86804_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/khumu/khumu-dev-review/comment-capture_hucb87beda3a5f625f0903c63dddfd736f_86804_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="162"
data-flex-basis="391px"
>&lt;/p>
&lt;p>ì˜ˆë¥¼ ë“¤ì–´ &lt;strong>ê²Œì‹œê¸€ ì„œë¹„ìŠ¤ì™€ ëŒ“ê¸€ ì„œë¹„ìŠ¤ê°€ ë¶„ë¦¬ë˜ì–´ ìˆì„ ë•Œ ìœ„ì˜ ì´ë¯¸ì§€ì™€ ê°™ì´ ì–´ë–¤ ëŒ“ê¸€ì˜ ì‘ì„±ìê°€ í•´ë‹¹ ê²Œì‹œê¸€ì˜ ì‘ì„±ìì™€ ì¼ì¹˜í•˜ëŠ”ì§€ì— ëŒ€í•œ ì •ë³´ê°€ í•„ìš”í•˜ë‹¤&lt;/strong>ê³  ê°€ì •í•´ë´…ì‹œë‹¤.
ê¸°ì¡´ì—ëŠ” ëŒ“ê¸€ ì„œë¹„ìŠ¤ê°€ ê²Œì‹œê¸€ DBë¥¼ ì§ì ‘ ì¡°íšŒí•´ì„œ &lt;code>article.author&lt;/code>ì™€ &lt;code>comment.author&lt;/code>ë¥¼ ë¹„êµí–ˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ì´ë ‡ê²Œ &lt;strong>ë¶„ë¦¬ëœ ì„œë¡œ ë‹¤ë¥¸ ì„œë¹„ìŠ¤ê°€
ê°™ì€ ë°ì´í„°ì— ì ‘ê·¼í•˜ëŠ” í˜•íƒœëŠ” MSAì—ì„œëŠ” ë§¤ìš° ì•ˆ ì¢‹ê²Œ í‰ê°€ë˜ëŠ” ì•ˆí‹° íŒ¨í„´&lt;/strong>ì…ë‹ˆë‹¤.&lt;/p>
&lt;p>ë”°ë¼ì„œ ì €ëŠ” ëŒ“ê¸€ì„ ì¡°íšŒí•  ë•Œ ê²Œì‹œê¸€ ì„œë¹„ìŠ¤ì—ê²Œ ê²Œì‹œê¸€ ì •ë³´ë¥¼ ì¡°íšŒí•´ &lt;code>article.author&lt;/code>ì™€ &lt;code>comment.author&lt;/code>ë¥¼ ë¹„êµí•  ìˆ˜ ìˆë„ë¡ í–ˆìŠµë‹ˆë‹¤.
ë§Œì•½ &lt;strong>ê²Œì‹œê¸€ ì„œë¹„ìŠ¤ê°€ ë¹„ì •ìƒìœ¼ë¡œ ë™ì‘í•˜ë”ë¼ë„ ëŒ“ê¸€ ì„œë¹„ìŠ¤ì—ëŠ” í° íƒ€ê²© ì—†ì´ ëŒ“ê¸€ ì‘ì„±ìê°€ ê²Œì‹œê¸€ ì‘ì„±ìì™€ ì¼ì¹˜í•˜ëŠ”ì§€ ì •ë³´ë§Œ falseë¡œ ì²˜ë¦¬&lt;/strong>ë  ë¿ì…ë‹ˆë‹¤.&lt;/p>
&lt;p>ì•„ë§ˆ ë” ê³ ë„í™”ëœ í˜•íƒœëŠ” ëŒ“ê¸€ ì„œë¹„ìŠ¤ì—ì„œ ìê¸° ì„œë¹„ìŠ¤ë§Œì´ ì´ìš©í•  ê²Œì‹œê¸€ ì‘ì„±ì ì •ë³´ í…Œì´ë¸”ì„ ì„¤ê³„í•˜ê±°ë‚˜ ëœ ì •ê·œí™”í•œë‹¤ë©´ ëŒ“ê¸€ë§ˆë‹¤ ê²Œì‹œê¸€ì˜ ì‘ì„±ì idë„ ê¸°ì…í•˜ëŠ” ë°©ì‹ì„ ì´ìš©í•  ìˆ˜ ìˆì„ ê²ƒ ê°™ì•„ìš”.
í•˜ì§€ë§Œ ê·¸ëŸ° í˜•íƒœë¥¼ ì ìš©í•˜ê¸° ì´ì „ì— ìš°ì„ ì€ ì¢€ ë” latencyê°€ ê¸¸ ìˆ˜ëŠ” ìˆì§€ë§Œ ê°„ë‹¨íˆ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ê°„ì— ë™ê¸°ì ìœ¼ë¡œ í†µì‹ (ê²Œì‹œê¸€ ì‘ì„±ì ì •ë³´ë¥¼ ëŒ“ê¸€ ì„œë¹„ìŠ¤ê°€ APIë¡œ ì§ì ‘ í˜¸ì¶œ)í•˜ëŠ” ë°©ì‹ì„ ì ìš©í•´ë´¤ìŠµë‹ˆë‹¤.&lt;/p>
&lt;h4 id="ì–´ë–¤-ì„œë¹„ìŠ¤ë¥¼-ì´ìš©í•´-ë¹Œë“œë°°í¬ë¥¼-ìë™í™”í• ê¹Œ">&amp;lsquo;ì–´ë–¤ ì„œë¹„ìŠ¤ë¥¼ ì´ìš©í•´ ë¹Œë“œ/ë°°í¬ë¥¼ ìë™í™”í• ê¹Œ?&amp;rsquo;&lt;/h4>
&lt;p>&lt;img src="https://umi0410.github.io/blog/khumu/khumu-dev-review/argocd.png"
width="1236"
height="1297"
srcset="https://umi0410.github.io/blog/khumu/khumu-dev-review/argocd_hu7e5d5c219024186f3afda580f81ab780_197051_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/khumu/khumu-dev-review/argocd_hu7e5d5c219024186f3afda580f81ab780_197051_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="95"
data-flex-basis="228px"
>&lt;/p>
&lt;p>ê³¼ê±°ì—ëŠ” ë°°í¬ ë„êµ¬ë¡œì„œ &lt;code>Spinnaker&lt;/code>ë¥¼ ì£¼ë¡œ ì‚¬ìš©í–ˆì§€ë§Œ SpinnakerëŠ” ê·¸ ê´€ë¦¬ ë¦¬ì†ŒìŠ¤ê°€ ë§Œë§Œì¹˜ ì•Šê²Œ ë“ ë‹¤ëŠ” ìƒê°ì´ ë“¤ì—ˆìŠµë‹ˆë‹¤. &lt;code>Jenkins&lt;/code>ë‚˜ ê·¸ ì™¸ì˜ ì„œë¹„ìŠ¤ë“¤ê³¼ ì—°ë™ì‹œì¼œ í•˜ë‚˜ì˜ Pipelineì„
ë§Œë“œëŠ” ë°ì—ëŠ” Spinnakerê°€ ì í•©í–ˆì§€ë§Œ ê¼­ ê·¸ëŸ° ì—°ë™ ì‘ì—…ì´ í•„ìš”ê°€ ì—†ë‹¤ë©´ êµ³ì´ Spinnakerë¥¼ ì‚¬ìš©í•  í•„ìš”ê°€ ì—†ì„ ê²ƒ ê°™ì•˜ìŠµë‹ˆë‹¤.&lt;/p>
&lt;ul>
&lt;li>&lt;a class="link" href="https://tech.kakao.com/2021/07/16/devops-for-msa/" target="_blank" rel="noopener"
>ì‹¤ìš©ì£¼ì˜ ë°ë¸Œì˜µìŠ¤ for MSA - ì¹´ì¹´ì˜¤í…Œí¬&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://mesh.dev/20210208-dev-notes-002-ci-cd/" target="_blank" rel="noopener"
>CI/CD ë„êµ¬ ë° ë°©ë²•ë¡  ë„ì…ê¸° - ë©”ì‰¬ì½”ë¦¬ì•„, VROONG&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>ê·¸ë˜ì„œ ìœ„ì˜ ê¸€ë“¤ì—ë„ ì†Œê°œë˜ëŠ” í‰ì†Œ ê´€ì‹¬ ìˆë˜ &lt;strong>&lt;code>ArgoCD&lt;/code>ë¥¼ ë°°í¬ ë„êµ¬ë¡œ ì„ íƒ&lt;/strong>í–ˆê³ , ì˜¤í”ˆì†ŒìŠ¤ë¡œì„œ ê´€ë¦¬ë˜ëŠ” í”„ë¡œì íŠ¸ì´ë‹¤ë³´ë‹ˆ Github ë‚´ì—ì„œ ë§ì€ ì‘ì—…ì´ ì´ë£¨ì–´ì§€ë¯€ë¡œ
&lt;strong>CIëŠ” &lt;code>Github Action&lt;/code>ì„ ì´ìš©&lt;/strong>í•˜ê¸°ë¡œ ê²°ì •í–ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>ê·¸ë¦¬ê³  Spinnakerë¥¼ ì‚¬ìš©í–ˆì„ ë• Helm ì°¨íŠ¸ë¥¼ í†µí•œ ë°°í¬ê°€ ë§‰ ì§€ì›ë˜ë˜ ì‹œê¸°ì˜€ì–´ì„œ ë²„ì „ ë¬¸ì œì¸ì§€ ë²„ê·¸ì¸ì§€ Helm ì°¨íŠ¸ê°€ ì˜ ì ìš©ì´ ì•ˆëë˜ ì´ìŠˆê°€ ìˆì–´
ì •ë§ ì•„ì‰¬ì› ëŠ”ë°ìš”. &lt;strong>&lt;code>ArgoCD&lt;/code>ëŠ” kustomizeë‚˜ Helmì„ ì ê·¹ì ìœ¼ë¡œ ì§€ì›í•˜ê³  ìˆëŠ” ê²ƒ ê°™ì•„ Helmìœ¼ë¡œ ë°°í¬í•˜ëŠ” ê²ƒë„ ë„ˆë¬´ë‚˜ í¸ë¦¬&lt;/strong>í–ˆì–´ìš”.
ì§€ê¸ˆì€ Kubernetesì˜ &lt;code>Nginx Ingress Controller&lt;/code>ë‚˜ &lt;code>ArgoCD Notification&lt;/code> ê°™ì€ ì„œë¹„ìŠ¤ë“¤ì€ Helmìœ¼ë¡œ ë°°í¬/ê´€ë¦¬í•˜ê³  ìˆë‹µë‹ˆë‹¤.&lt;/p>
&lt;h2 id="í”„ë¡œì íŠ¸-ë¦¬ë“œì™€-íŒ€ì›ë“¤ê°„ì˜-ì˜ì‚¬ì†Œí†µ">í”„ë¡œì íŠ¸ ë¦¬ë“œì™€ íŒ€ì›ë“¤ê°„ì˜ ì˜ì‚¬ì†Œí†µ&lt;/h2>
&lt;p>&lt;img src="https://umi0410.github.io/blog/khumu/khumu-dev-review/communication-1.png"
width="470"
height="622"
srcset="https://umi0410.github.io/blog/khumu/khumu-dev-review/communication-1_hue4b7e4c1e1817810425969ce1c3a7179_42435_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/khumu/khumu-dev-review/communication-1_hue4b7e4c1e1817810425969ce1c3a7179_42435_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="75"
data-flex-basis="181px"
>
&lt;img src="https://umi0410.github.io/blog/khumu/khumu-dev-review/communication-2.png"
width="449"
height="662"
srcset="https://umi0410.github.io/blog/khumu/khumu-dev-review/communication-2_huf596a4e544c0801f3e39d454f12567e3_55887_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/khumu/khumu-dev-review/communication-2_huf596a4e544c0801f3e39d454f12567e3_55887_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="67"
data-flex-basis="162px"
>
&lt;img src="https://umi0410.github.io/blog/khumu/khumu-dev-review/communication-3.png"
width="492"
height="711"
srcset="https://umi0410.github.io/blog/khumu/khumu-dev-review/communication-3_hu317daaf62cded970db4953d604885a3e_47905_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/khumu/khumu-dev-review/communication-3_hu317daaf62cded970db4953d604885a3e_47905_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="69"
data-flex-basis="166px"
>
&lt;img src="https://umi0410.github.io/blog/khumu/khumu-dev-review/communication-4.png"
width="632"
height="970"
srcset="https://umi0410.github.io/blog/khumu/khumu-dev-review/communication-4_huaacae8203291a385a45481847c7ec533_104242_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/khumu/khumu-dev-review/communication-4_huaacae8203291a385a45481847c7ec533_104242_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="65"
data-flex-basis="156px"
>&lt;/p>
&lt;p>ì €í¬ íŒ€ì€ ì£¼ë¡œ ë…¸ì…˜ì„ í†µí•´ íšŒì˜ ë‚´ìš© ê¸°ë¡ ë° ì§„í–‰ ì‚¬í•­ ê³µìœ ë¥¼ í•˜ê³ , íšŒì˜ëŠ” ë””ìŠ¤ì½”ë“œë¡œ ì§„í–‰í–ˆìŠµë‹ˆë‹¤.
ì´ë ‡ê²Œ ë³´ë‹ˆ í•´ë‹¹ í˜ì´ì§€ì— ê¸°ë¡í•˜ê¸° ì „ê¹Œì§€ í•©í•˜ë©´ ë”± &lt;strong>1ë…„&lt;/strong> ì •ë„ ëœ ê²ƒ ê°™ë„¤ìš” ë²Œì¨..! ì‹œê°„ì´ ì°¸ ë¹ ë¥¸ ê²ƒ ê°™ì•„ìš” ã…ã…&lt;/p>
&lt;p>&lt;img src="https://umi0410.github.io/blog/khumu/khumu-dev-review/collabo-1.png"
width="1080"
height="1799"
srcset="https://umi0410.github.io/blog/khumu/khumu-dev-review/collabo-1_hu4ce9c2bf6390846cdc287259d15975c0_1578099_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/khumu/khumu-dev-review/collabo-1_hu4ce9c2bf6390846cdc287259d15975c0_1578099_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="60"
data-flex-basis="144px"
>
&lt;img src="https://umi0410.github.io/blog/khumu/khumu-dev-review/collabo-2.png"
width="1080"
height="1628"
srcset="https://umi0410.github.io/blog/khumu/khumu-dev-review/collabo-2_hu377b174bcab257d212aa47a01287c09d_539505_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/khumu/khumu-dev-review/collabo-2_hu377b174bcab257d212aa47a01287c09d_539505_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="66"
data-flex-basis="159px"
>&lt;/p>
&lt;p>ë””ìŠ¤ì½”ë“œë¡œ íšŒì˜í•˜ê¸° í˜ë“  ìƒí™©ì—” ììœ ë¡­ê²Œ ì¹´í†¡ìœ¼ë¡œ ì´ìŠˆë¥¼ ê³µìœ í•˜ê¸°ë„ í•©ë‹ˆë‹¤. ì–¼ë§ˆ ì „ì— ìš´ì˜ í™˜ê²½ì„ êµ¬ì¶•í•˜ë©´ì„œ &lt;code>S3&lt;/code> + &lt;code>CloudFront&lt;/code>ë¥¼ êµ¬ì¶•í•  ë•Œ
ê²ªì€ ì´ìŠˆ ê´€ë ¨ í†¡ì„ ê°€ì ¸ì™€ ë´¤ìŠµë‹ˆë‹¤. íŠ¹íˆ ì„œë¡œ í¬ì§€ì…˜ì´ ë‹¤ë¥¸ ê²½ìš° &lt;strong>ì´ìŠˆì— ëŒ€í•´ ìì„¸íˆ ë¬˜ì‚¬&lt;/strong>í•˜ë ¤ ë…¸ë ¥í•˜ê³  &lt;strong>íŒ€ì›ì˜ ì‘ì—…ì— í•­ìƒ ê°ì‚¬&lt;/strong>ë¥¼ í‘œí•˜ëŠ” ê±¸ ìŠì§€ ì•Šìœ¼ë ¤
ë…¸ë ¥í•˜ê³  ìˆì–´ìš”. ì½”ë¡œë‚˜ì™€ ê±°ë¦¬ ìƒì˜ ë¬¸ì œë¡œ í•œ ë²ˆë„ ëµ™ì§€ ëª»í•œ íŒ€ì›ë“¤ë„ ê³„ì‹œì§€ë§Œ ë‚˜ë¦„ ë‚´ì  ì¹œë°€ê°ì´ ë§ì´ ìŒ“ì¸ ê²ƒ ê°™ì•„ìš” ã…ã…
ê¼­ ì¿ ë®¤ê°€ ì•„ë‹ˆë¼ë„ ê¸°íšŒê°€ ëœë‹¤ë©´ ì•ìœ¼ë¡œë„ ê°™ì´ ì‘ì—…í•˜ê±°ë‚˜ ë§Œë‚˜ëµ™ê³  ì‹¶ê¸°ë„ í•©ë‹ˆë‹¤.&lt;/p>
&lt;h2 id="ì•ìœ¼ë¡œì˜-ë¯¸ë˜">ì•ìœ¼ë¡œì˜ ë¯¸ë˜..?&lt;/h2>
&lt;p>&lt;img src="https://umi0410.github.io/blog/khumu/khumu-dev-review/lion.png"
width="600"
height="600"
srcset="https://umi0410.github.io/blog/khumu/khumu-dev-review/lion_hud65daaf114658cf17a9f778455969ffb_26332_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/khumu/khumu-dev-review/lion_hud65daaf114658cf17a9f778455969ffb_26332_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="100"
data-flex-basis="240px"
>&lt;/p>
&lt;p>ì‚¬ì‹¤ ê°œë°œ ë†€ì´í„°ë¡œ ì‹œì‘í•œ ì£¼ì œë¼ì„œ ê·¸ë ‡ê²Œ ì°¸ì‹ í•˜ì§€ë„ ì•Šê³ , ëŒ€í•™ìƒ ì»¤ë®¤ë‹ˆí‹°ì—ëŠ” ì—ë¸Œë¦¬íƒ€ì„ì´ë¼ëŠ” í° ì¥ë²½ì´ ìˆì–´ì„œ ìš°ë¦¬ ì„œë¹„ìŠ¤ì˜ ë¯¸ë˜ê°€ ì–´ë–»ê²Œ ë  ì§€ëŠ” ëª¨ë¥´ê² ìŠµë‹ˆë‹¤.
ì²˜ìŒì—” ì»¤ë®¤ë‹ˆí‹° ê¸°ëŠ¥ì„ ì£¼ê¸°ëŠ¥ìœ¼ë¡œ ë°€ì–´ë¶™ì—¬ ê°œë°œí–ˆë˜ ë°˜ë©´ í™œì„± ìœ ì €ê°€ ë³„ë¡œ ì—†ì„ ê²½ìš°ë¥¼ ê³ ë ¤í•˜ë‹ˆ ì»¤ë®¤ë‹ˆí‹°ë³´ë‹¤ëŠ” ê³µì§€ì‚¬í•­ê³¼ í•™ì‚¬ì¼ì •ì„ í¸ë¦¬í•˜ê²Œ ì „ë‹¬í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ì´
ë” ìš°ì„ ì‹œ ë˜ì–´ì•¼í•  ê²ƒ ê°™ì•˜ì–´ìš”. ê·¸ë˜ì„œ ê·¸ ë¶€ë¶„ë“¤ì„ ë³´ì™„í•˜ì—¬ MVPë¥¼ ì¶œì‹œ ì¤€ë¹„ ì¤‘ì´ê³  ì´í›„ ë‹¤ì–‘í•œ í”¼ë“œë°±ì„ ë°›ì•„ë³´ë©´ì„œ
ê³„ì†í•´ì„œ ë””ë²¨ë¡­í•´ë‚˜ê°ˆì§€ ìœ ì§€ë§Œ í•  ì§€ íŒ€ì›ë“¤ê³¼ ìƒì˜í•´ë´ì•¼í•  ê²ƒ ê°™ê¸´ í•©ë‹ˆë‹¤.&lt;/p>
&lt;p>ê·¸ë˜ë„ ëŒ€í•™êµë¥¼ ì¡¸ì—…í•˜ê¸° ì „ì— ì´ë ‡ê²Œ ê¸¸ê²Œ í•œ í”„ë¡œì íŠ¸ë¥¼ ì§„í–‰í•´ë³¼ ìˆ˜ ìˆì—ˆë˜ ê²ƒë„ ë¿Œë“¯í•˜ê³  íŒ€ì›ë“¤ê³¼ ê¾¸ì¤€íˆ í˜‘ì—…í•´ë‚˜ê°€ëŠ”
ê²½í—˜ì„ í•  ìˆ˜ ìˆì—ˆë˜ ì , ë‹¤ì–‘í•œ ì´ìŠˆë¥¼ ë§ì´í•˜ê³  í•´ê²°í•  ìˆ˜ ìˆì—ˆë˜ ì ì—ì„œ ì„œë¹„ìŠ¤ì˜ ë¯¸ë˜ê°€ ì–´ë–»ê²Œ ë˜ë“  ì†Œì¤‘í•œ ê²½í—˜ì„ í•œ ê²ƒ ê°™ìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>ì¿ ë®¤ íŒ€ì›ë“¤ ëª¨ë‘ ê½ƒê¸¸ ê±·ê³  í–‰ë³µí–ˆìœ¼ë©´ ì¢‹ê² ìŠµë‹ˆë‹¤~! í™”ì´íŒ…!!!&lt;/p></description></item><item><title>Golangìœ¼ë¡œ ë°±ì—”ë“œ ê°œë°œí•˜ê¸° - 5. Error Handling. ì—ëŸ¬ ì˜ ì²˜ë¦¬í•˜ê¸° (feat. fiber)</title><link>https://umi0410.github.io/blog/golang/how-to-backend-in-go-errorhandle/</link><pubDate>Sun, 05 Sep 2021 01:46:54 +0900</pubDate><guid>https://umi0410.github.io/blog/golang/how-to-backend-in-go-errorhandle/</guid><description>&lt;img src="https://umi0410.github.io/blog/golang/how-to-backend-in-go-errorhandle/chain.png" alt="Featured image of post Golangìœ¼ë¡œ ë°±ì—”ë“œ ê°œë°œí•˜ê¸° - 5. Error Handling. ì—ëŸ¬ ì˜ ì²˜ë¦¬í•˜ê¸° (feat. fiber)" />&lt;h2 id="ì‹œì‘í•˜ë©°">ì‹œì‘í•˜ë©°&lt;/h2>
&lt;p>ë“œë””ì–´ ì—ëŸ¬ë¥¼ ë‹¤ë¤„ë³¼ ì°¨ë¡€ê°€ ëë„¤ìš”. ì‘ë…„ê¹Œì§€ë§Œ í•´ë„ &lt;code>Error&lt;/code>ë‚˜ &lt;code>Exception&lt;/code> ì²˜ë¦¬ì˜ ì¤‘ìš”ì„±ì„ ì˜ ëª°ëë˜ ê²ƒ ê°™ìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ API &lt;strong>í´ë¼ì´ì–¸íŠ¸ë‘ ì‘ì—…ì„ í•˜ë©´ í• ìˆ˜ë¡ ì—ëŸ¬ ì²˜ë¦¬ì˜ ì¤‘ìš”ì„±ì„ ëŠë¼ê²Œ ë˜ëŠ” ê²ƒ ê°™ì•„ìš”&lt;/strong>. ì™œëƒí•˜ë©´ ë°±ì—”ë“œì—ì„œ ê°ê°ì˜ ì—ëŸ¬ ì¼€ì´ìŠ¤ì— ëŒ€í•œ &lt;code>status_code&lt;/code>ë‚˜ &lt;code>error_type&lt;/code>ë“±ì„ ëª…í™•íˆ ì •ì˜í•˜ì§€ ì•Šìœ¼ë©´ í´ë¼ì´ì–¸íŠ¸ëŠ” ì—ëŸ¬ë¥¼ í•´ì„í•  ë°©ë²•ì´ ì—†ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.&lt;/p>
&lt;p>ë˜í•œ &lt;strong>ì—ëŸ¬ë¥¼ ì˜ ì²˜ë¦¬í•œ ë’¤ ì˜¬ë°”ë¥´ê²Œ ì‘ë‹µí•˜ê±°ë‚˜ ë¡œê·¸ë¥¼ ë‚¨ê¸°ëŠ” ê²ƒì€ ìœ ì§€/ë³´ìˆ˜ ì‹œì— ë°±ì—”ë“œ ê°œë°œì ìŠ¤ìŠ¤ë¡œ ì—ê²Œë„ ì •ë§ ì¤‘ìš”&lt;/strong>í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ìš°ë¦¬ëŠ” ì‹¤ì œ ìš´ì˜ í™˜ê²½ì˜ ë¡œê·¸ë¥¼ ë§ˆì¹˜ ìš°ë¦¬ê°€ ë¡œì»¬ì—ì„œ ê°œë°œí•  ë•Œ ì²˜ëŸ¼ í•­ìƒ ë³´ê³ ìˆì„ ìˆ˜ëŠ” ì—†ê¸° ë•Œë¬¸ì´ì£ . ì¦‰ ì—ëŸ¬ ë¡œê·¸ë§Œ ë”°ë¡œ &amp;ldquo;í¸ë¦¬í•˜ê²Œ&amp;rdquo; ë³¼ ìˆ˜ ìˆê±°ë‚˜ ì—ëŸ¬ ë¡œê·¸ë¡œ ì¸í•œ Notification Systemì´ ìˆìœ¼ë©´ í›¨ì”¬ ì—ëŸ¬ë¥¼ ì¶”ì (Tracing)í•˜ê¸° ì‰½ê² ì£ !&lt;/p>
&lt;p>ê·¸ë¦¬ê³  &lt;strong>&lt;code>Golang&lt;/code>ì€ ë‹¤ë¥¸ ì–¸ì–´ë“¤ê³¼ ë‹¬ë¦¬ Try Catchì˜ í˜•íƒœë¡œ ì—ëŸ¬ë¥¼ ì²˜ë¦¬í•˜ì§€ ì•ŠëŠ”ë‹¤&lt;/strong>ëŠ” ì ì„ ëª¨ë‘ë“¤ ì•Œê³  ê³„ì‹¤ ê²ë‹ˆë‹¤. í•˜ì§€ë§Œ ì´ ì—ëŸ¬ë¥¼ ê·¸ëŸ¼ ì–´ë–»ê²Œ ì²˜ë¦¬í•˜ì§€ì— ëŒ€í•œ ë°©ì•ˆì€ ëšœë ·ì´ ì¸ì§€í•˜ì§€ ëª»í•œ ê²½ìš°ê°€ ë§ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.(ì œê°€ ê·¸ë¬ìŠµë‹ˆë‹¤. ã…ã…..) ê·¸ë˜ì„œ ëŒ€ì¶© ì—ëŸ¬ ë¡œê·¸ë¥¼ ì¶œë ¥í•˜ê²Œë§Œ í•˜ê³  í†µì¼ì„± ì—†ëŠ” ë°©ì‹ìœ¼ë¡œ ê·¸ë•Œ ê·¸ë•Œ ë– ì˜¤ë¥´ëŠ” ëŒ€ë¡œ ì—ëŸ¬ì²˜ë¦¬ë¥¼ í•´ì™”ë˜ ê²ƒ ê°™ì•„ìš”.&lt;/p>
&lt;p>ê·¸ëŸ¼ ì´ë²ˆ ê¸€ì—ì„œëŠ” ì—ëŸ¬ë¥¼ ì™œ ìš°ì•„í•˜ê²Œ, ì˜ ì²˜ë¦¬í•´ì•¼í•˜ëŠ”ì§€ ì‚´í´ë³´ê³  ê·¸ë¥¼ ìœ„í•œ ë°©ë²•ë„ ì†Œê°œí•´ë³´ê² ìŠµë‹ˆë‹¤.&lt;/p>
&lt;h2 id="-ì—ëŸ¬ë¥¼-wrapping-í•˜ì">ğŸ“¦ ì—ëŸ¬ë¥¼ Wrapping í•˜ì&lt;/h2>
&lt;p>ë‹¤ë¥¸ ì–¸ì–´ë“¤ì€ ì—ëŸ¬ë¥¼ ìƒì†í•´ ì •ì˜í•˜ëŠ” ë°©ì‹ì„ ì´ìš©í•˜ì§€ë§Œ &lt;strong>&lt;code>Golang&lt;/code>ì€ ì—ëŸ¬ë¥¼ &lt;code>Wrapping&lt;/code>í•˜ëŠ” ë°©ì‹ì„ ì´ìš©&lt;/strong>í•©ë‹ˆë‹¤. ì¢€ ë‚¯ì„¤ì–´ì„œ ê·¸ë ‡ì§€ ìµìˆ™í•´ì§€ë©´ í›¨ì”¬ ê°„ê²°í•œ ê²ƒ ê°™ìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>ì˜ˆë¥¼ ë“¤ì–´ Redis ê´€ë ¨ ì—ëŸ¬ëŠ” ëª¨ë‘ ì¶”ìƒì ì¸ ì—ëŸ¬ì¸ &lt;code>RedisError&lt;/code>ì— ì†í•˜ê³  ì¡°íšŒ ë„ì¤‘ ë°œìƒí•œ ì—ëŸ¬ëŠ” &lt;code>RedisGetError&lt;/code>ë¼ê³  ì •ì˜í•˜ëŠ” ê²½ìš°ê°€ ìˆë‹¤ê³  í•´ë³´ê² ìŠµë‹ˆë‹¤. ìë°”ì˜ ê²½ìš°ëŠ” ë‹¤ìŒê³¼ ê°™ì´ ì •ì˜í•˜ê² ì£ .&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">public&lt;/span> &lt;span class="kd">class&lt;/span> &lt;span class="nc">RedisError&lt;/span> &lt;span class="kd">extends&lt;/span> &lt;span class="n">Exception&lt;/span>&lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="nf">RedisError&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">String&lt;/span> &lt;span class="n">msg&lt;/span>&lt;span class="o">){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">super&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">msg&lt;/span>&lt;span class="o">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">public&lt;/span> &lt;span class="kd">class&lt;/span> &lt;span class="nc">RedisGetError&lt;/span> &lt;span class="kd">extends&lt;/span> &lt;span class="n">RedisError&lt;/span>&lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="nf">RedisError&lt;/span>&lt;span class="o">(){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">super&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;ë ˆë””ìŠ¤ ì¡°íšŒ ê´€ë ¨ ì—ëŸ¬&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">public&lt;/span> &lt;span class="kd">class&lt;/span> &lt;span class="nc">Something&lt;/span>&lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="kt">void&lt;/span> &lt;span class="nf">somethingWithRedis&lt;/span>&lt;span class="o">(){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">try&lt;/span>&lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">redis&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">get&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;X&amp;#34;&lt;/span>&lt;span class="o">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">}&lt;/span> &lt;span class="k">catch&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="n">RedisGetError&lt;/span> &lt;span class="n">e&lt;/span>&lt;span class="o">){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">...&lt;/span> &lt;span class="c1">// ë ˆë””ìŠ¤ ì¡°íšŒ ê´€ë ¨ ì—ëŸ¬ ì¼€ì´ìŠ¤ì— ëŒ€í•œ ëŒ€ì‘
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="o">}&lt;/span> &lt;span class="k">catch&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="n">RedisError&lt;/span> &lt;span class="n">e&lt;/span>&lt;span class="o">){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">...&lt;/span> &lt;span class="c1">// ë ˆë””ìŠ¤ ì¡°íšŒë¥¼ ì œì™¸í•œ ë ˆë””ìŠ¤ ê´€ë ¨ ì—ëŸ¬ ì¼€ì´ìŠ¤ì— ëŒ€í•œ ëŒ€ì‘
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="o">}&lt;/span> &lt;span class="k">catch&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="n">Exception&lt;/span> &lt;span class="n">e&lt;/span>&lt;span class="o">){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">...&lt;/span> &lt;span class="c1">// ê·¸ ì™¸ì˜ ëª¨ë“  ì—ëŸ¬ ì¼€ì´ìŠ¤ì— ëŒ€í•œ ëŒ€ì‘
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ì´ë ‡ê²Œ Javaì˜ ê²½ìš°ëŠ” &lt;code>ìƒì†&lt;/code>ì„ í†µí•´ ê° ì—ëŸ¬ ì¼€ì´ìŠ¤ì— ëŒ€í•´ ëŒ€ì‘í•©ë‹ˆë‹¤. í•˜ì§€ë§Œ Golangì—ì„œëŠ” ì£¼ë¡œ ë‹¤ìŒê³¼ ê°™ì€ ë°©ë²•ìœ¼ë¡œ ì—ëŸ¬ë¥¼ ì²˜ë¦¬í•©ë‹ˆë‹¤.&lt;/p>
&lt;ol>
&lt;li>
&lt;p>&lt;code>error.New(msg string)&lt;/code> ìœ¼ë¡œ sentinel error(ë” ì´ìƒ ìª¼ê°¤ ìˆ˜ ì—†ëŠ” ìµœìƒìœ„ ì—ëŸ¬ ê°™ì€ ëŠë‚Œ)ë¥¼ ì •ì˜&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>fmt.Errorf(&amp;quot;%s: %w&amp;quot;, msg, sentinelErr)&lt;/code> ìœ¼ë¡œ sentinel errorë¥¼ ê°ì‹¼(wrap) ìì‹ ì—ëŸ¬ë¥¼ ì •ì˜&lt;/p>
&lt;p>ì—ëŸ¬ë¥¼ Wrapping í•˜ë©´ sentinel errorì— ì¢€ ë” ì •ë³´ë¥¼ ì¶”ê°€í•  ìˆ˜ ìˆì–´ ì¹œì ˆí•œ ì—ëŸ¬ê°€ ë˜ì£ !&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>errors.Is(err, parentErr)&lt;/code> ìœ¼ë¡œ errì˜ wrapping chainì— parentErrì´ ì¡´ì¬í•˜ëŠ”ì§€ íŒë‹¨&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>ì—ëŸ¬ë¥¼ Wrappingí•œë‹¤ëŠ” ê°œë…ì´ ì˜ ì´í•´ë˜ì§€ ì•ŠëŠ” ë¶„ë“¤ì€ &lt;a class="link" href="https://golangbyexample.com/wrapping-and-unwrapping-error-golang/" target="_blank" rel="noopener"
>Wrapping and Un-wrapping of error in Go (Golang)&lt;/a>ì„ ì°¸ê³ í•´ì£¼ì‹œë©´ ì¢‹ì„ ê²ƒ ê°™ìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>ê·¸ëŸ¼ Goì—ì„  ìœ„ì™€ ê°™ì€ ì¼€ì´ìŠ¤ê°€ ì–´ë–»ê²Œ êµ¬í˜„ë  ìˆ˜ ìˆëŠ”ì§€ ì ì–´ë³´ê² ìŠµë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">var&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">ErrRedis&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">errors&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">New&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;ë ˆë””ìŠ¤ ê´€ë ¨ ì—ëŸ¬&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">ErrRedisGet&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Errorf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;ì¡°íšŒ ë„ì¤‘ ì—ëŸ¬: %w&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">ErrRedis&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">type&lt;/span> &lt;span class="nx">Something&lt;/span> &lt;span class="kd">struct&lt;/span>&lt;span class="p">{}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">s&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">Something&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nf">somethingWithRedis&lt;/span>&lt;span class="p">(){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">_&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">redis&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;X&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">errors&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Is&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">ErrRedisGet&lt;/span>&lt;span class="p">){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">...&lt;/span> &lt;span class="c1">// ë ˆë””ìŠ¤ ì¡°íšŒ ê´€ë ¨ ì—ëŸ¬ ì¼€ì´ìŠ¤ì— ëŒ€í•œ ëŒ€ì‘
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="p">}&lt;/span> &lt;span class="k">else&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="nx">errors&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Is&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">ErrRedis&lt;/span>&lt;span class="p">){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">...&lt;/span> &lt;span class="c1">// ë ˆë””ìŠ¤ ì¡°íšŒë¥¼ ì œì™¸í•œ ë ˆë””ìŠ¤ ê´€ë ¨ ì—ëŸ¬ ì¼€ì´ìŠ¤ì— ëŒ€í•œ ëŒ€ì‘
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="p">}&lt;/span> &lt;span class="k">else&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">...&lt;/span> &lt;span class="c1">// ê·¸ ì™¸ì˜ ëª¨ë“  ì—ëŸ¬ ì¼€ì´ìŠ¤ì— ëŒ€í•œ ëŒ€ì‘
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Goì—ì„œ errorëŠ” &lt;code>interface&lt;/code>ì´ê¸° ë•Œë¬¸ì— ê°„í˜¹ &lt;code>type assertion&lt;/code>ì„ ì´ìš©í•´ ì—ëŸ¬ì˜ íƒ€ì…ì„ ë¹„êµí•˜ê±°ë‚˜ ì§ì ‘ error variableì™€ ë¹„êµí•˜ëŠ” ê²½ìš°ë„ ìˆê¸´í•©ë‹ˆë‹¤ë§Œ ë°”ëŒì§í•˜ì§€ëŠ” ì•ŠìŠµë‹ˆë‹¤. type assertionì€ ì• ì´ˆì— ë‹¤ì†Œ ë¶ˆì•ˆí•˜ê±°ë‚˜ ë²ˆê±°ë¡œìš´ ë©´ì´ ìˆê³  ì§ì ‘ error valueì™€ ë¹„êµí•˜ëŠ” ê²½ìš°ëŠ” í•´ë‹¹ error valueë¥¼ ì œê³µí•˜ë˜ packageê°€ ì¶”í›„ì—ëŠ” ì–´ë–¤ error valueë¥¼ ì¬ì •ì˜í•  ì§€ ëª¨ë¥´ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. &lt;strong>ì˜ˆë¥¼ ë“¤ì–´ &lt;code>ErrRedisGet&lt;/code> ë¥¼ ë¦¬í„´í•˜ë˜ íŒ¨í‚¤ì§€ê°€ &lt;code>ErrRedisGet&lt;/code> ë¥¼ Wrappingí•œ &lt;code>ErrRedisHashGet&lt;/code> ë¥¼ ë¦¬í„´í•˜ëŠ” í˜•íƒœë¡œ ë³€ê²½ëë‹¤ê³  ê°€ì •&lt;/strong>í•©ì‹œë‹¤.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">var&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">ErrRedis&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">errors&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">New&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;ë ˆë””ìŠ¤ ê´€ë ¨ ì—ëŸ¬&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">ErrRedisGet&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Errorf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;ì¡°íšŒ ë„ì¤‘ ì—ëŸ¬: %w&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">ErrRedis&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">r&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">redis&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nf">HashGet&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">key&lt;/span> &lt;span class="kt">string&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="kt">string&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">error&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">Hash&lt;/span> &lt;span class="nx">Get&lt;/span> &lt;span class="nx">ë„ì¤‘&lt;/span> &lt;span class="nx">ì—ëŸ¬ê°€&lt;/span> &lt;span class="nx">ë°œìƒí•œ&lt;/span> &lt;span class="nx">ê²½ìš°&lt;/span>&lt;span class="p">){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="s">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">ErrRedisGet&lt;/span> &lt;span class="c1">// ì´ ë²„ì „ì—ì„œëŠ” ErrRedisGetì„ ë¦¬í„´í•¨.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">...&lt;/span> &lt;span class="c1">// ì—ëŸ¬ê°€ ë°œìƒí•˜ì§€ ì•Šì€ ê²½ìš°
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">s&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">Something&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nf">somethingWithRedis&lt;/span>&lt;span class="p">(){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">_&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">redis&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">HashGet&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;X&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="nx">ErrRedisGet&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Redis ì¡°íšŒ ë„ì¤‘ ì—ëŸ¬ê°€ ë°œìƒí•œ ê²½ìš°ì— ëŒ€í•œ ëŒ€ì‘
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">...&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ê¸°ì¡´ ë²„ì „ì—ì„  &lt;code>ErrRedisGet&lt;/code> ì„ ë¦¬í„´í•˜ê³ , ê·¸ ê²°ê³¼ë¥¼ í™•ì¸í•˜ëŠ” ë©”ì†Œë“œì—ì„œë„ &lt;code>ErrRedisGet&lt;/code> ê³¼ ì§ì ‘ &lt;code>==&lt;/code>ìœ¼ë¡œ ë¹„êµë¥¼ í•˜ë‹ˆ ì˜¬ë°”ë¥´ê²Œ ë™ì‘í•©ë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://umi0410.github.io/blog/golang/how-to-backend-in-go-errorhandle/chain.png"
width="929"
height="708"
srcset="https://umi0410.github.io/blog/golang/how-to-backend-in-go-errorhandle/chain_hua96618047d845851ee10ee4de25bc827_61443_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/golang/how-to-backend-in-go-errorhandle/chain_hua96618047d845851ee10ee4de25bc827_61443_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="chain.png"
class="gallery-image"
data-flex-grow="131"
data-flex-basis="314px"
>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">var&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">ErrRedis&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">errors&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">New&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;ë ˆë””ìŠ¤ ê´€ë ¨ ì—ëŸ¬&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">ErrRedisGet&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Errorf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;ì¡°íšŒ ë„ì¤‘ ì—ëŸ¬: %w&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">ErrRedis&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">ErrRedisHashGet&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Errorf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;í•´ì‰¬ ì¡°íšŒ ë„ì¤‘ ì—ëŸ¬: %w&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">ErrRedisGet&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">r&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">redis&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nf">HashGet&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">key&lt;/span> &lt;span class="kt">string&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="kt">string&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">error&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">Hash&lt;/span> &lt;span class="nx">Get&lt;/span> &lt;span class="nx">ë„ì¤‘&lt;/span> &lt;span class="nx">ì—ëŸ¬ê°€&lt;/span> &lt;span class="nx">ë°œìƒí•œ&lt;/span> &lt;span class="nx">ê²½ìš°&lt;/span>&lt;span class="p">){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="s">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">ErrRedisHashGet&lt;/span> &lt;span class="c1">// ì´ ë²„ì „ì—ì„œëŠ” ErrRedisGetì„ ë¦¬í„´í•¨.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">...&lt;/span> &lt;span class="c1">// ì—ëŸ¬ê°€ ë°œìƒí•˜ì§€ ì•Šì€ ê²½ìš°
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">s&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">Something&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nf">somethingWithRedis&lt;/span>&lt;span class="p">(){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">_&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">redis&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">HashGet&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;X&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ë§Œì•½ ì•„ë˜ì²˜ëŸ¼ errors.Isë¥¼ ì´ìš©í•˜ë©´ ErrRedisGetì€ ì‹¤ì œë¡œ ë¦¬í„´ëœ
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">// ErrRedisHashGetì˜ wrapping chainì— ì¡´ì¬í•˜ë¯€ë¡œ ê¸°ì¡´ê³¼ ë™ì¼í•˜ê²Œ
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">// ì˜¬ë°”ë¥´ê²Œ ë™ì‘í•  ìˆ˜ ìˆìŒ.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">// if errors.Is(err, ErrRedisGet){}
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// í•˜ì§€ë§Œ ì´ì œëŠ” ==ì„ í†µí•œ ì§ì ‘ ë¹„êµëŠ” ì˜ˆìƒí•œëŒ€ë¡œ ë™ì‘í•˜ì§€ ëª»í•¨ ã…œã…œ
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="nx">ErrRedisGet&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">...&lt;/span> &lt;span class="c1">// ã…œã…œ
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">...&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>í•˜ì§€ë§Œ ë‹¤ìŒ ë²„ì „ì—ì„  &lt;code>redis.HashGet()&lt;/code> ì´ Hashì— ëŒ€í•œ ì¡°íšŒ ë„ì¤‘ ì—ëŸ¬ê°€ ë°œìƒí–ˆì„ ë• &lt;code>ErrRedisGet&lt;/code>ì´ ì•„ë‹Œ ê·¸ê²ƒì„ Wrapí•œ &lt;code>ErrRedisHashGet&lt;/code>ì„ ë¦¬í„´í•œë‹¤ë©´ ê¸°ì¡´ì˜ &lt;code>==&lt;/code>ì„ ì´ìš©í•œ ì§ì ‘ ë¹„êµëŠ” ì˜¬ë°”ë¥¸ ê²°ê³¼ë¥¼ ê°€ì ¸ë‹¤ì£¼ì§€ ëª»í•  ê²ƒì…ë‹ˆë‹¤.&lt;/p>
&lt;p>ë‹¤ì†Œ ì–´ë µê±°ë‚˜ ë‚¯ì„¤ ìˆ˜ ìˆëŠ” ë‚´ìš©ì´ë¼ ê°„ë‹¨í•œ ë‚´ìš©ì„ ìœ„ì£¼ë¡œ ì˜ˆì‹œë¥¼ ë“¤ì–´ë´¤ìŠµë‹ˆë‹¤. ê´€ì‹¬ì´ ìˆìœ¼ì‹  ë¶„ë“¤ì€ ê¸°ë³¸ìœ¼ë¡œ ì œê³µë˜ëŠ” &lt;code>errors&lt;/code> íŒ¨í‚¤ì§€ ì™¸ì— &lt;a class="link" href="https://github.com/pkg/errors" target="_blank" rel="noopener"
>https://github.com/pkg/errors&lt;/a> ë¼ëŠ” íŒ¨í‚¤ì§€ë¥¼ ì´ìš©í•˜ëŠ” ê²½ìš°ë„ ìˆìœ¼ë‹ˆ í•œ ë²ˆ ì‚´í´ë³´ì‹œë©´ ì¢‹ì„ ê²ƒ ê°™ìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>ì, ê·¸ëŸ¼ ì—ëŸ¬ë¥¼ Wrapí•˜ë¼ëŠ” ë‚´ìš© í•˜ë‚˜ ê°–ê³  ì–˜ê¸°ë¥¼ ì£¼ì ˆ ì£¼ì ˆ ê¸¸ê²Œ í–ˆìœ¼ë‹ˆ ì´ì œ ì‹¤ì œë¡œ ì›¹ ë°±ì—”ë“œ ê°œë°œì—ì„œì˜ ì—ëŸ¬ ì²˜ë¦¬ì— ëŒ€í•´ ì•Œì•„ë´…ì‹œë‹¤~!&lt;/p>
&lt;h2 id="-ì›¹ì„œë²„ê°€-ì—ëŸ¬ë¥¼-ì œëŒ€ë¡œ-ì²˜ë¦¬í•˜ì§€-ì•Šìœ¼ë©´">ğŸ¤” ì›¹ì„œë²„ê°€ ì—ëŸ¬ë¥¼ ì œëŒ€ë¡œ ì²˜ë¦¬í•˜ì§€ ì•Šìœ¼ë©´?&lt;/h2>
&lt;p>ì—ëŸ¬ë¥¼ ì œëŒ€ë¡œ ì²˜ë¦¬í•˜ì§€ ì•Šìœ¼ë©´ ì¼ë°˜ì ìœ¼ë¡œ ì›¹ í”„ë ˆì„ì›Œí¬ë“¤ì€ &lt;code>500 Internal Error&lt;/code>ë¡œ ì‘ë‹µí•˜ê¸° ë•Œë¬¸ì— ClientëŠ” &lt;code>500 Internal Error&lt;/code> ì‘ë‹µ ë°–ì— ë°›ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤&amp;hellip; ê²½ìš°ì— ë”°ë¼ì„œëŠ” BodyëŠ” ì˜¬ë°”ë¥´ê²Œ ë°›ì„ ìˆ˜ë„ ìˆê¸´í•˜ì§€ë§Œ ë§¤ìš° ë¶ˆì•ˆí•˜ì£ . ì—ëŸ¬ì˜ ì›ì¸ì„ ëª¨ë¥´ë‹ˆ í´ë¼ì´ì–¸íŠ¸ ì¸¡ì—ì„œë„ ìœ ì €ì—ê²Œ &lt;strong>&amp;ldquo;ì•Œ ìˆ˜ ì—†ëŠ” ì´ìœ ë¡œ ìš”ì²­ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.&amp;rdquo; ê°™ì€ ë©”ì‹œì§€ë¥¼ ë„ìš´ë‹¤ë©´ ìœ ì € ê²½í—˜ë„ ë‹¹ì—°íˆ ì¢‹ì§€ ì•Šì•„ì§€ê² ì£ &lt;/strong>.&lt;/p>
&lt;p>ê° ì—ëŸ¬ ì¼€ì´ìŠ¤ì— ì ì ˆíˆ ëŒ€ì‘í•´ì„œ ì‘ë‹µí•˜ë©´ í´ë¼ì´ì–¸íŠ¸ì™€ ìœ ì €ê°€ ëª¨ë‘ ì˜ ë°˜ì‘í•  ìˆ˜ ìˆì„ ê²ƒì…ë‹ˆë‹¤.&lt;/p>
&lt;ul>
&lt;li>&lt;strong>ë¡œê·¸ì¸í•˜ì§€ ì•Šì€ ìœ ì €ì˜ ìš”ì²­ì´ë¼ ì—ëŸ¬ê°€ ë‚œ ê²½ìš°&lt;/strong> =&amp;gt; 401 Unauthorized ì‘ë‹µ =&amp;gt; í´ë¼ì´ì–¸íŠ¸ëŠ” ìœ ì €ë¥¼ ë¡œê·¸ì¸ ì°½ìœ¼ë¡œ ì•ˆë‚´í•¨.&lt;/li>
&lt;li>ê¶Œí•œì´ ì—†ëŠ” ìœ ì €ì˜ ìš”ì²­ì´ë¼ ì—ëŸ¬ê°€ ë‚œ ê²½ìš° =&amp;gt; 403 Forbidden ì‘ë‹µ =&amp;gt; í´ë¼ì´ì–¸íŠ¸ëŠ” ìœ ì €ì—ê²Œ ê¶Œí•œì´ ì—†ì–´ì„œ ë¶ˆê°€ëŠ¥í•˜ë‹¤ëŠ” ì¹œì ˆí•œ ì˜¤ë¥˜ ë©”ì‹œì§€ë¥¼ ë„ì›€.&lt;/li>
&lt;li>&lt;strong>ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ë¦¬ì†ŒìŠ¤ì— ì ‘ê·¼í•´ ì—ëŸ¬ê°€ ë‚œ ê²½ìš°&lt;/strong> =&amp;gt; 404 Not Found ì‘ë‹µ =&amp;gt; í´ë¼ì´ì–¸íŠ¸ëŠ” ìœ ì €ì—ê²Œ í•´ë‹¹ ë¦¬ì†ŒìŠ¤ê°€ ì¡´ì¬í•˜ì§€ ì•ŠëŠ”ë‹¤ëŠ” ì¹œì ˆí•œ ì˜¤ë¥˜ ë©”ì‹œì§€ë¥¼ ë„ì›€.&lt;/li>
&lt;/ul>
&lt;h2 id="fiberì—ì„œ-ì—ëŸ¬-ì²˜ë¦¬í•˜ëŠ”-ë²•">&lt;code>Fiber&lt;/code>ì—ì„œ ì—ëŸ¬ ì²˜ë¦¬í•˜ëŠ” ë²•&lt;/h2>
&lt;p>&lt;code>fiber&lt;/code>ëŠ” golang ì›¹ í”„ë ˆì„ì›Œí¬ë“¤ ì¤‘ì—ì„œ ë¬¸ì„œê°€ ì°¸ ì˜ ë˜ì–´ìˆëŠ” í¸ì´ë¼ê³  ìƒê°í•©ë‹ˆë‹¤. &lt;a class="link" href="https://docs.gofiber.io/guide/error-handling" target="_blank" rel="noopener"
>Error Handling&lt;/a> íŒŒíŠ¸ë¥¼ ë³´ë©´ ì›¹ í”„ë ˆì„ì›Œí¬ë‹¨ì—ì„œëŠ” ì–´ë–»ê²Œ ì—ëŸ¬ë¥¼ ì²˜ë¦¬í•  ì§€ ê°„ë‹¨íˆ ì‚´í´ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. Default Error HandlerëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” ê²ƒì´ê³ , Custom Error Handlerì„ ë”°ë¡œ ì •ì˜í•´ ì´ìš©ì„ í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ì €ëŠ” ì €ë²ˆ ì‹œê°„ì— ë‹¤ë¤˜ë˜ &lt;code>Middleware&lt;/code> ë°©ì‹ì„ ì´ìš©í•´ ì—ëŸ¬ë¥¼ ì˜ ì²˜ë¦¬í•´ë³´ê² ìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://umi0410.github.io/blog/golang/how-to-backend-in-go-errorhandle/errorhandler.png"
width="1142"
height="710"
srcset="https://umi0410.github.io/blog/golang/how-to-backend-in-go-errorhandle/errorhandler_hucfef4304ecce075cbbc083aa9e1131cf_67229_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/golang/how-to-backend-in-go-errorhandle/errorhandler_hucfef4304ecce075cbbc083aa9e1131cf_67229_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="errorhandler.png"
class="gallery-image"
data-flex-grow="160"
data-flex-basis="386px"
>&lt;/p>
&lt;p>ê°„ë‹¨íˆ ì¡°ê¸ˆ ì„¤ëª…ì„ ë“œë¦¬ìë©´ Fiberì—ì„œ ì œê³µí•˜ëŠ” Error HandlerëŠ” &lt;code>fiber.Handler&lt;/code>ë“¤ì´ ë¦¬í„´í•œ error íƒ€ì…ì„ ì‹¤ì œ HTTP Responseë¡œ ì–´ë–»ê²Œ ë³€í™˜ì„ í• ê¹Œì— ëŒ€í•œ ë‚´ìš©ì„ í¬í•¨í•˜ê³  ìˆëŠ” ê²ƒì´ê³ , ì œê°€ ì •ì˜í•˜ëŠ” ë¯¸ë“¤ì›¨ì–´ ë°©ì‹ì˜ Error HandlerëŠ” í•˜ë‚˜ì˜ middlewareë¡œì„œ ë‹¤ë¥¸ &lt;code>fiber.Handler&lt;/code>(ë¯¸ë“¤ì›¨ì–´ í˜¹ì€ ìš”ì²­ í•¸ë“¤ëŸ¬)ê°€ ë¦¬í„´í•œ errorì„ fiberì˜ Default Error Handlerê°€ ì´í•´í•  ìˆ˜ ìˆëŠ” fiberì˜ error typeìœ¼ë¡œ ë³€í™˜ì‹œí‚¤ëŠ” ê²ƒì´ë¼ê³  ë³´ì‹œë©´ ë©ë‹ˆë‹¤.&lt;/p>
&lt;h3 id="ì˜ˆì‹œ---usernameìœ¼ë¡œ-user-ì¡°íšŒ">ì˜ˆì‹œ - usernameìœ¼ë¡œ User ì¡°íšŒ&lt;/h3>
&lt;p>ì „ì²´ ì½”ë“œëŠ” ì´ì „ ê¸€ë“¤ê³¼ ë§ˆì°¬ê°€ì§€ë¡œ ì œ ê¹ƒí—™ &lt;a class="link" href="https://github.com/umi0410/how-to-backend-in-go/tree/master/errorhandle" target="_blank" rel="noopener"
>umi0410/how-to-backend-in-go&lt;/a>ì— ì˜¬ë ¤ë‘ê² ìŠµë‹ˆë‹¤. ê¸€ì—ì„œëŠ” ê°„ë‹¨í•œ ì½”ë“œ ë¹„êµì™€ HTTP ì‘ë‹µë§Œ ì„¤ëª…ë“œë¦´ê²Œìš”.&lt;/p>
&lt;p>ì—ëŸ¬ë¥¼ ì˜ Wrappingí•œ ì •ë„ì— ë”°ë¼ ë‹¤ë¥´ê²Œ ì‘ë‹µí•˜ëŠ” ì„¸ ê°€ì§€ ê²½ìš°ê°€ ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;ul>
&lt;li>&lt;strong>Worst&lt;/strong> - ì—ëŸ¬ë¥¼ ì–´ë”˜ê°€ì— ì •ì˜í•˜ì§€ë„ Wrapí•˜ì§€ë„ ì•Šì€ ìµëª… ì—ëŸ¬ ë¦¬í„´ =&amp;gt; ì ì ˆíˆ ì—ëŸ¬ë¥¼ íŒë‹¨í•  ìˆ˜ ì—†ì–´ 500 Error&lt;/li>
&lt;li>&lt;strong>Ungraceful&lt;/strong> - ì–´ë”˜ê°€ì— ì •ì˜ëœ Errorì„ ë¦¬í„´ =&amp;gt; ì—ëŸ¬ë¥¼ ì ì ˆíˆ íŒë‹¨í•´ ì˜¬ë°”ë¥¸ Status codeë¡œ ì‘ë‹µì€ ê°€ëŠ¥í•˜ì§€ë§Œ ì—ëŸ¬ì— ëŒ€í•œ ìì„¸í•œ ë¬¸ë§¥ì´ë‚˜ ì„¤ëª…ì´ ì—†ìŒ.&lt;/li>
&lt;li>&lt;strong>Graceful&lt;/strong> - ì—ëŸ¬ë¥¼ ì˜ Wrapí•´ì„œ ë¦¬í„´ =&amp;gt; ì—ëŸ¬ë¥¼ ì ì ˆíˆ íŒë‹¨í•´ ì˜¬ë°”ë¥¸ Status codeë¡œ ì‘ë‹µí•  ìˆ˜ ìˆê³  ì—ëŸ¬ì— ëŒ€í•œ ìì„¸í•œ ë¬¸ë§¥ì´ë‚˜ ì„¤ëª…ë„ í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ì œì‹œë¨.&lt;/li>
&lt;/ul>
&lt;p>ì½”ë“œë¡œ ë³´ë©´ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">var&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">ErrResourceNotFound&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">errors&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">New&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ë¦¬ì†ŒìŠ¤&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">users&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="nx">User&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">User&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="nx">Name&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;ìš°ë¯¸ì‰&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">Age&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">25&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">Username&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;umi0410&amp;#34;&lt;/span>&lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">...&lt;/span> &lt;span class="nx">ìƒëµ&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">svc&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">UserService&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nf">GetUserWorst&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">username&lt;/span> &lt;span class="kt">string&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="nx">User&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">error&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="nx">_&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">user&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="k">range&lt;/span> &lt;span class="nx">users&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">user&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Username&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="nx">username&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">user&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">nil&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="kc">nil&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">errors&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">New&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;ìœ ì €ê°€ ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ìœ ì €(username=&amp;#34;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="nx">username&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="s">&amp;#34;)&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">svc&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">UserService&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nf">GetUserUngracefully&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">username&lt;/span> &lt;span class="kt">string&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="nx">User&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">error&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="nx">_&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">user&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="k">range&lt;/span> &lt;span class="nx">users&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">user&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Username&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="nx">username&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">user&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">nil&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="kc">nil&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">ErrResourceNotFound&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">svc&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">UserService&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nf">GetUserGracefully&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">username&lt;/span> &lt;span class="kt">string&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="nx">User&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">error&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="nx">_&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">user&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="k">range&lt;/span> &lt;span class="nx">users&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">user&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Username&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="nx">username&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">user&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">nil&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="kc">nil&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Errorf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;ì…ë ¥ëœ username=%s: %w&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">username&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">ErrResourceNotFound&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ìœ„ì™€ ê°™ì´ ì—ëŸ¬ì™€ ì—ëŸ¬ë¥¼ ë¦¬í„´í•˜ëŠ” ì„œë¹„ìŠ¤ ë©”ì†Œë“œë“¤ì„ ì •ì˜í•˜ê³  ì»¤ìŠ¤í…€ ì—ëŸ¬ í•¸ë“¤ëŸ¬ë¡œì„œì˜ ë¯¸ë“¤ì›¨ì–´ëŠ” ì•„ë˜ì™€ ê°™ì´ ì‘ì„±í–ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">customErrorHandler&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">ctx&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">fiber&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Ctx&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="kt">error&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ë‹¤ìŒ í•¸ë“¤ëŸ¬ë¥¼ í˜¸ì¶œí•œ ë’¤
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">// ë³¸ ë¯¸ë“¤ì›¨ì–´ì˜ ì‘ì—…ì€ ì‚¬í›„ì²˜ë¦¬!
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">ctx&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Next&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Error&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">errors&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Is&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">ErrResourceNotFound&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// fiberì˜ Default Error Handlerê°€ ì•Œì•„ë“¤ì„ ìˆ˜ ìˆëŠ” í˜•íƒœì˜ fiber Errorì„ ë¦¬í„´
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">return&lt;/span> &lt;span class="nx">fiber&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">NewError&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">404&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Error&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">err&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ì´ ë¯¸ë“¤ì›¨ì–´ëŠ” ë‹¤ë¥¸ ì¼ë°˜ì ì¸ ë¯¸ë“¤ì›¨ì–´ë“¤ê³¼ëŠ” ì•½ê°„ì€ ë‹¤ë¥´ê²Œ ë™ì‘í•œë‹¤ê³  ë³¼ ìˆ˜ ìˆëŠ”ë°ìš”. &lt;strong>ëŒ€ë¶€ë¶„ì˜ ë¯¸ë“¤ì›¨ì–´ë“¤ì€ ìš”ì²­ì„ ì‹¤ì œë¡œ ì²˜ë¦¬í•˜ê¸° ì „ì— ìì‹ ì˜ ì‘ì—…ì„ ìˆ˜í–‰í•˜ëŠ” ì‚¬ì „ì²˜ë¦¬ ë°©ì‹ì„ ì´ìš©&lt;/strong>í•˜ëŠ”ë°ìš”. ì˜ˆë¥¼ ë“¤ì–´ ì €ë²ˆ ê¸€ì—ì„œ ì‚´í´ë³¸ basic auth ë¯¸ë“¤ì›¨ì–´ëŠ” ìš”ì²­ì„ ì²˜ë¦¬í•˜ëŠ” í•¸ë“¤ëŸ¬ ì´ì „ì— ë¯¸ë“¤ì›¨ì–´ë¡œì„œ ìš”ì²­ìì˜ ì¸ì¦ ì •ë³´ë¥¼ ê¸°ì…(ì‚¬ì „ì²˜ë¦¬)í•˜ëŠ” ì—­í• ì„ í–ˆì£ . í•˜ì§€ë§Œ &lt;strong>ì´ ë¯¸ë“¤ì›¨ì–´ëŠ” ìš”ì²­ì„ ì²˜ë¦¬í•˜ëŠ” í•¸ë“¤ëŸ¬ì˜ ê²°ê³¼ ì—ëŸ¬ë¥¼ ì´ìš©í•˜ê¸° ë•Œë¬¸ì— ë¯¸ë“¤ì›¨ì–´ê°€ ì‹œì‘í•˜ìë§ˆì ë‹¤ìŒ í•¸ë“¤ëŸ¬ë¥¼ í˜¸ì¶œí•˜ê³  ê·¸ ê²°ê³¼ ì—ëŸ¬ë¥¼ ì´ìš©í•©ë‹ˆë‹¤. ì‚¬í›„ì²˜ë¦¬ ë°©ì‹ì´ì£ !&lt;/strong>&lt;/p>
&lt;p>ê·¸ëŸ¼ ì´ì œ customErrorHandlerê°€ ë¦¬í„´í•œ ì—ëŸ¬ë¥¼ fiberì˜ Default Error Handlerê°€ ì˜ ì²˜ë¦¬í•´ì¤„ ê²ƒì…ë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-text" data-lang="text">&lt;span class="line">&lt;span class="cl">$ curl http://localhost:8000/worst/jinsu -w &amp;#34;\t%{http_code}\n&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ìœ ì €ê°€ ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ìœ ì €(username=jinsu) 500
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ curl http://localhost:8000/ungraceful/jinsu -w &amp;#34;\t%{http_code}\n&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ë¦¬ì†ŒìŠ¤ 404
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ curl http://localhost:8000/graceful/jinsu -w &amp;#34;\t%{http_code}\n&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ì…ë ¥ëœ username=jinsu: ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ë¦¬ì†ŒìŠ¤ 404
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ì‘ë‹µì„ ë³´ì‹œë©´ worst caseì˜ ê²½ìš° status codeê°€ 500ì´ê¸° ë•Œë¬¸ì— í´ë¼ì´ì–¸íŠ¸ê°€ í•´ë‹¹ ì—ëŸ¬ ì¼€ì´ìŠ¤ì— ëŒ€í•´ ì˜¬ë°”ë¥¸ ì²˜ë¦¬ë¥¼ í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì´ ì—†ìŠµë‹ˆë‹¤.. ì‘ë‹µì„ ì •ê·œí‘œí˜„ì‹ì„ ì´ìš©í•´ íŒë‹¨í•´ì•¼í• ê¹Œìš”..? ã…ã…&amp;hellip;&lt;/p>
&lt;p>ê·¸ë¦¬ê³  ungraceful caseì˜ ê²½ìš° status codeëŠ” 404ë¡œ ì˜ ì •ì˜ë˜ì—ˆì§€ë§Œ ì‘ë‹µ ë°”ë””ê°€ ë‹¤ì†Œ ë¶ˆì¹œì ˆí•´ í´ë¼ì´ì–¸íŠ¸ì¸¡ì—ì„œ ë””ë²„ê¹…í•˜ê¸°ê°€ í˜ë“¤ê² ì£ .&lt;/p>
&lt;p>ë°˜ë©´ gracefulí•œ ê²½ìš°ì—ëŠ” status codeë„ ì˜ ì •ì˜ë˜ì—ˆê³  ì—ëŸ¬ ë°”ë””ë„ ìì„¸í•©ë‹ˆë‹¤ êµ¿êµ¿ì´ì—ìš”!&lt;/p>
&lt;h2 id="ë§ˆì¹˜ë©°">ë§ˆì¹˜ë©°&lt;/h2>
&lt;p>ì •ë§ ì‘ë…„ê¹Œì§€ëŠ” ì—ëŸ¬ë¥¼ í•¸ë“¤ë§í•˜ëŠ” ê²ƒì— ëŒ€í•´ ë³„ ìƒê°ì´ ì—†ì—ˆë˜ ê²ƒ ê°™ìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ì‚¬ì´ë“œ í”„ë¡œì íŠ¸ë¥¼ í•˜ë©´ì„œ ì—ëŸ¬ë¥¼ ì œëŒ€ë¡œ ì²˜ë¦¬í•˜ì§€ ì•Šì•„ &lt;code>Index Out Of Range ëŸ°íƒ€ì„ ì—ëŸ¬&lt;/code> í•˜ë‚˜ì—ë„ ì„œë²„ê°€ ì¢…ë£Œë˜ì–´ë²„ë¦°ë‹¤ê±°ë‚˜ ëª¨ë“  ì—ëŸ¬ë¥¼ &lt;code>500 Internal Error&lt;/code>ë¡œ ë¦¬í„´í•´ë²„ë¦¬ëŠ” ì¼€ì´ìŠ¤ë¥¼ ê²ªìœ¼ë©´ì„œ &amp;lsquo;&lt;em>ì•„&amp;hellip; ì—ëŸ¬ë¥¼ ì˜ ì²˜ë¦¬í•´ì•¼ í•˜ëŠ”êµ¬ë‚˜&lt;/em>&amp;lsquo;ë¥¼ ëŠê»´ë³¼ ìˆ˜ ìˆì—ˆê³ , ì‹¤ì œ í”„ë¡œë•íŠ¸ë¥¼ ê°œë°œí•˜ë©´ì„œ &amp;lsquo;&lt;em>í´ë¼ì´ì–¸íŠ¸ ì¸¡ì—ì„œ ì—ëŸ¬ì— ëŒ€í•œ ì ì ˆí•œ ì•¡ì…˜ì„ ì·¨í•˜ê¸° ìœ„í•´ì„  status codeë‚˜ error_typeë“±ì„ ì˜ ì „ë‹¬í•´ì•¼ê² êµ¬ë‚˜&lt;/em>&amp;rsquo; ë¼ëŠ” ìƒê°ë„ í•´ë³¼ ìˆ˜ ìˆì—ˆë˜ ê²ƒ ê°™ìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>ê²Œë‹¤ê°€ Goì—ì„œ ì—ëŸ¬ë¥¼ ì²˜ë¦¬í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ ê¹Šê²Œ ìƒê°ì„ ëª»í•´ë´¤ì—ˆëŠ”ë° &lt;a class="link" href="https://github.com/yorkie-team/yorkie" target="_blank" rel="noopener"
>yorkie&lt;/a> ë¼ëŠ” ì˜¤í”ˆì†ŒìŠ¤ì— ê¸°ì—¬(&lt;a class="link" href="https://github.com/yorkie-team/yorkie/pull/222" target="_blank" rel="noopener"
>PR #222&lt;/a> )í•˜ê²Œ ë˜ë©´ì„œ ë©˜í† ë‹˜ê»˜ì„œ ì˜ ì´ëŒì–´ì£¼ì…”ì„œ ì—ëŸ¬ë¥¼ Wrappingí•œë‹¤ëŠ” ê°œë…ì— ëŒ€í•´ ìì„¸íˆ ì•Œì•„ë³¼ ìˆ˜ ìˆì—ˆë˜ ê¸°íšŒê°€ ëœ ê²ƒ ê°™ìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>ì´ë²ˆì— &lt;a class="link" href="https://www.depromeet.com/" target="_blank" rel="noopener"
>ë””í”„ë§Œ&lt;/a> 10ê¸°ë¡œ í™œë™í•˜ê²Œ ë˜ì—ˆëŠ”ë° 10ê¸° ì¸í„°ë·° ë‹¹ì‹œì—ë„ í´ë¼ì´ì–¸íŠ¸ì™€ í˜‘ì—…í•˜ë©´ì„œ ì–´ë ¤ì› ë˜ ì ê³¼ í•´ê²°í•´ë‚˜ê°„ ë°©ì‹ê³¼ ê´€ë ¨ëœ ì§ˆë¬¸ì„ ë°›ì•˜ì„ ë•Œì—ë„ ì—ëŸ¬ í•¸ë“¤ë§ê³¼ ê´€ë ¨ì§€ì–´ ë‹µë³€ì„ í–ˆì„ë§Œí¼ ì—ëŸ¬ í•¸ë“¤ë§ì€ &amp;lsquo;&lt;em>ê·¸ë˜ë„ ë‚´ê°€ í•œí¸ìœ¼ë¡œëŠ” ì•„ì§ ì„±ì¥í•˜ê³  ìˆë‚˜ë³´ë‹¤.. ã…ã…&lt;/em>&amp;lsquo;ë¥¼ ëŠë‚„ ìˆ˜ ìˆì—ˆë˜ ìƒˆë¡œìš´ ê²½í—˜ì´ì—ˆë˜ ê²ƒ ê°™ìŠµë‹ˆë‹¤! ì´ ê¸€ì„ ì½ìœ¼ì‹œëŠ” &lt;strong>ì—¬ëŸ¬ë¶„ë“¤ë„ ì´ì œ ì—ëŸ¬ ì˜ ì²˜ë¦¬í•˜ê³  ì €ì™€ í•¨ê»˜ í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ì¹­ì°¬ë°›ëŠ” ë°±ì—”ë“œ ê°œë°œìê°€ ë˜ì–´ë´…ì‹œë‹¤&lt;/strong>~!&lt;/p>
&lt;h2 id="ì°¸ê³ ">ì°¸ê³ &lt;/h2>
&lt;ul>
&lt;li>Working with Errors in Go 1.13 - &lt;a class="link" href="https://go.dev/blog/go1.13-errors" target="_blank" rel="noopener"
>https://go.dev/blog/go1.13-errors&lt;/a>&lt;/li>
&lt;li>Wrapping and Un-wrapping of error in Go (Golang) - &lt;a class="link" href="https://golangbyexample.com/wrapping-and-unwrapping-error-golang/" target="_blank" rel="noopener"
>https://golangbyexample.com/wrapping-and-unwrapping-error-golang/&lt;/a>&lt;/li>
&lt;li>Add RPC Config validation and handle the errors (&lt;a class="link" href="https://github.com/yorkie-team/yorkie" target="_blank" rel="noopener"
>yorkie&lt;/a> PR #222) - &lt;a class="link" href="https://github.com/yorkie-team/yorkie/pull/222" target="_blank" rel="noopener"
>https://github.com/yorkie-team/yorkie/pull/222&lt;/a>&lt;/li>
&lt;li>fiber docs Error Handling - &lt;a class="link" href="https://docs.gofiber.io/guide/error-handling" target="_blank" rel="noopener"
>https://docs.gofiber.io/guide/error-handling&lt;/a>&lt;/li>
&lt;li>ErrorëŠ” ê²€ì‚¬ë§Œ í•˜ì§€ë§ê³ , ìš°ì•„í•˜ê²Œ ì²˜ë¦¬í•˜ì„¸ìš”. - &lt;a class="link" href="http://cloudrain21.com/golang-graceful-error-handling" target="_blank" rel="noopener"
>http://cloudrain21.com/golang-graceful-error-handling&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Golangìœ¼ë¡œ ë°±ì—”ë“œ ê°œë°œí•˜ê¸° - 4. Custom Middleware(ë¯¸ë“¤ì›¨ì–´) ì‘ì„±í•´ë³´ê¸° (feat. fiber)</title><link>https://umi0410.github.io/blog/golang/how-to-backend-in-go-middleware/</link><pubDate>Wed, 01 Sep 2021 12:46:54 +0900</pubDate><guid>https://umi0410.github.io/blog/golang/how-to-backend-in-go-middleware/</guid><description>&lt;img src="https://umi0410.github.io/blog/golang/how-to-backend-in-go-middleware/log.png" alt="Featured image of post Golangìœ¼ë¡œ ë°±ì—”ë“œ ê°œë°œí•˜ê¸° - 4. Custom Middleware(ë¯¸ë“¤ì›¨ì–´) ì‘ì„±í•´ë³´ê¸° (feat. fiber)" />&lt;h2 id="ì‹œì‘í•˜ë©°">ì‹œì‘í•˜ë©°&lt;/h2>
&lt;p>ì•ˆë…•í•˜ì„¸ìš”. ì €ë²ˆ ê¸€ì—ì„œëŠ” &lt;code>fiber&lt;/code> ë¼ëŠ” ì›¹ í”„ë ˆì„ì›Œí¬ë¡œ ê°„ë‹¨íˆ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë§Œë“œëŠ” ë°©ë²•ì— ëŒ€í•´ ì•Œì•„ë´¤ìœ¼ë‹ˆ
ì´ë²ˆì—” ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë§Œë“¤ë‹¤ë³´ë©´ ê¼­ í•„ìš”í•´ì§€ëŠ” &lt;code>middleware&lt;/code> ì‘ì„±ë²•ì— ëŒ€í•´ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤.
ì—¬íƒœê¹Œì§€ ë°±ì—”ë“œì—ì„œ ì„œë²„ë¥¼ ê°œë°œí•˜ë©´ì„œëŠ” &lt;code>JS&lt;/code>ì˜ &lt;code>Express&lt;/code> í”„ë ˆì„ì›Œí¬ë¥¼ ì œì™¸í•˜ê³ ëŠ” ë¯¸ë“¤ì›¨ì–´ ê°œë°œì´ ê·¸ë‹¥ ì‰½ê²Œ ì´í•´ë˜ëŠ” ë¶€ë¶„ì€ ì•„ë‹ˆì—ˆë˜ ê²ƒ ê°™ìŠµë‹ˆë‹¤.
&lt;code>Express&lt;/code>ì—ì„œ ë¯¸ë“¤ì›¨ì–´ë¥¼ ì‘ì„±í•˜ëŠ” ë°©ë²•ì€ êµ‰ì¥íˆ ì§ê´€ì ì´ê³  ë¬¸ì„œë„ ë§ì€ í¸ì´ì—ˆê±°ë“ ìš”. í•˜ì§€ë§Œ &lt;code>Spring&lt;/code>ì€ &lt;code>Filter&lt;/code>ë‚˜ &lt;code>Interceptor&lt;/code>ë¥¼ ì´í•´í•˜ê¸° ìœ„í•´ ë§ì€ ë‚´ìš©ì„ ì•Œì•„ì•¼í•˜ê³ ,
&lt;code>Django&lt;/code>ëŠ” Class basedë‚˜ function based, ê·¸ë¦¬ê³  middlewareë¥¼ ì¶”ê°€í•˜ëŠ” ë²• ë“±ì´ ì¢€ ë³µì¡í•œ í¸ì´ë¼ê³  ìƒê°í•©ë‹ˆë‹¤.&lt;/p>
&lt;p>ê·¸ë¦¬ê³  &lt;code>Golang&lt;/code>ì€ ì•„ë¬´ë˜ë„ ì½”ë“œë¡œ ë§í•˜ëŠ” ì‚¬ëŒë“¤ì´ ë§ì•„ì„œì¸ì§€ ê·¸ë‹¥ &lt;strong>middleware ì‘ì„±ê³¼ ê°™ì€ ë¶€ë¶„ë“¤ì´ ë¬¸ì„œë¡œ ì˜ ë‚˜ì™€ìˆì§„ ì•Šê³ , ì½”ë“œë¥¼ ê¹Œë³´ë©´ì„œ ë§Œë“œëŠ” ê²½ìš°ê°€ ë§ì•˜ë˜ ê²ƒ ê°™ìŠµë‹ˆë‹¤.&lt;/strong>
ê·¸ë˜ì„œ ì´ë²ˆ ê¸€ì—ì„œëŠ” &lt;strong>&lt;code>fiber&lt;/code> ë¡œ ì›¹ì„œë²„ë¥¼ ë„ìš°ë©´ì„œ ê°„ë‹¨íˆ ë¯¸ë“¤ì›¨ì–´ í•˜ë‚˜ ë§Œë“¤ì–´ë³´ê² ìŠµë‹ˆë‹¤.&lt;/strong>&lt;/p>
&lt;ol>
&lt;li>ì œê³µë˜ëŠ” &lt;code>Basic Authentication&lt;/code> middlewareì„ ì´ìš©í•´ ìš”ì²­ ìœ ì €ë¥¼ ì‹ë³„&lt;/li>
&lt;li>ì‹ë³„ëœ ìœ ì € ì •ë³´ê°€ ì‚½ì…ëœ loggerë¥¼ &lt;code>context&lt;/code>ì— ì£¼ì…&lt;/li>
&lt;/ol>
&lt;p>ì´ë ‡ê²Œ í•˜ë©´ ì´í›„ service layerë“±ì—ì„œëŠ” ìš”ì²­ ìœ ì €ê°€ ì‚½ì…ëœ loggerì„ í†µí•´ ë¡œê·¸ë¥¼ ì‘ì„±í•˜ë‹ˆ ë¡œê·¸ ì¶”ì í•˜ê¸°ê°€ ìš©ì´í•´ì§€ê² ì£ ? ã…ã…
(BasicAuthë¥¼ ì´ìš©í•˜ëŠ” ì´ìœ ëŠ” ë‚¨ì´ ì‘ì„±í•œ ë¯¸ë“¤ì›¨ì–´ë¥¼ ê°€ì ¸ë‹¤ì“°ëŠ” ë°©ë²•ì„ í¸í•˜ê²Œ ì•Œì•„ë³´ê¸° ìœ„í•¨ì¼ ë¿ ì¸ì¦ ë°©ë²•ìœ¼ë¡œ ê¶Œì¥í•´ì„œëŠ” ì•„ë‹™ë‹ˆë‹¤.)&lt;/p>
&lt;h2 id="ë¯¸ë“¤ì›¨ì–´-ê·¸ê²Œ-ë­ì•¼-ì™œ-í•„ìš”í•´">ë¯¸ë“¤ì›¨ì–´?? ê·¸ê²Œ ë­ì•¼? ì™œ í•„ìš”í•´?!&lt;/h2>
&lt;p>ì›¹ í”„ë ˆì„ì›Œí¬ì—ì„œ ë§í•˜ëŠ” ë¯¸ë“¤ì›¨ì–´ëŠ” ë³´í†µ ìš”ì²­ì— ë”°ë¥¸ í•¸ë“¤ëŸ¬ë¥¼ ìˆ˜í–‰í•˜ê¸° ì „ í˜¹ì€ ìˆ˜í–‰í•œ í›„ì— ìˆ˜í–‰í•˜ëŠ” ì‘ì—…ì„ ë§í•©ë‹ˆë‹¤. ì£¼ë¡œ ì²´ì¸ì˜ í˜•íƒœë¼ê³  ë³´ì‹œë©´ ë˜ê³ 
í•œ ë¯¸ë“¤ì›¨ì–´ì—ì„œ ì‘ë‹µì„ ì™„ë£Œí•˜ë©´ ê±”ê°€ ìš”ì²­ í•¸ë“¤ëŸ¬ì˜ ì—­í• ì„ í•˜ê²Œ ëœë‹¤ê³  ë³´ë©´ ë  ê²ƒ ê°™ìŠµë‹ˆë‹¤. ì‘ë‹µì„ ì™„ë£Œí•˜ì§€ ì•Šìœ¼ë©´ ë‹¤ìŒ ë¯¸ë“¤ì›¨ì–´ë¥¼ í˜¸ì¶œí•˜ì£ .&lt;/p>
&lt;p>ì„œë²„ ê°œë°œì„ ì²˜ìŒí•  ë•ŒëŠ” ë¯¸ë“¤ì›¨ì–´ì˜ í•„ìš”ì„±ì„ ì˜ ëŠë¼ì§€ ëª»í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ì–´ëŠì •ë„ ê°œë°œì„ í•˜ê±°ë‚˜ ë°°í¬ë¥¼ í•´ë‚˜ê°€ë‹¤ë³´ë©´ &lt;em>&amp;lsquo;ì•„&amp;hellip; ëª¨ë“  ìš”ì²­ë§ˆë‹¤ ~~~í•œ ì‘ì—…ì„ ìˆ˜í–‰í•˜ê³  ì‹¶ì€ë°&amp;rsquo;&lt;/em> ì´ëŸ° ìƒê°ì´ ë“¤ ë•Œê°€ ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
ì˜ˆë¥¼ ë“¤ì–´ &lt;strong>API ë³„ë¡œ ë ˆì´í„´ì‹œë¥¼ ì²´í¬&lt;/strong>í•˜ê³  ì‹¶ì„ ìˆ˜ë„ ìˆê³ , &lt;strong>bodyë‚˜ query stringì„ ë¡œê·¸&lt;/strong>ë¡œ ë‚¨ê¸°ê±°ë‚˜ &lt;strong>ì–´ë–¤ ìœ ì €ì˜ ìš”ì²­ì¸ì§€ ë§¤ ìš”ì²­ë§ˆë‹¤ ì •ë³´ë¥¼ ì£¼ì…&lt;/strong>í•˜ê³  ì‹¶ì„ ìˆ˜ ìˆì£ .
ì´ëŸ° ê²½ìš° middlewareë¥¼ ì´ìš©í•˜ë©´ ëª¨ë“  ìš”ì²­ì€ ë¯¸ë“¤ì›¨ì–´ë¥¼ ê±°ì¹˜ë©´ì„œ ì²˜ë¦¬ë˜ê¸° ë•Œë¬¸ì— í¸ë¦¬í•˜ê²Œ ì‘ì—…í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤!&lt;/p>
&lt;p>ëŒ€í‘œì ìœ¼ë¡œëŠ” &lt;code>ì¸ì¦&lt;/code>ì´ë‚˜ &lt;code>ìºì‹±&lt;/code>, &lt;code>ë¡œê¹…&lt;/code>, &lt;code>ì‘ë‹µ íƒ€ì„ì•„ì›ƒ&lt;/code> ë“±ì— ì‚¬ìš©í•˜ê³  ìˆëŠ” ê²ƒ ê°™ì•„ìš”!&lt;/p>
&lt;h2 id="ë‚¨ì´-ë§Œë“ -ë¯¸ë“¤ì›¨ì–´-ì‚¬ìš©í•´ë³´ê¸°---basicauth">ë‚¨ì´ ë§Œë“  ë¯¸ë“¤ì›¨ì–´ ì‚¬ìš©í•´ë³´ê¸° - BasicAuth&lt;/h2>
&lt;p>Goë¥¼ í†µí•´ ê°œë°œí•˜ëŠ” ì´ìƒ ì €í¬ëŠ” ë¬¸ì„œì—ë§Œ ì˜ì¡´í•  ìˆ˜ëŠ” ì—†ìŠµë‹ˆë‹¤. ì½”ë“œë¥¼ ê¹Œë´ì•¼ì£  !_!
&lt;a class="link" href="https://github.com/gofiber/fiber/issues/338" target="_blank" rel="noopener"
>Guidelines for creating Middleware - fiber Github Issue&lt;/a> ì´ìŠˆì—ëŠ” ë¯¸ë“¤ì›¨ì–´ ì‘ì„±ì— ëŒ€í•œ ëª‡ ê°€ì§€ ê°€ì´ë“œë¼ì¸ì´ ì œì‹œë˜ì–´ìˆë”ë¼êµ¬ìš”.
ì°¸ê³ í•´ë³´ì‹œë©´ ì¢‹ì„ ê²ƒ ê°™ê¸°ë„ í•©ë‹ˆë‹¤.&lt;/p>
&lt;p>ì €ëŠ” &lt;a class="link" href="https://github.com/gofiber/fiber/blob/master/middleware/basicauth" target="_blank" rel="noopener"
>gofiber/fiber/middleware/basicauth&lt;/a> ì˜ ì½”ë“œë¥¼ ë°”íƒ•ìœ¼ë¡œ í•´ì„í•´ë³´ê² ìŠµë‹ˆë‹¤. ë§í¬ë¥¼ ë”°ë¼ê°€ë©´ READMEê°€ ìˆê¸´í•˜ì§€ë§Œ ì •ë³´ê°€ ë§ì§€ëŠ” ì•Šì£ .&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// fiberì˜ basicauth ë¯¸ë“¤ì›¨ì–´ ì½”ë“œ ì¤‘ ì¼ë¶€ì…ë‹ˆë‹¤.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// Config defines the config for middleware.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">type&lt;/span> &lt;span class="nx">Config&lt;/span> &lt;span class="kd">struct&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Next defines a function to skip this middleware when returned true.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">//
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">// Optional. Default: nil
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">Next&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">c&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">fiber&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Ctx&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="kt">bool&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Users defines the allowed credentials
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">//
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">// Required. Default: map[string]string{}
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">Users&lt;/span> &lt;span class="kd">map&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="kt">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Realm is a string to define realm attribute of BasicAuth.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">// the realm identifies the system to authenticate against
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">// and can be used by clients to save credentials
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">//
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">// Optional. Default: &amp;#34;Restricted&amp;#34;.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">Realm&lt;/span> &lt;span class="kt">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Authorizer defines a function you can pass
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">// to check the credentials however you want.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">// It will be called with a username and password
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">// and is expected to return true or false to indicate
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">// that the credentials were approved or not.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">//
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">// Optional. Default: nil.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">Authorizer&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">string&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="kt">bool&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Unauthorized defines the response body for unauthorized responses.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">// By default it will return with a 401 Unauthorized and the correct WWW-Auth header
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">//
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">// Optional. Default: nil
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">Unauthorized&lt;/span> &lt;span class="nx">fiber&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Handler&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ContextUser is the key to store the username in Locals
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">//
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">// Optional. Default: &amp;#34;username&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">ContextUsername&lt;/span> &lt;span class="kt">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ContextPass is the key to store the password in Locals
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">//
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">// Optional. Default: &amp;#34;password&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">ContextPassword&lt;/span> &lt;span class="kt">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ìœ„ì˜ ì½”ë“œê°€ BasicAuth ë¯¸ë“¤ì›¨ì–´ì˜ ì„¤ì •ì„ ë‹´ë‹¹í•˜ëŠ” Config íƒ€ì…ì— ëŒ€í•œ ì½”ë“œì…ë‹ˆë‹¤. ê°„ë‹¨íˆ ëª‡ ê°œë§Œ ì•Œì•„ë‘ë©´ ì´í•´í•˜ëŠ” ë°ì— ë„ì›€ì´ ë˜ëŠ” ê²ƒë“¤ë§Œ ì§šì–´ë³´ê² ìŠµë‹ˆë‹¤.&lt;/p>
&lt;ul>
&lt;li>&lt;code>Next&lt;/code> - nilì´ ì•„ë‹Œ ê²½ìš° &lt;code>Next(*fiber.Ctx)&lt;/code>ê°€ trueë¥¼ ë°˜í™˜í•˜ë©´ Basic Auth ë¯¸ë“¤ì›¨ì–´ ìì²´ë¥¼ ê±´ë„ˆëœ€.&lt;/li>
&lt;li>&lt;code>Users&lt;/code> - ì´ mapì— ì •ì˜ëœ ìœ ì €ë§Œì´ ìœ íš¨í•œ ìœ ì €ë¡œ ì´ìš©ë  ìˆ˜ë„ ìˆìŒ. (Authorizerê°€ nilì¸ ê²½ìš° ì´ ì •ë³´ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì¸ì¦ ì§„í–‰)&lt;/li>
&lt;li>&lt;code>Authorizer&lt;/code> - ì¸ì¦ ë¡œì§ì„ ë‹´ë‹¹í•¨. nilë¡œ ë‘˜ ê²½ìš° Usersì—ì„œ ì¼ì¹˜í•˜ëŠ” ìœ ì €ë¥¼ ì°¾ìŒ. ì—¬ê¸¸ ì»¤ìŠ¤í„°ë§ˆì´ì§•í•´ì„œ DBì—ì„œ ì°¾ê±°ë‚˜ í•  ìˆ˜ë„ ìˆìŒ.&lt;/li>
&lt;li>&lt;code>ContextUsername&lt;/code>, &lt;code>ContextPassword&lt;/code> - ì¸ì¦ í›„ Contextì— ì–´ë–¤ í‚¤ë¡œ ê° ì •ë³´ë¥¼ ë‹´ì„ì§€. (ê¸°ë³¸ê°’ì€ &amp;ldquo;username&amp;rdquo;, &amp;ldquo;password&amp;rdquo;)&lt;/li>
&lt;/ul>
&lt;p>ì˜¤í˜¸.. ë§‰ìƒ ì½”ë“œë¥¼ ê¹Œë³´ë‹ˆ ê·¸ë‹¥ ì–´ë µì§€ ì•Šì£ ?! ê·¸ëŸ¼ ê³¼ì—° ì´ ì½”ë“œë“¤ì´ ì„¤ëª…í•œ ê²Œ ë§ëŠ”ì§€ í•œ ë²ˆ ì„œë²„ë¥¼ ë„ì›Œë´…ì‹œë‹¤.&lt;/p>
&lt;h3 id="basic-auth-ë¯¸ë“¤ì›¨ì–´ë¥¼-ë‹¤ì–‘í•˜ê²Œ-ì„¤ì •í•´ë³´ê¸°">Basic Auth ë¯¸ë“¤ì›¨ì–´ë¥¼ ë‹¤ì–‘í•˜ê²Œ ì„¤ì •í•´ë³´ê¸°&lt;/h3>
&lt;h4 id="1-í•­ìƒ-ì¸ì¦ì—-ì„±ê³µí•˜ëŠ”-authorizerë¥¼-ì´ìš©í•˜ëŠ”-config">1. í•­ìƒ ì¸ì¦ì— ì„±ê³µí•˜ëŠ” Authorizerë¥¼ ì´ìš©í•˜ëŠ” Config&lt;/h4>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// newBasicAuthConfigAlwaysAllow ëŠ” ì–¸ì œë‚˜ ì¸ì¦ì— ì„±ê³µí•˜ëŠ” Authorizerë¥¼
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// ì´ìš©í•˜ëŠ” Configë¥¼ ë§Œë“­ë‹ˆë‹¤.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">func&lt;/span> &lt;span class="nf">newBasicAuthConfigAlwaysAllow&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">basicauth&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Config&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">basicauth&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Config&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Authorizer&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">username&lt;/span> &lt;span class="kt">string&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">password&lt;/span> &lt;span class="kt">string&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="kt">bool&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="kc">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">(){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">...&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">app&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Use&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">basicauth&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">New&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="nf">newBasicAuthConfigAlwaysAllow&lt;/span>&lt;span class="p">()))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">...&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-text" data-lang="text">&lt;span class="line">&lt;span class="cl"># curl -u username:passwordëŠ” í•´ë‹¹ usernameê³¼ passwordë¡œ Basic authë¥¼ í•˜ëŠ” ìš”ì²­ì„ ë³´ëƒ…ë‹ˆë‹¤.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ curl -u wrong:wrong localhost:8000
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Welcome!
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ curl -u foo:bar localhost:8000
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Welcome!
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Authorizerê°€ usernameê³¼ passwordê°€ ì–´ë–»ë“  trueë¥¼ ë°˜í™˜í•´ ì¸ì¦ì— ì„±ê³µí•©ë‹ˆë‹¤.&lt;/p>
&lt;h4 id="2-ë¯¸ë¦¬-ì •ì˜ëœ-ìœ ì €ì—-ëŒ€í•´ì„œë§Œ-ì¸ì¦ì—-ì„±ê³µí•˜ëŠ”-authorizerë¥¼-ì´ìš©í•˜ëŠ”-config">2. ë¯¸ë¦¬ ì •ì˜ëœ ìœ ì €ì— ëŒ€í•´ì„œë§Œ ì¸ì¦ì— ì„±ê³µí•˜ëŠ” Authorizerë¥¼ ì´ìš©í•˜ëŠ” Config&lt;/h4>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// newBasicAuthConfigAlwaysAllow ëŠ” Usersì— ì¡´ì¬í•˜ëŠ” ìœ ì € ì •ë³´ì— ëŒ€í•´ì„œë§Œ
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// ì¸ì¦ì— ì„±ê³µí•˜ëŠ” Authorizerë¥¼ ì´ìš©í•˜ëŠ” Configë¥¼ ë§Œë“­ë‹ˆë‹¤.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">func&lt;/span> &lt;span class="nf">newBasicAuthConfigAllowOnlyAdmin&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">basicauth&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Config&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">basicauth&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Config&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Users&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kd">map&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;foo&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;bar&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">(){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">...&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">app&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Use&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">basicauth&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">New&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="nf">newBasicAuthConfigAllowOnlyAdmin&lt;/span>&lt;span class="p">()))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">...&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-text" data-lang="text">&lt;span class="line">&lt;span class="cl"># curl -u username:passwordëŠ” í•´ë‹¹ usernameê³¼ passwordë¡œ Basic authë¥¼ í•˜ëŠ” ìš”ì²­ì„ ë³´ëƒ…ë‹ˆë‹¤.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ curl -u wrong:wrong localhost:8001
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Unauthorized
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ curl -u foo:bar localhost:8001
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Welcome!
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ì•ì„œ ë§í–ˆë“¯ Authorizerë¥¼ ì„¤ì •í•˜ì§€ ì•Šê³  nilë¡œ ë‘˜ ê²½ìš° Users ë§µì˜ ë°ì´í„°ë¥¼ ì´ìš©í•˜ëŠ” Authorizerê°€ ê¸°ë³¸ê°’ìœ¼ë¡œ ì„¤ì •ë©ë‹ˆë‹¤.
ì €ëŠ” &lt;code>username=foo, password=bar&lt;/code>ì¸ ìœ ì € ì •ë³´ë¥¼ ë§µì— ê¸°ë¡í–ˆê¸° ë•Œë¬¸ì— foo:bar ìš”ì²­ë§Œì´ ìŠ¹ì¸ë˜ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>ì, ì´ë ‡ê²Œ ë‚¨ì´ ì‘ì„±í•œ ë¯¸ë“¤ì›¨ì–´ë¥¼ ì„¤ì •ë§Œ ì¡°ê¸ˆ ë°”ê¿”ì„œ ì´ìš©í•´ë´¤ëŠ”ë°, ì½”ë“œë¥¼ ì½ëŠ” ê²ƒë„ ê·¸ê±¸ ë°”íƒ•ìœ¼ë¡œ ê°€ì ¸ë‹¤ê°€ ì“°ëŠ” ê²ƒë„ ì–´ë µì§€ ì•Šë‹¤ëŠ” ê±¸ ì•Œê²Œ ëêµ°ìš”.
ì´ì œëŠ” ì§ì ‘ ë¯¸ë“¤ì›¨ì–´ë¥¼ ì‘ì„±í•´ë³´ê² ìŠµë‹ˆë‹¤.&lt;/p>
&lt;h2 id="custom-middleware-ì‘ì„±í•˜ê¸°">Custom middleware ì‘ì„±í•˜ê¸°&lt;/h2>
&lt;p>ì»¤ìŠ¤í…€ìœ¼ë¡œ ë¯¸ë“¤ì›¨ì–´ë¥¼ ì‘ì„±í•  ë•Œì—ëŠ” ê·¸ë‹¥ ì •í•´ì§„ ê¸°ì¤€ì´ ë§ì§€ëŠ” ì•ŠìŠµë‹ˆë‹¤.
ëŒ€ë¶€ë¶„ì˜ ë¯¸ë“¤ì›¨ì–´ë“¤ì€ Skipper ë“±ì˜ ê°œë…ìœ¼ë¡œ(basic auth ë¯¸ë“¤ì›¨ì–´ì—ì„  Nextë¼ê³  ì •ì˜ë¨.) í•´ë‹¹ ë¯¸ë“¤ì›¨ì–´ì˜ ê¸°ëŠ¥ì„ ì‹¤í–‰í•˜ì§€ ì•Šê³  ë„˜ì–´ê°€ëŠ” ì„¤ì •ì´ë‚˜
ë­ ê°ì¢… ì„¤ì •ë“¤ì´ ì¡´ì¬ëŠ” í•˜ì§€ë§Œ ìš°ë¦¬ëŠ” ê·¼ë³¸ì ìœ¼ë¡œ ì»¤ìŠ¤í…€ ë¯¸ë“¤ì›¨ì–´ë¥¼ ì–´ë–»ê²Œ ì‘ì„±í•˜ëŠ”ì§€ì— ëŒ€í•´ ê¶ê¸ˆí•˜ë‹ˆê¹Œ ê·¸ ë¶€ë¶„ë§Œ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">fiber&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">...&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// Handler defines a function to serve HTTP requests.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">type&lt;/span> &lt;span class="nx">Handler&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="nx">Ctx&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="kt">error&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>fiber í”„ë ˆì„ì›Œí¬ì—ì„œëŠ” middlewareì„ ì •ì˜í•  ë•Œ &lt;code>fiber.Handler&lt;/code> ë¼ëŠ” ì¼ì¢…ì˜ í•¨ìˆ˜ íƒ€ì…ì„ ì´ìš©í•©ë‹ˆë‹¤. ê·¸ë¦¬ê³  &lt;code>fiber.Handler&lt;/code>ëŠ” ë³´í†µì€ í´ë¡œì ¸ë¥¼ ì´ìš©í•˜ëŠ” í˜•íƒœë¡œ ì œê³µë©ë‹ˆë‹¤.
ì œê°€ ë³¼ ë• ì¢€ íŠ¹ì´í•œ ê²ƒ ê°™ì€ë° ì•„ë§ˆ echoë„ ì´ëŸ° ì‹ìœ¼ë¡œ í´ë¡œì ¸ë¥¼ ì´ìš©í•´ ë¯¸ë“¤ì›¨ì–´ë¥¼ ìƒì„±í–ˆë˜ ê²ƒ ê°™ìŠµë‹ˆë‹¤. ë‹¤ìŒê³¼ ê°™ì´ ë§ì´ì£ .&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">NewMiddleware&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">config&lt;/span> &lt;span class="nx">Config&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nx">fiber&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Handler&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// configì— ê¸°ë³¸ê°’ì„ ë„£ì€ configë¥¼ í´ë¡œì ¸ë¡œ ì ‘ê·¼í•˜ë ¤ í•¨.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">config&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nf">injectDefaultValues&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">config&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ì‹¤ì œ ë¯¸ë“¤ì›¨ì–´ ì—­í• ì„ í•  í•¨ìˆ˜.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">// configì— í´ë¡œì ¸ë¡œ ì ‘ê·¼í•œë‹¤.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">return&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">c&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">fiber&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Ctx&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="kt">error&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">...&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ë‹¤ìŒ ë¯¸ë“¤ì›¨ì–´(í˜¹ì€ ìš”ì²­ í•¸ë“¤ëŸ¬)ë¥¼ ìˆ˜í–‰í•œë‹¤.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">return&lt;/span> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Next&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ê·¼ë° ì´ëŸ° ê²½ìš°ëŠ” ì•„ë¬´ë˜ë„ configë¥¼ ì„¤ì •í•´ì•¼í•˜ëŠ” ê²½ìš°ì¸ ê²ƒ ê°™ê³  ì €í¬ëŠ” ê·¸ëƒ¥ ìµœëŒ€í•œ ì‹¬í”Œí•˜ê²Œ ë§Œë“¤ì–´ë³¼ê²Œìš”. ëª©í‘œëŠ” Basic Authë¥¼ ê±°ì¹œ ë’¤ ìœ ì € ì •ë³´ê°€ ê¸°ì…ëœ loggerë¥¼ contextì— ì‚½ì…í•´ì£¼ëŠ” ê²ƒì…ë‹ˆë‹¤.
ê·¸ëŸ¼ ì–´ë–¤ ê³„ì¸µì—ì„œë“  &lt;code>ctx.Get(&amp;quot;logger&amp;quot;)&lt;/code> ë“±ì„ ì´ìš©í•´ loggerì— í¸ë¦¬í•˜ê²Œ ì ‘ê·¼í•  ìˆ˜ ìˆì£ ! log í”„ë ˆì„ì›Œí¬ëŠ” &lt;code>sirupsen/logrus&lt;/code> ë¥¼ ì´ìš©í•˜ê² ìŠµë‹ˆë‹¤.
ì»¬ëŸ¬ë„ ì˜ ë‚˜ì˜¤ê³  í™•ì¥ì„±ë„ ì¢‹ì€ ê±¸ë¡œ ì•Œê³  ìˆì–´ìš”!&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">var&lt;/span> &lt;span class="nx">injectLoggerMiddleware&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="kd">func&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">ctx&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">fiber&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Ctx&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="kt">error&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// basic auth middlewareê°€ ì£¼ì…í•œ usernameì„ ì´ìš©í•©ë‹ˆë‹¤.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">username&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">ctx&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Locals&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;username&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">logger&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">WithField&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;user&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">username&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// contextì— loggerë¼ëŠ” í‚¤ë¡œ ìœ ì € ì •ë³´ë¥¼ ì£¼ì…í•œ loggerë¥¼ ì „ë‹¬í•©ë‹ˆë‹¤!
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">ctx&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Locals&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;logger&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">logger&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ë‹¤ìŒ ë¯¸ë“¤ì›¨ì–´(í˜¹ì€ ìš”ì²­ í•¸ë“¤ëŸ¬)ë¥¼ ìˆ˜í–‰í•©ë‹ˆë‹¤.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">return&lt;/span> &lt;span class="nx">ctx&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Next&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">(){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">...&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// injectLoggerMiddlewareëŠ” basicauthê°€ contextì— ì£¼ì…í•œ usernameì„ ì´ìš©í•˜ê¸° ë•Œë¬¸ì—
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">// ê¼­ basicauth middleware ë‹¤ìŒì— ìˆ˜í–‰ë˜ì–´ì•¼í•©ë‹ˆë‹¤!
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">app&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Use&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">basicauth&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">New&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="nf">newBasicAuthConfigAllowOnlyAdmin&lt;/span>&lt;span class="p">()))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">app&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Use&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">injectLoggerMiddleware&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ìš”ì²­ í•¸ë“¤ëŸ¬ëŠ” ì´ëŸ° ì‹ìœ¼ë¡œ middlewareì—ê²Œ ì£¼ì…ë°›ì€ loggerë¥¼ contextì—ì„œ êº¼ë‚´ì“¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">app&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">ctx&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">fiber&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Ctx&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="kt">error&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">logger&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">ctx&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Locals&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;logger&amp;#34;&lt;/span>&lt;span class="p">).(&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Entry&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">logger&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Info&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;ìœ ì €ê°€ ì ‘ì†í–ˆìŠµë‹ˆë‹¤&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">ctx&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SendString&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Welcome!\n&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">...&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="https://umi0410.github.io/blog/golang/how-to-backend-in-go-middleware/log.png"
width="872"
height="105"
srcset="https://umi0410.github.io/blog/golang/how-to-backend-in-go-middleware/log_hu6da6c55463c6a62988b186d685cd2c7c_23812_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/golang/how-to-backend-in-go-middleware/log_hu6da6c55463c6a62988b186d685cd2c7c_23812_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="log.png"
class="gallery-image"
data-flex-grow="830"
data-flex-basis="1993px"
>&lt;/p>
&lt;p>ê·¸ëŸ¼ ë‹¤ìŒê³¼ ê°™ì´ Basic Authë¥¼ í†µí•´ ê°ê° ë‹¤ë¥¸ ìœ ì €ë¡œ ìš”ì²­ì„ ë³´ë‚´ë©´ í•´ë‹¹ ìš”ì²­ì„ ì²˜ë¦¬í•˜ëŠ” ë™ì•ˆì€ í•´ë‹¹ context ì†ì˜ loggerì„ ì´ìš©í•´ ë¡œê·¸ë¥¼ ë‚¨ê¸¸ ìˆ˜ ìˆëŠ” ê±¸ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
ì´ë ‡ê²Œ ì •ë¦¬í•´ë³´ë‹ˆ golangì—ì„œë„ middlewareë¥¼ ì‘ì„±í•˜ëŠ” ê²Œ ê·¸ë¦¬ ì–´ë µì§€ ì•Šë„¤ìš”~!&lt;/p>
&lt;h2 id="ë§ˆì¹˜ë©°">ë§ˆì¹˜ë©°&lt;/h2>
&lt;p>&lt;code>echo&lt;/code> í”„ë ˆì„ì›Œí¬ë¥¼ ì“°ë©´ì„œëŠ” ë¯¸ë“¤ì›¨ì–´ë¥¼ ì‘ì„±í•  ë•Œ ì¢€ ì• ë¥¼ ë¨¹ì—ˆë˜ ê¸°ì–µì´ ìˆëŠ”ë°, ë§‰ìƒ &lt;code>fiber&lt;/code>ë¡œ ë¯¸ë“¤ì›¨ì–´ë¥¼ ì‘ì„±í•´ë³´ë‹ˆ
ìƒê°ë³´ë‹¤ ë§ì´ ì§ê´€ì ì´ê³  ì‰¬ì›Œì„œ ì¢€ ë†€ëìŠµë‹ˆë‹¤. &lt;em>(ì‚¬ì‹¤ ê¸€ì„ ì“¸ í•„ìš”ê°€ ì—†ì—ˆì„ì§€ë„..?)&lt;/em> ê·¸ë˜ë„ Goë¡œ ì‘ì„±ëœ í•œê¸€ ìë£Œë„ ë§ì•„ì¡Œìœ¼ë©´ ì¢‹ê² ê³ ,
ëˆ„êµ°ê°€ëŠ” &lt;code>fiber&lt;/code> ë¯¸ë“¤ì›¨ì–´ë¥¼ ì‘ì„±í•˜ëŠ” ë°©ë²•ì´ ì¢€ ì´í•´ë˜ì§€ ì•Šê³  ì–´ë ¤ìš°ì‹¤ ìˆ˜ ìˆìœ¼ë‹ˆ ë„ì›€ì´ ë  ìˆ˜ ìˆìœ¼ë©´ ì¢‹ê² ìŠµë‹ˆë‹¤ ã…ã…
ë‹¤ìŒì—” ì„œë²„ ê°œë°œì— ìˆì–´ ë˜ í•˜ë‚˜ì˜ ì¤‘ìš”í•œ ì ì¸! ì—ëŸ¬ í•¸ë“¤ë§ì— ëŒ€í•´ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤! ê°ì‚¬í•©ë‹ˆë‹¤.&lt;/p>
&lt;h2 id="ì°¸ê³ ">ì°¸ê³ &lt;/h2>
&lt;ul>
&lt;li>&lt;a class="link" href="https://github.com/gofiber/fiber/issues/338" target="_blank" rel="noopener"
>Guidelines for creating Middleware - fiber Github Issue&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://github.com/gofiber/fiber/tree/master/middleware" target="_blank" rel="noopener"
>Fiber middleware&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://docs.gofiber.io/guide/error-handling" target="_blank" rel="noopener"
>Fiber error handling&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://www.redhat.com/ko/topics/middleware/what-is-middleware" target="_blank" rel="noopener"
>Redhat - ë¯¸ë“¤ì›¨ì–´ë€&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Golangìœ¼ë¡œ ë°±ì—”ë“œ ê°œë°œí•˜ê¸° - 3. ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ ê°œë°œí•´ë³´ê¸° (feat. fiber)</title><link>https://umi0410.github.io/blog/golang/how-to-backend-in-go-webapp/</link><pubDate>Fri, 13 Aug 2021 12:46:54 +0900</pubDate><guid>https://umi0410.github.io/blog/golang/how-to-backend-in-go-webapp/</guid><description>&lt;img src="https://umi0410.github.io/blog/golang/how-to-backend-in-go-webapp/output.png" alt="Featured image of post Golangìœ¼ë¡œ ë°±ì—”ë“œ ê°œë°œí•˜ê¸° - 3. ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ ê°œë°œí•´ë³´ê¸° (feat. fiber)" />&lt;h2 id="ì‹œì‘í•˜ë©°">ì‹œì‘í•˜ë©°&lt;/h2>
&lt;p>ì´ë²ˆì—ëŠ” Goì–¸ì–´ì—ì„œ &lt;strong>ìœ ëª…í•œ ì›¹ í”„ë ˆì„ì›Œí¬ë¥¼ ë¹„êµ&lt;/strong>í•´ë³´ê³  ê°„ë‹¨í•˜ê²Œ &lt;strong>Pingpong ì„œë²„ë¥¼ ê°œë°œ&lt;/strong>í•´ë³´ê² ìŠµë‹ˆë‹¤.
ë‹¤ë§Œ &amp;ldquo;&lt;em>Golangìœ¼ë¡œ ë°±ì—”ë“œ ê°œë°œí•˜ê¸°&lt;/em>&amp;ldquo;ë¥¼ ì£¼ì œë¡œ ê¸€ì„ ì“°ë©´ì„œ ì£¼ ëª©ì ìœ¼ë¡œ í–ˆë˜ ê²ƒì€ ê°œë°œí•˜ë©´ì„œ ê³„ì† ê¶ê¸ˆí–ˆì§€ë§Œ ì–´ë”˜ê°€ì—ì„œ ëšœë ·í•œ ì„¤ëª…ì„ ì°¾ì•„ë³´ê¸° í˜ë“¤ì—ˆë˜ ë‚´ìš©ë“¤ì„
ë‹¤ë¤„ë³´ê³ ìí•˜ëŠ” ê²ƒì´ì—ˆê¸° ë•Œë¬¸ì— ì´ë²ˆ ì£¼ì œëŠ” ê·¸ë‹¥ ì£¼ ëª©ì ì— í•´ë‹¹í•˜ëŠ” ì£¼ì œëŠ” ì•„ë‹ˆë¯€ë¡œ ì´ë²ˆì—” ì•„ì£¼ ê°€~ë³ê²Œ í›‘ì–´ë³´ê³  ë„˜ì–´ê°€ê² ìŠµë‹ˆë‹¤.
ì™œëƒí•˜ë©´ ì›¹ í”„ë ˆì„ì›Œí¬ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì€ í•´ë‹¹ ì›¹í”„ë ˆì„ì›Œí¬ì˜ ë¬¸ì„œë‚˜ ì´ëŸ° ì €ëŸ° ë¸”ë¡œê·¸ë“¤ì— ì´ë¯¸ ë„ˆë¬´ë„ ë§ì´ ìë£Œê°€ ì¡´ì¬í•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.&lt;/p>
&lt;h2 id="golangìœ¼ë¡œ-ì›¹-ì• í”Œë¦¬ì¼€ì´ì…˜ì„-ê°œë°œí•˜ëŠ”-ë°©ë²•ë“¤">Golangìœ¼ë¡œ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ê°œë°œí•˜ëŠ” ë°©ë²•ë“¤&lt;/h2>
&lt;p>ë³´í†µ ë‹¤ë¥¸ ì–¸ì–´ ê°™ì€ ê²½ìš° Javaì—ì„œëŠ” Spring MVC í˜¹ì€ Spring WebFlux, Pythonì€ FastApi, Flask, Django, Node.jsëŠ” Express, nest, koaì²˜ëŸ¼
ê° ì–¸ì–´ë§ˆë‹¤ ì†ì— ê¼½ì„ ë§Œí•œ ëŒ€í‘œì ì¸ ì›¹ í”„ë ˆì„ì›Œí¬ë“¤ì´ ìˆëŠ” ê²ƒ ê°™ì€ë° GoëŠ” ê·¸ë ‡ì§€ê°€ ì•ŠìŠµë‹ˆë‹¤. GoëŠ” ì˜ ë‚˜ê°€ëŠ” ì›¹ í”„ë ˆì„ì›Œí¬ë“¤ì´ ë„ˆë¬´ë„ ë‹¤ì–‘í•˜ê²Œ ì¡´ì¬í•©ë‹ˆë‹¤.
ì•„ì£¼ ì•„ì£¼ ë‹¤ì–‘í•œ í”„ë ˆì„ì›Œí¬ê°€ ì¡´ì¬í•˜ì§€ë§Œ ê·¸ë‹¥ ìš°ìœ„ê°€ ëšœë ·í•˜ì§„ ì•ŠìŠµë‹ˆë‹¤.
ì–´ë–¤ í•œ ê¸°ìˆ ì´ ìƒíƒœê³„ë¥¼ ë…ì í•´ë²„ë¦¬ê±°ë‚˜ ê·¸ ê¸°ìˆ ë§Œì´ ê°•ìš”ë˜ëŠ” ì¼ ì—†ì´ ì„œë¡œ(í”„ë ˆì„ì›Œí¬ê°„)ê°€ ê²½ìŸí•˜ë©° ì¢‹ì€ ê¸°ìˆ ë¡œ ë‚˜ì•„ê°€ëŠ” ê²Œ ì¥ì ì´ ë  ìˆ˜ë„ ìˆê³ ,
ë„ˆë¬´ í”„ë ˆì„ì›Œí¬ê°€ ë‹¤ì–‘í•´ì„œ ì„ íƒí•˜ê¸° ê³¤ë€í•˜ë‹¤ëŠ” ê²ƒì´ ë‹¨ì ì´ ë  ìˆ˜ë„ ìˆì„ ê²ƒ ê°™ìŠµë‹ˆë‹¤. ì»¤ë®¤ë‹ˆí‹°ê°€ í•œ ë° ì§‘ì¤‘ëœë‹¤ë©´ ë” ë²„ê·¸ í”½ìŠ¤í•˜ê¸° ì‰¬ìš¸í…ë° ê·¸ëŸ° ë©´ì—ì„œëŠ”
ì¡°ê¸ˆ ì•„ì‰½ê¸°ë„ í•©ë‹ˆë‹¤.&lt;/p>
&lt;p>ë‹¤ë§Œ í•œ ê°€ì§€ íë¦„ì´ ìˆë‹¤ë©´ Pythonì„ ì‚¬ìš©í•˜ëŠ” ê°œë°œìë¶„ë“¤ì´ &lt;code>&amp;quot;Pythonic&amp;quot;&lt;/code>ì´ë¼ëŠ” ì² í•™(?)ì„ êµ‰ì¥íˆ ì¢‹ì•„í•˜ì‹œë“¯ Goë¥¼ ì‚¬ìš©í•˜ëŠ” ê°œë°œìë¶„ë“¤ì€ &lt;code>&amp;quot;GoìŠ¤ëŸ¬ì›€&amp;quot;&lt;/code>ì„ êµ‰ì¥íˆ ì¢‹ì•„í•˜ëŠ” ê²½í–¥ì´ ìˆì–´
ì–´ë–¤ í”„ë ˆì„ì›Œí¬ê°€ ê³„ì†í•´ì„œ ì¸ê¸°ë¥¼ ë„ëŠ” ë°ì—ëŠ” &lt;code>&amp;quot;GoìŠ¤ëŸ¬ìš´ê°€&amp;quot;&lt;/code>ê°€ í° ì˜í–¥ì„ ë¼ì¹˜ëŠ” ê²ƒ ê°™ìŠµë‹ˆë‹¤.
ì•„ë§ˆ GoìŠ¤ëŸ¬ì›€ì´ë€ ë‹¤ìŒê³¼ ê°™ì€ íŠ¹ì§•ë“¤ì„ ì–˜ê¸°í•˜ëŠ” ê²ƒì¼ ê²ë‹ˆë‹¤.&lt;/p>
&lt;ul>
&lt;li>íƒ€ì…ì„ í†µí•´ ì•ˆì •ì ìœ¼ë¡œ ê°œë°œí•œë‹¤. (interface{} ì™€ ê°™ì€ ë¹ˆ ì¸í„°í˜ì´ìŠ¤ë¥¼ ì´ìš©í•˜ë©´ì„œ type assertionì´ë‚˜ reflectë¥¼ ì´ìš©í•˜ëŠ” ê²ƒì„ ì§€ì–‘)&lt;/li>
&lt;li>ê°€ë³ê³  ê°„ê²°í•˜ë‹¤. (Spring MVCì™€ ê°™ì€ ë°©ì‹ì€ ì§€ì–‘. í”„ë ˆì„ì›Œí¬ì—ì„œ ì“¸ ë° ì—†ì´ ë§ì€ ê±¸ ì§€ì›í•˜ë©´ì„œ ì„œë¹„ìŠ¤ê°€ ë¬´ê±°ì›Œì§€ëŠ” ê²ƒì„ ì§€ì–‘.)&lt;/li>
&lt;li>ë¹ ë¥´ë‹¤.&lt;/li>
&lt;li>ë™ì‹œì„±ì„ goroutineê³¼ channelì„ ì´ìš©í•´ ì˜ ì‚¬ìš©í•œë‹¤. (ê·¼ë° ì´ ë¶€ë¶„ì€ web frameworkì„ ê³ ë¥¼ ë•ŒëŠ” ì˜í–¥ì„ ë¼ì¹˜ì§€ ì•ŠëŠ” ê²ƒ ê°™ê³  ê°œë°œìì˜ ì½”ë“œì— ëŒ€í•œ goìŠ¤ëŸ¬ì›€ì¼ ê²ƒì…ë‹ˆë‹¤.)&lt;/li>
&lt;/ul>
&lt;h2 id="í”„ë ˆì„ì›Œí¬-ì¶”ì²œ">í”„ë ˆì„ì›Œí¬ ì¶”ì²œ&lt;/h2>
&lt;ul>
&lt;li>&lt;code>net/http&lt;/code> - Go í‘œì¤€(ë¹ŒíŠ¸ì¸) íŒ¨í‚¤ì§€&lt;/li>
&lt;li>&lt;code>github.com/labstack/echo&lt;/code> - ìŠ¤íƒ€ 20k&lt;/li>
&lt;li>&lt;code>github.com/gofiber/fiber&lt;/code> - â¤ï¸ ìŠ¤íƒ€ 14.6k&lt;/li>
&lt;li>&lt;code>github.com/gin-gonic/gin&lt;/code> - ìŠ¤íƒ€ 50k&lt;/li>
&lt;li>&lt;code>github.com/beego/beego&lt;/code> - ìŠ¤íƒ€ 26k&lt;/li>
&lt;li>&amp;hellip;&lt;/li>
&lt;/ul>
&lt;p>ì´ëŸ° íŠ¹ì§•ë“¤ì„ ê°€ì§„ ì›¹í”„ë ˆì„ì›Œí¬ë¡œ í•œêµ­ì—ì„œ ë§ì´ ì“°ì´ëŠ” ë“¯í•œ í”„ë ˆì„ì›Œí¬ë“¤ì€ &lt;code>fiber&lt;/code>, &lt;code>echo&lt;/code>, &lt;code>gin&lt;/code> ì´ ì„¸ ì¹œêµ¬ë“¤ì¸ ê²ƒ ê°™ìŠµë‹ˆë‹¤.
ì €ë„ ë‹¤ ê¹Šì´ ìˆê²Œ ì¨ë³¸ ê±´ ì•„ë‹ˆì§€ë§Œ ê·¸ ë™ì•ˆ ë¦¬ì„œì¹˜ í•´ì˜¨ ê²ƒë“¤ì´ë‚˜ í•œêµ­ Go ì»¤ë®¤ë‹ˆí‹°ì—ì„œ ì˜¤ê°€ëŠ” ì´ëŸ° ì €ëŸ° ë‚´ìš©ë“¤ì„ ì°¸ê³ í–ˆì„ ë•Œì˜ ì˜ê²¬ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.
&lt;code>gin&lt;/code>ì€ ì˜¤ëœ ì‹œê°„ ê°œë°œë˜ì–´ ì˜¨ í”„ë¡œì íŠ¸ì´ê³  ê¾¸ì¤€íˆ ìŠ¤íƒ€ë„ ë§ì§€ë§Œ ì•„ë§ˆ ì¢€ &amp;lsquo;ë¬´ê²ë‹¤. ëŠë¦¬ë‹¤.&amp;rsquo; ì´ëŸ° ì–˜ê¸°ê°€ ìˆì—ˆë˜ ê²ƒ ê°™ìŠµë‹ˆë‹¤. &lt;code>echo&lt;/code>ëŠ” ê°„ê²°í•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆìœ¼ë©´ì„œ í•„ìš”í•œ ê¸°ëŠ¥ë“¤ì€ ë‹¤ ìˆê³  ê°œë°œì´ í™œë°œí•˜ê²Œ ì´ë£¨ì–´ì§€ê³  ìˆëŠ” ë“¯í•œ ëŠë‚Œì´ì§€ë§Œ
ë¬¸ì„œê°€ ê·¸ë‹¥ ì¹œì ˆí•˜ì§€ ì•Šê³  ì© ë¹ ë¥¸ ê±´ ì•„ë‹ˆë‹¤ëŠ” ìƒê°ì´ ë“­ë‹ˆë‹¤. ë¬¸ì„œê°€ ê±°ì˜ ê·¸ëƒ¥ ì˜ˆì‹œ ì½”ë“œ ì‘ì„±í•œ ì •ë„ì…ë‹ˆë‹¤. ê·¸ë˜ë„ Go ì–¸ì–´ íŠ¹ì„±ìƒ ë‚¨ì˜ ì½”ë“œë¥¼ ê¹Œì„œ ë´ë„ í•´ì„í•˜ê¸° ì‰½ê³  ì£¼ì„ë„ ì˜ ë‹¬ë ¤ìˆëŠ” í¸ì´ë¼ í° ì–´ë ¤ì›€ì€ ì—†ì—ˆìŠµë‹ˆë‹¤.
&lt;code>fiber&lt;/code>ëŠ” ìš”ì¦˜ ê°€ì¥ í•«í•œ í”„ë ˆì„ì›Œí¬ ê°™ìŠµë‹ˆë‹¤. ë¹ ë¥´ê²Œ ê¹ƒí—™ ìŠ¤íƒ€ ìˆ˜ë„ ëŠ˜ì–´ë‚˜ê³  ìˆê³  fasthttpë¥¼ ì‚¬ìš©í•´ì„œì¸ì§€ ì•„ë§ˆ ì›”ë“±íˆ ë¹ ë¥¸ ê²ƒìœ¼ë¡œ ì•Œë ¤ì ¸ìˆìŠµë‹ˆë‹¤. ê²Œë‹¤ê°€ ë¬¸ì„œë„ ë„ˆë¬´ ì˜ ì‘ì„±ë˜ì–´ìˆê³  ê°œë°œë„ í™œë°œíˆ ì´ë£¨ì–´ì§€ê³  ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>ì´ëŸ¬í•œ ì´ìœ ë¡œ ì €ëŠ” í˜„ì¬ &lt;code>fiber&lt;/code>ì™€ &lt;code>echo&lt;/code>ë¥¼ ì´ìš© ì¤‘ì´ê³  ì¶”í›„ ìƒˆë¡œìš´ ì„œë¹„ìŠ¤ë¥¼ ê°œë°œí•´ì•¼í•œë‹¤ë©´ &lt;code>fiber&lt;/code>ë¥¼ ì´ìš©í•  ì˜ˆì •ì…ë‹ˆë‹¤! (&lt;em>ì‚¬ì‹¤ ginì´ ìŠ¤íƒ€ëŠ” ê¾¸ì¤€íˆ ë§ì´ ëŠ˜ì–´ë‚˜ê³  ìˆê³  ìŠ¤íƒ€ ìˆ˜ ìì²´ë„ 1íƒ€ì¸ë° ì™œ í•œêµ­ì—ì„œ ë§ì´ë“¤ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ì§€ëŠ” ì˜ ëª¨ë¥´ê² ìŠµë‹ˆë‹¤. ì•„ì‹œëŠ” ë¶„ì´ë‚˜ ginì„ ì‚¬ìš©í•´ë³´ì‹  ë¶„ ìˆìœ¼ì‹œë©´ ì˜ê²¬ ë¶€íƒë“œë¦½ë‹ˆë‹¤..!&lt;/em>)&lt;/p>
&lt;h2 id="ì˜ˆì‹œ-ì½”ë“œ">ì˜ˆì‹œ ì½”ë“œ&lt;/h2>
&lt;p>ê°„ë‹¨í•˜ê²Œ &lt;code>net/http&lt;/code> ë‚˜ &lt;code>fiber&lt;/code> ì¤‘ í•˜ë‚˜ë¥¼ ì´ìš©í•´ &lt;code>GET /ping&lt;/code>ì— ì‘ë‹µí•˜ëŠ” ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë§Œë“¤ì–´ë³´ì•˜ìœ¼ë‹ˆ ì°¸ê³ í•˜ì‹¤ ë¶„ë“¤ì€ ì°¸ê³ í•˜ì‹œê¸¸ ë°”ëë‹ˆë‹¤.
ì›¬ë§Œí•˜ë©´ ê³µì‹ ë¬¸ì„œì˜ Getting startedë‚˜ Exampleë“¤ì„ ë³´ì‹œëŠ” ê±¸ ì¶”ì²œë“œë¦½ë‹ˆë‹¤.&lt;/p>
&lt;p>ë‹¤ë¥¸ ê¸€ë“¤ê³¼ ë§ˆì°¬ê°€ì§€ë¡œ ì˜ˆì‹œ ì½”ë“œëŠ” &lt;code>https://github.com/umi0410/how-to-backend-in-go&lt;/code>ì˜ webapp ë””ë ‰í† ë¦¬ì— ì—…ë¡œë“œ í•´ë‘ê² ìŠµë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;flag&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/gofiber/fiber/v2&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;log&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;net/http&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">var&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">framework&lt;/span> &lt;span class="kt">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">port&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">flag&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Int&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;p&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">8888&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;ì„œë²„ê°€ Listení•  port ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">init&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">flag&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Parse&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nb">len&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">flag&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Args&lt;/span>&lt;span class="p">())&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Fatal&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;í•˜ë‚˜ì˜ ì¸ìë¥¼ ì „ë‹¬í•´ frameworkë¥¼ ì •ì˜í•´ì£¼ì„¸ìš”. (e.g. http, echo, fiber)&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">framework&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">flag&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Arg&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">switch&lt;/span> &lt;span class="nx">framework&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">case&lt;/span> &lt;span class="s">&amp;#34;http&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nf">RunNewHttpServer&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">case&lt;/span> &lt;span class="s">&amp;#34;fiber&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nf">RunNewFiberServer&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">default&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Fatal&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;ì§€ì›í•˜ì§€ ì•ŠëŠ” framework ì…ë‹ˆë‹¤.&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">RunNewHttpServer&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">addr&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Sprintf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;:%d&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">port&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Server is listening %d&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">port&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">http&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">HandleFunc&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;/ping&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">w&lt;/span> &lt;span class="nx">http&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">ResponseWriter&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">req&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">http&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Request&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">_&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">w&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Write&lt;/span>&lt;span class="p">([]&lt;/span>&lt;span class="nb">byte&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;PingPong by net/http\n&amp;#34;&lt;/span>&lt;span class="p">));&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">http&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ListenAndServe&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">addr&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">nil&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">RunNewFiberServer&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">addr&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Sprintf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;:%d&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">port&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">app&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">fiber&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">New&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">app&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;/ping&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">c&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">fiber&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Ctx&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="kt">error&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SendString&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Pingpong by fiber\n&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Server is listening %d&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">port&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">app&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Listen&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">addr&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="https://umi0410.github.io/blog/golang/how-to-backend-in-go-webapp/output.png"
width="456"
height="137"
srcset="https://umi0410.github.io/blog/golang/how-to-backend-in-go-webapp/output_hu537a11d34916ac1c2def7909b69ddbc5_22456_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/golang/how-to-backend-in-go-webapp/output_hu537a11d34916ac1c2def7909b69ddbc5_22456_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="output.png"
class="gallery-image"
data-flex-grow="332"
data-flex-basis="798px"
>&lt;/p>
&lt;h2 id="ë§ˆì¹˜ë©°">ë§ˆì¹˜ë©°&lt;/h2>
&lt;p>ê°„ë‹¨í•˜ê²Œ Goì–¸ì–´ì—ì„œ ìœ ëª…í•œ í”„ë ˆì„ì›Œí¬ë“¤ì„ ë¹„êµí•´ë³´ê³  Pingpong ì„œë²„ ì˜ˆì œ ì½”ë“œë¥¼ ì‘ì„±í•´ë´¤ìŠµë‹ˆë‹¤.
ì•ì„œ ì–¸ê¸‰ë“œë ¸ë“¯ì´ ì•„ë¬´ë˜ë„ ì›¹ í”„ë ˆì„ì›Œí¬ë¡œ hello worldë¥¼ ì°ëŠ” ìˆ˜ì¤€ì˜ ì„œë²„ë¥¼ ì‘ì„±í•˜ëŠ” ë‚´ìš©ì€ ì´ë¯¸ ì–´ëŠ ê³³ì—ì„œë“  ì°¾ì•„ë³¼ ìˆ˜ ìˆê¸° ë•Œë¬¸ì—
ì´ë²ˆ ê¸€ì€ ê°€ë³ê²Œ ë§ˆë¬´ë¦¬í•˜ê³  ì´ëŸ° ì €ëŸ° í”„ë ˆì„ì›Œí¬ë“¤ì˜ ê³µì‹ ë¬¸ì„œë¥¼ ë³´ì‹œëŠ” ê±¸ ì¶”ì²œë“œë¦½ë‹ˆë‹¤ ã…ã…
ë‹¤ìŒ ê¸€ì€ &lt;code>ë¯¸ë“¤ì›¨ì–´ ì‘ì„±&lt;/code>ì´ë‚˜ &lt;code>ì—ëŸ¬ ì²˜ë¦¬&lt;/code>ì— ëŒ€í•´ ë‹¤ë¤„ë³¼ ì˜ˆì •ì¸ë° ì´ë²ˆ ê¸€ ë³´ë‹¤ ì¬ë°Œì„ ê²ƒìœ¼ë¡œ ì˜ˆìƒë©ë‹ˆë‹¤.
&amp;lsquo;&lt;strong>ì—ëŸ¬ë¥¼ ì–´ë–»ê²Œ ì²˜ë¦¬í• ê¹Œ&lt;/strong>&amp;lsquo;ë‚˜ &amp;lsquo;&lt;strong>ë¯¸ë“¤ì›¨ì–´ëŠ” ì–´ë–»ê²Œ ì‘ì„±í•  ìˆ˜ ìˆì„ê¹Œ&lt;/strong>&amp;lsquo;ì™€ ê°™ì€ ë‚´ìš©ì€ ê·¸ë‹¥ í”íˆ ì°¾ì•„ë³¼ ìˆ˜ ìˆëŠ” ë‚´ìš©ì€ ì•„ë‹Œ ê²ƒ ê°™ì•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.
ê·¸ëŸ¼ ë‹¤ìŒ ê¸€ì—ì„œ ë´ìš” ìš°ë¦¬~ ã…ã… ğŸ‘‹&lt;/p>
&lt;h2 id="ì°¸ê³ ">ì°¸ê³ &lt;/h2>
&lt;ul>
&lt;li>ê°„ë‹¨í•œ ì›¹ ì„œë²„ (HTTP ì„œë²„) - &lt;a class="link" href="http://golang.site/go/article/111-%EA%B0%84%EB%8B%A8%ED%95%9C-%EC%9B%B9-%EC%84%9C%EB%B2%84-HTTP-%EC%84%9C%EB%B2%84" target="_blank" rel="noopener"
>http://golang.site/go/article/111-%EA%B0%84%EB%8B%A8%ED%95%9C-%EC%9B%B9-%EC%84%9C%EB%B2%84-HTTP-%EC%84%9C%EB%B2%84&lt;/a>&lt;/li>
&lt;li>Understanding Listen Ports and Addresses - &lt;a class="link" href="https://www.ateam-oracle.com/listen-addresses" target="_blank" rel="noopener"
>https://www.ateam-oracle.com/listen-addresses&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://www.esparkinfo.com/top-golang-web-framework-development.html" target="_blank" rel="noopener"
>https://www.esparkinfo.com/top-golang-web-framework-development.html&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://blog.devgenius.io/best-web-framework-of-golang-in-2021-aae4b2ad9bf" target="_blank" rel="noopener"
>https://blog.devgenius.io/best-web-framework-of-golang-in-2021-aae4b2ad9bf&lt;/a>&lt;/li>
&lt;li>ë‚´ê°€ Go ì–¸ì–´ë¥¼ ì„ íƒí•œ ì´ìœ  - &lt;a class="link" href="https://pronist.tistory.com/67" target="_blank" rel="noopener"
>https://pronist.tistory.com/67&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Golangìœ¼ë¡œ ë°±ì—”ë“œ ê°œë°œí•˜ê¸° - 2. í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„± ë° Goì—ì„œ Mocking ì´ìš©í•˜ê¸° (gomock, testify ì´ìš©)</title><link>https://umi0410.github.io/blog/golang/how-to-backend-in-go-testcode/</link><pubDate>Sat, 17 Jul 2021 12:46:54 +0900</pubDate><guid>https://umi0410.github.io/blog/golang/how-to-backend-in-go-testcode/</guid><description>&lt;img src="https://umi0410.github.io/blog/golang/how-to-backend-in-go-testcode/test-with-ide.png" alt="Featured image of post Golangìœ¼ë¡œ ë°±ì—”ë“œ ê°œë°œí•˜ê¸° - 2. í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„± ë° Goì—ì„œ Mocking ì´ìš©í•˜ê¸° (gomock, testify ì´ìš©)" />&lt;h2 id="ì‹œì‘í•˜ë©°">ì‹œì‘í•˜ë©°&lt;/h2>
&lt;p>ì €ëŠ” &lt;code>Go ì–¸ì–´&lt;/code>ë¥¼ ê³µë¶€í•˜ë©´ì„œ ì²˜ìŒìœ¼ë¡œ í…ŒìŠ¤íŠ¸ ì½”ë“œë¼ëŠ” ê²ƒì„ ì ‘í•˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.
ê³¼ê±°ì—ëŠ” ê·¸ì € ê¸°ëŠ¥ì„ êµ¬í˜„í•˜ëŠ” ê²ƒì—ë§Œ ê´€ì‹¬ì´ ìˆì—ˆì§€ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì–´ë–»ê²Œ ê³„ì¸µì„ ë‚˜ëˆ  ì„¤ê³„í• ì§€,
ì–´ë–»ê²Œ í•´ì•¼ ìœ ì§€ ë³´ìˆ˜í•˜ê¸° ì‰¬ìš°ë©´ì„œ ì•ˆì •ì ì¸ ê°œë°œì„ í•  ìˆ˜ ìˆì„ì§€ì— ëŒ€í•œ ê³ ë¯¼ì„ í•˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>í•˜ì§€ë§Œ Goë¥¼ ê³µë¶€í•˜ë©´ì„œë¶€í„°ëŠ” &lt;code>í´ë¦° ì•„í‚¤í…ì³&lt;/code>ë‚˜ &lt;code>MSA&lt;/code>, &lt;code>ë™ì‹œì„± íŒ¨í„´&lt;/code> ë“±ì„ ë¹„ë¡¯í•´ &lt;code>í…ŒìŠ¤íŠ¸ ì½”ë“œ&lt;/code>ì—
ëŒ€í•´ì„œë„ ê³µë¶€í•´ë³¼ ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.
ê·¸ ì¤‘ì—ì„œë„ í…ŒìŠ¤íŠ¸ ì½”ë“œì— ëŒ€í•´ ê³µë¶€í•´ë³´ë©° ìµí˜”ë˜ ì ë“¤ì„ ë°”íƒ•ìœ¼ë¡œ ì´ë²ˆ ê¸€ì—ì„œëŠ”
&lt;strong>Golangìœ¼ë¡œ ë°±ì—”ë“œ ê°œë°œì„ í•˜ë©´ì„œ í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì–´ë–»ê²Œ ì‘ì„±í•  ìˆ˜ ìˆì„ì§€&lt;/strong>ì— ëŒ€í•´ ì•Œì•„ë³´ë ¤í•©ë‹ˆë‹¤.&lt;/p>
&lt;p>ë³¸ ê¸€ì—ì„œ ì‚¬ìš©ëœ ì˜ˆì‹œ ì½”ë“œëŠ” &lt;a class="link" href="https://github.com/umi0410/how-to-backend-in-go/tree/master/testcode" target="_blank" rel="noopener"
>ì €ì˜ Github how-to-backend-in-go ë ˆí¬ì§€í† ë¦¬&lt;/a>ì— ì—…ë¡œë“œ í•´ë‘˜í…Œë‹ˆ ì°¸ê³ í•˜ì‹¤ ë¶„ë“¤ì€ ì°¸ê³ í•´ì£¼ì„¸ìš”~!&lt;/p>
&lt;h2 id="tdd-test-driven-developmentì™€-ìœ ë‹›-í…ŒìŠ¤íŠ¸">TDD (Test Driven Development)ì™€ ìœ ë‹› í…ŒìŠ¤íŠ¸&lt;/h2>
&lt;p>ì‚¬ìš©ìì˜ ë°˜ì‘ì— ë§ì¶° ì¬ë¹ ë¥´ê²Œ ëŒ€ì‘í•  ìˆ˜ ìˆë„ë¡ ê°œë°œ ì£¼ê¸°ê°€ ë¹¨ë¼ì§€ë©´ì„œ &lt;code>DevOps&lt;/code> ë¬¸í™” ë¿ë§Œ ì•„ë‹ˆë¼
&lt;code>TDD&lt;/code>ë„ ë§ì€ ì¸ê¸°ë¥¼ ì–»ê²Œ ëœ ê²ƒ ê°™ìŠµë‹ˆë‹¤.
&lt;code>TDD&lt;/code>ë€ ê°œë°œì„ ë¨¼ì € ë‹¤~ ì§„í–‰í•œ ë’¤ í•œ ë²ˆì— ë°°í¬í•˜ê±°ë‚˜ ì‹œê°„ ë‚  ë•Œ í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì§œëŠ” ê²ƒì´ ì•„ë‹ˆë¼
ìš°ë¦¬ê°€ ê°œë°œí•´ì•¼í•  ìµœì†Œí•œì˜ ë‚´ìš©ë“¤ì„ ê²€ì¦í•  ìˆ˜ ìˆëŠ” í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ë¨¼ì € ì‘ì„±í•œ ë’¤ í•´ë‹¹ í…ŒìŠ¤íŠ¸ë¥¼ í†µê³¼í•˜ëŠ” ì½”ë“œë¥¼ ê°œë°œí•´ë‚˜ê°€ëŠ” ê°œë°œ ë°©ë²•ë¡ ì…ë‹ˆë‹¤.&lt;/p>
&lt;p>TDDì— ëŒ€í•´ ì„¤ëª…í•˜ìë©´ TDDë§Œìœ¼ë¡œë„ ì±… ëª‡ ê¶Œì˜ ë¶„ëŸ‰ì´ ë  ìˆ˜ ìˆê³ , ì € ë˜í•œ TDDë¥¼ ì˜ ì•„ëŠ” ê²ƒì€ ì•„ë‹ˆê¸°ì— ìì„¸í•œ ì„¤ëª…ì€ ìƒëµí•˜ê² ìŠµë‹ˆë‹¤.
ì´ë²ˆ ê¸€ì˜ ì£¼ëœ ë‚´ìš©ì€ TDDì— ëŒ€í•´ ì†Œê°œí•˜ëŠ” ê²ƒë³´ë‹¤ëŠ” &lt;strong>Golangìœ¼ë¡œ ìœ ë‹› í…ŒìŠ¤íŠ¸ë¥¼ ì‘ì„±&lt;/strong>í•˜ëŠ” ìš”ë ¹ì…ë‹ˆë‹¤.&lt;/p>
&lt;p>ìœ ë‹› í…ŒìŠ¤íŠ¸ëŠ” ë‹¤ë¥¸ ê³„ì¸µê³¼ ë¬´ê´€í•˜ê²Œ ë…ë¦½ì ìœ¼ë¡œ ê°ê°ì˜ ë©”ì†Œë“œì˜ ê¸°ëŠ¥ì„ í…ŒìŠ¤íŠ¸í•˜ëŠ” ê²ƒì´ë¼ê³  ë³¼ ìˆ˜ ìˆê² ìŠµë‹ˆë‹¤.
ê³„ì¸µë§ˆë‹¤ í•´ë‹¹ í…ŒìŠ¤íŠ¸ë¥¼ í†µí•´ ê²€ì¦í•˜ê³ ì í•˜ëŠ” ì£¼ìš”í•œ ë‚´ìš©ì€ ë‹¤ë¥¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
ìœ ë‹› í…ŒìŠ¤íŠ¸ëŠ” ì£¼ë¡œ ìì‹ ë§Œì„ í…ŒìŠ¤íŠ¸ í•˜ê¸° ë•Œë¬¸ì— ìê¸° ê³„ì¸µì˜ ë™ì‘ì„ í…ŒìŠ¤íŠ¸í•˜ì§€ ë‹¤ë¥¸ ê³„ì¸µì˜ ë™ì‘ê¹Œì§€ í…ŒìŠ¤íŠ¸í•˜ì§„ ì•ŠìŠµë‹ˆë‹¤.
ë˜í•œ ê²½ìš°ì— ë”°ë¼ ì•„ì˜ˆ ë‹¤ë¥¸ ê³„ì¸µì„ ì‹¤ì œë¡œ ì´ìš©í•˜ì§€ ì•Šê³  ëª¨í‚¹(Mocking)í•œ íƒ€ì…ì„ ì´ìš©í•˜ëŠ” ê²½ìš°ë„ ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;ol>
&lt;li>
&lt;p>&lt;strong>Data access layer&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>&lt;code>userRepository.Create(user *entity.User)&lt;/code> - ìœ ì € í…Œì´ë¸”ì— í•´ë‹¹ ë°ì´í„°ê°€ ì˜ ì €ì¥ë˜ëŠ”ì§€ í…ŒìŠ¤íŠ¸&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>Business layer&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>
&lt;p>&lt;code>userService.Create(ctx *fiber.Ctx, user UserCreateInput)&lt;/code> - ìœ ì € ìƒì„± ê´€ë ¨ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ì£¼ë¡œ í…ŒìŠ¤íŠ¸.&lt;/p>
&lt;p>DBì— ì˜ ì˜ì†í™” ë˜ì—ˆëŠ”ì§€ ê¹Œì§€ëŠ” í…ŒìŠ¤íŠ¸ í•  í•„ìš” ì—†ìŒ. ì´ëŠ” Data access layerì—ì„œ í…ŒìŠ¤íŠ¸ í•  ë‚´ìš©&lt;/p>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>Presentation layer&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>
&lt;p>&lt;code>userHandler.Craete(ctx *fiber.Ctx)&lt;/code> - ì‘ë‹µ ì½”ë“œê°€ ë°”ë¼ë˜ ëŒ€ë¡œ &lt;code>201&lt;/code> ë²ˆì´ ë§ëŠ”ì§€. JSONìœ¼ë¡œ ì˜ ì‘ë‹µí•˜ëŠ”ì§€&lt;/p>
&lt;p>ë§ˆì°¬ê°€ì§€ë¡œ DBì— ì˜ ì˜ì†í™” ë˜ì—ˆëŠ”ì§€ê¹Œì§€ëŠ” í…ŒìŠ¤íŠ¸í•  í•„ìš” ì—†ìŒ. ì´ëŠ” Data access layerì—ì„œ í…ŒìŠ¤íŠ¸ í•  ë‚´ìš©.&lt;/p>
&lt;p>ë˜í•œ ì–´ë–¤ business layerì˜ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì— ëŒ€í•´ì„œë„ ìì„¸íˆ í…ŒìŠ¤íŠ¸ í•  í•„ìš” ì—†ìŒ. ì´ ë˜í•œ Business layerì—ì„œ í…ŒìŠ¤íŠ¸í•  ë‚´ìš©&lt;/p>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;p>ì°¸ê³ ë¡œ &lt;strong>ì €ëŠ” Business layerë¥¼ ìœ„ì£¼ë¡œ í…ŒìŠ¤íŠ¸&lt;/strong>í•˜ê³  ìˆìŠµë‹ˆë‹¤.
Data access layerì˜ ê²½ìš° ë§ì€ ë¶€ë¶„ì´ Database framework(ORM)ì„ í†µí•´ ê²€ì¦ì´ ë˜ì—ˆê³ ,
Presentation layerë„ Web frameworkë“¤ì— ì˜í•´ ë§ì€ ë¶€ë¶„ì´ ê²€ì¦ë˜ì—ˆì„ ë¿ ì•„ë‹ˆë¼ í¬ìŠ¤íŠ¸ë§¨ ê°™ì€ ë„êµ¬ë“¤ì„ í†µí•´ í™•ì¸í•´ëŠ” ê²ƒì´ ë” í¸í•œ ê²½ìš°ë„ ì¡´ì¬í•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.
ë°˜ë©´ Business layerì˜ ë™ì‘ì€ ë§¤ìš° ì¤‘ìš”í•˜ê³ , í…ŒìŠ¤íŠ¸ ì½”ë“œ ì—†ì´ ë§¤ë²ˆ ìˆ˜ì‘ì—…ìœ¼ë¡œ ê·¸ ë™ì‘ì„ ê²€ì¦í•˜ëŠ” ê²ƒì€ ë§¤ìš° ë²ˆê±°ë¡­ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.&lt;/p>
&lt;p>(ê³„ì¸µì´ë‚˜ ê´€ì‹¬ì‚¬ë¥¼ ì–´ë–»ê²Œ ë‚˜ëˆ„ëƒì— ë”°ë¼ Business layerëŠ” ë‹¤ì–‘í•˜ê²Œ ë¶ˆë¦¬ëŠ” ê²ƒ ê°™ìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ ë‚´ë¶€ ê³„ì¸µ, ë„ë©”ì¸ ê³„ì¸µ, ì½”ì–´ ë¡œì§ ê³„ì¸µ ë“±ë“±ìœ¼ë¡œ ë¶ˆë¦¬ê¸°ë„ í•©ë‹ˆë‹¤.)&lt;/p>
&lt;h2 id="unit-testë¥¼-ë„ì…í•˜ê¸°-ì „ì—-ì•Œì•„ë‘ë©´-ì¢‹ì€-ê²ƒë“¤">Unit testë¥¼ ë„ì…í•˜ê¸° ì „ì— ì•Œì•„ë‘ë©´ ì¢‹ì€ ê²ƒë“¤&lt;/h2>
&lt;ol>
&lt;li>ìœ ì—°ì„±ì„ ìœ„í•œ ì˜ì¡´ì„± ì£¼ì… ë° ë³€ìˆ˜ ì´ˆê¸°í™” ë°©ë²•&lt;/li>
&lt;li>mockingì— ëŒ€í•˜ì—¬&lt;/li>
&lt;li>assert êµ¬ë¬¸ ì´ìš©&lt;/li>
&lt;/ol>
&lt;p>Springì„ ë°”íƒ•ìœ¼ë¡œ ê°œë°œí•˜ëŠ” ê²½ìš° JUnitì´ë¼ëŠ” í…ŒìŠ¤íŠ¸ í”„ë ˆì„ì›Œí¬ë¥¼ ì£¼ë¡œ ì´ìš©í•˜ê³  ì´ë¥¼ í†µí•´ í…ŒìŠ¤íŠ¸í•˜ëŠ” ë°©ì‹ì´ ê±°ì˜ ì •í˜•í™” ë˜ì–´ìˆëŠ” ê²ƒ ê°™ìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ Golangì€ ê·¸ë‹¥ í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì‘ì„±í•˜ëŠ” í˜•íƒœê°€ ì •í˜•í™”ë˜ì–´ìˆì§€ëŠ” ì•ŠìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ì–´ë–¤ ì–¸ì–´ë‚˜ í”„ë ˆì„ì›Œí¬ë¥¼ í†µí•´ ìœ ë‹› í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì‚¬ìš©í•˜ë“  ìœ„ì˜ ì„¸ ê°€ì§€ í•­ëª©ë“¤ì„ ì–´ë–»ê²Œ ì´ìš©í•  ì§€ ì•Œì•„ì•¼í•  ê²ƒì…ë‹ˆë‹¤.&lt;/p>
&lt;h3 id="1-ìœ ì—°ì„±ì„-ìœ„í•œ-ì˜ì¡´ì„±-ì£¼ì…-ë°-ë³€ìˆ˜-ì´ˆê¸°í™”-ë°©ë²•">1. ìœ ì—°ì„±ì„ ìœ„í•œ ì˜ì¡´ì„± ì£¼ì… ë° ë³€ìˆ˜ ì´ˆê¸°í™” ë°©ë²•&lt;/h3>
&lt;p>ì–´ë– í•œ ëª¨ë“ˆì´ ìì‹ ì˜ ë©¤ë²„ ë³€ìˆ˜ë“¤ì„ ë‚´ë¶€ì ìœ¼ë¡œ ìƒì„±í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ì™¸ë¶€ì—ì„œ ì£¼ì… ë°›ëŠ” í˜•íƒœì¸ &lt;code>ì˜ì¡´ì„± ì£¼ì…&lt;/code>ì€ ìœ ì—°í•œ ì˜ì¡´ì„± ê´€ë¦¬ë¥¼ ìœ„í•´ ê¶Œì¥ë©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ Userì— ëŒ€í•œ ë„ë©”ì¸/ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ì‹¤í–‰í•˜ë©° UserRepositoryë¥¼ ì´ìš©í•´ Userë¥¼ ì˜ì†ì ìœ¼ë¡œ ì €ì¥í•˜ê¸°ë„ í•˜ëŠ” UserServiceê°€ UserRepositoryì— ì˜ì¡´í•˜ëŠ” ê²½ìš°ë¥¼ ì‚´í´ë´…ì‹œë‹¤.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 1. ì˜ì¡´ì„± ì£¼ì… í˜•íƒœ - Good
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">func&lt;/span> &lt;span class="nf">NewUserService&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">userRepository&lt;/span> &lt;span class="nx">UserRepository&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">UserService&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">UserService&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">userRepository&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">userRepository&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 2. ì˜ì¡´ì„±ì„ ì£¼ì…í•˜ì§€ ì•ŠëŠ” í˜•íƒœ - Bad
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">func&lt;/span> &lt;span class="nf">NewUserServiceWithoutInjection&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">client&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">ent&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">UserClient&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">UserService&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">UserService&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">userRepository&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nf">NewUserRepository&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">client&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;strong>ì²« ë²ˆì§¸ - ì˜ì¡´ì„± ì£¼ì… í˜•íƒœ&lt;/strong>ëŠ” í…ŒìŠ¤íŠ¸ í•˜ëŠ” ê²½ìš°ë‚˜ ê°œë°œ í™˜ê²½ì— ë”°ë¼ ìœ ë™ì ìœ¼ë¡œ ì ì ˆí•œ UserServiceê°€ ì´ìš©í•  UserRepositoryë¥¼ ì£¼ì…ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì¦‰ ì‹¤ì œë¡œ &lt;strong>API ì„œë²„ë¥¼ êµ¬ë™ì‹œí‚¬ ë•Œì—ëŠ” &lt;code>NewUserService(userRepository UserRepository)&lt;/code> ë©”ì†Œë“œì— ì‹¤ì œë¡œ DBë¥¼ ì´ìš©í•˜ëŠ” Repositoryì¸ &lt;code>UserRepositoryImpl&lt;/code> ì„ ì£¼ì…í•˜ê³ , ìœ ë‹› í…ŒìŠ¤íŠ¸ë¥¼ ìˆ˜í–‰í•  ë•Œì—ëŠ” ëª¨í‚¹í•œ íƒ€ì…ì¸ &lt;code>MockUserRepository&lt;/code>ë¥¼ ì£¼ì…&lt;/strong>í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;strong>ë‘ ë²ˆì§¸ - ì˜ì¡´ì„±ì„ ì£¼ì…í•˜ì§€ ì•ŠëŠ” í˜•íƒœ&lt;/strong>ëŠ” ìì‹ ì´ ì˜ì¡´í•˜ëŠ” UserRepositoryê°€ ì´ë¯¸ &lt;code>NewUserServiceByItSelf&lt;/code>ë¼ëŠ” ë©”ì†Œë“œì—ì„œ &lt;code>NewUserRepository&lt;/code> ë¼ëŠ” ë©”ì†Œë“œë¥¼ í†µí•´ íŠ¹ì • UserRepositoryë¥¼ ì´ìš©í•˜ë„ë¡ ì •ì˜ë˜ì–´ìˆê¸° ë•Œë¬¸ì— Mockingì„ ì ìš©í•˜ê¸°ë„ í˜ë“¤ê³ , ë§Œì•½ ë‹¤ë¥¸ ëª¨ë“ˆë“¤ ë˜í•œ UserRepositoryë¥¼ ì´ìš©í•˜ëŠ” ê²½ìš° Singletonìœ¼ë¡œ ì´ìš©í•˜ì§€ ëª»í•˜ê³  ì—¬ëŸ¬ UserRepositoryê°€ ìƒì„±ë  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. ì‚¬ì‹¤ ent.UserClientë¼ëŠ” DB Client ë˜í•œ ì£¼ì…ë°›ì§€ ì•Šê³  ë‚´ë¶€ì ìœ¼ë¡œ ìƒˆë¡œ ìƒì„±í•´ì•¼ ì˜ì¡´ì„±ì„ ì™„ì „íˆ ì£¼ì…ë°›ì§€ ì•ŠëŠ” í˜•íƒœì´ê² ì§€ë§Œ ê·¸ëŸ° ë°©ì‹ì€ ë„ˆë¬´ë„ êµ¬í˜„í•˜ê¸° ë²ˆê±°ë¡œì›Œ í¸ì˜ìƒ DB clientëŠ” ì£¼ì…ë°›ì•˜ìŠµë‹ˆë‹¤. ì´ê²ƒë§Œ ë´ë„ ê°œë°œí•˜ëŠ” í˜•íƒœê°€ ì¼ê´€ë˜ì§€ ëª»í•˜ê³  ë¶ˆí¸í•œ ì‚¬í•­ì´ ë§ë‹¤ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆì£ .&lt;/p>
&lt;h3 id="2-mockingì—-ëŒ€í•˜ì—¬">2. Mockingì— ëŒ€í•˜ì—¬&lt;/h3>
&lt;p>&lt;code>ëª¨í‚¹&lt;/code>ì´ë€ ì‹¤ì œë¡œ ì„œë²„ê°€ ì‹¤í–‰ë  ë•Œ ì‚¬ìš©í•˜ëŠ” ëª¨ë“ˆì´ ì•„ë‹Œ ê°€ì§œ ëª¨ë“ˆì„ ì´ìš©í•˜ëŠ” ê¸°ë²•ì…ë‹ˆë‹¤. ì•ì—ì„œ ì ê¹ ì–¸ê¸‰í–ˆë“¯ì´ ì¢…ì¢… í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„± ì‹œì— ì¢…ì¢… Mockingì´ ì´ìš©ë©ë‹ˆë‹¤. ì˜ì¡´ì„± ì£¼ì… íŒ¨í„´ì„ í†µí•´ í…ŒìŠ¤íŠ¸ ì½”ë“œì—ì„œëŠ” ì‹¤ì œ typeì´ ì•„ë‹Œ Mocking typeì„ ìœ ë™ì ìœ¼ë¡œ ì£¼ì…í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì˜ ì™€ë‹¿ì§€ ì•Šì„ ìˆ˜ ìˆëŠ”ë° ì˜ˆë¥¼ ë“¤ì–´ UserServiceì˜ ë¹„ì¦ˆë‹ˆìŠ¤ ë£°ê³¼ ë¡œì§ì´ ì˜ ë™ì‘í•˜ëŠ”ì§€ë¥¼ í™•ì¸í•  ë•Œ Data access layerì˜ ë™ì‘ê¹Œì§€ í…ŒìŠ¤íŠ¸í•˜ê³  ì‹¶ì§€ ì•Šì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ ê²½ìš° Data access layerì˜ ëª¨ë“ˆì„ ê°€ì§œ íƒ€ì…ìœ¼ë¡œ ëª¨í‚¹í•©ë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">type&lt;/span> &lt;span class="nx">MockUserRepository&lt;/span> &lt;span class="kd">struct&lt;/span>&lt;span class="p">{}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">m&lt;/span> &lt;span class="nx">MockUserRepository&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nf">Create&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">input&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">UserCreateInput&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="nx">ent&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">User&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">error&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">ent&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">User&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">ID&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">input&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">ID&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Password&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">input&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Password&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Name&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">input&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Name&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span> &lt;span class="kc">nil&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">TestUserService_Create&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">t&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">testing&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">T&lt;/span>&lt;span class="p">){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// í•´ë‹¹ ì´ë¦„ì˜ ìœ ì €ê°€ ìˆëŠ”ì§€ í™•ì¸
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">s&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nf">NewUserService&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">new&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">MockUserRepository&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">_&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">s&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Create&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">UserCreateInput&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="nx">ID&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;jinsu_umi&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">Name&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;Jinsu Park&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">Password&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;123123123&amp;#34;&lt;/span>&lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">assert&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">NoError&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">t&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ì´ëŸ° ì‹ìœ¼ë¡œ MockUserRepository íƒ€ì…ì—ì„œëŠ” Create ë©”ì†Œë“œê°€ ì§ì ‘ DBì— ìœ ì €ë¥¼ ì˜ì†í™”í•˜ëŠ” ì‘ì—…ì„ ìƒëµí•œ ë’¤ ê·¸ëŸ´ì‹¸í•œ ë¦¬í„´ê°’ì„ ë¦¬í„´í•˜ë„ë¡ë§Œ êµ¬í˜„í•¨ìœ¼ë¡œì¨ UserRepsotiroyë¥¼ ëª¨í‚¹í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.&lt;/p>
&lt;p>í•˜ì§€ë§Œ ì´ë ‡ê²Œ ìˆ˜ì‘ì—…ìœ¼ë¡œ Mock typeì„ ë§¤ë²ˆ ì •ì˜í•˜ëŠ” ê²ƒì€ ê·€ì°®ì„ ìˆ˜ ìˆì£ . ë”°ë¼ì„œ ì´ë²ˆ ê¸€ì˜ ë’¤ì—ì„œëŠ” mocking frameworkë“¤ì— ëŒ€í•´ì„œë„ ì •ë¦¬í•´ë³´ê² ìŠµë‹ˆë‹¤.&lt;/p>
&lt;blockquote>
&lt;p>ì¢…ì¢… Stubê³¼ Mockì— ëŒ€í•´ í˜¼ë™ì´ ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê¸°ë³¸ì ìœ¼ë¡œ ì‹¤ì œ ëª¨ë“ˆì´ ì•„ë‹Œ ê°€ì§œ ëª¨ë“ˆì„ ì´ìš©í•˜ëŠ” ê¸°ë²• ìì²´ë¥¼ mockingì´ë¼ê³  í•©ë‹ˆë‹¤. ì´ë¥¼ ì¢€ ë” ì„¸ë¶„í™”í•´ì„œ ë´¤ì„ ë• stubì€ ë‹¨ìˆœíˆ í…ŒìŠ¤íŠ¸ë¥¼ ê°„ë‹¨íˆ í†µê³¼ì‹œí‚¤ê¸° ìœ„í•´ ì‹¤ì œ ëª¨ë“ˆì„ ëŒ€ì²´í•˜ëŠ” ê°€ì§œ ê°ì²´ë¥¼ ë§í•˜ê³  mockì€ ì˜ˆìƒê°’ê¹Œì§€ ë¹„êµë¥¼ í•˜ê³ , ë•Œë•Œë¡œ í…ŒìŠ¤íŠ¸ë¥¼ ì‹¤íŒ¨ì‹œí‚¤ê¸°ë„ í•˜ëŠ” ë” ìŠ¤ë§ˆíŠ¸í•œ stubì´ë¼ê³  ë³¼ ìˆ˜ ìˆë‹¤ê³  í•©ë‹ˆë‹¤.&lt;/p>
&lt;p>ì°¸ê³ : &lt;a class="link" href="https://stackoverflow.com/questions/3459287/whats-the-difference-between-a-mock-stub" target="_blank" rel="noopener"
>https://stackoverflow.com/questions/3459287/whats-the-difference-between-a-mock-stub&lt;/a>&lt;/p>
&lt;/blockquote>
&lt;h3 id="3-assert-êµ¬ë¬¸-ì´ìš©í•˜ê¸°">3. assert êµ¬ë¬¸ ì´ìš©í•˜ê¸°&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">TestUserService_Create&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">t&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">testing&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">T&lt;/span>&lt;span class="p">){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// í•´ë‹¹ ì´ë¦„ì˜ ìœ ì €ê°€ ìˆëŠ”ì§€ í™•ì¸
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">s&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nf">NewUserService&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">new&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">MockUserRepository&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">t&lt;/span>&lt;span class="p">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">_&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">s&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Create&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">UserCreateInput&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="nx">ID&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;jinsu_umi&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">Name&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;Jinsu Park&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">Password&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;123123123&amp;#34;&lt;/span>&lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ì´ëŸ° ì‹ìœ¼ë¡œ ë¡œê·¸ë¥¼ í†µí•´ í•˜ë‚˜ í•˜ë‚˜ í…ŒìŠ¤íŠ¸ ê²°ê³¼ë¥¼ í™•ì¸í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">//t.Log(&amp;#34;ì—ëŸ¬ê°€ ì¡´ì¬í•˜ì§€ ì•Šì•„ì•¼í•©ë‹ˆë‹¤.&amp;#34;)
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">//t.Log(&amp;#34;err == nil ì¸ì§€ í™•ì¸í•˜ì‹­ì‹œì˜¤. err == nil: &amp;#34; , err == nil)
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">// assertë¥¼ ì´ìš©í•´ ìë™ìœ¼ë¡œ ì„±ê³µ/ì‹¤íŒ¨ë¥¼ íŒë‹¨í•©ë‹ˆë‹¤.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">assert&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">NoError&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">t&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;code>assert&lt;/code> ë¼ëŠ” ë°©ì‹ì„ í†µí•œ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ê²€ì¦ì€ ë‹¤ì–‘í•œ í…ŒìŠ¤íŠ¸ í”„ë ˆì„ì›Œí¬ì—ì„œ ì‚¬ìš©ë©ë‹ˆë‹¤. ëˆˆìœ¼ë¡œ í•˜ë‚˜ í•˜ë‚˜ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ë“¤ì˜ ê²°ê³¼ë¥¼ í™•ì¸í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ assertë¼ëŠ” ë°©ì‹ì„ í†µí•´ ìë™ìœ¼ë¡œ í…ŒìŠ¤íŠ¸ì˜ ì„±ê³µ/ì‹¤íŒ¨ë¥¼ íŒë‹¨í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. ì €ëŠ” ì£¼ë¡œ &lt;code>github.com/stretchr/testify&lt;/code> íŒ¨í‚¤ì§€ì˜ &lt;code>assert&lt;/code> ë©”ì†Œë“œë¥¼ ì´ìš©í•˜ê³  ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://umi0410.github.io/blog/golang/how-to-backend-in-go-testcode/test-output.png"
width="1251"
height="932"
srcset="https://umi0410.github.io/blog/golang/how-to-backend-in-go-testcode/test-output_hufe5dd54340b2f486cdb532c721c19e5f_159105_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/golang/how-to-backend-in-go-testcode/test-output_hufe5dd54340b2f486cdb532c721c19e5f_159105_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="test-output.png"
class="gallery-image"
data-flex-grow="134"
data-flex-basis="322px"
>&lt;/p>
&lt;p>assertë¥¼ í†µí•´ í…ŒìŠ¤íŠ¸ì˜ ì„±ê³µ/ì‹¤íŒ¨ ì—¬ë¶€ë¥¼ íŒë‹¨í•˜ë©´ ì„±ê³µì‹œì—ëŠ” í¬ê²Œ stdoutì„ í™•ì¸í•  í•„ìš” ì—†ê³ , ì‹¤íŒ¨í•œ ê²½ìš°ì—ëŠ” ê·¸ê²ƒì— ëŒ€í•œ ì—ëŸ¬ ë©”ì‹œì§€ë“¤ë§Œ í™•ì¸í•˜ë©´ ë˜ê¸° ë•Œë¬¸ì— í¸ë¦¬í•©ë‹ˆë‹¤. ë§Œì•½ ë¡œê·¸ë‚˜ í”„ë¦°íŠ¸ ë¬¸ì„ í†µí•´ ìˆ˜ì‘ì—…ìœ¼ë¡œ í…ŒìŠ¤íŠ¸ ê²°ê³¼ë¥¼ íŒë‹¨í•´ì•¼í•œë‹¤ë©´&amp;hellip; ë§¤ë²ˆ í…ŒìŠ¤íŠ¸ë§ˆë‹¤ ë„ˆë¬´ ë¶ˆí¸í•˜ê² ì£ ?!&lt;/p>
&lt;h2 id="golangì—ì„œ-mocking-ì´ìš©í•˜ê¸°">Golangì—ì„œ Mocking ì´ìš©í•˜ê¸°&lt;/h2>
&lt;p>ì´ë²ˆì—” Golangì—ì„œ Mockingì„ ì´ìš©í•˜ëŠ” ë°©ë²•ì„ ì¢€ ë” ìì„¸íˆ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤. golangì—ì„œ Mockingì„ ì´ìš©í•˜ëŠ” ë°©ë²•ì€ í¬ê²Œ 3ê°€ì§€ë¡œ ë‚˜ëˆŒ ìˆ˜ ìˆì„ ê²ƒ ê°™ìŠµë‹ˆë‹¤.&lt;/p>
&lt;ol>
&lt;li>ì§ì ‘ Mock type êµ¬í˜„í•˜ê¸°&lt;/li>
&lt;li>&lt;code>golang/mock&lt;/code> ì¦‰ &lt;code>gomock&lt;/code> í”„ë ˆì„ì›Œí¬ ì´ìš©í•˜ê¸°&lt;/li>
&lt;li>&lt;code>stretchr/testify/mock&lt;/code> í”„ë ˆì„ì›Œí¬ ì´ìš©í•˜ê¸°&lt;/li>
&lt;/ol>
&lt;p>ìë°”ì˜ ê²½ìš° ë”°ë¡œ ë¯¸ë¦¬ mock íƒ€ì…(ì¦‰ ê°€ì§œ íƒ€ì…)ì„ ì‘ì„±í•´ë†“ì§€ ì•Šë”ë¼ë„ ê·¸ë¦¬ê³  ê¸°ì¡´ íƒ€ì…ì´ interfaceê°€ ì•„ë‹Œ concreteí•œ ì¼ë°˜ classì´ë”ë¼ë„ ìƒì† í˜¹ì€ í”„ë¡ì‹œë¥¼ í†µí•´ mock íƒ€ì…ì„ ì´ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë°˜ë©´ Golangì€ íˆ¬ëª…í•œ ë™ì‘ê³¼ ì—„ê²©í•œ íƒ€ì…ì´ íŠ¹ì§•ì¸ ë§Œí¼ í…ŒìŠ¤íŠ¸ ì§„í–‰ ì‹œì— ìë™ìœ¼ë¡œ ì ì ˆí•œ mock íƒ€ì…ì„ ìƒì„±í•˜ê±°ë‚˜ í”„ë¡ì‹œë¥¼ ì´ìš©í•˜ê±°ë‚˜ interfaceê°€ ì•„ë‹Œ structì— ë‹¤ë¥¸ typeì˜ structë¥¼ í• ë‹¹í•  ìˆ˜ë„ ì—†ìŠµë‹ˆë‹¤. ë”°ë¼ì„œ Goì—ì„œ mockingì„ ì´ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” ì•„ë˜ì™€ ê°™ì€ ì œì•½ ì¡°ê±´ë“¤ì´ ì¡´ì¬í•©ë‹ˆë‹¤. ì´ëŸ¬í•œ ì ì„ ìƒê°í•´ë³¸ë‹¤ë©´ Goì—ì„œëŠ” Mockingì„ ì´ìš©í•˜ëŠ” ê²ƒì€ ë‹¤ë¥¸ ì–¸ì–´ì— ë¹„í•´ ì‰¬ìš´ í¸ì€ ì•„ë‹Œ ê²ƒì²˜ëŸ¼ ëŠê»´ì§€ê¸°ë„ í•©ë‹ˆë‹¤.&lt;/p>
&lt;ul>
&lt;li>interfaceë¡œ ì„ ì–¸ëœ ë³€ìˆ˜ì—ë§Œ mock typeì„ í• ë‹¹í•  ìˆ˜ ìˆë‹¤.&lt;/li>
&lt;li>mock typeì„ ì§ì ‘ ì •ì˜í•˜ê±°ë‚˜ mocking frameworkì„ ì´ìš©í•´ ì½”ë“œë¥¼ ìƒì„±í•œë‹¤.(í…ŒìŠ¤íŠ¸ ì§„í–‰ ì‹œ ìë™ì´ ì•„ë‹˜. ì§ì ‘ ìš°ë¦¬ê°€ ì‹¤í–‰ì‹œì¼œì•¼í•¨.)&lt;/li>
&lt;/ul>
&lt;p>ì£¼ë¡œ 1ë²ˆ(ì§ì ‘ Mock type êµ¬í˜„í•˜ê¸°) ê°™ì€ ê²½ìš°ëŠ” ì´ mock íƒ€ì…ì´ ìš°ë¦¬ ì„œë¹„ìŠ¤ì—ì„œ ìì£¼ ì‚¬ìš©ë  ê²ƒì´ê³  ê·¸ëƒ¥ ì˜ˆìƒì¹˜ëª»í•œ callì´ë‚˜ missing call(í˜¸ì¶œë˜ê¸¸ ì˜ˆìƒí–ˆì§€ë§Œ í˜¸ì¶œë˜ì§€ ì•ŠëŠ” ê²½ìš°)ì— ëŒ€í•œ ëŒ€ì‘ì´ í•„ìš” ì—†ëŠ” ê²½ìš° ì‚¬ìš©í•˜ë©´ ì¢‹ì„ ê²ƒ ê°™ìŠµë‹ˆë‹¤. ë°˜ë©´ 2, 3ë²ˆì€ ì´ë²ˆ í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•œ 1íšŒì„± mockingì¸ ê²½ìš° ë§ì´ ì‚¬ìš©ë˜ê¸°ë„ í•˜ê³  mock íƒ€ì…ì˜ ë©”ì†Œë“œì— ëŒ€í•œ unexpected callì´ë‚˜ missing call ì— ëŒ€í•œ ëŒ€ì‘ì„ ìˆ˜í–‰í•˜ê³ ìí•˜ëŠ” ê²½ìš° ì´ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>ì¶”ê°€ì ìœ¼ë¡œ 1ë²ˆ ë°©ì‹ì´ ì•„ë‹Œ 2, 3 ë²ˆ ë°©ì‹ì²˜ëŸ¼ ëª¨í‚¹ í”„ë ˆì„ì›Œí¬ë¥¼ ì´ìš©í•˜ëŠ” ê²Œ ë” í¸í–ˆë˜ ì ì´ ìˆëŠ”ë°ìš”. ë°”ë¡œ ë©”ì†Œë“œê°€ ì—¬ëŸ¬ ê°œ ì¡´ì¬í•˜ëŠ” íƒ€ì…ì„ ëª¨í‚¹í•  ë•Œ ì…ë‹ˆë‹¤. Golangì´ ì§€í–¥í•˜ëŠ” ë°©í–¥ ìì²´ê°€ interfaceëŠ” ë§ì€ ë©”ì†Œë“œë¥¼ ê°–ì§€ ì•ŠëŠ”ë‹¤ëŠ” ê²ƒì´ê¸´ í•˜ì§€ë§Œ ë­.. ê²½ìš°ì— ë”°ë¼ ë©”ì†Œë“œê°€ ë§ì•„ì§ˆ ìˆ˜ë„ ìˆì£  ã…ã…. interfaceë¥¼ ëª¨í‚¹í•˜ê¸° ìœ„í•´ ë³„ë¡œ í…ŒìŠ¤íŠ¸ ì‹œì— í•„ìš”ë„ ì—†ëŠ” ë©”ì†Œë“œë“¤ì„ êµ¬í˜„í•˜ëŠ” ê²ƒì€ ê½¤ë‚˜ ê·€ì°®ìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ mocking í”„ë ˆì„ì›Œí¬ë“¤ì„ ì´ìš©í•˜ë©´ ê¸°ë³¸ì ìœ¼ë¡œ ëª¨í‚¹í•˜ë ¤ëŠ” interfaceë“¤ì˜ ë©”ì†Œë“œë“¤ì€ ëª¨ë‘ êµ¬í˜„ë˜ê³ , ìš°ë¦¬ëŠ” í•„ìš”í•œ ê²½ìš°ì—ë§Œ ì¶”ê°€ì ìœ¼ë¡œ êµ¬í˜„ì„ í•´ë‚˜ê°€ëŠ” í˜•íƒœì´ë¯€ë¡œ ëª¨í‚¹ í”„ë ˆì„ì›Œí¬ë¥¼ ì´ìš©í•˜ëŠ” ê²ƒì´ í¸ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>ë°˜ë©´ mocking í”„ë ˆì„ì›Œí¬ë¥¼ ì´ìš©í•  ë•Œì˜ ë‹¨ì ì€ í”„ë ˆì„ì›Œí¬ ì‚¬ìš©ë²•ì„ ìµí˜€ì•¼í•œë‹¤ëŠ” ê²ƒì´ë‚˜ ë‚´ê°€ ì§ì ‘ ì‘ì„±í•˜ì§€ ì•Šì€ ì½”ë“œê°€ ë§ì´ ìƒì„±ëœë‹¤ëŠ” ì ì´ ë˜ê² ë„¤ìš”. ê·¸ëŸ¼ ì´ì œ &lt;code>gomock&lt;/code>ê³¼ &lt;code>testify/mock&lt;/code>ì„ ë¹„êµí•´ë³´ê² ìŠµë‹ˆë‹¤. &lt;a class="link" href="https://blog.codecentric.de/2019/07/gomock-vs-testify/" target="_blank" rel="noopener"
>&amp;ldquo;GoMock vs. Testify: Mocking frameworks for Go&amp;rdquo; - codecentric blog&lt;/a>ì—ë„ ë‚´ìš©ì´ ì˜ ì •ë¦¬ë˜ì–´ìˆìœ¼ë‹ˆ ì°¸ê³ í•´ë³´ì„¸ìš”.&lt;/p>
&lt;h3 id="golang-mocking-í”„ë ˆì„ì›Œí¬-gomock-vs-testifymock-ë¹„êµ">Golang mocking í”„ë ˆì„ì›Œí¬ gomock vs testify/mock ë¹„êµ&lt;/h3>
&lt;p>&lt;img src="https://umi0410.github.io/blog/golang/how-to-backend-in-go-testcode/star-comparison.png"
width="806"
height="585"
srcset="https://umi0410.github.io/blog/golang/how-to-backend-in-go-testcode/star-comparison_hu3121147bea7725a070fb77a748a94b6d_46090_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/golang/how-to-backend-in-go-testcode/star-comparison_hu3121147bea7725a070fb77a748a94b6d_46090_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="star-comparison.png"
class="gallery-image"
data-flex-grow="137"
data-flex-basis="330px"
>&lt;/p>
&lt;p>golangì—ì„œ ì§ì ‘ ì œì‘í•˜ëŠ” &lt;code>gomock&lt;/code>ê³¼ &lt;code>stretchr/testify&lt;/code>ë¼ëŠ” ìœ ëª…í•œ í…ŒìŠ¤íŠ¸ ê´€ë ¨ ë ˆí¬ì§€í† ë¦¬ì˜ í•˜ìœ„ íŒ¨í‚¤ì§€ì¸ &lt;code>testify/mock&lt;/code> ì€ Golangì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ê°€ì¥ ìœ ëª…í•œ ëª¨í‚¹ í”„ë ˆì„ì›Œí¬ë“¤ì…ë‹ˆë‹¤. ê¹ƒí—™ ìŠ¤íƒ€ë§Œ ë†“ê³  ë´¤ì„ ë•Œì—ëŠ” testifyê°€ í›¨ì”¬ ë§ì§€ë§Œ testifyëŠ” ë‹¤ë¥¸ í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•œ íŒ¨í‚¤ì§€ë“¤ë„ í•¨ê»˜ ìˆì–´ì„œ ì •í™•íˆ ë¹„êµëŠ” ì•ˆë˜ê² ë„¤ìš”.&lt;/p>
&lt;p>ì €ë„ ë‘ í”„ë ˆì„ì›Œí¬ì˜ íŠ¹ì§•ì— ëŒ€í•´ ì •í™•íˆëŠ” ëª¨ë¥´ì§€ë§Œ ê°„ë‹¨íˆ ì•„ëŠ” ì„ ì—ì„œ ì£¼ê´€ì ì¸ ì¶”ì²œì„ í•˜ìë©´ &lt;code>gomock&lt;/code>ì„ ì¶”ì²œë“œë¦¬ê² ìŠµë‹ˆë‹¤. &lt;code>testify/mock&lt;/code>ì— ë¹„í•´ ì›ë³¸ interface íƒ€ì…ì„ ë°”íƒ•ìœ¼ë¡œ ëª¨í‚¹ ë©”ì†Œë“œë¥¼ ì¢€ ë” safeí•˜ê²Œ ì •ì˜í•  ìˆ˜ ìˆì—ˆë˜ ê²ƒ ê°™ìŠµë‹ˆë‹¤. ë‹¤ë§Œ ì •ë§ ë­˜ ì“°ë“  ìƒê´€ ì—†ì„ ê²ƒ ê°™ìŠµë‹ˆë‹¤. ê°ì ì¡°ê¸ˆì˜ ì¥ë‹¨ì ì€ ìˆì§€ë§Œ ë­ í•˜ë‚˜ê°€ íŠ¹ì¶œë‚˜ê±°ë‚˜ ëª¨ìë€ ëŠë‚Œì€ ì•„ë‹™ë‹ˆë‹¤. ë‘ í”„ë ˆì„ì›Œí¬ì˜ íŠ¹ì§•ì„ ì•„ë˜ì™€ ê°™ì´ ì •ë¦¬í•´ë´¤ìŠµë‹ˆë‹¤. (ì°¸ê³ ë¡œ ì•Œì•„ë³´ë‹ˆ ì œê°€ ì¢‹ì•„í•˜ëŠ” ì„œë¹„ìŠ¤ì¸ &lt;code>ArgoCD&lt;/code> (K8sì˜ GitOps ë°©ì‹ì˜ ë°°í¬ ë„êµ¬)ì—ì„œëŠ” &lt;code>testify/mock&lt;/code>ì„ ì´ìš©í•˜ë”êµ°ìš”&amp;hellip; T.T)&lt;/p>
&lt;ul>
&lt;li>
&lt;p>ì½”ë“œ ìƒì„± ë„êµ¬ë¥¼ ì´ìš©í•´ ì›í•˜ëŠ” interfaceì˜ mock typeì„ ì •ì˜, êµ¬í˜„í•˜ëŠ” ì½”ë“œë¥¼ ìƒì„±í•˜ëŠ” ê²ƒì´ &lt;code>testify/mock&lt;/code>ì´ ì¢€ ë” í¸í•¨.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>testify/mock&lt;/code> ì´ ì¢€ ë” ë©”ì†Œë“œë¥¼ mockingí•˜ê³  expectationì„ ì„¤ì •í•˜ëŠ” ê²Œ ì§ê´€ì ì´ê³  ê°„ê²°í•˜ë‹¤. ì´ ë¶€ë¶„ì´ &lt;code>testify/mock&lt;/code>ì˜ í° ì¥ì ì¸ë“¯ í•¨.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>testify/mock&lt;/code> ì˜ ì½”ë“œ ìƒì„± ë„êµ¬ì¸ &lt;code>mockery&lt;/code>ê°€ &lt;code>gomock&lt;/code>ì˜ ì½”ë“œ ìƒì„± ë„êµ¬ì¸ &lt;code>mockgen&lt;/code>ë³´ë‹¤ ì“°ê¸° í¸í•˜ë‹¤ëŠ” ì˜ê²¬ì´ ìˆìŒ. (ë³¸ì¸ì€ ì˜ ì²´ê° ëª»í•˜ê² ìŒ)&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>gomock&lt;/code>ì´ ì¢€ ë” type safeí•˜ê²Œ ëª¨í‚¹ ì½”ë“œë¥¼ ì‘ì„±í•  ìˆ˜ ìˆë‹¤. ì¼ë‹¨ ë©”ì†Œë“œê°€ gomockì€ íƒ€ì…ì„ ê¸°ë°˜ìœ¼ë¡œ ìë™ì™„ì„± ë˜ì§€ë§Œ &lt;code>testify/mock&lt;/code>ì€ ë©”ì†Œë“œ ëª…ì„ ë¬¸ìì—´ë¡œ ë°›ìŒ. ì´ ë¶€ë¶„ì´ gomockì˜ í° ì¥ì ì¸ë“¯ í•¨.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ë‘ í”„ë ˆì„ì›Œí¬ ëª¨ë‘ unexpected callì´ë‚˜ missing call, íŠ¹ì • íšŸìˆ˜ ë§Œí¼ call ë“±ë“±ì˜ ê¸°ëŠ¥ë“¤ì€ ì œê³µí•˜ëŠ” ê²ƒ ê°™ìŒ. ë‹¨ ì¡°ì‚¬í•œ ë°”ë¡œëŠ” &lt;code>testify/mock&lt;/code>ì€ ëª¨í‚¹ ë©”ì†Œë“œ êµ¬í˜„ ì‹œì— ì¸ì ê°’ì„ ì´ìš©í•  ìˆ˜ ì—†ìŒ.&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>ê·¸ëŸ¼ ë§ë¡œë§Œ ì„¤ëª…í•˜ì§€ ë§ê³  ì½”ë“œë¡œ í•œ ë²ˆ ê°„ë‹¨í•˜ê²Œ ë¹„êµë“œë¦¬ê² ìŠµë‹ˆë‹¤!&lt;/p>
&lt;h3 id="1-ì§ì ‘-mock-íƒ€ì…-ì‘ì„±">1. ì§ì ‘ mock íƒ€ì… ì‘ì„±&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">type&lt;/span> &lt;span class="nx">ManualMockUserRepository&lt;/span> &lt;span class="kd">struct&lt;/span>&lt;span class="p">{}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">m&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">ManualMockUserRepository&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nf">Create&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">input&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">UserCreateInput&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="nx">ent&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">User&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">error&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Info&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;ì§ì ‘ Mocking. Args: &amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">input&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">ent&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">User&lt;/span>&lt;span class="p">{},&lt;/span> &lt;span class="kc">nil&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">TestUserService_CreateWithManualMock&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">t&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">testing&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">T&lt;/span>&lt;span class="p">){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">s&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nf">NewUserService&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">new&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">ManualMockUserRepository&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">_&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">s&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Create&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">UserCreateInput&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="nx">ID&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;jinsu_umi&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">Name&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;Jinsu Park&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">Password&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;123123123&amp;#34;&lt;/span>&lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ì´ëŸ° ì‹ìœ¼ë¡œ ë¡œê·¸ë¥¼ í†µí•´ í•˜ë‚˜ í•˜ë‚˜ í…ŒìŠ¤íŠ¸ ê²°ê³¼ë¥¼ í™•ì¸í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">//t.Log(&amp;#34;ì—ëŸ¬ê°€ ì¡´ì¬í•˜ì§€ ì•Šì•„ì•¼í•©ë‹ˆë‹¤.&amp;#34;)
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">//t.Log(&amp;#34;err == nil ì¸ì§€ í™•ì¸í•˜ì‹­ì‹œì˜¤. err == nil: &amp;#34; , err == nil)
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">// assertë¥¼ ì´ìš©í•´ ìë™ìœ¼ë¡œ ì„±ê³µ/ì‹¤íŒ¨ë¥¼ íŒë‹¨í•˜ì‹­ì‹œì˜¤.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">assert&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">NoError&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">t&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ì•ì„œ ë§ì”€ë“œë¦° ëŒ€ë¡œ ì§ì ‘ mock typeì„ ì‘ì„±í•˜ëŠ” ê²½ìš°ì…ë‹ˆë‹¤. ì •ë§ ì •ë§ safeí•˜ì§€ë§Œ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ë§ˆë‹¤ ë©”ì†Œë“œê°€ returní•˜ëŠ” ê°’ì´ë‚˜ ë™ì‘ì„ ë‹¤ë¥´ê²Œ í•˜ê³  ì‹¶ë‹¤ë©´ ì½”ë“œê°€ ë³µì¡í•´ì§€ê±°ë‚˜ í•œ interfaceì— ëŒ€í•œ ë‹¤ì–‘í•œ mock typeì„ ì—¬ëŸ¬ ê°œ ì‘ì„±í•´ì•¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;h3 id="2-testifymock-ì´ìš©">2. &lt;code>testify/mock&lt;/code> ì´ìš©&lt;/h3>
&lt;blockquote>
&lt;p>testify/mockì„ ì´ìš©í•˜ëŠ” ê²½ìš° &lt;a class="link" href="https://github.com/vektra/mockery" target="_blank" rel="noopener"
>mockery&lt;/a>ë¼ê³  í•˜ëŠ” ì½”ë“œ ìƒì„± CLI ë„êµ¬ë¥¼ ì´ìš©í•˜ë©´ í¸ë¦¬í•©ë‹ˆë‹¤. ë³¸ ì½”ë“œëŠ” mockeryë¥¼ í†µí•´ ìƒì„±ëœ mock íƒ€ì…ì„ ì´ìš©í–ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;/blockquote>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">TestUserService_CreateWithMockery&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">t&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">testing&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">T&lt;/span>&lt;span class="p">){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">mockUserRepository&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">MockUserRepository&lt;/span>&lt;span class="p">{}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// methodë¥¼ ë¬¸ìì—´ ìì²´ë¡œ ì„¤ì •í•´ì•¼í•´ì„œ safeí•˜ì§€ ì•ŠìŒ.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">mockUserRepository&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">On&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Create&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">mock&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Anything&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">Run&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">args&lt;/span> &lt;span class="nx">mock&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Arguments&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">t&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;testify/mockê³¼ mockeryë¥¼ ì´ìš©í•œ Mocking. Args: &amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">args&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}).&lt;/span>&lt;span class="nf">Return&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">ent&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">User&lt;/span>&lt;span class="p">{},&lt;/span> &lt;span class="kc">nil&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// í•´ë‹¹ ì´ë¦„ì˜ ìœ ì €ê°€ ìˆëŠ”ì§€ í™•ì¸
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">s&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nf">NewUserService&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">mockUserRepository&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">_&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">s&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Create&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">UserCreateInput&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="nx">ID&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;jinsu_umi&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">Name&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;Jinsu Park&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">Password&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;123123123&amp;#34;&lt;/span>&lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">assert&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">NoError&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">t&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ì•ì„œ ë§ì”€ë“œë¦° ëŒ€ë¡œ ë©”ì†Œë“œ ëª…ì´ unsafeí•˜ê²Œ &lt;code>.On(methodName string, ...)&lt;/code>ì˜ í˜•íƒœë¡œ ë¬¸ìì—´ì„ ì´ìš©í•˜ê³  ìˆìŠµë‹ˆë‹¤. argument ë˜í•œ ë‹¨ìˆœíˆ mock.Argumentsë¥¼ í†µí•´ ì–»ì„ ìˆ˜ ìˆê³  ì´ì— ëŒ€í•´ &lt;code>.Get&lt;/code>ì„ í†µí•´ ì–»ëŠ” ê°’ì€ &lt;code>interface{}&lt;/code>ì´ê¸° ë•Œë¬¸ì— type assertionì„ ê±°ì³ì•¼ë§Œ ë‚´ë¶€ ê°’ì„ ë³µì‚¬í•´ì„œ ì´ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;h3 id="3-gomock-ì´ìš©">3. &lt;code>gomock&lt;/code> ì´ìš©&lt;/h3>
&lt;blockquote>
&lt;p>gomockì€ mockgen(ì°¸ê³ : &lt;a class="link" href="https://github.com/golang/mock" target="_blank" rel="noopener"
>https://github.com/golang/mock&lt;/a>)ì´ë¼ëŠ” ì½”ë“œ ìƒì„± CLI ë„êµ¬ë¥¼ ì´ìš©í•©ë‹ˆë‹¤. ë³¸ ì½”ë“œëŠ” mockgenì„ í†µí•´ ìƒì„±ëœ mock íƒ€ì…ì„ ì´ìš©í–ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;/blockquote>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">TestUserService_CreateWithMockgen&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">t&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">testing&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">T&lt;/span>&lt;span class="p">){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// gomock controllerì„ ë§Œë“¤ê³  Finish ì‹œì¼œì£¼ëŠ” ë“±ì˜ ë¶ˆí¸í•¨ ì¡´ì¬.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">ctrl&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">gomock&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">NewController&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">t&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">defer&lt;/span> &lt;span class="nx">ctrl&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Finish&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">mockUserRepository&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nf">NewGomockRepository&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">ctrl&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ì›ë˜ì˜ typeì„ ê¸°ë°˜ìœ¼ë¡œ methodê°€ safeí•˜ê²Œ ì œê³µë¨.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">mockUserRepository&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">EXPECT&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="nf">Create&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">gomock&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Any&lt;/span>&lt;span class="p">()).&lt;/span>&lt;span class="nf">DoAndReturn&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">input&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">UserCreateInput&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="nx">ent&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">User&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">error&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">t&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Gomockì„ ì´ìš©í•œ Mocking. Args: &amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">input&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">ent&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">User&lt;/span>&lt;span class="p">{},&lt;/span> &lt;span class="kc">nil&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// í•´ë‹¹ ì´ë¦„ì˜ ìœ ì €ê°€ ìˆëŠ”ì§€ í™•ì¸
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">s&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nf">NewUserService&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">mockUserRepository&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">_&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">s&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Create&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">UserCreateInput&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="nx">ID&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;jinsu_umi&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">Name&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;Jinsu Park&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">Password&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;123123123&amp;#34;&lt;/span>&lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">assert&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">NoError&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">t&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>gomock controllerë¼ëŠ” ë…€ì„ì„ ìƒì„±í•´ì£¼ê³  finish ì‹œì¼œì¤˜ì•¼í•˜ëŠ” ë¶ˆí¸í•¨ì´ ìƒê²¨ë‚¬ìŠµë‹ˆë‹¤ë§Œ ëª¨í‚¹í•˜ê³ ì í•˜ëŠ” ë©”ì†Œë“œë¥¼ safeí•˜ê²Œ ì œê³µë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. &lt;code>.DoAndReturun()&lt;/code> ë©”ì†Œë“œì˜ ì¸ìë¡œì„œ ì–´ë–¤ í•¨ìˆ˜ë¡œ ëª¨í‚¹í•  ì§€ë¥¼ ì „ë‹¬í•˜ëŠ”ë° ì‚¬ì‹¤ ì´ í•¨ìˆ˜ ìì²´ë¥¼ interface{}ê°€ ë°›ê¸° ë•Œë¬¸ì— ì¸ìëŠ” ì œê°€ ì •ì˜í•˜ê¸° ë‚˜ë¦„ì´ë¼ ì›ë³¸ interfaceì™€ ì‹±í¬ë˜ì§€ëŠ” ì•ŠëŠ” ì•½ê°„ì˜ ì•„ì‰¬ì›€ì´ ì¡´ì¬í•©ë‹ˆë‹¤. í•˜ì§€ë§Œ &lt;code>testify/mock&lt;/code>ì²˜ëŸ¼ argsì˜ ìˆœì„œì— ë”°ë¼ &lt;code>.Get()&lt;/code>ì„ í•œ ë’¤ &lt;code>interface{}&lt;/code> íƒ€ì…ì˜ ê°ê°ì˜ ì¸ìë“¤ì„ type assertioní•  í•„ìš”ë„ ì—†ê³  ê°€ë…ì„±ì´ ë” ì¢‹ë‹¤ê³  ìƒê°í•©ë‹ˆë‹¤.&lt;/p>
&lt;h2 id="í…ŒìŠ¤íŠ¸-ì½”ë“œ-ì‘ì„±í•´ë³´ê¸°">í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±í•´ë³´ê¸°&lt;/h2>
&lt;ol>
&lt;li>&lt;code>*_test.go&lt;/code> í˜•íƒœì˜ íŒŒì¼ ìƒì„±í•˜ê¸°&lt;/li>
&lt;li>func &lt;code>Test* (t *testing.T){...}&lt;/code> í˜•íƒœì˜ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ì‘ì„±í•˜ê¸°&lt;/li>
&lt;li>ë¡œê·¸ë‚˜ Printë¬¸ì´ ì•„ë‹Œ assert ë¬¸ì„ ì´ìš©í•´ í…ŒìŠ¤íŠ¸ ì„±ê³µ/ì‹¤íŒ¨ íŒë‹¨ì„ ìë™í™”í•˜ê¸°&lt;/li>
&lt;/ol>
&lt;p>Golangì—ì„œ í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ í•˜ê¸° ìœ„í•´ì„  ìš°ì„  ìœ„ì˜ 3ê°€ì§€ ì‚¬í•­ë§Œ ì•Œì•„ë‘ë©´ ë©ë‹ˆë‹¤.&lt;/p>
&lt;p>ê·¸ë¦¬ê³  ì¶”ê°€ì ìœ¼ë¡œ golangì—ì„  í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ì†ì— nestedëœ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ë¥¼ ì–¼ë§ˆë“ ì§€ ì§‘ì–´ë„£ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë„ˆë¬´ë„ˆë¬´ í¸ë¦¬í•˜ì£ ~! ê·¸ëŸ¼ ì´ë²ˆì—ë„ ì½”ë“œë¡œ ì˜ˆì‹œë¥¼ ë³´ì—¬ë“œë¦¬ê² ìŠµë‹ˆë‹¤. Userì— ëŒ€í•œ Domain/Business layerì—ì„œì˜ ë„ë©”ì¸ ë£°ì„ í…ŒìŠ¤íŠ¸í•˜ëŠ” ì½”ë“œì…ë‹ˆë‹¤. Data access ê³„ì¸µì„ í†µí•´ Userê°€ ì˜ì†ì ìœ¼ë¡œ ì˜ ì €ì¥ë˜ì—ˆëŠ”ì§€ë³´ë‹¤ëŠ” ë„ë©”ì¸ ë£°ì„ í…ŒìŠ¤íŠ¸í•˜ë ¤ëŠ” ëª©ì ì´ê¸° ë•Œë¬¸ì— Data access ê³„ì¸µ(Repository)ì— ëŒ€í•´ì„œëŠ” ëª¨í‚¹ì„ ì ìš©í–ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// nested test caseë¥¼ ì‘ì„±í•˜ê³  ì‹¶ì€ ê²½ìš°. ì´ë ‡ê²Œ ì‘ì„±í•˜ì‹­ì‹œì˜¤.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">func&lt;/span> &lt;span class="nf">TestA&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">t&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">testing&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">T&lt;/span>&lt;span class="p">){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">t&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Run&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;A-a&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">t&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">testing&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">T&lt;/span>&lt;span class="p">){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">t&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Run&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;A-a-1&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">t&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">testing&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">T&lt;/span>&lt;span class="p">){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">...&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// service_test.go ì˜ˆì‹œ
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">func&lt;/span> &lt;span class="nf">TestUserService_ìœ ì €_ìƒì„±&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">t&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">testing&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">T&lt;/span>&lt;span class="p">){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// repository mocking
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">ctrl&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">gomock&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">NewController&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">t&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">defer&lt;/span> &lt;span class="nx">ctrl&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Finish&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">mockUserRepository&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nf">NewGomockRepository&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">ctrl&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ì›ë˜ì˜ typeì„ ê¸°ë°˜ìœ¼ë¡œ methodê°€ safeí•˜ê²Œ ì œê³µë¨.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">mockUserRepository&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">EXPECT&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="nf">Create&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">gomock&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Any&lt;/span>&lt;span class="p">()).&lt;/span>&lt;span class="nf">DoAndReturn&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">input&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">UserCreateInput&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="nx">ent&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">User&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">error&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">t&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Gomockì„ ì´ìš©í•œ Mocking. Args: &amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">input&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">ent&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">User&lt;/span>&lt;span class="p">{},&lt;/span> &lt;span class="kc">nil&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// í•´ë‹¹ ì´ë¦„ì˜ ìœ ì €ê°€ ìˆëŠ”ì§€ í™•ì¸
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">s&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nf">NewUserService&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">mockUserRepository&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">t&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Run&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;ì„±ê³µ&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">t&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">testing&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">T&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">_&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">s&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Create&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">UserCreateInput&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="nx">ID&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;jinsu_umi&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">Name&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;Jinsu Park&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">Password&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;123123123&amp;#34;&lt;/span>&lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">assert&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">NoError&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">t&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">t&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Run&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;ì—ëŸ¬) ë„ˆë¬´ ì§§ì€ ì•„ì´ë””&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">t&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">testing&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">T&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">_&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">s&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Create&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">UserCreateInput&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="nx">ID&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;short&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">Name&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;Jinsu Park&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">Password&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;123123123&amp;#34;&lt;/span>&lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">assert&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ErrorIs&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">t&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">ErrInvalidUserID&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">assert&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ErrorIs&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">t&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">ErrInvalidValue&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">t&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Run&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;ì—ëŸ¬) ë„ˆë¬´ ê¸´ ì´ë¦„&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">t&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">testing&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">T&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">_&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">s&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Create&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">UserCreateInput&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="nx">ID&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;jinsu_umi&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">Name&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;ë‹ˆë…¸ë§‰ì‹œë¬´ìŠ¤ ì¹´ì´ì € ì˜ì œ ì˜ëƒë„ë¥´ì•¤ ìŠ¤íŒŒë¥´íƒ€ ì£½ì§€ ì•Šì•„ ë‚˜ëŠ” ì£½ì§€ì•Šì•„ ì˜¤ì˜¤ì˜¤ì˜¤ ë‚˜ëŠ” ì¹´ì´ì € ì˜ì œ&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">Password&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;123123123&amp;#34;&lt;/span>&lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">assert&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ErrorIs&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">t&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">ErrInvalidUserName&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">assert&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ErrorIs&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">t&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">ErrInvalidValue&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">t&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Run&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;ì—ëŸ¬) ë„ˆë¬´ ì§§ì€ ë¹„ë°€ë²ˆí˜¸ë“¤&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">t&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">testing&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">T&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">errorPasswords&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;123&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;abc&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;a1b2&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;asd&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="nx">_&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">errorPassword&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="k">range&lt;/span> &lt;span class="nx">errorPasswords&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">t&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Run&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤) &amp;#34;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="nx">errorPassword&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">t&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">testing&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">T&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">_&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">s&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Create&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">UserCreateInput&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="nx">ID&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;jinsu_umi&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">Name&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;Jinsu Park&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">Password&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">errorPassword&lt;/span>&lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">assert&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ErrorIs&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">t&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">ErrInvalidPassword&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">assert&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ErrorIs&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">t&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">ErrInvalidValue&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;code>TestUserService_ìœ ì €_ìƒì„±&lt;/code> ì´ë¼ëŠ” í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ì•ˆì— ì„±ê³µí•˜ëŠ” ê²½ìš°ì™€ ì˜¬ë°”ë¥´ì§€ ì•Šì€ IDë‚˜ ì´ë¦„, ë¹„ë°€ë²ˆí˜¸ë¡œ ì¸í•´ ì—ëŸ¬ê°€ ë°œìƒí•´ì•¼í•˜ëŠ” ê²½ìš°ë¥¼ nestedëœ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ë¡œ ì‘ì„±í–ˆìŠµë‹ˆë‹¤. íŠ¹íˆë‚˜ ë¹„ë°€ë²ˆí˜¸ëŠ” í•œ ë²ˆ ë” nestedëœ ì¼€ì´ìŠ¤ë¥¼ ì‘ì„±í–ˆìŠµë‹ˆë‹¤. ê°™ì€ ë¡œì§ì„ ë‹¤ì–‘í•œ ì¸í’‹ì„ ì´ìš©í•´ í…ŒìŠ¤íŠ¸ í•˜ê³  ì‹¶ì€ ê²½ìš°ì—ëŠ” &lt;code>errorPasswords&lt;/code> ë¶€ë¶„ì²˜ëŸ¼ ì¸í’‹ í˜¹ì€ ê²°ê³¼ê°’ì„ ë°°ì—´ë¡œ ì„ ì–¸í•œ ë’¤ í…ŒìŠ¤íŠ¸ í•˜ëŠ” ê²½ìš°ë¥¼ ì¢…ì¢… ë³´ê²Œë˜ë”êµ°ìš”. (ì°¸ê³ : &amp;ldquo;&lt;a class="link" href="https://blog.golang.org/subtests" target="_blank" rel="noopener"
>Using Subtests and Sub-benchmarks&lt;/a>&amp;rdquo; - Go Blog, &amp;ldquo;&lt;a class="link" href="https://github.com/uber-go/guide/blob/master/style.md" target="_blank" rel="noopener"
>Uber Go style guide&lt;/a>&amp;ldquo;ì˜ test-tables íŒŒíŠ¸ - uber)&lt;/p>
&lt;p>&lt;img src="https://umi0410.github.io/blog/golang/how-to-backend-in-go-testcode/test-with-ide.png"
width="1184"
height="332"
srcset="https://umi0410.github.io/blog/golang/how-to-backend-in-go-testcode/test-with-ide_hu7b61495424919d2e1c8d663236a41b57_159980_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/golang/how-to-backend-in-go-testcode/test-with-ide_hu7b61495424919d2e1c8d663236a41b57_159980_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="test-with-ide.png"
class="gallery-image"
data-flex-grow="356"
data-flex-basis="855px"
>&lt;/p>
&lt;p>&lt;img src="https://umi0410.github.io/blog/golang/how-to-backend-in-go-testcode/run-each-test.png"
width="815"
height="505"
srcset="https://umi0410.github.io/blog/golang/how-to-backend-in-go-testcode/run-each-test_hu619b36e63953e285c6c9c2ff6f3f94e9_98540_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/golang/how-to-backend-in-go-testcode/run-each-test_hu619b36e63953e285c6c9c2ff6f3f94e9_98540_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="run-each-test.png"
class="gallery-image"
data-flex-grow="161"
data-flex-basis="387px"
>&lt;/p>
&lt;p>ê²Œë‹¤ê°€ GoLandë¥¼ ë¹„ë¡¯í•´ Goì–¸ì–´ë¥¼ ì§€ì›í•˜ëŠ” IDEë¥¼ ì´ìš© ì¤‘ì´ì‹œë¼ë©´ ë†’ì€ í™•ë¥ ë¡œ ì´ë ‡ê²Œ í¸ë¦¬í•˜ê²Œ í…ŒìŠ¤íŠ¸ë¥¼ ì‹¤í–‰í•˜ê³  ê²°ê³¼ë¥¼ í™•ì¸í•˜ì‹¤ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. ê·¸ë¦¬ê³  ë‘ ë²ˆì§¸ ì‚¬ì§„ì— ë³´ì´ë“¯ ë‚´ë¶€ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ì— ëŒ€í•œ ë‹¨ì¼ ì‹¤í–‰ë„ ê°€ëŠ¥í•˜ë‹¤ëŠ” ì ~! ì´ì œ ì¢€ ë” í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì‰½ê²Œ ì´ìš©í•  ìˆ˜ ìˆê² êµ°ìš”. ã…ã…&lt;/p>
&lt;h2 id="ë§ˆì¹˜ë©°">ë§ˆì¹˜ë©°&lt;/h2>
&lt;p>ì´ë²ˆ í¸ì„ ì¤€ë¹„í•˜ë©´ì„œ ì²˜ìŒ ìœ ë‹› í…ŒìŠ¤íŠ¸ë¥¼ ì‘ì„±í•  ë•Œ ì°¾ì•„ë´¤ë˜ ìë£Œë“¤ë„ ë‹¤ì‹œ í•œ ë²ˆ ì½ì–´ë³´ê³  etcdë‚˜ argocd ê°™ì€ Goë¡œ ì‘ì„±ëœ ìœ ëª… ì˜¤í”ˆ ì†ŒìŠ¤ë“¤ì€ ì–´ë–»ê²Œ í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì‘ì„±í•˜ëŠ”ì§€ë„ ì°¾ì•„ë³´ëŠ” ë“± ê½¤ ì¡°ì‚¬ë¥¼ ë§ì´ í•˜ê²Œëœ ê²ƒ ê°™ìŠµë‹ˆë‹¤. ì•„ë¬´ë˜ë„ í…ŒìŠ¤íŠ¸ ì½”ë“œë¼ëŠ” ê²ƒì´ ì–´ë– í•œ ë°©í–¥ìœ¼ë¡œ í…ŒìŠ¤íŠ¸ ì½”ë“œì™€ ê°œë°œì„ ì„¤ê³„í•´ë‚˜ê°ˆì§€, ì–´ë””ê¹Œì§€ í…ŒìŠ¤íŠ¸í•  ì§€ì™€ ê°™ì€ ë°©ë²•ë¡ ì ì¸ ë¶€ë¶„ê³¼ í…ŒìŠ¤íŠ¸ í”„ë ˆì„ì›Œí¬ ìì²´ì˜ ì‚¬ìš©ë²•, ëª¨í‚¹ í”„ë ˆì„ì›Œí¬ ì‚¬ìš©ë²•ê³¼ ê°™ì€ ì•½ê°„ì€ Golang íŠ¹í™”ì ì¸ ë‚´ìš© ë“±ë“± ë‹¤ì–‘í•œ ì˜ì—­ì— ê±¸ì¹œ ë‚´ìš©ì´ë¼ ì‰½ì§„ ì•Šì€ ê²ƒ ê°™ìŠµë‹ˆë‹¤. ê·¸ë˜ë„ ì´ë²ˆì„ ê¸°íšŒ ì‚¼ì•„ ì €ë„ í‰ì†Œì— ê¶ê¸ˆí–ˆë˜ mockery vs testify/mock ì˜ ë¹„êµë„ í•´ë³¼ ìˆ˜ ìˆì—ˆë˜ ê²ƒ ê°™ê³ , mockingì„ ì ìš©í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ ì¢€ ë” ìì„¸íˆ ì•Œì•„ë³¼ ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤! ê°ì‚¬í•©ë‹ˆë‹¤~!&lt;/p>
&lt;p>&lt;strong>ì˜ˆì‹œ ì½”ë“œ&lt;/strong>: &lt;a class="link" href="https://github.com/umi0410/how-to-backend-in-go/tree/master/testcode" target="_blank" rel="noopener"
>https://github.com/umi0410/how-to-backend-in-go/tree/master/testcode&lt;/a>&lt;/p>
&lt;h2 id="ì°¸ê³ -ìë£Œ">ì°¸ê³  ìë£Œ&lt;/h2>
&lt;ul>
&lt;li>What&amp;rsquo;s the difference between a mock &amp;amp; stub? - &lt;a class="link" href="https://stackoverflow.com/questions/3459287/whats-the-difference-between-a-mock-stub" target="_blank" rel="noopener"
>https://stackoverflow.com/questions/3459287/whats-the-difference-between-a-mock-stub&lt;/a>&lt;/li>
&lt;li>gomock vs testify - &lt;a class="link" href="https://blog.codecentric.de/2019/07/gomock-vs-testify/" target="_blank" rel="noopener"
>https://blog.codecentric.de/2019/07/gomock-vs-testify/&lt;/a>&lt;/li>
&lt;li>mockery Github Repository - &lt;a class="link" href="https://github.com/vektra/mockery" target="_blank" rel="noopener"
>https://github.com/vektra/mockery&lt;/a>&lt;/li>
&lt;li>stretchr/testify Github Repository - &lt;a class="link" href="https://github.com/stretchr/testify" target="_blank" rel="noopener"
>https://github.com/stretchr/testify&lt;/a>&lt;/li>
&lt;li>gomock Github Repository - &lt;a class="link" href="https://github.com/golang/mock" target="_blank" rel="noopener"
>https://github.com/golang/mock&lt;/a>&lt;/li>
&lt;li>Using Subtests and Sub-benchmarks - &lt;a class="link" href="https://blog.golang.org/subtests" target="_blank" rel="noopener"
>https://blog.golang.org/subtests&lt;/a>&lt;/li>
&lt;li>uber-go Guide - &lt;a class="link" href="https://github.com/uber-go/guide/blob/master/style.md" target="_blank" rel="noopener"
>https://github.com/uber-go/guide/blob/master/style.md&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Golangìœ¼ë¡œ ë°±ì—”ë“œ ê°œë°œí•˜ê¸° - 1. ë°ì´í„°ë² ì´ìŠ¤ ì‘ì—…í•˜ê¸° (Ent í”„ë ˆì„ì›Œí¬ ì´ìš©)</title><link>https://umi0410.github.io/blog/golang/how-to-backend-in-go-db/</link><pubDate>Sat, 03 Jul 2021 12:46:54 +0900</pubDate><guid>https://umi0410.github.io/blog/golang/how-to-backend-in-go-db/</guid><description>&lt;img src="https://umi0410.github.io/blog/golang/how-to-backend-in-go-db/o2m-relation.png" alt="Featured image of post Golangìœ¼ë¡œ ë°±ì—”ë“œ ê°œë°œí•˜ê¸° - 1. ë°ì´í„°ë² ì´ìŠ¤ ì‘ì—…í•˜ê¸° (Ent í”„ë ˆì„ì›Œí¬ ì´ìš©)" />&lt;h2 id="ì‹œì‘í•˜ë©°">ì‹œì‘í•˜ë©°&lt;/h2>
&lt;p>Go ì–¸ì–´ë¥¼ ì²˜ìŒ ì‹œì‘í•œ ì§€ ë²Œì¨ 1ë…„ì´ ì§€ë‚¬ë‹¤ë‹ˆ ì‹œê°„ì´ ì°¸ ë¹ ë¥¸ ê²ƒ ê°™ìŠµë‹ˆë‹¤! JavaëŠ” Springì´ë¼ê³ í•˜ëŠ” ê±°ëŒ€í•œ í”„ë ˆì„ì›Œí¬ê°€ ìë¦¬ ì¡ê³  ìˆì–´ ë”±íˆ ì–´ë–¤ í”„ë ˆì„ì›Œí¬ë‚˜ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í• ì§€ì— ëŒ€í•œ ê³ ë¯¼ì´ ë³„ë¡œ í•„ìš” ì—†ì—ˆë˜ ê²ƒ ê°™ìŠµë‹ˆë‹¤. ë°˜ë©´ Go ì–¸ì–´ëŠ” ì •í˜•í™”ëœ ì•„í‚¤í…ì³ì— ëŒ€í•œ ë‚´ìš©ì´ ë³„ë¡œ ì—†ê³  í”„ë ˆì„ì›Œí¬ë‚˜ ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ ëŒ€ì„¸ë„ ì°¸ ë¹ ë¥´ê²Œ ë³€í•˜ë‹¤ë³´ë‹ˆ ê·¸ê²Œ ì¥ì ì´ë¼ë©´ ì¥ì ì´ê² ì§€ë§Œ ì´ë˜ì €ë˜ ê³ ìƒë„ í–ˆë„¤ìš”.&lt;/p>
&lt;p>ê²Œë‹¤ê°€ Go ì–¸ì–´ëŠ” ê°œë°œ ì…ë¬¸ìë“¤ì´ ë§ì´ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ì–¸ì–´ë¼ ê·¸ëŸ°ì§€ ì•„ì§ ì›¹ ë°±ì—”ë“œ ê°œë°œì— ìµìˆ™í•˜ì§€ ì•Šì€ (ì €ì²˜ëŸ¼) ì‚¬ëŒë“¤ì„ ìœ„í•œ ìë£Œë“¤ì€ ë§ì´ ì—†ì—ˆë˜ ê²ƒ ê°™ìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ë©´ Javaì˜ ìŠ¤í”„ë§ì´ë‚˜ Node.jsì˜ express, Pythonì˜ django ê°™ì€ í”„ë ˆì„ì›Œí¬ë“¤ì€ ì¸í”„ëŸ°ë§Œ ê°€ë´ë„ A to Zë¡œ ì•Œë ¤ì£¼ëŠ” ê°•ì˜ê°€ ë§ì£ . í•˜ì§€ë§Œ Go ì–¸ì–´ëŠ” ë³´í†µ ì–¸ì–´ ì…ë¬¸ ë‚´ìš©ë“¤ì´ ë§ê³ ,
&lt;em>&lt;del>&amp;ldquo;ì~! ì—¬ëŸ¬ë¶„ë“¤ì€ ì–´ì°¨í”¼ ê°œë°œ ì´ˆë³´ìë“¤ì´ ì•„ë‹ˆì‹œì–ì•„ìš”? ì´ì¯¤í•˜ë©´ Golangì„ ë§›ë³´ì…¨ìœ¼ë‹ˆ ì•Œì•„ì„œë“¤ ì…ë§›ëŒ€ë¡œ ì“°ì‹­ì‹œì˜¤~!&amp;quot;&lt;/del>&lt;/em> ì‹ìœ¼ë¡œ ì…ë¬¸ ì´í›„ì˜ ë‚´ìš©ì€ ë³´í†µ ë™ì‹œì„± íŒ¨í„´ì— ëŒ€í•œ ë‚´ìš©ë“¤ì¼ ë¿
ë°±ì—”ë“œ ê°œë°œì„ ìœ„í•œ ì•„í‚¤í…ì³ë‚˜ Unit testë¥¼ ì–´ë–»ê²Œ ì‹¤ì œë¡œ ì ìš©í•˜ëŠ”ì§€ ê°™ì€ ì˜ˆì‹œëŠ” ë§ì´ ì—†ì—ˆìŠµë‹ˆë‹¤. ê·¸ë˜ì„œ ì´ë²ˆì—” Golangìœ¼ë¡œ ì›¹ ë°±ì—”ë“œ ê°œë°œì„ í•˜ëŠ” ê³¼ì •ì— ëŒ€í•´ ì¢€ ì ì–´ë³¼ê¹Œí•©ë‹ˆë‹¤!&lt;/p>
&lt;p>ì´ë²ˆ ê¸€ì€ ê·¸ëŸ° ë‚´ìš©ì„ ë‹¤ë£° ì‹œë¦¬ì¦ˆ ì¤‘ ì²« ë²ˆì§¸ë¡œ Golangìœ¼ë¡œ ë°ì´í„°ë² ì´ìŠ¤ ì‘ì—…í•˜ëŠ” ê²ƒê³¼ ê´€ë ¨í•œ ë‚´ìš©ì„ ë‹´ì•„ë´¤ìŠµë‹ˆë‹¤. ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì–´ë–»ê²Œ ì‚¬ìš©í•˜ëŠ”ì§€ì— ëŒ€í•œ ì„¸ì„¸í•œ ë‚´ìš©ë³´ë‹¨ ì–´ë–¤ í”„ë ˆì„ì›Œí¬ë¥¼ ì¶”ì²œë“œë¦¬ê³ , ê·¸ í”„ë ˆì„ì›Œí¬ë¥¼ ì‚¬ìš©í•˜ëŠ” ëª¨ìŠµì´ ì–´ë– í•œì§€
ê°€ë³ê²Œ ì“°ìœ½ ë³´ì‹œë©´ ì¢‹ì„ ê²ƒ ê°™ìŠµë‹ˆë‹¤.&lt;/p>
&lt;h2 id="3-layered-architectureì—-ëŒ€í•´-ê°„ë‹¨íˆ-ì§šê³ -ë„˜ì–´ê°€ê² ìŠµë‹ˆë‹¤">3 layered architectureì— ëŒ€í•´ ê°„ë‹¨íˆ ì§šê³  ë„˜ì–´ê°€ê² ìŠµë‹ˆë‹¤&lt;/h2>
&lt;ul>
&lt;li>&lt;code>Presentation layer&lt;/code> - ì–´ë–»ê²Œ ë°ì´í„°ê°€ í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ë³´ì—¬ì¤„ ì§€ì— ëŒ€í•œ ì‘ì—…ì„ ë‹´ë‹¹. í´ë¼ì´ì–¸íŠ¸ëŠ” ì´ ê³„ì¸µì„ í†µí•´ ìƒí˜¸ì‘ìš©í•œë‹¤.&lt;/li>
&lt;li>&lt;code>Business/Domain layer&lt;/code> - Presentation layerì™€ Data access layerì˜ ì‚¬ì´ì— ìœ„ì¹˜í•´ ë¹„ì¦ˆë‹ˆìŠ¤ ë£°ê³¼ ê·¸ ë£°ì„ ë”°ë¥´ëŠ” ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ êµ¬í˜„. ë³´í†µ ì´ ê³„ì¸µì— Serviceë¼ê³  í•˜ëŠ” í´ë˜ìŠ¤(í˜¹ì€ íƒ€ì… ë“±ë“±)ê°€ ìœ„ì¹˜í•œë‹¤.&lt;/li>
&lt;li>&lt;code>Data Access Layer&lt;/code> - DBì— ì ‘ê·¼í•˜ëŠ” ì‘ì—…ì„ ë‹´ë‹¹. DAO(Data Access Object, repository)ê°€ ìœ„ì¹˜í•œë‹¤.&lt;/li>
&lt;/ul>
&lt;p>ëŒ€ë¶€ë¶„ì˜ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì€ &lt;code>3 layered architecture&lt;/code>ë¼ê³ í•˜ëŠ” êµ¬ì¡°ë¡œ ê¸°ì´ˆë¡œ í•˜ì—¬ ê°œë°œë©ë‹ˆë‹¤. ê·¸ ì†ì—ì„œ ì—¬ëŸ¬ ë‹¨ìˆœ ì‘ì—…ì´ë‚˜ ê°œë³„ì ìœ¼ë¡œ ê°œë°œí•˜ê¸´ ë²ˆê±°ë¡œìš´ ê¸°ëŠ¥ë“¤ì´ ì¡´ì¬í•  ìˆ˜ ìˆëŠ”ë°, ìš°ë¦¬ëŠ” í”„ë ˆì„ì›Œí¬ë‚˜ ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ì œê³µí•˜ëŠ” ê¸°ëŠ¥ë“¤ì„ ì˜ë¦¬í•˜ê²Œ ê°€ì ¸ë‹¤ ì”€ìœ¼ë¡œì„œ ì¢€ ë” ìœ ì§€ ë³´ìˆ˜ í•˜ê¸° ì‰¬ìš´ ê°œë°œì„ í•  ìˆ˜ ìˆì„ ê²ƒì…ë‹ˆë‹¤.&lt;/p>
&lt;h3 id="presentation-layer">Presentation layer&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">app&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;/users/:id&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">ctx&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">fiber&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Ctx&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="kt">error&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">userId&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">ctx&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Params&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;id&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ... ê¸°íƒ€ ì‘ì—… ìƒëµ
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">return&lt;/span> &lt;span class="nx">ctx&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">JSON&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kd">map&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;userId&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">userId&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="https://umi0410.github.io/blog/golang/how-to-backend-in-go-db/presentation-layer-output.png"
width="323"
height="164"
srcset="https://umi0410.github.io/blog/golang/how-to-backend-in-go-db/presentation-layer-output_hu82c0e5805551b09a7aaeabc91ba76592_7927_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/golang/how-to-backend-in-go-db/presentation-layer-output_hu82c0e5805551b09a7aaeabc91ba76592_7927_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="presentation-layer-output.png"
class="gallery-image"
data-flex-grow="196"
data-flex-basis="472px"
>&lt;/p>
&lt;p>&lt;em>url path variableì€ ì–´ë–»ê²Œ ì¸ì‹í•  ê²ƒì¸ì§€, Golangì˜ mapì„ ì–´ë–»ê²Œ JSONìœ¼ë¡œ ì§ë ¬í™”í•  ì§€ì™€ ê°™ì€ ë¡œì§ë“¤ì´ ëª¨ë‘ í”„ë ˆì„ì›Œí¬ì—ì„œ ì œê³µë¨.&lt;/em>&lt;/p>
&lt;p>ì €ëŠ” Presentation layerëŠ” ëŒ€ë¶€ë¶„ ì›¹ í”„ë ˆì„ì›Œí¬ ìì²´ë‚˜ í•´ë‹¹ ì›¹ í”„ë ˆì„ì›Œí¬ê°€ ì œê³µí•˜ëŠ” í˜•íƒœë¥¼ ë”°ë¥´ëŠ” í•¸ë“¤ëŸ¬ ë‹¨ì—ì„œ ì œê³µì´ ëœë‹¤ê³  ìƒê°í•˜ê³  ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ ì–´ë–»ê²Œ ì‘ë‹µì„ JSON í˜•íƒœë¡œ ì œê³µí• ì§€ HTML, XML, ì´ì§„ ë°ì´í„°(gRPC)ì™€ ê°™ì€ ë‚´ìš©ë“¤ ë§ì´ì£ . ì¦‰ Presentation layerì—ì„œëŠ” ìš°ë¦¬ê°€ ê·¸ë‹¥ ê°œë°œí•  ê²ƒì´ ë§ì§€ëŠ” ì•ŠìŠµë‹ˆë‹¤.&lt;/p>
&lt;h3 id="business-layer">Business layer&lt;/h3>
&lt;blockquote>
&lt;p>Domain logicê³¼ Business logicì˜ ì°¨ì´ëŠ” ì–´ëŠ ì •ë„ ì¡´ì¬í•˜ëŠ” ê±¸ë¡œ ì•Œê³  ìˆìŠµë‹ˆë‹¤ë§Œ 3 tierë¡œ ë‚˜ëˆ´ì„ ë•ŒëŠ” ë™ì¼í•œ ê³„ì¸µìœ¼ë¡œ ë³´ê² ìŠµë‹ˆë‹¤.&lt;/p>
&lt;/blockquote>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// Domain/Business layer ì½”ë“œ ì˜ˆì‹œ - ìš°ë¦¬ ë„ë©”ì¸ íŠ¹ì • ì½”ë“œë“¤ì´ ë§ì•„ ë‚¨(ìš°ë¦¬ íŒ€ í˜¹ì€ ê¸°ì—…ì´ ì•„ë‹Œ ì‚¬ëŒë“¤)ì´ ë§Œë“  ì˜¤í”ˆì†ŒìŠ¤ë¡œ ëŒ€ì²´í•˜ê¸° í˜ë“¦.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">func&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">svc&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">UserService&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nf">updateProfileImage&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">requestUser&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">User&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">imageFile&lt;/span> &lt;span class="nx">Image&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="nx">UserResponse&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">error&lt;/span>&lt;span class="p">){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">requestUserê°€&lt;/span> &lt;span class="nx">ì¸ì¦ëœ&lt;/span> &lt;span class="nx">ìœ ì €ì¸ê°€&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">ì¸ì¦ëœ&lt;/span> &lt;span class="nx">ìœ ì €ê°€&lt;/span> &lt;span class="nx">ì•„ë‹ˆë¼ë©´&lt;/span> &lt;span class="nx">ì–´ë–¤&lt;/span> &lt;span class="nx">ì—ëŸ¬ë¥¼&lt;/span> &lt;span class="nx">ë¦¬í„´í• &lt;/span> &lt;span class="nx">ê²ƒì¸ê°€&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">imageFileì´&lt;/span> &lt;span class="nx">ì œëŒ€ë¡œ&lt;/span> &lt;span class="nx">ëœ&lt;/span> &lt;span class="nx">Imageì¸ê°€&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">ì œëŒ€ë¡œ&lt;/span> &lt;span class="nx">ëœ&lt;/span> &lt;span class="nx">Imageê°€&lt;/span> &lt;span class="nx">ì•„ë‹ˆë¼ë©´&lt;/span> &lt;span class="nx">ì–´ë–¤&lt;/span> &lt;span class="nx">ì—ëŸ¬ë¥¼&lt;/span> &lt;span class="nx">ë¦¬í„´í• &lt;/span> &lt;span class="nx">ê²ƒì¸ê°€&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">imageFileì„&lt;/span> &lt;span class="nx">ì—…ë¡œë“œ&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">ì—…ë¡œë“œ&lt;/span> &lt;span class="nx">ê³¼ì •&lt;/span> &lt;span class="nx">ì¤‘&lt;/span> &lt;span class="nx">ì—ëŸ¬&lt;/span> &lt;span class="nx">ë°œìƒ&lt;/span> &lt;span class="nx">ì‹œ&lt;/span> &lt;span class="nx">ì–´ë–¤&lt;/span> &lt;span class="nx">ì—ëŸ¬ë¥¼&lt;/span> &lt;span class="nx">ë¦¬í„´í• &lt;/span> &lt;span class="nx">ê²ƒì¸ê°€&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">ìœ ì €ì˜&lt;/span> &lt;span class="nx">ì¹œêµ¬ë“¤ì—ê²Œ&lt;/span> &lt;span class="nx">ìƒˆë¡œìš´&lt;/span> &lt;span class="nx">í”„ë¡œí•„&lt;/span> &lt;span class="nx">ì‚¬ì§„&lt;/span> &lt;span class="nx">ì—…ë¡œë“œì—&lt;/span> &lt;span class="nx">ëŒ€í•œ&lt;/span> &lt;span class="nx">ì•Œë¦¼&lt;/span> &lt;span class="nx">ë°œì†¡&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">...&lt;/span> &lt;span class="nx">ë“±ë“±&lt;/span> &lt;span class="nx">ìƒëµ&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">ìƒëµ&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ë°˜ë©´ &lt;code>Domain/Business layer&lt;/code>ì—ì„œëŠ” ë¹„ì¦ˆë‹ˆìŠ¤ ë£°ê³¼ ë¡œì§ì´ë¼ê³  í•˜ëŠ” ìš°ë¦¬ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ í•µì‹¬ì ì¸ ê¸°ëŠ¥ì— ëŒ€í•œ êµ¬í˜„ì´ë‚˜ ì¡°í•©ì´ ì´ë£¨ì–´ì§€ê²Œ ë˜ëŠ”ë° ì´ ë¶€ë¶„ íƒ€ ì˜¤í”ˆì†ŒìŠ¤ë“¤ë¡œ ëŒ€ì²´ë˜ê¸°ëŠ” í˜ë“  ë¶€ë¶„ì´ ë§ì•„ ë‹¹ì—°íˆ ì§ì ‘ ê°œë°œí•˜ëŠ” ê²½ìš°ê°€ ë§ìŠµë‹ˆë‹¤. ìœ„ì˜ ì½”ë“œë¥¼ ë³´ë©´ ë‹¤ì–‘í•œ ìš°ë¦¬ ì„œë¹„ìŠ¤ì˜ ë¡œì§ë“¤ì´ êµ¬í˜„ë˜ê±°ë‚˜ ì¡°í•©ë˜ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;h3 id="data-access-layer">Data access layer&lt;/h3>
&lt;p>&lt;img src="https://umi0410.github.io/blog/golang/how-to-backend-in-go-db/jpa-method.png"
width="582"
height="306"
srcset="https://umi0410.github.io/blog/golang/how-to-backend-in-go-db/jpa-method_hu755e2c0222938f117e5959a368d53523_41512_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/golang/how-to-backend-in-go-db/jpa-method_hu755e2c0222938f117e5959a368d53523_41512_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="jpa-method.png"
class="gallery-image"
data-flex-grow="190"
data-flex-basis="456px"
>&lt;/p>
&lt;p>&lt;em>Javaì˜ JPA í”„ë ˆì„ì›Œí¬ì˜ ê²½ìš° ê¸°ë³¸ì ìœ¼ë¡œ CRUD ë©”ì†Œë“œë¥¼ ì œê³µí•´ì¤€ë‹¤.&lt;/em>&lt;/p>
&lt;p>&lt;img src="https://umi0410.github.io/blog/golang/how-to-backend-in-go-db/django-method.png"
width="717"
height="268"
srcset="https://umi0410.github.io/blog/golang/how-to-backend-in-go-db/django-method_hu35af591f1da6148e3aa53a5e144defd6_38902_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/golang/how-to-backend-in-go-db/django-method_hu35af591f1da6148e3aa53a5e144defd6_38902_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="django-method.png"
class="gallery-image"
data-flex-grow="267"
data-flex-basis="642px"
>&lt;/p>
&lt;p>&lt;em>Pythonì˜ djangoì˜ ê²½ìš° Join ê¸°ëŠ¥ë„ ê¸°ë³¸ì ìœ¼ë¡œ ì œê³µí•´ì¤€ë‹¤.&lt;/em>&lt;/p>
&lt;p>ì´ì œ Data Access Layerë§Œì´ ë‚¨ì•˜ë„¤ìš”. ì´ ê³„ì¸µ ë˜í•œ ëŒ€ë¶€ë¶„ì˜ ê°ì²´ì§€í–¥ ì–¸ì–´ë“¤ì—ì„  ORMì´ë¼ëŠ” ê°œë…ì„ í†µí•´ ëŒ€ë¶€ë¶„ì˜ í”„ë ˆì„ì›Œí¬ë“¤ì´ ë§ì€ ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤. ê·¸ë˜ì„œ í•„ìš”í•œ ê²½ìš°ì—ë§Œ ì¶”ê°€ì ìœ¼ë¡œ ì •ì˜í•˜ëŠ” í˜•íƒœë¡œ í¸ë¦¬í•˜ê²Œ ì´ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>ê·¸ë ‡ë‹¤ë©´ Goì—ì„œëŠ” ì–´ë–»ê²Œ Data access layerë¥¼ í¸í•˜ê²Œ ì´ìš©í•  ìˆ˜ ìˆì„ê¹Œìš”? ì´ë²ˆ ê¸€ì—ì„œëŠ” &lt;strong>Golangì€ ì´ Data Access Layer(Repository)ì—ì„œ ì–´ë–¤ DB frameworkì„ ì‚¬ìš©í•˜ë©´ ì¢‹ì„ì§€ ì–´ë–¤ ì‹ìœ¼ë¡œ ì‚¬ìš©í•´ë‚˜ê°ˆ ìˆ˜ ìˆì„ì§€ì— ëŒ€í•´&lt;/strong> ë‹¤ë¤„ë³´ë ¤ í•©ë‹ˆë‹¤.&lt;/p>
&lt;h2 id="golangì˜-ì¢‹ì€-db-framework-ì¢€-ì¶”ì²œí•´ì£¼ì„¸ìš”">Golangì˜ ì¢‹ì€ DB framework ì¢€ ì¶”ì²œí•´ì£¼ì„¸ìš”.&lt;/h2>
&lt;p>&lt;img src="https://umi0410.github.io/blog/golang/how-to-backend-in-go-db/ent-gorm-stars.png"
width="797"
height="515"
srcset="https://umi0410.github.io/blog/golang/how-to-backend-in-go-db/ent-gorm-stars_hu93b57724131d9ce35065e9adedba8094_34328_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/golang/how-to-backend-in-go-db/ent-gorm-stars_hu93b57724131d9ce35065e9adedba8094_34328_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="ent-gorm-stars.png"
class="gallery-image"
data-flex-grow="154"
data-flex-basis="371px"
>&lt;/p>
&lt;p>&lt;em>ì°¨íŠ¸ ì¶œì²˜: &lt;a class="link" href="https://star-history.t9t.io/" target="_blank" rel="noopener"
>https://star-history.t9t.io/&lt;/a>&lt;/em>&lt;/p>
&lt;p>Golangì—ëŠ” Djangoë‚˜ JPAì™€ ê°™ì€ ê°•ë ¥í•œ ë°ì´í„°ë² ì´ìŠ¤ ê´€ë¦¬ í”„ë ˆì„ì›Œí¬ê°€ ëª‡ ë…„ ì „ê¹Œì§€ ì¡´ì¬í•˜ì§€ ì•Šì•˜ë˜ ê²ƒ ê°™ìŠµë‹ˆë‹¤. ìƒ ì¿¼ë¦¬ë¬¸ì„ ì§ì ‘ ì§¤ ê²Œ ì•„ë‹Œ ê²½ìš°ë¼ë©´ ì–¼ë§ˆ ì „ê¹Œì§€ëŠ” &lt;code>gorm&lt;/code> ì´ë¼ê³ í•˜ëŠ” í”„ë ˆì„ì›Œí¬ê°€ ê±°ì˜ ìœ ì¼í•œ ì„ íƒì§€ì˜€ë˜ ê²ƒ ê°™ìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ìš”ì¦˜ ì¶”ì„¸ë¥¼ ë³´ë©´ ë¬´ì„­ê²Œ &lt;code>ent&lt;/code>ë¼ëŠ” íŒ¨í‚¤ì§€ê°€ ì«“ì•„ì˜¤ê³  ìˆëŠ” ëª¨ìŠµì„ ë³´ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;h3 id="-gorm-í”„ë ˆì„ì›Œí¬-ì‚¬ìš©-í›„ê¸°">ğŸ‘ gorm í”„ë ˆì„ì›Œí¬ ì‚¬ìš© í›„ê¸°&lt;/h3>
&lt;p>ì œê°€ golang ê°œë°œì„ ë§‰ ì‹œì‘í–ˆë˜ ë•Œê°€ 2020ë…„ ì—¬ë¦„ì¯¤ì´ì—ˆê¸°ì— ì €ë„ &lt;code>gorm&lt;/code>ì„ ì²« ë°ì´í„°ë² ì´ìŠ¤ í”„ë ˆì„ì›Œí¬ë¡œ ì‚¬ìš©í–ˆì—ˆì§€ë§Œ ëª‡ ê°€ì§€ ë‹¨ì ë“¤ì´ ì¡´ì¬í–ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;ol>
&lt;li>
&lt;p>&lt;strong>ë¬¸ì„œì˜ ë‚´ìš©ì´ ë¹ˆì•½í–ˆê³ , ì—ëŸ¬ì— ëŒ€í•œ ì„¤ëª…ì´ë‚˜ ë””ë²„ê¹…ì´ ì‰½ì§€ ì•Šì•˜ë‹¤.&lt;/strong>&lt;/p>
&lt;p>ë¬¸ì„œì˜ ë‚´ìš©ë“¤ì´ ì‹¤ì§ˆì ì¸ ë‹¤ì–‘í•œ ì¼€ì´ìŠ¤ì— ëŒ€í•œ ì˜ˆì‹œë‚˜ ì„¤ëª…ì´ ë¶€ì¡±í–ˆë‹¤ê³  ëŠê»´ì¡ŒìŠµë‹ˆë‹¤. ë˜í•œ ì—ëŸ¬ê°€ ë°œìƒí•œ ê²½ìš° ì™œ ì—ëŸ¬ê°€ ë°œìƒí•œ ê²ƒì¸ì§€ ì •í™•í•œ ìœ„ì¹˜ë‚˜ ì´ìœ ê°€ ì œê³µë˜ì§€ ì•Šì•„ ë””ë²„ê¹…í•˜ê¸°ë„ í˜ë“¤ì—ˆë˜ ê²ƒ ê°™ìŠµë‹ˆë‹¤.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>ë¶ˆí¸í•œ struct tag ê¸°ë°˜ì˜ í…Œì´ë¸”, ì»¬ëŸ¼ ì„¤ì •&lt;/strong>&lt;/p>
&lt;p>Goê°€ ê°•ë ¥íˆ typeì„ ê°•ì œí•˜ë©´ì„œ ë†’ì€ ì•ˆì •ì„±ê³¼ í¸ì˜ì„±ì„ ì œê³µí•˜ëŠ” ë°˜ë©´ gormì€ struct tagë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì—¬ëŸ¬ ì„¤ì •ë“¤ì„ ê´€ë¦¬í•˜ë„ë¡ ê°œë°œë˜ì—ˆìŠµë‹ˆë‹¤. Go ì–¸ì–´ë¥¼ ì¢‹ì•„í•˜ì§€ë§Œ struct tagì— ëŒ€í•´ì„œëŠ” ê°€ëœ©ì´ë‚˜ ì¡°ê¸ˆì˜ ë¶ˆë§Œì„ ê°–ê³  ìˆì—ˆëŠ”ë° ì´ëŸ° ì €ëŸ° ì»¬ëŸ¼ ì„¤ì •ë“¤ë§ˆì € struct tagë¡œ ì´ìš©í•˜ë‹ˆ ì •í™•íˆ ì´ tagê°€ ë™ì‘í•˜ëŠ” íƒœê·¸ì¸ì§€, ì™œ ì—ëŸ¬ê°€ ë‚˜ê±°ë‚˜ ì ìš©ì´ ì•ˆë˜ëŠ”ì§€ë„ ì•ˆì „í•˜ê²Œ í™•ì¸í•  ìˆ˜ ì—†ì—ˆê³  ë¬´ì—‡ë³´ë‹¤ ê°€ë…ì„±ì´ ë„ˆë¬´ ë„ˆë¬´~! ì¢‹ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>ì œê³µë˜ëŠ” ë©”ì†Œë“œê°€ ë³„ë¡œ ì—†ë‹¤.&lt;/strong>&lt;/p>
&lt;p>gormì€ ì•„ì£¼ ê°€ë²¼ìš´ ëŠë‚Œì´ì—ˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ë°ì´í„°ë² ì´ìŠ¤ í”„ë ˆì„ì›Œí¬ë¥¼ ì‚¬ìš©í•¨ì—ë„ ë¶ˆêµ¬í•˜ê³  ë„ˆë¬´ë‚˜ ì œê³µë˜ëŠ” ë©”ì†Œë“œê°€ ì—†ë‹¤ê³  ëŠê»´ì¡ŒìŠµë‹ˆë‹¤. JPAë‚˜ DjangoëŠ” ì¡°ê¸ˆì˜ ì„¤ì •ë§Œ í•´ì£¼ë©´ CRUDì™€ Joinê¹Œì§€ ì œê³µí•´ì£¼ëŠ”ë° gormì€ ê±°ì˜ ì •ë§ ì •ë§ ê¸°ë³¸ì ì¸ ê¸°ëŠ¥ì„ í•˜ëŠ” ë©”ì†Œë“œì— ì ì ˆí•œ ì¸ìë¥¼ ì „ë‹¬í•¨ìœ¼ë¡œì¨ ë™ì‘ì‹œì¼œì•¼í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ ë©”ì†Œë“œê°€ ì–´ë–¤ ë§¤ê°œë³€ìˆ˜ë¥¼ ì™œ í•„ìš”ë¡œ í•˜ëŠ”ì§€ì— ë‚´ìš©ì´ ê·¸ë‹¥ ì—†ê³  ê·¸ëƒ¥ í†µìœ¼ë¡œ Createë©”ì†Œë“œì— ì•Œì•„ì„œ ì ì ˆí•œ inteface{}ì¸ìë¥¼ ì „ë‹¬í•´ì•¼í•˜ëŠ” í˜•íƒœë¼ Goì˜ ì¥ì ì¸ ê°•ë ¥í•œ typeì„ ë°”íƒ•ìœ¼ë¡œí•œ ì•ˆì •ì„±, í¸ì˜ì„±ì„ ëˆ„ë¦´ ìˆ˜ë„ ì—†ì—ˆê³  ì´ëŸ´êº¼ë©´ íŒŒì´ì¬ ì“°ì§€&amp;hellip; ì‹¶ì€ ìƒê°ì´ ìì£¼ ë“¤ì—ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h3 id="-ì¶”ì²œí•˜ëŠ”-í”„ë ˆì„ì›Œí¬---ent">ğŸ‘ ì¶”ì²œí•˜ëŠ” í”„ë ˆì„ì›Œí¬ - ent&lt;/h3>
&lt;p>ë¬¼ë¡  ìœ„ì˜ Github star historyë§Œ ë´ë„ ì•„ì‹¤ ìˆ˜ ìˆê² ì§€ë§Œ entëŠ” ë§¤ìš° ë¬´ì„­ê²Œ ì„±ì¥ ì¤‘ì¸ Golangì˜ ë°ì´í„°ë² ì´ìŠ¤ ê´€ë¦¬ í”„ë ˆì„ì›Œí¬ì…ë‹ˆë‹¤. ê²Œë‹¤ê°€ ì•„ë§ˆ Facebookì—ì„œ ë‚´ë¶€ì ìœ¼ë¡œ ì‚¬ìš©í•˜ë‹¤ê°€ ì˜¤í”ˆì†ŒìŠ¤í™”í•œ í”„ë¡œì íŠ¸ì¸ ê±¸ë¡œ ì•Œê³  ìˆëŠ”ë° ë”°ë¼ì„œ ì–´ëŠ ì •ë„ì˜ ì™„ì„±ë„ë‚˜ í¸ì˜ì„±ì´ ë³´ì¥ë˜ê² ì£ . ã…ã… ì €ëŠ” ì‚¬ì´ë“œ í”„ë¡œì íŠ¸ì—ì„œ gormì„ ì‚¬ìš©í•˜ë‹¤ê°€ ë§ì€ ë¶ˆí¸ì„ ëŠê¼ˆê³ , Go ê°œë°œ ì»¤ë®¤ë‹ˆí‹°ì—ì„œ entê°€ ê·¸ë ‡ê²Œë‚˜ í•«í•˜ë‹¤ê¸¸ë˜ entë¡œ data access layerë¥¼ ë§ˆì´ê·¸ë ˆì´ì…˜í–ˆê³  ë§Œì¡± ì¤‘ì…ë‹ˆë‹¤. ã…ã…&lt;/p>
&lt;p>&lt;strong>entì˜ ì‚¬ìš© í›„ê¸° ë° íŠ¹ì§•&lt;/strong>ì€ ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤.&lt;/p>
&lt;ol>
&lt;li>
&lt;p>&lt;strong>íƒ€ì…ì„ ë°”íƒ•ìœ¼ë¡œ ì•ˆì „í•˜ê³  í¸ë¦¬í•˜ê²Œ í…Œì´ë¸”ì„ ì„¤ê³„í•  ìˆ˜ ìˆë‹¤.&lt;/strong>&lt;/p>
&lt;p>í…Œì´ë¸”, ì»¬ëŸ¼ ì •ì˜ë“¤ì´ ëª¨ë‘ ent íŒ¨í‚¤ì§€ì˜ ì»¬ëŸ¼ type í˜¹ì€ í…Œì´ë¸” type, ê´€ê³„ type ë“±ë“±ì„ ì´ìš©í•´ì„œ ì •ì˜í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ë„ˆë¬´ ë„ˆë¬´ í¸ë¦¬í•˜ì£ . ê²Œë‹¤ê°€ ë³µì¡í•œ struct tagë„ ì•ˆë…•~! &lt;code>ent&lt;/code>ëŠ” ë¯¸ë¦¬ ì •ì˜ëœ íƒ€ì…ê³¼ ë©”ì†Œë“œë“¤ë¡œ ë‹¤ì–‘í•œ ì„¤ì •ì„ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>ë‹¤ì–‘í•œ ë©”ì†Œë“œ ì œê³µ&lt;/strong>&lt;/p>
&lt;p>go generateë¼ê³  í•˜ëŠ” ê¸°ëŠ¥ì„ í†µí•´ ìš°ë¦¬ê°€ ì •ì˜í•œ ìŠ¤í‚¤ë§ˆ(í…Œì´ë¸” ë° í•„ë“œ ì„¤ì •)ì„ ë°”íƒ•ìœ¼ë¡œ ë‹¤ì–‘í•œ íƒ€ì…ê³¼ ë©”ì†Œë“œë“¤ì„ ë§Œë“¤ì–´ì¤ë‹ˆë‹¤. ì´ ë¶€ë¶„ìœ¼ë¡œ ì¸í•´ ê½¤ ë¹Œë“œ ì‹œê°„ì´ ëŠ˜ì–´ë‚˜ëŠ” ëŠë‚Œì´ê¸´í•œë° ê·¸ë˜ë´¤ì 2ì´ˆ ì •ë„ì¸ë° entê°€ ì œê³µí•´ì£¼ëŠ” ë©”ì†Œë“œë“¤ë¡œ ì¸í•´ ê°œë°œì  í¸ì˜ì™€ ì•ˆì •ì„±ì´ í›¨ì”¬ í¬ë‹¤ê³  ëŠë¼ê¸° ë•Œë¬¸ì— ë§Œì¡±í•˜ê³  ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>ë³„ ë‹¤ë¥¸ ë¬¸ì„œê°€ í•„ìš” ì—†ë‹¤..?&lt;/strong>&lt;/p>
&lt;p>ê·¸ëƒ¥ ë©”ì†Œë“œë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì´ìš©í•  ìˆ˜ ìˆë‹¤ë³´ë‹ˆ ê·¸ ì‚¬ìš© ë°©ë²•ì´ ì§ê´€ì ì¸ í¸ì´ê³ , ê²½ìš°ì— ë”°ë¼ì„œëŠ” ì½”ë“œ ìì²´ë¥¼ ê¹Œë³´ë©´ ì´í•´ë˜ëŠ” ë³„ ë‹¤ë¥¸ ë¬¸ì„œ ì—†ì´ë„ ì´ìš©í•  ìˆ˜ ìˆì—ˆë˜ ê²ƒ ê°™ìŠµë‹ˆë‹¤.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>ì°¸ì¡° ê´€ê³„ ì„¤ì •ì´ ì¢€ í—·ê°ˆë¦°ë‹¤&lt;/strong> (ëª‡ ì•ˆ ë˜ëŠ” ë‹¨ì  ì¤‘ í•˜ë‚˜)&lt;/p>
&lt;p>ë­”ê°€ Fromì´ë‚˜ Toë“±ì„ í†µí•´ ì°¸ì¡° ê´€ê³„ë¥¼ ì •ì˜í•˜ëŠ”ë° ì´ Fromì´ ì–´ë–¤ í…Œì´ë¸”ì„ Fromìœ¼ë¡œ ìƒê°í•˜ëŠ”ê±´ì§€ ë­”ê°€ ë§ì´ ì• ë§¤í•©ë‹ˆë‹¤. ì»¤ë®¤ë‹ˆí‹°ë¥¼ ë³´ë©´ ì´ë¡œ ì¸í•´ ë§ì€ ë¶„ë“¤ë„ í˜¼ë€ì„ ê²ªê³  ìˆëŠ” í˜„í™©ì…ë‹ˆë‹¤.&lt;/p>
&lt;p>í•˜ì§€ë§Œ ë„ˆë¬´ ê±±ì •ì€ ë§ˆì„¸ìš”~! ì´ë²ˆ ê¸€ì—ì„œ ì •ë¦¬í•´ë“œë¦¬ë ¤í•˜ë‹ˆê¹Œìš”~! ã…ã…&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h2 id="ent-íŒ¨í‚¤ì§€ë¥¼-í†µí•´-database-ì‘ì—…í•´ë³´ê¸°">Ent íŒ¨í‚¤ì§€ë¥¼ í†µí•´ Database ì‘ì—…í•´ë³´ê¸°&lt;/h2>
&lt;p>&amp;ldquo;&lt;strong>ì‹œì‘í•˜ë©°&lt;/strong>&amp;ldquo;ì—ì„œë„ ë§ì”€ë“œë ¸ë‹¤ì‹œí”¼ ì‚¬ì‹¤ Go ì–¸ì–´ë¡œ ê°œë°œí•˜ì‹œëŠ” ë¶„ë“¤ ì¤‘ì— ì •ë§ ê°œë°œ ìì²´ê°€ ìµìˆ™í•˜ì§€ ì•Šì€ ë¶„ë“¤ì€ ì •ë§ ì ìœ¼ë¦¬ë¼ ìƒê°í•©ë‹ˆë‹¤&amp;hellip;ã…ã… ë”°ë¼ì„œ ë„ˆë¬´ ë””í…Œì¼í•œ ë‚´ìš©ì„ ì§ì ‘ ì•Œë ¤ë“œë¦¬ê¸° ë³´ë‹¤ëŠ” ì»¤ë‹¤ë€ íë¦„ì´ë‚˜ í—·ê°ˆë¦¬ëŠ” ìš”ì†Œë“¤ì„ ì§šì–´ë“œë¦¬ëŠ” ë°©í–¥ìœ¼ë¡œ ê¸€ì„ ì‘ì„±í•´ ë³´ê² ìŠµë‹ˆë‹¤.&lt;/p>
&lt;h3 id="ì˜ˆì‹œ-application---ì—¬í–‰-ìƒí’ˆ-ê´€ë¦¬-crud-ì„œë¹„ìŠ¤">ì˜ˆì‹œ Application - ì—¬í–‰ ìƒí’ˆ ê´€ë¦¬ CRUD ì„œë¹„ìŠ¤&lt;/h3>
&lt;ul>
&lt;li>1:Nì˜ ì—¬í–‰ ìƒí’ˆ ë‹´ë‹¹ì ê´€ê³„ - ë‹´ë‹¹ì(ì¼ì¢…ì˜ ìœ ì €)ëŠ” ì—¬í–‰ ìƒí’ˆê³¼ 1:N ê´€ê³„&lt;/li>
&lt;/ul>
&lt;p>ìœ„ì˜ ê´€ê³„ë¥¼ ê°–ëŠ” ì—¬í–‰ ìƒí’ˆ ê´€ë¦¬ CRUD ì„œë¹„ìŠ¤ë¥¼ ë§Œë“¤ì–´ë³´ê² ìŠµë‹ˆë‹¤. ë³¸ ê¸€ì—ì„œëŠ” ì½”ë“œë¥¼ ì§§ê²Œ ì§§ê²Œ ì˜ë¼ì„œ ì˜¬ë¦´í…Œë‹ˆ ì›ë³¸ ì½”ë“œë¥¼ ë³´ê³ ì‹¶ìœ¼ì‹  ë¶„ë“¤ì€ ì œ ê¹ƒí—™ì„ ì°¸ê³ í•´ì£¼ì„¸ìš”.&lt;/p>
&lt;p>ì›ë³¸ ì½”ë“œ - &lt;a class="link" href="https://github.com/umi0410/how-to-backend-in-go" target="_blank" rel="noopener"
>https://github.com/umi0410/how-to-backend-in-go&lt;/a>&lt;/p>
&lt;h3 id="1-ent-package-ì„¤ì¹˜">1. ent package ì„¤ì¹˜&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ì°¸ê³ : https://entgo.io/docs/tutorial-setup/#installation&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ go get entgo.io/ent/cmd/ent
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ìš°ì„  entëŠ” ë‹¤ì–‘í•œ ëª…ë ¹ ê¸°ëŠ¥ë„ ì œê³µí•˜ê³  ì €í¬ëŠ” ê·¸ê±¸ í•„ìš”ë¡œ í•˜ê¸° ë•Œë¬¸ì— entë¥¼ ì„¤ì¹˜í•´ì£¼ì–´ì•¼í•©ë‹ˆë‹¤. ìŠ¤í‚¤ë§ˆ ì •ì˜ ì½”ë“œ ë˜í•œ ent ë¥¼ ì´ìš©í•´ ìë™ìœ¼ë¡œ ê¸°ë³¸ í˜•íƒœë¥¼ ì œê³µ ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ent íŒ¨í‚¤ì§€ë¥¼ ì„¤ì¹˜í•œ ì´í›„ ì €í¬ëŠ” ë‹¤ìŒê³¼ ê°™ì€ ëª…ë ¹ì„ ìˆ˜í–‰í•˜ê²Œ ë  ê²ƒì…ë‹ˆë‹¤.&lt;/p>
&lt;ol>
&lt;li>&lt;code>$ go run entgo.io/ent/cmd/ent init {{ì—”í‹°í‹° ì´ë¦„}}&lt;/code> - ì—”í‹°í‹° ì´ë¦„ì„ ë°”íƒ•ìœ¼ë¡œí•œ ì´ˆê¸° ìŠ¤í‚¤ë§ˆ ì½”ë“œ ìƒì„±&lt;/li>
&lt;li>&lt;code>$ go generate ./ent&lt;/code> - ì •ì˜í–ˆë˜ ìŠ¤í‚¤ë§ˆë¥¼ ë°”íƒ•ìœ¼ë¡œ í•œ ë§ì€ boilerplate ì½”ë“œë¥¼ ìë™ìœ¼ë¡œ ìƒì„±&lt;/li>
&lt;/ol>
&lt;h3 id="2-ìŠ¤í‚¤ë§ˆ-ì„¤ì •">2. ìŠ¤í‚¤ë§ˆ ì„¤ì •&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ go run entgo.io/ent/cmd/ent init User &lt;span class="c1"># or shortly $ ent init User&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ go run entgo.io/ent/cmd/ent init TourProduct &lt;span class="c1"># or shortly $ ent init TourProduct&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ìœ„ì˜ ëª…ë ¹ì–´ë“¤ì„ í†µí•´ Userì™€ Userê°€ ê´€ë¦¬í•˜ëŠ” TourProductë¼ëŠ” ì—”í‹°í‹°ë“¤ì˜ ìŠ¤í‚¤ë§ˆë¥¼ ì‘ì„±í•  ê²ƒì…ë‹ˆë‹¤. ì •í™•í•œ ìŠ¤í‚¤ë§ˆ ì‘ì„±ì— ëŒ€í•œ ì„¤ëª…ì€ ìƒëµí•˜ê² ìŠµë‹ˆë‹¤. &lt;a class="link" href="https://entgo.io/docs/schema-def" target="_blank" rel="noopener"
>ent ê³µì‹ ë¬¸ì„œ&lt;/a>ì— ë§¤ìš° ì˜ ì„¤ëª…ë˜ì–´ìˆê³ , &lt;a class="link" href="https://github.com/ent/ent/tree/master/examples" target="_blank" rel="noopener"
>examples in ent github&lt;/a>ì—ì„œ ëŒ€ë¶€ë¶„ì˜ ì˜ˆì‹œ ì½”ë“œë„ í™•ì¸í•´ë³¼ ìˆ˜ ìˆê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.&lt;/p>
&lt;h4 id="-ì°¸ì¡°-ê´€ê³„-ì„¤ì •-ì‹œì˜-fromê³¼-to">â­ ì°¸ì¡° ê´€ê³„ ì„¤ì • ì‹œì˜ Fromê³¼ To&lt;/h4>
&lt;p>ë‹¤ë§Œ í•œ ê°€ì§€. Edgeë¥¼ ì´ìš©í•´ &lt;strong>ì°¸ì¡° ê´€ê³„ë¥¼ ì„¤ì •í•  ë•Œ &lt;code>From&lt;/code>ê³¼ &lt;code>To&lt;/code>ì˜ ì‚¬ìš©ì— ëŒ€í•´&lt;/strong> í•œ ê°€ì§€ë§Œ ì§šê³  ë„˜ì–´ê°€ë ¤ í•©ë‹ˆë‹¤. ì €ë¥¼ í¬í•¨í•´ ë§ì€ ent ì‚¬ìš©ìë¶„ë“¤ê»˜ì„œ Edge ì„¤ì • ì‹œì— ë§ì€ í˜¼ë€ì„ ê²ªìŠµë‹ˆë‹¤. ê·¸ ì´ìœ ëŠ” ì¼ë°˜ì ìœ¼ë¡œ ìš°ë¦¬ëŠ” &lt;strong>1:N ê´€ê³„ì—ì„œ Nìª½ì´ From, 1ìª½ì´ Toê°€ ë˜ë©° Nìª½ í…Œì´ë¸”ì—ì„œ 1ì„ ì°¸ì¡°í•˜ëŠ” ë‚´ìš©ì„ ì •ì˜í•˜ëŠ” ë°˜ë©´ entëŠ” ê·¸ ë°˜ëŒ€ë¡œ ë™ì‘&lt;/strong>í•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;em>(entì—ì„œì˜ ì°¸ì¡° ê´€ê³„ ì •ì˜ ë°©ì‹ì— ëŒ€í•´ ê¶ê¸ˆí•˜ì§€ ì•Šìœ¼ì‹  ë¶„ë“¤ì€ ë„˜ì–´ê°€ì…”ë„ ë©ë‹ˆë‹¤.)&lt;/em>&lt;/p>
&lt;p>&lt;img src="https://umi0410.github.io/blog/golang/how-to-backend-in-go-db/o2m-relation.png"
width="560"
height="189"
srcset="https://umi0410.github.io/blog/golang/how-to-backend-in-go-db/o2m-relation_huda98d5d877ff5063fa9c786910881686_21160_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/golang/how-to-backend-in-go-db/o2m-relation_huda98d5d877ff5063fa9c786910881686_21160_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="o2m-relation.png"
class="gallery-image"
data-flex-grow="296"
data-flex-basis="711px"
>&lt;/p>
&lt;p>&lt;em>ì¶œì²˜: &lt;a class="link" href="https://entgo.io/docs/schema-edges" target="_blank" rel="noopener"
>https://entgo.io/docs/schema-edges&lt;/a>&lt;/em>&lt;/p>
&lt;p>ìœ„ì™€ ê°™ì€ ê²½ìš° ë°ì´í„°ë² ì´ìŠ¤ìƒìœ¼ë¡œëŠ” &lt;code>Pet&lt;/code> í…Œì´ë¸”ì´ ìì‹ ì˜ &lt;code>owner_id&lt;/code> ì»¬ëŸ¼ì„ í†µí•´ &lt;code>User&lt;/code>ì„ ì°¸ì¡°í•˜ë¯€ë¡œ &lt;code>Pet&lt;/code>ì´ &lt;code>From&lt;/code>, &lt;code>User&lt;/code>ê°€ &lt;code>To&lt;/code>ê°€ ë˜ë©° ì´ë¥¼ í†µí•´ ownerë¼ëŠ” ê´€ê³„ë¥¼ ë‚˜íƒ€ë‚¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
í•˜ì§€ë§Œ &lt;code>ent&lt;/code>ëŠ” ê·¸ ë°˜ëŒ€ë¡œ &lt;code>User&lt;/code>ê°€ &lt;code>Pet&lt;/code>ì„ ê´€ë¦¬(ì°¸ì¡°)í•œë‹¤ëŠ” ì˜ë¯¸ë¡œ &lt;code>User&lt;/code>ê°€ &lt;code>From&lt;/code>, &lt;code>Pet&lt;/code>ì´ &lt;code>To&lt;/code>ê°€ ë˜ì–´ &lt;code>pets&lt;/code>ë¼ëŠ” ê´€ê³„ë¥¼ ë‚˜íƒ€ë‚´ëŠ” ì‹ìœ¼ë¡œ ì •ì˜í•˜ëŠ” ê²ƒ ê°™ìŠµë‹ˆë‹¤.
ì´ë ‡ê²Œ ê¸°ì¡´ì˜ í…Œì´ë¸” ì„¤ê³„ ë°©ì‹ê³¼ëŠ” ëŒ€ì¡°ë˜ëŠ” ë°©ì‹ìœ¼ë¡œ ì¸í•´ ë§ì€ ì‚¬ëŒë“¤ì´ í˜¼ë€ì„ ê²ªëŠ” ê²ƒ ê°™ì•„ìš”.&lt;/p>
&lt;p>ì´ë ‡ê²Œ í…Œì´ë¸”ì„ ì •ì˜í•˜ë„ë¡ entë¥¼ ê°œë°œí•œ ê°œë°œìë“¤ì˜ ì˜ë„ë‚˜ ì² í•™ì€ ë­”ì§€ ì˜ ëª¨ë¥´ê² ìŠµë‹ˆë‹¤. í˜¹ì‹œ ì•„ì‹œëŠ” ë¶„ì´ ìˆë‹¤ë©´ ì•Œë ¤ì£¼ì‹œë©´ ì¢€ ë” entfë¥¼ ì´í•´í•˜ëŠ” ë°ì— ë„ì›€ì´ ë  ê²ƒ ê°™ì•„ìš”!&lt;/p>
&lt;p>ì•„ë¬´íŠ¼ entì—ì„œëŠ” &lt;strong>1:N ë°©ì‹ì—ì„œ 1ì´ ì—°ê´€ ê´€ê³„ì˜ ì£¼ì¸ì²˜ëŸ¼ ë™ì‘/ì •ì˜í•œë‹¤&lt;/strong>ê³  ìƒê°í•˜ê³  ì‘ì—…í•˜ê³  ìˆìŠµë‹ˆë‹¤.(ì‹¤ì œ ë¬¸ì„œì—ì„œë„ Fromìª½. ì¦‰ 1 í˜¹ì€ User ìª½ì´ ì—°ê´€ ê´€ê³„ì˜ ì£¼ì¸ì´ë¼ê³  ê¸°ìˆ ë˜ì–´ìˆëŠ”ë°, ì´ ë¶€ë¶„ì€ JPAì™€ëŠ” ê±°ì˜ ë°˜ëŒ€ë¼ê³  ë³¼ ìˆ˜ ìˆì£ .)
ì €ëŠ” ê·¸ëƒ¥ &lt;strong>ì˜ˆì‹œë¥¼ ì°¸ê³ í•˜ë©´ì„œ ì‹¤ì œ í…Œì´ë¸”ì˜ ì°¸ì¡° ê´€ê³„ë‘ ë°˜ëŒ€ë¼ê³  ì™¸ì› ì–´ìš”.&lt;/strong>(ã…ã…&amp;hellip;.;;)&lt;/p>
&lt;h4 id="ìŠ¤í‚¤ë§ˆ-ì •ì˜-ë°-ì ìš©">ìŠ¤í‚¤ë§ˆ ì •ì˜ ë° ì ìš©&lt;/h4>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// ent/schema/user.go
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kn">package&lt;/span> &lt;span class="nx">schema&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;entgo.io/ent&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;entgo.io/ent/schema/edge&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;entgo.io/ent/schema/field&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// User holds the schema definition for the User entity.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">type&lt;/span> &lt;span class="nx">User&lt;/span> &lt;span class="kd">struct&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">ent&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Schema&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// Fields of the User.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">func&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">User&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nf">Fields&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="nx">ent&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Field&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="nx">ent&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Field&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// íƒ€ì…ì„ ê¸°ë°˜ìœ¼ë¡œ ì•ˆì „í•˜ê³  í¸ë¦¬í•˜ê²Œ ì»¬ëŸ¼ì„ ì •ì˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">field&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">String&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;id&amp;#34;&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">field&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">String&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;name&amp;#34;&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">field&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Bool&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;isActivated&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">Default&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// Edges of the User.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">func&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">User&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nf">Edges&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="nx">ent&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Edge&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="nx">ent&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Edge&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// entì—ì„œëŠ” Toë¥¼ ì •ì˜í•˜ëŠ” ìŠ¤í‚¤ë§ˆ, ì¦‰ ì—¬ê¸°ì„  User
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">// ê°€ ì°¸ì¡° ê´€ê³„ì˜ ì£¼ì¸ì´ë¼ê³  ì •ì˜í•©ë‹ˆë‹¤.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">// ì¼ë°˜ì ì¸ JPAì˜ ë°©ì‹ê³¼ëŠ” ë°˜ëŒ€ì…ë‹ˆë‹¤.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">edge&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">To&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;products&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">TourProduct&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Type&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ go generate ./ent
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ì•„ë¬´íŠ¼ ì €ëŠ” User ìŠ¤í‚¤ë§ˆë¥¼ ì´ë ‡ê²Œ ì„¤ì •í–ˆê³  ì´ ìŠ¤í‚¤ë§ˆë“¤ì„ ì ìš©í•´ entê°€ generateí•´ì¤€ ì½”ë“œë“¤ì„ ì´ìš©í•´ë³´ê² ìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>(TourProduct ìŠ¤í‚¤ë§ˆëŠ” ìƒëµí–ˆìŠµë‹ˆë‹¤. ì›ë³¸ ì½”ë“œë¥¼ ì°¸ê³ í•´ì£¼ì„¸ìš”.)&lt;/p>
&lt;h3 id="3-repository-ì •ì˜">3. repository ì •ì˜&lt;/h3>
&lt;p>entê°€ ë°ì´í„°ë² ì´ìŠ¤ ê´€ë ¨ ì‘ì—…ì„ ìœ„í•œ ë‹¤ì–‘í•œ ë©”ì†Œë“œë¥¼ ì§€ì›í•´ì¤ë‹ˆë‹¤. í•˜ì§€ë§Œ entëŠ” ê°„ë‹¨ ê°„ë‹¨í•œ ë©”ì†Œë“œë“¤ì„ ì¡°í•©í•´ì„œ ì‚¬ìš©í•´ì•¼í•˜ê¸° ë•Œë¬¸ì— ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ êµ¬í˜„í•˜ëŠ” ê³„ì¸µì—ì„œ ë§¤ë²ˆ entì˜ ë©”ì†Œë“œë¥¼ ì¡°í•©í•˜ë©° ì‚¬ìš©í•˜ëŠ” ê²ƒì€ ê³„ì¸µì˜ ê´€ì‹¬ì‚¬ì™€ ì±…ì„ì„ íë¦¬ê²Œ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë”°ë¼ì„œ ëª‡ ê°€ì§€ ë©”ì†Œë“œë“¤ì„ &lt;code>data access layer&lt;/code>ì¸ &lt;code>repository&lt;/code>ì— ì •ì˜í•˜ê² ìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>ì˜ˆë¥¼ ë“¤ë©´ íŠ¹ì • userê°€ ê´€ë¦¬í•˜ëŠ” ì—¬í–‰ ìƒí’ˆì„ ëª¨ë‘ ì¡°íšŒí•˜ëŠ” &lt;code>FindAllByManager(managerID string)&lt;/code>ì™€ ê°™ì€ ë©”ì†Œë“œ ë§ì´ì£ . ì´ ì‘ì—…ì„ ìœ„í•´ì„œëŠ” User í…Œì´ë¸”ê³¼ TourProduct í…Œì´ë¸”ì„ ì¡°ì¸í•´ì•¼í•˜ëŠ”ë° entê°€ ì—­ì‹œ ì´ ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// repository.go
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="o">...&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">type&lt;/span> &lt;span class="nx">TourProductRepository&lt;/span> &lt;span class="kd">struct&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Client&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">ent&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">TourProductClient&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">repo&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">TourProductRepository&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nf">FindAllByManager&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">managerID&lt;/span> &lt;span class="kt">string&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="nx">ent&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">TourProduct&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">result&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">repo&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Client&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Query&lt;/span>&lt;span class="p">().&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// íŠ¹ì • manager_idì˜ TourProductë¥¼ ì¡°íšŒí•˜ë„ë¡ ì¡°ì¸
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nf">Where&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">tourproduct&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">HasManagerWith&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">user&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ID&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">managerID&lt;/span>&lt;span class="p">))).&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nf">WithManager&lt;/span>&lt;span class="p">().&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nf">AllX&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">context&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">TODO&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">result&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="4-ì‹¤í–‰">4. ì‹¤í–‰&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// main.go
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">(){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">...&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;ì „ì²´ ìœ ì € ì¡°íšŒ&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="nx">_&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">user&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="k">range&lt;/span> &lt;span class="nx">userRepository&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">FindAll&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;User(id=%s, name=%s)\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">user&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">ID&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">user&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Name&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;--------------------------------------------------------------------------&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;ì „ì²´ ì—¬í–‰ ìƒí’ˆ ì¡°íšŒ&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="nx">_&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">tour&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="k">range&lt;/span> &lt;span class="nx">tourProductRepository&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">FindAll&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;TourProduct(id=%d, name=%s, manager=%s)\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">tour&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">ID&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">tour&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Name&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">tour&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Edges&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Manager&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">ID&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;--------------------------------------------------------------------------&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">user1&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">ID&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="s">&amp;#34;ê°€ ê´€ë¦¬í•˜ëŠ” ì „ì²´ ì—¬í–‰ ìƒí’ˆ ì¡°íšŒ&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="nx">_&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">tour&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="k">range&lt;/span> &lt;span class="nx">tourProductRepository&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">FindAllByManager&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">user1&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">ID&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;TourProduct(id=%d, name=%s, manager=%s)\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">tour&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">ID&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">tour&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Name&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">tour&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Edges&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Manager&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">ID&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;pre tabindex="0">&lt;code>ì „ì²´ ìœ ì € ì¡°íšŒ
User(id=umi0410, name=ë°•ì§„ìˆ˜)
User(id=devumi, name=ê°œë°œì)
--------------------------------------------------------------------------
ì „ì²´ ì—¬í–‰ ìƒí’ˆ ì¡°íšŒ
TourProduct(id=1, name=ë¯¸êµ­ ë‰´ìš• ì—¬í–‰, manager=umi0410)
TourProduct(id=2, name=ìœ ëŸ½ ì—¬í–‰, manager=devumi)
--------------------------------------------------------------------------
umi0410ê°€ ê´€ë¦¬í•˜ëŠ” ì „ì²´ ì—¬í–‰ ìƒí’ˆ ì¡°íšŒ
TourProduct(id=1, name=ë¯¸êµ­ ë‰´ìš• ì—¬í–‰, manager=umi0410)
&lt;/code>&lt;/pre>&lt;p>ê°„ë‹¨í•œ í…ŒìŠ¤íŠ¸ìš©ìœ¼ë¡œ 2ëª…ì˜ ìœ ì €ë¥¼ ë§Œë“¤ì—ˆê³ , ê°ê°ì˜ ìœ ì €ê°€ ê´€ë¦¬í•˜ëŠ” 2ê°œì˜ ì—¬í–‰ ìƒí’ˆì„ ë§Œë“¤ì–´ì„œ ì¡°íšŒí•˜ëŠ” í”„ë¡œê·¸ë¨ì„ ë§Œë“¤ì–´ë³´ì•˜ìŠµë‹ˆë‹¤. repository ê³„ì¸µì—ì„œ ë§Œë“  FindAll()ì´ë‚˜ FindAllByManager()ì™€ ê°™ì€ ë©”ì†Œë“œë“¤ì„ í†µí•´ í¸ë¦¬í•˜ê²Œ ì‘ì—…í•  ìˆ˜ ìˆë„¤ìš”!&lt;/p>
&lt;h2 id="ë§ˆì¹˜ë©°">ë§ˆì¹˜ë©°&lt;/h2>
&lt;p>ê¸€ì„ ì“°ë‹¤ë³´ë‹ˆ ë°±ì—”ë“œ ê°œë°œì—ì„œ ë°ì´í„°ë² ì´ìŠ¤ê°€ ì™œ í•„ìš”í•˜ê³  ì–´ë–¤ ì‹ìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ”ì§€ë¥¼ ë‹¤ë£¨ëŠ” ê¸€ë„ ì•„ë‹ˆê³ , Golangì—ì„œ ent í”„ë ˆì„ì›Œí¬ë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì„ ìì„¸íˆ ì•Œë ¤ì£¼ëŠ” ê¸€ë„ ì•„ë‹Œ ì´ë„ ì €ë„ ì•„ë‹Œ ê¸€ì´ ëœ ê±´ ì•„ë‹Œê°€ ì‹¶ê¸°ë„ í•©ë‹ˆë‹¤.&lt;/p>
&lt;p>ê·¸ë˜ë„ ì•ìœ¼ë¡œ Golangìœ¼ë¡œ ë°±ì—”ë“œ ê°œë°œí•˜ëŠ” ê²ƒì— ëŒ€í•´ ì²œì²œíˆ í•œ 5~6í¸ ì •ë„ì˜ ê¸€ì„ ì¨ë‚˜ê°€ë³¼ê¹Œí•˜ëŠ”ë° ì´ë•Œ DB ê´€ë ¨ëœ ë‚´ìš©ì„ ìš°ì„  ì§šê³ ëŠ” ë„˜ì–´ê°€ì•¼í•  ê²ƒ ê°™ê¸°ë„ í–ˆê³ , ë¬´ì—‡ë³´ë‹¤ í•œê¸€ë¡œ ëœ ent ìë£Œë¥¼ í•˜ë‚˜ë„ ì°¾ì„ ìˆ˜ ì—†ë‹¤ëŠ” ì ì—ì„œ ë°ì´í„°ë² ì´ìŠ¤ ê´€ë ¨ í”„ë ˆì„ì›Œí¬ì¸ entë¥¼ ì†Œê°œí•´ë³´ê³ ì í–ˆìŠµë‹ˆë‹¤! ã…ã…&lt;/p>
&lt;p>ì§€ë©´ ì‚¬ì • ìƒ ì½”ë“œë“¤ì„ ì˜ë¼ì„œ ì˜¬ë ¸ëŠ”ë° ì›ë³¸ ì½”ë“œëŠ” &lt;a class="link" href="https://github.com/umi0410/how-to-backend-in-go" target="_blank" rel="noopener"
>https://github.com/umi0410/how-to-backend-in-go&lt;/a> ì— ì˜¬ë ¤ë†“ì„í…Œë‹ˆ ì°¸ê³ í•´ì£¼ì‹œë©´ ê°ì‚¬í•˜ê² ìŠµë‹ˆë‹¤.&lt;/p>
&lt;h2 id="ì°¸ê³ ">ì°¸ê³ &lt;/h2>
&lt;ul>
&lt;li>&lt;a class="link" href="https://entgo.io/" target="_blank" rel="noopener"
>https://entgo.io/&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://github.com/ent/ent" target="_blank" rel="noopener"
>https://github.com/ent/ent&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Go ì–¸ì–´ë¡œ ì ìš©í•´ë³´ëŠ” Computer Science - Mutexì™€ Semaphore</title><link>https://umi0410.github.io/blog/golang/go-mutex-semaphore/</link><pubDate>Wed, 20 Jan 2021 15:25:54 +0900</pubDate><guid>https://umi0410.github.io/blog/golang/go-mutex-semaphore/</guid><description>&lt;img src="https://umi0410.github.io/blog/golang/go-mutex-semaphore/mutex-2.png" alt="Featured image of post Go ì–¸ì–´ë¡œ ì ìš©í•´ë³´ëŠ” Computer Science - Mutexì™€ Semaphore" />&lt;p>Go ì–¸ì–´ë¡œ ì ìš©í•´ë³´ëŠ” Computer Scienceì˜ ì²« ë²ˆì§¸ ë‚´ìš©ìœ¼ë¡œ OS ê´€ë ¨ ë‚´ìš© ì¤‘ ì´ë¡ ì ìœ¼ë¡œëŠ” í”í•˜ê²Œ ì ‘í•  ìˆ˜ ìˆì§€ë§Œ ì‹¤ì œ ì ìš©ì— ëŒ€í•œ ë‚´ìš©ì€
ì°¾ì•„ë³´ê¸° í˜ë“¤ì—ˆë˜ &lt;code>Mutex&lt;/code>, &lt;code>Semaphore&lt;/code>ì— ëŒ€í•´ ì•Œì•„ë³´ë ¤í•œë‹¤.&lt;/p>
&lt;p>Mutexì™€ Semaphoreì€ ê°ê°ì˜ ì¶”ìƒì ì¸ ê°œë…ì„ ë°”íƒ•ìœ¼ë¡œ OSë‚˜ Go ë“±ì—ì„œ ì‚¬ìš©ë  ìˆ˜ ìˆê¸°ì— ì„¸ë¶€ì ì¸ ë‚´ìš©ì€ ë¬¸ë§¥ì— ë”°ë¼ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆë‹¤ê³  ìƒê°í•œë‹¤. ì˜ˆë¥¼ ë“¤ì–´ Goì—ì„œì˜ MutexëŠ” ì£¼ë¡œ &lt;code>sync.Mutex&lt;/code>ë¥¼ ì´ìš©í•œ ì„œë¡œ ë‹¤ë¥¸ Goroutineì˜ ë™ì‹œ ì ‘ê·¼ì— ëŒ€í•œ ì œì–´ë¥¼ ì˜ë¯¸í•˜ëŠ” ë°˜ë©´, ë‹¤ë¥¸ í”„ë¡œê·¸ë˜ë° ì–¸ì–´ë‚˜ OSì—ì„œëŠ” ì£¼ë¡œ ì„œë¡œ ë‹¤ë¥¸ Kernel threadë‚˜ Processì— ëŒ€í•œ ë™ì‹œ ì ‘ê·¼ ì œì–´ë¥¼ ì˜ë¯¸í•  ìˆ˜ ìˆë‹¤.&lt;/p>
&lt;h2 id="mutex">Mutex&lt;/h2>
&lt;p>&lt;code>Mutex&lt;/code>ëŠ” &lt;strong>Mutual Exclusion&lt;/strong>ì˜ ì¤„ì„ë§ë¡œ &lt;strong>ìƒí˜¸ ë°°ì œ&lt;/strong>ë¥¼ ì˜ë¯¸í•œë‹¤. ì¦‰ &lt;strong>ì„œë¡œ ë‹¤ë¥¸ ì›Œì»¤ê°€ ê³µìœ  ìì›ì— ì ‘ê·¼í•˜ëŠ” ê²ƒì„ ì œí•œ&lt;/strong>í•œë‹¤ëŠ” ë§ì´ë‹¤. &lt;code>Go&lt;/code>ì—ì„œëŠ” ì´ &amp;ldquo;&lt;strong>ì›Œì»¤&lt;/strong>&amp;ldquo;ê°€ &lt;code>Goroutine&lt;/code>ì´ ë˜ê³ , ì»¨í…ìŠ¤íŠ¸ì— ë”°ë¼ í”„ë¡œì„¸ìŠ¤ê°€ ë  ìˆ˜ë„, ìŠ¤ë ˆë“œê°€ ë  ìˆ˜ë„ ê·¸ ì™¸ì˜ ë‹¤ë¥¸ ì¡´ì¬ê°€ ë  ìˆ˜ë„ ìˆë‹¤. &lt;code>ê³µìœ  ìì›&lt;/code>ì´ë€ ì—¬ëŸ¬ ì›Œì»¤ê°€ ë™ì‹œì— ì ‘ê·¼í•˜ëŠ” ìì›ì„ ë§í•˜ê³  ì´ &lt;strong>ê³µìœ  ìì›ì— ëŒ€í•œ ë™ì‹œ ì ‘ê·¼ì„ ì œí•œí•´ thread-safeí•˜ê²Œ ì‘ì—…í•˜ê³ ì í•˜ëŠ” ì˜ì—­&lt;/strong>ì„ &lt;code>Critical section&lt;/code>ì´ë¼ê³  í•œë‹¤. Cricical sectionì€ Mutexê°€ Lockì„ ìˆ˜í–‰í•œ ë’¤ Unlockë˜ê¸° ì „ê¹Œì§€ì˜ ì˜ì—­ì´ë©°, Lockê³¼ Unlockì€ Atomicí•œ ì‘ì—…ì´ê¸°ë•Œë¬¸ì— ì–´ë– í•œ ê²½ìš°ì—ë„ ë™ì‹œì ìœ¼ë¡œ ìˆ˜í–‰ë  ìˆ˜ ì—†ë‹¤.&lt;/p>
&lt;p>&lt;img src="https://umi0410.github.io/blog/golang/go-mutex-semaphore/mutex-1.png"
width="817"
height="547"
srcset="https://umi0410.github.io/blog/golang/go-mutex-semaphore/mutex-1_hu76213fc7fff91be05fb9c7f7e7037656_79471_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/golang/go-mutex-semaphore/mutex-1_hu76213fc7fff91be05fb9c7f7e7037656_79471_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="mutex-1.png"
class="gallery-image"
data-flex-grow="149"
data-flex-basis="358px"
>&lt;/p>
&lt;p>ì´í•´í•˜ê¸° ì‰½ê²Œ ì˜ˆì‹œë¥¼ í†µí•´ ì ‘ê·¼í•´ë³´ê² ë‹¤. ì›ë˜ í™”ì¥ì‹¤ ì˜ˆì œë¥¼ ë³´ê³  êµ‰ì¥íˆ ì™€ë‹¿ì•˜ëŠ”ë°, í™”ì¥ì‹¤ë³´ë‹¤ëŠ” í”¼íŒ…ë£¸ì´ ì¢€ ë” ì²­ê²°í•œ ê²ƒ ê°™ì•„ì„œ í”¼íŒ…ë£¸ìœ¼ë¡œ ì˜ˆë¥¼ ë“¤ì–´ë³´ê² ë‹¤. ìš°ë¦¬ ê·€ì—¬ìš´ ê³ í¼ê°€ &lt;strong>í”¼íŒ…ë£¸ì„ í•œ ê°œë§Œ ìš´ì˜í•˜ëŠ” ì˜·ê°€ê²Œì— ë°©ë¬¸&lt;/strong>í–ˆë‹¤ê³  ê°€ì •í•´ë³´ì.&lt;/p>
&lt;p>&lt;img src="https://umi0410.github.io/blog/golang/go-mutex-semaphore/mutex-2.png"
width="831"
height="331"
srcset="https://umi0410.github.io/blog/golang/go-mutex-semaphore/mutex-2_hu253887d6f424b5a6c4c14b3309becda5_68035_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/golang/go-mutex-semaphore/mutex-2_hu253887d6f424b5a6c4c14b3309becda5_68035_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="mutex-2.png"
class="gallery-image"
data-flex-grow="251"
data-flex-basis="602px"
>&lt;/p>
&lt;ul>
&lt;li>í”¼íŒ…ë£¸ - Critical section&lt;/li>
&lt;li>ê³ í¼ê°€ í”¼íŒ…ë£¸ì— ë“¤ì–´ê°€ì„œ ì˜·ì„ ì…ëŠ” ì‘ì—…ì€ í•˜ë‚˜ì˜ Goroutine&lt;/li>
&lt;/ul>
&lt;p>ë™ì‹œì— ì—¬ëŸ¬ ê³ í¼ê°€ í•˜ë‚˜ì˜ í”¼íŒ…ë£¸ì—ì„œ ì˜·ì„ ê°ˆì•„ì…ìœ¼ë ¤í•œë‹¤ë©´ ğŸ˜Ÿ ë‚œì²˜í•œ ìƒí™©ì´ ë°œìƒí•  ê²ƒì´ë‹¤. ê·¸ë ‡ê¸°ë•Œë¬¸ì— í”¼íŒ…ë£¸ì—ëŠ” Lock, Unlock ê¸°ëŠ¥ì´ ì¡´ì¬í•´ì•¼í•˜ëŠ”ë°, ì´ ê¸°ëŠ¥ì„ êµ¬í˜„í•œë‹¤í•´ë„ &lt;strong>Atomic&lt;/strong>í•˜ê²Œ ë™ì‘í•  ìˆ˜ ìˆë„ë¡ ì œëŒ€ë¡œ êµ¬í˜„í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´ &lt;strong>í•œ ì›Œì»¤ê°€ Lockì„ í•˜ëŠ” ì‚¬ì´ì— ë‹¤ë¥¸ ì›Œì»¤ê°€ ë™ì‹œì— Lock&lt;/strong>ì„ ê±¸ë ¤í•  ìˆ˜ ìˆê³ , ê·¸ ê²½ìš° ë‘ ì›Œì»¤ê°€ ë™ì‹œì— í•œ í”¼íŒ…ë£¸(Critical Section)ì—ì„œ ì‘ì—…ì„ í•˜ë ¤í•  ê²ƒì´ë‹¤. ê·¸ë ‡ê¸°ë•Œë¬¸ì— &lt;strong>Lock, Unlockì€ Atomicí•´ì•¼í•˜ë©° ì´ë ‡ê²Œ ê° ì›Œì»¤ë¥¼ ìƒí˜¸ ë°°ì œì‹œì¼œ ë™ì‹œì— ì‘ì—…í•  ìˆ˜ ì—†ë„ë¡ í•˜ëŠ” ê²ƒ&lt;/strong>ì´ ë°”ë¡œ &lt;code>Mutex&lt;/code>ì´ë‹¤.&lt;/p>
&lt;h3 id="mutexë¥¼-ì´ìš©í•œ-go-program---counter">Mutexë¥¼ ì´ìš©í•œ Go program - Counter&lt;/h3>
&lt;p>&lt;strong>Count = 0ì—ì„œ ì‹œì‘í•´ ë™ì‹œì ìœ¼ë¡œ +1ì„ 10ë§Œ ë²ˆ, -1ì„ 10ë§Œ ë²ˆ ìˆ˜í–‰í•˜ëŠ” ì¹´ìš´í„° í”„ë¡œê·¸ë¨&lt;/strong>&lt;/p>
&lt;p>ê·¸ëŸ¼ ì‹¤ìƒí™œì— ë¹„ìœ í•œ MutexëŠ” ì´ ì •ë„ë¡œ ë§ˆì¹˜ê³ , Mutexê°€ ì–´ë–»ê²Œ ì‚¬ìš©ë˜ëŠ”ì§€ Goë¡œ ì§  ê°„ë‹¨í•œ Counter í”„ë¡œê·¸ë¨ì„ í†µí•´ ì•Œì•„ë³´ì.&lt;/p>
&lt;ul>
&lt;li>Mutexë¥¼ ì˜ ì ìš©í•œ ê²½ìš° - ëª‡ ë²ˆì„ ìˆ˜í–‰í•˜ë“  ê²°ê³¼ëŠ” 0.&lt;/li>
&lt;li>Mutexê°€ ì ìš©ë˜ì§€ ì•Šì€ safeí•˜ì§€ ì•Šì€ ê²½ìš° - ê²°ê³¼ê°€ 0ì´ ë‚˜ì˜¤ì§€ ì•Šì„ ìˆ˜ ìˆë‹¤.&lt;/li>
&lt;/ul>
&lt;p>íŠ¹íˆ &lt;code>Go&lt;/code>ì—ì„œëŠ” &lt;code>sync&lt;/code> íŒ¨í‚¤ì§€ì˜ &lt;code>Mutex&lt;/code>ë¼ëŠ” typeì„ í†µí•´ ê°„ë‹¨í•˜ê²Œ Mutex ê¸°ëŠ¥ì„ ì´ìš©í•  ìˆ˜ ìˆë‹¤. &lt;strong>ë™ì¼í•œ Mutex structë¥¼ ì°¸ì¡°í•œë‹¤ë©´ ê°™ì€ Keyë¥¼ ì´ìš©í•œë‹¤ëŠ” ê°œë…&lt;/strong>ì´ê³ , &lt;code>mutex.Lock()&lt;/code>ì„ í˜¸ì¶œí•œ ë’¤ &lt;code>mutex.Unlock()&lt;/code>ì´ í˜¸ì¶œë˜ê¸° ì´ì „ê¹Œì§€ê°€ Critical sectionì´ ë˜ë©° ë‹¤ë¥¸ goroutineë“¤ì€ ê°™ì€ Mutex(ì¦‰ í‚¤)ì— ì˜í•œ Critical sectionì— ì§„ì…í•  ìˆ˜ ì—†ë‹¤.&lt;/p>
&lt;p>&lt;em>ë‚´ê°€ ì²˜ìŒ Mutexë¥¼ ì²˜ìŒ ì ‘í–ˆì„ ë•Œ í•œ ê°€ì§€ í—·ê°ˆë ¸ë˜ ê²ƒ&lt;/em>ì€ ë‹¹ì‹œ Critical sectionì´ë¼ëŠ” ê°œë…ì´ ì—†ì—ˆê¸° ë•Œë¬¸ì— Lockì„ í˜¸ì¶œí•˜ê¸°ë§Œ í•˜ë©´ ëŸ°íƒ€ì„ì— &lt;del>ì•Œì•„ì„œ ìŠ¤ë§ˆíŠ¸í•˜ê²Œ Lockê³¼ Unlockì‚¬ì´ì˜ ë³€ìˆ˜ë“¤ì— ëŒ€í•œ ì ‘ê·¼ ì¤‘ ë™ì‹œì ì¸ ì ‘ê·¼ë§Œì„ ì ì‹œ ë¸”ë½í•´ì£¼ëŠ” ì¤„&lt;/del> ì•Œì•˜ëŠ”ë°, ì‚¬ì‹¤ ê·¸ ì‚¬ì´ ë³€ìˆ˜ë“¤ì¤‘ ë™ì‹œì ìœ¼ë¡œ ì ‘ê·¼í•˜ë ¤ëŠ” ë³€ìˆ˜ì— ëŒ€í•´ì„œë§Œ ì ì‹œ ë¸”ë½í•´ì£¼ëŠ” ê²Œ ì•„ë‹ˆë¼ &lt;strong>Lockê³¼ Unlock ì‚¬ì´ë¥¼ Critical sectionìœ¼ë¡œ ë§Œë“œëŠ” ê²ƒ&lt;/strong>ì´ì—ˆë‹¤.&lt;/p>
&lt;p>ì ê·¸ëŸ¼ Countë¼ëŠ” í•˜ë‚˜ì˜ intí˜• ë³€ìˆ˜ì— ë™ì‹œì ìœ¼ë¡œ ì ‘ê·¼ì„ í•˜ëŠ” ìƒí™©ì„ ê·¹ëŒ€í™”í•˜ê¸° ìœ„í•´ ì—¬ëŸ¬ ê³ ë£¨í‹´ìœ¼ë¡œ ì‘ì—…í•´ë³´ê² ë‹¤. +1ì„ 1ë§Œ ë²ˆí•˜ëŠ” ê³ ë£¨í‹´ì„ 10ê°œ, -1ì„ 1ë§Œ ë²ˆí•˜ëŠ” ê³ ë£¨í‹´ì„ ë§ˆì°¬ê°€ì§€ë¡œ 10ê°œ ì´ìš©í•˜ê² ë‹¤.&lt;/p>
&lt;p>ì „ì²´ ì½”ë“œ ì°¸ê³ : &lt;a class="link" href="https://play.golang.org/p/xaLE1YkAdvd" target="_blank" rel="noopener"
>https://play.golang.org/p/xaLE1YkAdvd&lt;/a>&lt;/p>
&lt;p>&lt;img src="https://umi0410.github.io/blog/golang/go-mutex-semaphore/output-1.png"
width="516"
height="443"
srcset="https://umi0410.github.io/blog/golang/go-mutex-semaphore/output-1_hu6e22a3f3f203a0242d8843396eefee7b_63957_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/golang/go-mutex-semaphore/output-1_hu6e22a3f3f203a0242d8843396eefee7b_63957_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="output-1.png"
class="gallery-image"
data-flex-grow="116"
data-flex-basis="279px"
>&lt;/p>
&lt;ul>
&lt;li>ìš°ë¦¬ê°€ ì¼ë°˜ì ìœ¼ë¡œ ìµìˆ™í•œ Sync ì¦‰ ë™ê¸°ì ì¸ ìˆœì°¨ì  ì§„í–‰ ì‹œì—ëŠ” ë‹¹ì—°íˆ 10ë§Œë²ˆ +1, 10ë§Œë²ˆ -1 í›„ì— ê²°ê³¼ê°€ 0ì´ì—ˆë‹¤.&lt;/li>
&lt;li>ë™ì‹œì  ì ‘ê·¼ì„ ìˆ˜í–‰í•˜ì 10ë§Œë²ˆ +1, 10ë§Œë²ˆ -1ì„ í–ˆì§€ë§Œ &lt;code>Count += 1&lt;/code> ì„ ìˆ˜í–‰í•˜ë˜ ì¤‘ ë˜ ë‹¤ë¥¸ &lt;code>Count += 1&lt;/code>ì´ ìˆ˜í–‰ë˜ëŠ” ë“±ì˜ ì›ì¹˜ì•Šë˜ ìƒí™©ì´ ì•¼ê¸°ë  ìˆ˜ ìˆê¸°ì— ê²°ê³¼ê°’ì´ 0ì¸ ê²½ìš°ë¥¼ ì°¾ê¸° í˜ë“¤ë‹¤.&lt;/li>
&lt;li>ì—¬ëŸ¬ Goroutineì´ concurrentí•˜ê²Œ ì§„í–‰í•˜ë˜ &lt;code>Count += 1&lt;/code>, &lt;code>Count -= 1&lt;/code> ê³¼ ê°™ì€ &lt;strong>ë™ì‹œì  ì ‘ê·¼ì´ ìˆ˜í–‰ë˜ì–´ì„œëŠ” ì•ˆë˜ëŠ” ì˜ì—­ì€ Critical Area&lt;/strong>ë¡œ ì„¤ì •í•´ ìƒí˜¸ ë°°ì œì ìœ¼ë¡œ ì‘ì—…ë˜ê²Œ í•˜ê¸° ìœ„í•´ Critical sectionì˜ ì „/í›„ì— &lt;code>sync.Mutex&lt;/code>ë¥¼ ì´ìš©í•´ Lock, Unlock ê¸°ëŠ¥ì„ ë„£ì–´ì£¼ì &lt;strong>ê¸°ëŒ€í–ˆë˜ ëŒ€ë¡œ 0ì˜ ê²°ê³¼&lt;/strong>ë¥¼ ì–»ì„ ìˆ˜ ìˆì—ˆë‹¤.&lt;/li>
&lt;/ul>
&lt;h3 id="-mutex-ê·¸ë˜ì„œ-ì–¸ì œ-ì¨ìš”">ğŸ’¡ Mutex.. ê·¸ë˜ì„œ ì–¸ì œ ì¨ìš”?&lt;/h3>
&lt;p>ì‚¬ì‹¤ Mutexë¼ëŠ” ê°œë…ì´ ê·¸ë ‡ê²Œ ì–´ë ¤ìš´ ê²ƒë„ ì•„ë‹ˆê³ , ì‚¬ìš©ë²• ìì²´ê°€ ì–´ë ¤ìš´ ê²ƒë„ ì•„ë‹ˆë‹¤. ë‚˜ëŠ” í•˜ì§€ë§Œ í•­ìƒ &lt;strong>&amp;ldquo;ì–¸ì œ&amp;rdquo;&lt;/strong>, &lt;strong>&amp;ldquo;ì™œ&amp;rdquo;&lt;/strong> ì¨ì•¼í•˜ëŠ”ì§€ë¥¼ ê¶ê¸ˆí•´í•˜ëŠ” í¸ì´ë‹¤.&lt;/p>
&lt;ol>
&lt;li>Critical sectionì—ì„œ ë§ì€ ì‹œê°„ì´ ì†Œìš”ë˜ëŠ” ê²½ìš°? â‡’ âŒ
ìœ„ì˜ counterì™€ ê°™ì€ ì‘ì—…ì€ ëŒ€ë¶€ë¶„ì˜ ì‘ì—…ì´ critical section ì†ì— ìˆë‹¤ê³  ë³¼ ìˆ˜ ìˆë‹¤. ì´ ê²½ìš° ë™ì‹œì ì¸ ì‘ì—…ê³¼ í•¨ê»˜ Lock, Unlockì„ í•˜ë©° critical sectionì„ ê´€ë¦¬í•˜ëŠ” ê²ƒë³´ë‹¤ ì• ì´ˆì— ì‘ì—… ìì²´ë¥¼ ë™ê¸°ì ìœ¼ë¡œ ìˆ˜í–‰í•˜ëŠ” ê²Œ ë‚˜ì„ ìˆ˜ ìˆë‹¤. ì™œëƒí•˜ë©´ ë™ì‹œì  ì‘ì—… ì†ì—ì„œ Mutexë¥¼ í†µí•´ ë™ê¸°ì ìœ¼ë¡œ ì‘ì—…í•  ìˆ˜ ìˆë„ë¡ í•˜ëŠ” ê²ƒì—ì„œ ì˜¤ëŠ” ì˜¤ë²„í—¤ë“œëŠ” ë¶„ëª…íˆ ì¡´ì¬í•˜ê³ , Critical section ë°–ì—ì„œ íš¨ìœ¨ì ìœ¼ë¡œ ë™ì‹œì ìœ¼ë¡œ ì‘ì—…ì„ ì§„í–‰í–ˆë‹¤í•˜ë”ë¼ë„ critical sectionì—ì„œ ë³‘ëª©ì´ ë°œìƒí•´ë²„ë ¤ ì „ì²´ì ì¸ Throughputì´ ì•ˆ ì¢‹ì•„ì§ˆ ê²ƒì´ë‹¤.&lt;/li>
&lt;li>&lt;strong>Critical sectionì—ì„œëŠ” ì ì€ ì‹œê°„ì´ ì†Œìš”ë˜ê³ , ëŒ€ë¶€ë¶„ì€ ë™ì‹œì ìœ¼ë¡œ ì‘ì—…ì´ ê°€ëŠ¥í•œ ê²½ìš°&lt;/strong>? â‡’ â­•
ì˜ˆë¥¼ ë“¤ì–´ ì–´ë–¤ APIë¥¼ ì—¬ëŸ¬ ë²ˆ í˜¸ì¶œí•œ ë’¤ ê·¸ ì‘ë‹µ ì¤‘ ì¼ë¶€ë¥¼ ê³„ì†í•´ì„œ ë”í•´ ê²°ê³¼ë¥¼ ë‚´ëŠ” Reduce ì‘ì—…ì„ ìˆ˜í–‰í•œë‹¤ê³  ì¹˜ì. ìˆœì°¨ì ìœ¼ë¡œ ìˆ˜í–‰í•  ì‹œ ì˜¤ëœ ì‹œê°„ì´ ì†Œìš”ë  API í˜¸ì¶œì€ ë™ì‹œì ìœ¼ë¡œ ì§„í–‰í•˜ê³ , ê²°ê³¼ì— ëŒ€í•œ Reduce ì‘ì—…ë§Œ ì ì‹œ Critical sectionë‚´ì—ì„œ ì‘ì—…í•œë‹¤ë©´ ì•„ì£¼ ì¢‹ì€ ì„±ëŠ¥ê³¼ í•¨ê»˜ ì•ˆì „í•˜ê²Œ ì‘ì—…í•  ìˆ˜ ìˆì„ ê²ƒì´ë‹¤!&lt;/li>
&lt;/ol>
&lt;h2 id="semaphore">Semaphore&lt;/h2>
&lt;p>&lt;img src="https://umi0410.github.io/blog/golang/go-mutex-semaphore/semaphore.png"
width="884"
height="619"
srcset="https://umi0410.github.io/blog/golang/go-mutex-semaphore/semaphore_hu1456e527b7729559b12f99ce1b9bda34_227201_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/golang/go-mutex-semaphore/semaphore_hu1456e527b7729559b12f99ce1b9bda34_227201_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="semaphore.png"
class="gallery-image"
data-flex-grow="142"
data-flex-basis="342px"
>&lt;/p>
&lt;p>Mutexì—ì„œ ëŒ€ë¶€ë¶„ì˜ Lockì´ë‚˜ Critical sectionì— ëŒ€í•œ ë‚´ìš©ì„ ì„¤ëª…í–ˆê¸° ë•Œë¬¸ì— Semaphoreì—ì„œ ë” ì„¤ëª…í•  ë‚´ìš©ì´ ë§ì§€ëŠ” ì•Šë‹¤. Semaphoreì˜ ë™ì‘ì— ëŒ€í•œ ê°„ë‹¨í•œ ì˜ˆì‹œëŠ” ìœ„ì˜ ê·¸ë¦¼ê³¼ ê°™ì€ë°, 5ë§ˆë¦¬ì˜ ê³ í¼ê°€ ì¡´ì¬í•œë‹¤í•´ë„ ë™ì‹œì— ì ‘ê·¼í•  ìˆ˜ ìˆê²Œí•˜ëŠ” ê³ í¼ë¥¼ 3ê°œë¡œ ì œí•œí•œë‹¤ë©´ 2ë§ˆë¦¬ì˜ ê³ í¼ëŠ” í”¼íŒ…ë£¸ì— ë“¤ì–´ê°€ì§€ ëª»í•˜ê³  ë¸”ë½ëœë‹¤. Lockedì™€ Unlocked ìƒíƒœ ë¿ì¸ &lt;code>Mutex&lt;/code>ì™€ ë‹¬ë¦¬ &lt;code>Semaphore&lt;/code>ëŠ” &lt;strong>ì„ì˜ì˜ ê°œìˆ˜ë¥¼ ì„¸ëŠ” Counterì²˜ëŸ¼ ë™ì‘í•´ ì„ì˜ì˜ ê°œìˆ˜ì˜ ì›Œì»¤ë§Œì´ Critical sectionì— ë™ì‹œì ìœ¼ë¡œ ì ‘ê·¼&lt;/strong>í•  ìˆ˜ ìˆë„ë¡ í•œë‹¤.&lt;/p>
&lt;p>Counterë¥¼ ì˜ˆë¡œ ë“¤ìë©´ 10ê°œì˜ ì›Œì»¤ê°€ ì¡´ì¬í•œë‹¤í•´ë„ &amp;ldquo;5&amp;quot;ë¥¼ ì„¸ëŠ” SemaphoreëŠ” í•œ ì›Œì»¤ê°€ Critical sectionì— ì§„ì…í•  ë•Œë§ˆë‹¤ Counter ê°’ì„ 1ì”© ë‚®ì¶”ê³ , Critical sectionì„ íƒˆì¶œí•  ë•Œë§ˆë‹¤ Counter ê°’ì„ ë‹¤ì‹œ 1ì”© ë†’ì¸ë‹¤. ë§Œì•½ ì–´ë–¤ ì›Œì»¤ê°€ Critical sectionì— ì§„ì…í•˜ë ¤ëŠ”ë° Count ê°’ì´ 0ì´ë¼ë©´ ì´ˆê¸°ì— ê³„íší–ˆë˜ ëŒ€ë¡œ 5ê°œì˜ ì›Œì»¤ê°€ ì´ë¯¸ ë™ì‹œì ìœ¼ë¡œ ì‘ì—…ì¤‘ì´ë¼ëŠ” ì˜ë¯¸ì´ë¯€ë¡œ ì´ ì›Œì»¤ëŠ” í•œ ì›Œì»¤ê°€ Critical sectionì„ ë‚˜ì˜¤ë©´ì„œ Counter ê°’ì„ ë‹¤ì‹œ 1 ì¦ê°€ì‹œí‚¬ ë•Œê¹Œì§€ Blockëœë‹¤.&lt;/p>
&lt;p>Mutexì˜ Lockê³¼ Unlockì´ Atomicí•˜ê¸°ì— ì–´ë– í•œ ê²½ìš°ì—ë„ ë™ì‹œì ìœ¼ë¡œ ìˆ˜í–‰ë  ìˆ˜ ì—†ì—ˆë“¯ì´ Semaphoreì˜ Counting ì‘ì—… ë˜í•œ Atomicí•´ì•¼í•˜ê³  ê·¸ë˜ì•¼ë§Œ Thread-safeí•œ counterë¡œ ë™ì‘í•  ìˆ˜ ìˆë‹¤. Semaphoreê°€ ìˆ˜í–‰í•˜ëŠ” Counting ì‘ì—…ì€ ì£¼ë¡œ tryë¥¼ ëœ»í•˜ëŠ” ë„¤ëœë€ë“œì–´ Proberenì˜ ì• ê¸€ìë¥¼ ë”´ &lt;code>P&lt;/code>ì™€ incrementë¥¼ ëœ»í•˜ëŠ” Verhogenì˜ ì• ê¸€ìë¥¼ ë”´ &lt;code>V&lt;/code>ë¡œ ë‘ ê°€ì§€ê°€ í‘œí˜„í•˜ëŠ” ë“¯í•˜ë‹¤. &lt;code>P&lt;/code>ëŠ” Count ê°’ì´ 0ì´ ì•„ë‹ˆë©´ ì‘ì—…ì„ ìˆ˜í–‰í•˜ê² ë‹¤ëŠ” ì˜ë¯¸í•˜ë©° ë§Œì•½ Count ê°’ì´ 0ì´ë¼ë©´ 0ì´ ì•„ë‹Œ ê°’ì´ ë  ë•Œê¹Œì§€ waití–ˆë‹¤ê°€ 0 ì•„ë‹Œ ê°’ì´ ë˜ë©´ count ê°’ì„ 1 ê°ì†Œì‹œí‚¤ë©° ì‘ì—…ì„ ì‹œì‘í•œë‹¤. &lt;code>V&lt;/code>ëŠ” ì‘ì—…ì„ ë§ˆì¹˜ë©° count ê°’ì„ ë‹¤ì‹œ 1 ì¦ê°€ì‹œí‚¤ê² ë‹¤ëŠ” ì˜ë¯¸ì´ë‹¤.&lt;/p>
&lt;h3 id="mutexì™€-binary-semaphoreì˜-ìœ ì‚¬í•œ-ì ">Mutexì™€ Binary semaphoreì˜ ìœ ì‚¬í•œ ì &lt;/h3>
&lt;p>ë™ì‹œ ì ‘ê·¼ ì›Œì»¤ë¥¼ 1ê°œë¡œ ì œí•œí•˜ëŠ” Semaphoreì˜ ê²½ìš° Count ê°’ì´ 0ê³¼ 1 ë‘ ê°œë¡œë§Œ ì¡´ì¬í•  ìˆ˜ ìˆëŠ”ë° ì´ë¥¼ Binary semaphoreë¼ê³ í•œë‹¤. íŠ¹íˆ ì´ëŠ” Lockedì™€ Unlockedë¼ëŠ” ë‘ ê°€ì§€ì˜ ìƒíƒœë§Œì„ ê°–ëŠ” Mutexì™€ ìœ ì‚¬í•˜ë‹¤. í•˜ì§€ë§Œ Binary semaphoreëŠ” mutexê°€ ìœ ì‚¬í•œ ê¸°ëŠ¥ì„ í•  ë¿ ë™ì¼í•˜ì§€ëŠ” ì•Šë‹¤ëŠ” ì˜ê²¬ì´ ë§ë‹¤. ê·¸ ì´ìœ ëŠ” &lt;strong>MutexëŠ” Lock ë°©ì‹ì„ ì´ìš©í•˜ê³  SemaphoreëŠ” Signal(ì‹ í˜¸) ë°©ì‹ì„ ì´ìš©&lt;/strong>í•˜ê¸° ë•Œë¬¸ì´ë‹¤. Lock ë°©ì‹ì˜ ê²½ìš° Lockì„ ìˆ˜í–‰í•œ ì›Œì»¤ë§Œì´ Unlockì„ í•  ìˆ˜ ìˆëŠ” ë°˜ë©´ Signal ë°©ì‹ì€ try(ì‘ì—… ì‹œë„)ë¥¼ ìˆ˜í–‰í•œ ì›Œì»¤ê°€ ì•„ë‹ˆë”ë¼ë„ increment(ì‘ì—… ì™„ë£Œ) ì‹ í˜¸ë¥¼ ë³´ë‚¼ ìˆ˜ ìˆê¸°ì— ì„œë¡œ ëª…ë°±íˆ ë™ì‘ ë°©ì‹ì´ ë‹¤ë¥´ë‹¤ëŠ” ê²ƒì´ë‹¤. (í•˜ì§€ë§Œ ì´ ë¶€ë¶„ì— ëŒ€í•´ì„œëŠ” ì§ì ‘ ì‹¤ìŠµí•´ë³´ì§€ëŠ” ëª»í–ˆë‹¤.)&lt;/p>
&lt;p>*Semaphoreë¥¼ ì´í•´í•˜ëŠ” ë°ì— ìˆì–´ ë‚´ê°€ ì°©ê°í•´ì„œ í—¤ë§¸ë˜ ë¶€ë¶„ì€ ë°”ë¡œ &lt;del>Semaphoreì˜ ìš”ì ì´ thread-safeí•œ countë¼ê³  ì°©ê°&lt;/del>*í–ˆë˜ ê²ƒì´ë‹¤. í•˜ì§€ë§Œ semaphoreì˜ ìš”ì ì€ ì—¬ëŸ¬ ì›Œì»¤ì— ëŒ€í•´ì„œ thread safeí•œ count ê¸°ëŠ¥ì„ ì œê³µí•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ì„ì˜ì˜ ìˆ«ìë§Œí¼ì˜ ë™ì‹œì  ì ‘ê·¼ì„ í—ˆìš©í•˜ê³ , ê·¸ ì´ìƒì€ Block ìƒíƒœë¡œ ëŒ€ê¸°ì‹œí‚¨ë‹¤ëŠ” ê²ƒì´ë‹¤.&lt;/p>
&lt;h3 id="semaphoreë¥¼-ì´ìš©í•œ-go-program-1---counter">Semaphoreë¥¼ ì´ìš©í•œ Go Program 1 - Counter&lt;/h3>
&lt;p>goì—ì„œ Semaphoreë¥¼ ì´ìš©í•˜ëŠ” ë°©ë²•ì€ í¬ê²Œ 2ê°€ì§€ê°€ ìˆëŠ” ê²ƒ ê°™ë‹¤. ì•„ë˜ ë‘ ê°€ì§€ ë°©ë²• ì¤‘ ì¢€ ë” GoìŠ¤ëŸ¬ìš´ &lt;code>channel&lt;/code>ì„ ì´ìš©í•´ë³´ê² ë‹¤.&lt;/p>
&lt;ol>
&lt;li>Go íŠ¹ìœ ì˜ ìë£Œí˜•ì¸ &lt;code>channel&lt;/code>ì„ ì´ìš©í•˜ê¸° - channelì€ ì—¬ëŸ¬ goroutineì˜ concurrentí•œ ì‘ì—…ê°„ ë°ì´í„° ì „ì†¡ì€ ë¬¼ë¡ ì´ê³  ë™ì‹œì ì¸ ì‘ì—… ì¤‘ ë°ì´í„°ë¥¼ í¸ë¦¬í•˜ê²Œ ë™ê¸°í™”í•´ì£¼ëŠ” ë…€ì„ì´ë‹¤. ë”°ë¼ì„œ ë™ê¸°ì ì¸ countì™€ ìœ ì‚¬í•œ ê¸°ëŠ¥ì„ ë‚´ì¬í•˜ê³ ìˆë‹¤.&lt;/li>
&lt;li>&lt;a class="link" href="http://golang.org/x/sync/semaphore" target="_blank" rel="noopener"
>golang.org/x/sync/semaphore&lt;/a>ì˜ Weightedë¥¼ ì´ìš©í•˜ê¸° - Semaphoreì˜ Pë¥¼ Acquire, Vë¥¼ Releaseë¡œ êµ¬í˜„í•´ ì´ìš©í•  ìˆ˜ ìˆê²Œ í–ˆë‹¤.&lt;/li>
&lt;/ol>
&lt;p>ì „ì²´ ì½”ë“œëŠ” Mutexì™€ ë™ì¼í•˜ë©° ë§ˆì°¬ê°€ì§€ë¡œ ë‹¤ìŒ ë§í¬ë¡œ ì°¸ê³ í•´ë³¼ ìˆ˜ ìˆë‹¤: &lt;a class="link" href="https://play.golang.org/p/xaLE1YkAdvd" target="_blank" rel="noopener"
>https://play.golang.org/p/xaLE1YkAdvd&lt;/a>&lt;/p>
&lt;h3 id="buffered-channelì„-ì´ìš©í•œ-semaphore-in-go">Buffered channelì„ ì´ìš©í•œ Semaphore in Go&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">DoSemaphore&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">maxConcurrent&lt;/span> &lt;span class="kt">int64&lt;/span>&lt;span class="p">){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="nx">i&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="nx">i&lt;/span> &lt;span class="p">&amp;lt;&lt;/span> &lt;span class="mi">5&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="nx">i&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Count&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">wg&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">sync&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">WaitGroup&lt;/span>&lt;span class="p">{}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">sem&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nb">make&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kd">chan&lt;/span> &lt;span class="kd">struct&lt;/span>&lt;span class="p">{},&lt;/span> &lt;span class="nx">maxConcurrent&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">wg&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">20&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="nx">i&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="nx">i&lt;/span> &lt;span class="p">&amp;lt;&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="nx">i&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">go&lt;/span> &lt;span class="nf">Add1Sem&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">wg&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">sem&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">go&lt;/span> &lt;span class="nf">Sub1Sem&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">wg&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">sem&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">wg&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Wait&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Concurrent goroutines + Semaphore&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">maxConcurrent&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;Result(Desired 0):&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">Count&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;=====================================&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">Sub1Sem&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">wg&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">sync&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">WaitGroup&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">sem&lt;/span> &lt;span class="kd">chan&lt;/span> &lt;span class="kd">struct&lt;/span>&lt;span class="p">{}){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">defer&lt;/span> &lt;span class="nx">wg&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Done&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="nx">i&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="nx">i&lt;/span> &lt;span class="p">&amp;lt;&lt;/span> &lt;span class="mi">10000&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="nx">i&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">sem&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="kd">struct&lt;/span>&lt;span class="p">{}{}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Count&lt;/span> &lt;span class="o">-=&lt;/span> &lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">&amp;lt;-&lt;/span>&lt;span class="nx">sem&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>channelì„ ì´ìš©í•œ Semaphore ì½”ë“œë¥¼ ì„¤ëª…í•˜ê¸° ìœ„í•´ ì „ì²´ ì½”ë“œ ì¤‘ ì¼ë¶€ë¥¼ ê°€ì ¸ì™€ë³´ì•˜ë‹¤. Semaphoreë¥¼ ì´ìš©í•˜ê¸° ìœ„í•´ &lt;code>Unbuffered channel&lt;/code>ì´ ì•„ë‹Œ &lt;code>Buffered channel&lt;/code>ì„ ì´ìš©í•˜ëŠ” ì´ìœ ëŠ” ë‹¤ìŒê³¼ ê°™ì€ Unbuffered channelì˜ ë™ì‘ ë°©ì‹ì´ Semaphoreì˜ ë™ì‘ ë°©ì‹ê³¼ ë™ì¼í•˜ê¸° ë•Œë¬¸ì´ë‹¤.&lt;/p>
&lt;ul>
&lt;li>Bufferì˜ í¬ê¸°ë§Œí¼ì€ ë™ì‹œì ìœ¼ë¡œ channelì— ê°’ì„ ë„£ìœ¼ë ¤ëŠ” ì‹œë„ê°€ í—ˆìš©ë¨.&lt;/li>
&lt;li>buffered channelì´ ê½‰ ì°¬ ê²½ìš° ì±„ë„ì—ì„œ ê°’ì„ êº¼ë‚´ì§€ ì•ŠëŠ” ì´ìƒì€ ì¶”ê°€ì ìœ¼ë¡œ Channelì— ê°’ì„ ë„£ìœ¼ë ¤ì‹œë„í•˜ëŠ” goroutineì€ Blockë¨.&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://umi0410.github.io/blog/golang/go-mutex-semaphore/output-2.png"
width="534"
height="313"
srcset="https://umi0410.github.io/blog/golang/go-mutex-semaphore/output-2_hu5c9eb1f96e3e02a52a6b354b1459125f_26935_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/golang/go-mutex-semaphore/output-2_hu5c9eb1f96e3e02a52a6b354b1459125f_26935_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="output-2.png"
class="gallery-image"
data-flex-grow="170"
data-flex-basis="409px"
>&lt;/p>
&lt;p>(ì•ì„œ ì½”ë“œë¥¼ ë§í¬í•œ go playgroundì—ì„œ ì½”ë“œë¥¼ ë°”ë¡œ ì‹¤í–‰í•´ë³¼ ìˆ˜ ìˆë‹¤.)&lt;/p>
&lt;p>ë™ì‹œ ì ‘ê·¼ ì›Œì»¤ë¥¼ 1ê°œë¡œ ì œí•œí•˜ëŠ” SemaphoreëŠ” &lt;strong>Binary Semaphoreë¡œì„œ Mutexë¥¼ ì´ìš©í–ˆì„ ë•Œì™€ ìœ ì‚¬í•˜ë‹¤ê³  ë§í–ˆë“¯ì´ thread-safeí•˜ê²Œ count ì‘ì—…ì´ ì´ë£¨ì–´ì ¸ ì˜ˆìƒë˜ëŠ” ê°’ì´ì—ˆë˜ 0ì´ ì¶œë ¥ë¨&lt;/strong>ì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. í•˜ì§€ë§Œ ë™ì‹œì ‘ê·¼ì´ ê°€ëŠ¥í•œ ì›Œì»¤ê°€ 1ê°œ ì´ìƒì´ ë˜ë©´ thread-safeí•˜ì§€ ì•Šê²Œ ë˜ê³ , ë™ì‹œì ‘ê·¼ ì›Œì»¤ ê°œìˆ˜ê°€ ë§ì•„ì§ˆìˆ˜ë¡ ê²°ê³¼ê°€ ë” ë¶€ì •í™•í•œ ê²½í–¥ì´ ìˆëŠ” ê²ƒìœ¼ë¡œ ë‚˜íƒ€ë‚¬ë‹¤.&lt;/p>
&lt;h3 id="-semaphore-ê·¸ë˜ì„œ-ì–¸ì œ-ì“°ë‚˜ìš”">ğŸ’¡ Semaphore.. ê·¸ë˜ì„œ ì–¸ì œ ì“°ë‚˜ìš”?&lt;/h3>
&lt;blockquote>
&lt;p>MutexëŠ” thread-safeí•œ ì‘ì—…ì„ í•  ë•Œ ì‚¬ìš©í•˜ë©´ ë˜ëŠ” ê²ƒ ê°™ì€ë° SemaphoreëŠ” ê°œë…ì€ ì•Œê² ëŠ”ë° ì–¸ì œ ì¨ì•¼í•  ì§€ë¥¼ ì˜ ëª¨ë¥´ê² ë„¤ìš”. ì¼ì • ê°œìˆ˜ë§Œí¼ë§Œ ë™ì‹œ ì ‘ê·¼ì„ í—ˆìš©í•˜ë ¤ëŠ” ê²½ìš°ê°€ ìˆì„ê¹Œìš”?&lt;/p>
&lt;/blockquote>
&lt;p>Semaphoreì„ ì‚¬ìš©í•˜ê¸° ì¢‹ì€ ì¼€ì´ìŠ¤ëŠ” &lt;strong>ë™ì‹œì— ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” ì›Œì»¤ ìˆ˜ë¥¼ ì œí•œí•˜ëŠ” ê²½ìš°&lt;/strong>ì´ê³ , ì´ëŠ” ì£¼ë¡œ &lt;strong>ì „ì²´ ì‘ì—…ì´ ëŠ˜ì–´ì§€ëŠ” ê²ƒì„ ë°©ì§€í•˜ê³ ì í•˜ëŠ” ê²½ìš°&lt;/strong>ì— ì´ìš©ëœë‹¤. ë§ì€ ì‘ì—…ì„ ë™ì‹œì— ìˆ˜í–‰í•˜ë ¤í•˜ë©´ ë¨¼ì € ìˆ˜í–‰ë  ìˆ˜ ìˆëŠ” ì‘ì—…ì€ ë¨¼ì € ìˆ˜í–‰ë˜ë„ë¡ í•˜ê¸°ë³´ë‹¤ëŠ” ì „ì²´ì ìœ¼ë¡œ ëª¨ë“  ì‘ì—…ì´ ëŠ˜ì–´ì§€ê²Œ ë˜ê³  CPUë‚˜ Memory ë¦¬ì†ŒìŠ¤ë¥¼ ë§ì´ ì†Œëª¨í•˜ê²Œ ë˜ê³  ì´ëŠ” ì„œë²„ì˜ ì•ˆì •ì„±ì—ë„ ì¢‹ì§€ ì•Šë‹¤. Semaphoreë¥¼ ì´ìš©í•´ ë™ì‹œ ì ‘ê·¼ ì›Œì»¤ ìˆ˜ë¥¼ ì œí•œí•˜ê³ ìí•˜ëŠ” ì¼€ì´ìŠ¤ëŠ” Goì˜ Worker pool íŒ¨í„´ì„ ì´ìš©í•˜ëŠ” ê²½ìš°ë‚˜ Pipeline patternì„ ì´ìš©í•˜ëŠ” ê²½ìš°ì™€ ìœ ì‚¬í•˜ë‹¤.(&lt;em>ì²˜ìŒì—” Goì˜ ëª¨ë“  Concurrent patternë“¤ì„ ê°œë³„ì ìœ¼ë¡œ êµ¬ë³„ì§€ìœ¼ë ¤í–ˆì—ˆëŠ”ë°, ê³µë¶€í•˜ë‹¤ë³´ë‹ˆ ì¼ì •í•œ ê°œìˆ˜ì˜ Workerë¥¼ ì´ìš©í•˜ëŠ” Worker Pool pattern, Channelì„ ê¸°ë°˜ìœ¼ë¡œ ì‘ì—… ë‚´ì—­ì„ ìª¼ê°œì–´ ì‹¤ì‹œê°„ ì²˜ë¦¬í•˜ëŠ” Pipeline, í•œ ì±„ë„, ì—¬ëŸ¬ Goroutineì„ ì´ìš©í•˜ëŠ” Fan-in Fan-out pattern ë“±ë“± ë‹¤ë“¤ ìœ ì‚¬í•˜ê³  ì—°ê´€ì´ ë˜ì–´ìˆë”ë¼.&lt;/em>)&lt;/p>
&lt;p>&lt;strong>Semaphoreë¡œ ë™ì‹œ ì ‘ê·¼ Worker ìˆ˜ë¥¼ ì œí•œí•˜ì§€ ì•Šê³  ëª¨ë“  Goroutineì„ ë™ì‹œì ìœ¼ë¡œ ìˆ˜í–‰í•˜ëŠ” ê²½ìš°ì—” ì–´ë–»ê²Œ ë ê¹Œ?&lt;/strong>&lt;/p>
&lt;p>Logical Processor ê°œìˆ˜ë¥¼ í›¨ì”¬ ë„˜ëŠ” ëª¨ë“  Goroutine ë™ì‹œì ìœ¼ë¡œ ì‘ì—…ì„ ì§„í–‰í•  ê²½ìš° ì•„ë¬´ë¦¬ Goroutineì´ concurrentí•œ ì‘ì—… ìˆ˜í–‰ì— ë›°ì–´ë‚œ ì„±ëŠ¥ì„ ë³´ì¸ë‹¤í• ì§€ë¼ë„ ê³¼í•˜ê²Œ ë§ì€ ìˆ˜ì˜ Goroutineì€ ì„±ëŠ¥ ì €í•˜ë¥¼ ì•¼ê¸°í•˜ì§€ ì•Šì„ê¹Œ ì˜ˆìƒí–ˆë‹¤. í•˜ì§€ë§Œ user-level thread í˜¹ì€ green level threadì˜ ì¼ì¢…ì¸ Goroutineì€ OS(í˜¹ì€ Kernel) threadì™€ ë‹¬ë¦¬ Context switchë¡œ ì¸í•œ penaltyê°€ ê±°ì˜ ì—†ì–´ì„œì¸ì§€ ê±°ì˜ Throughput ë©´ì—ì„œì˜ ì„±ëŠ¥ ì°¨ì´ê°€ ì—†ì—ˆë‹¤.&lt;/p>
&lt;blockquote>
&lt;p>Kernel level threadëŠ” OSê°€ ìŠ¤ì¼€ì¥´ë§ì„ ë‹´ë‹¹í•˜ê¸° ë•Œë¬¸ì— Go í”„ë¡œê·¸ë¨ì´ ë­ ì–´ë–»ê²Œ í•  ìˆ˜ ìˆëŠ” ê²Œ ì•„ë‹ˆì§€ë§Œ Goroutineì€ í”„ë¡œê·¸ë¨ì´ ì‹¤í–‰ë˜ëŠ” ë™ì•ˆ Go ëŸ°íƒ€ì„ì´ ìŠ¤ì¼€ì¥´ë§ì„ ë‹´ë‹¹í•œë‹¤. ê°™ì€ Kernel level threadì— ì†í•œ User level threadì¸ goroutineê°„ì˜ switchëŠ” costê°€ ê±°ì˜ ì—†ë‹¤. ì¦‰ goroutineì´ ë§ë“  ì ë“  Kernel level threadê°„ì˜ context switch costëŠ” ë™ì¼í•˜ë‹¤ê³  ë³¼ ìˆ˜ ìˆê³ , í•´ë‹¹ Kernel level threadì— ì†í•œ goroutineê°„ì˜ context switch costëŠ” ê±°ì˜ ì—†ë‹¤.&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>ì°¸ê³ : Kernel level threadì— ëŒ€í•œ ìŠ¤ì¼€ì¥´ë§ì€ ì£¼ë¡œ Preemptive ë°©ì‹ì„, User level threadì— ëŒ€í•œ ìŠ¤ì¼€ì¥´ë§ì€ ì£¼ë¡œ Cooperativeí•œ ë°©ì‹ì„ ì´ìš©í•˜ì§€ë§Œ Goroutineì€ User level threadì„ì—ë„ Go 1.14 ë²„ì „ë¶€í„°ëŠ” 10nsë¥¼ ê¸°ì¤€ìœ¼ë¡œ goroutineì„ switch í•  ìˆ˜ ìˆëŠ” asynchronously preemptiveí•œ ìŠ¤ì¼€ì¥´ ë°©ì‹ì„ ì§€ì›í•œë‹¤ê³  í•œë‹¤. í•˜ì§€ë§Œ Go 1.14ê°€ ë¦´ë¦¬ì¦ˆëœ ì§€ ì–¼ë§ˆë˜ì§€ ì•Šì•„ì„œì¸ì§€, asynchorously preemptive schedulingì— ëŒ€í•´ì„œëŠ” ëª…í™•íˆ ì„¤ëª…ëœ ë¬¸ì„œë¥¼ ì°¾ê¸° í˜ë“¤ì—ˆë‹¤.
User level threadì˜ ì˜ˆë¡œëŠ” RxJava in Java, Coroutine in Kotlin, Goroutine in Golangì´ ìˆë‹¤.&lt;/p>
&lt;/blockquote>
&lt;p>í•˜ì§€ë§Œ Throughput ì ì¸ ì¸¡ë©´ë³´ë‹¤ëŠ” Machineì˜ Resource ì†Œëª¨ ì¸¡ë©´ì—ì„œëŠ” ëª¨ë“  Goroutineì´ ë™ì‹œì ìœ¼ë¡œ ìˆ˜í–‰ë˜ëŠ” êµ¬ì¡°ë³´ë‹¤ëŠ” &lt;strong>Semaphoreì„ ë°”íƒ•ìœ¼ë¡œí•œ ë™ì‹œì— ì¼ì • ê°œìˆ˜ì˜ ì›Œì»¤ë§Œì´ ì‘ì—…í•˜ëŠ” Worker Pool êµ¬ì¡°ê°€ í›¨ì”¬ Memoryë‚˜ CPU ë¦¬ì†ŒìŠ¤ë¥¼ ì ê²Œ ì†Œëª¨&lt;/strong>í•˜ëŠ” ë“¯ í–ˆë‹¤. ë˜í•œ 100ê°œì˜ ë™ì‹œ ìš”ì²­ì„ ìˆ˜í–‰í•˜ëŠ”ë° ë™ì¼í•œ Throughputìœ¼ë¡œ ì•½ 10ì´ˆê°€ ê±¸ë¦°ë‹¤ê³  ì¹˜ë©´, ìš”ì²­ë‹¹ goroutineì„ ìƒì„±í•˜ëŠ” ê²½ìš°ëŠ” ì²« ë²ˆì§¸ ìš”ì²­ë„ ê±°ì˜ 10ì´ˆê°€ ê±¸ë¦° ë°˜ë©´ Semaphoreì„ ì´ìš©í•œ ê²½ìš°ëŠ” ë¨¼ì € ì˜¨ ìš”ì²­ì€ ëŒ€ì²´ë¡œ ë¹ ë¥´ê²Œ ë¨¼ì € ì²˜ë¦¬ë˜ëŠ” ê²½í–¥ì„ ë³´ì˜€ë‹¤. ì´ ì°¨ì´ëŠ” &lt;strong>ì²˜ìŒ ìš”ì²­ì„ ë³´ë‚¸ ì‚¬ìš©ì ë§ˆì € 10ì´ˆë¥¼ ê¸°ë‹¤ë¦¬ê²Œ í•  ê²ƒì´ëƒ, 0.1ì´ˆë§Œì— ì‘ë‹µì„ ë°›ë„ë¡ í•  ê²ƒì´ëƒì˜ ì°¨ì´&lt;/strong>ì´ë‹¤. ë˜í•œ &lt;strong>ì „ì²´ ì‘ì—…ì´ ëŠ˜ì–´ì§€ë©´ ê·¸ ì‘ì—…ì— ëŒ€í•œ ë©”ëª¨ë¦¬ ì ìœ ê°€ ì§€ì†&lt;/strong>ë˜ê¸°ì— ë©”ëª¨ë¦¬ ì¸¡ë©´ì—ì„œë„ ë¹„íš¨ìœ¨ì ì´ë‹¤.&lt;/p>
&lt;h3 id="semaphoreì„-ì´ìš©í•œ-go-program-2---ì´ë¯¸ì§€-í¬ê¸°-ë³€í™˜ê¸°">Semaphoreì„ ì´ìš©í•œ Go Program 2 - ì´ë¯¸ì§€ í¬ê¸° ë³€í™˜ê¸°&lt;/h3>
&lt;p>ë§ˆì¹¨ ì´ë²ˆì— í”„ë¡œì íŠ¸ì—ì„œ thumbnail ìƒì„±, image í¬ê¸° ë³€í™˜, hashed uri ìƒì„± ì‘ì—… ë“±ì„ ë‹´ë‹¹í•˜ëŠ” &lt;code>image processing ì„œë²„&lt;/code>ë¥¼ ê°œë°œí•˜ë ¤í–ˆëŠ”ë°, imageë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” I/O ì‘ì—… ì´í›„ì˜ image processingì€ CPU Bound í•œ ì‘ì—…ì´ê¸° ë•Œë¬¸ì— ë™ì‹œì ìœ¼ë¡œ ë™ì‘í•˜ëŠ” Goroutineì´ ì¼ì • ìˆ«ì(ëŒ€ê²Œ Logical Processor ê°œìˆ˜) ì´ìƒìœ¼ë¡œëŠ” ë§ì•„ì ¸ë´¤ì í¬ê²Œ íš¨ìœ¨ì´ ì—†ì„ ê²ƒì´ë¼ ì˜ˆìƒí–ˆê³ , ê·¸ì™€ ê´€ë ¨í•´ ê°„ë‹¨í•˜ê²Œ ì´ë¯¸ì§€ í¬ê¸° ë³€í™˜ í”„ë¡œê·¸ë¨ì„ í•˜ë‚˜ ë§Œë“¤ì–´ í…ŒìŠ¤íŠ¸ í•´ë³´ì•˜ë‹¤.&lt;/p>
&lt;p>ì•½ 2MBì˜ ì´ë¯¸ì§€ì— ëŒ€í•œ í¬ê¸° ë³€í™˜ ì‘ì—… ìš”ì²­ì´ ë™ì‹œì— 30ê°œ ë“¤ì–´ì™”ë‹¤ëŠ” ê°€ì •ì„ í–ˆê³ , semaphoreì„ ì´ìš©í•œ ê²½ìš° ë™ì‹œì ìœ¼ë¡œ ìµœëŒ€ 4ê°œì˜ worker(goroutine)ì´ ì‘ì—…ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆê²Œ, concurrentë¥¼ ì´ìš©í•œ ê²½ìš°ëŠ” 30ê°œì˜ ìš”ì²­ ëª¨ë‘ ë™ì‹œì ìœ¼ë¡œ ì‘ì—…ì„ í•˜ëŠ” ê²½ìš°ì´ë‹¤.&lt;/p>
&lt;p>(ì½”ë“œ ì°¸ê³ (ì¸í„°ë„· ì•¡ì„¸ìŠ¤ë¥¼ í•˜ëŠ” ê²½ìš° Playgroundì—ì„œ ë™ì‘í•˜ì§€ëŠ” ì•ŠëŠ”ë“¯í•˜ë‹¤): &lt;a class="link" href="https://play.golang.org/p/Vfyw6uCOIuL" target="_blank" rel="noopener"
>https://play.golang.org/p/Vfyw6uCOIuL&lt;/a>)&lt;/p>
&lt;blockquote>
&lt;p>ì‚¬ì‹¤ Logical Processor 8ê°œ, RAM 16GBì˜ ê°œì¸ ë…¸íŠ¸ë¶ìœ¼ë¡œëŠ” ê·¸ ì°¨ì´ê°€ ë§ì´ ë‚˜ì§€ëŠ” ì•Šì•„ì„œ AWS EC2 t2.micro instanceì—ì„œ ì„±ëŠ¥ì„ í…ŒìŠ¤íŠ¸í•´ë´¤ë‹¤.&lt;/p>
&lt;/blockquote>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">ubuntu&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="nx">ip&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">172&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">31&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">12&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="err">~$&lt;/span> &lt;span class="p">.&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">sem&lt;/span> &lt;span class="nx">semaphore&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">ë³€í™˜í•˜ê³ ìí•˜ëŠ”&lt;/span> &lt;span class="nx">Imageë“¤ì„&lt;/span> &lt;span class="nx">ë©”ëª¨ë¦¬ì—&lt;/span> &lt;span class="nx">Loadí–ˆìŠµë‹ˆë‹¤&lt;/span>&lt;span class="p">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mi">2021&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mo">01&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">18&lt;/span> &lt;span class="mi">20&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">28&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">13&lt;/span> &lt;span class="nx">Elapsed&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mf">1.974380959&lt;/span>&lt;span class="nx">s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">...&lt;/span> &lt;span class="nx">ìƒëµ&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mi">2021&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mo">01&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">18&lt;/span> &lt;span class="mi">20&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">28&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">26&lt;/span> &lt;span class="nx">Elapsed&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mf">1.159552779&lt;/span>&lt;span class="nx">s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mi">2021&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mo">01&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">18&lt;/span> &lt;span class="mi">20&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">28&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">26&lt;/span> &lt;span class="nx">Elapsed&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mf">1.016627316&lt;/span>&lt;span class="nx">s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mi">2021&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mo">01&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">18&lt;/span> &lt;span class="mi">20&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">28&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">26&lt;/span> &lt;span class="nx">Total&lt;/span> &lt;span class="nx">elapsed&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mf">14.959516003&lt;/span>&lt;span class="nx">s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">ubuntu&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="nx">ip&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">172&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">31&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">12&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="err">~$&lt;/span> &lt;span class="p">.&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">sem&lt;/span> &lt;span class="nx">concurrent&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">ë³€í™˜í•˜ê³ ìí•˜ëŠ”&lt;/span> &lt;span class="nx">Imageë“¤ì„&lt;/span> &lt;span class="nx">ë©”ëª¨ë¦¬ì—&lt;/span> &lt;span class="nx">Loadí–ˆìŠµë‹ˆë‹¤&lt;/span>&lt;span class="p">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Killed&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ë†€ëê²Œë„ ë™ì‹œì ìœ¼ë¡œ 30ê°œì˜ ìš”ì²­ì„ ë³´ë‚´ëŠ” ê²½ìš°ì— 30ê°œì˜ ëª¨ë“  goroutineì´ ë™ì‹œì— ì‘ì—…ì„ ì‹œë„í•  ë•Œì—ëŠ” ê³¼ë„í•œ ë¦¬ì†ŒìŠ¤ ì‚¬ìš©ìœ¼ë¡œ ì¸í•´ ì•„ì˜ˆ OSê°€ í”„ë¡œì„¸ìŠ¤ë¥¼ Killí•´ë²„ë ¸ë‹¤. ì¦‰ &lt;strong>Semaphoreë¡œ ë™ì‹œ ì ‘ê·¼ Worker ìˆ˜ë¥¼ ì œí•œí•˜ì§€ ì•ŠëŠ” ê²½ìš° t2.micro ì¸ìŠ¤í„´ìŠ¤ë¡œ ëŒë¦¬ëŠ” image ì„œë²„ì— ë™ì‹œì— 30ê°œì˜ image resizing ìš”ì²­ì´ ë“¤ì–´ì˜¤ë©´ processê°€ ì£½ì–´ë²„ë¦°ë‹¤&lt;/strong>ëŠ” ë§ì´ë‹¤&amp;hellip;!&lt;/p>
&lt;p>ë˜í•œ ì•ì„œ ë§í–ˆë“¯ì´ ë™ì‹œì— ìš”ì²­í•˜ëŠ” ì‚¬ìš©ìê°€ ë§ì•„ì§€ë”ë¼ë„ Semaphoreì„ ì´ìš©í•œ ê²½ìš°ëŠ” ë‚˜ì¤‘ì— ë“¤ì–´ì˜¨ ìš”ì²­ì¼ ìˆ˜ë¡ ì²˜ë¦¬ê°€ ëŠ˜ì–´ì§€ì§€ë§Œ, Semaphoreë¥¼ í†µí•´ ë™ì‹œ ì‘ì—…ì„ ì œí•œí•˜ì§€ ì•ŠëŠ” ê²½ìš°ëŠ” ì „ì²´ ì‘ì—…ì´ ëŠ˜ì–´ì§„ë‹¤.&lt;/p>
&lt;p>ì´ë ‡ê²Œ SemaphoreëŠ” ë™ì‹œ ì ‘ê·¼ ì›Œì»¤ ìˆ˜ë¥¼ ì œí•œí•˜ì—¬ ì „ì²´ì ì¸ Throughput ì¸¡ë©´ë³´ë‹¤ëŠ” ë¦¬ì†ŒìŠ¤ ì†Œëª¨ì ì¸ ì¸¡ë©´ê³¼ ë¨¼ì € ì²˜ë¦¬ë  ìˆ˜ ìˆëŠ” ì‘ì—…ì€ ë¨¼ì € ì²˜ë¦¬ë˜ë„ë¡ í•  ìˆ˜ ìˆë‹¤ëŠ” ë©´ì—ì„œ ì¥ì ì´ ìˆìŒì„ í™•ì¸í•  ìˆ˜ ìˆì—ˆë‹¤.&lt;/p>
&lt;h2 id="ë§ˆì¹˜ë©°">ë§ˆì¹˜ë©°&lt;/h2>
&lt;p>Mutexë‚˜ Semaphoreì˜ ê°œë…ì´ë‚˜ ì„¤ëª…ê³¼ ê°™ì€ ì´ë¡ ì ì¸ ë‚´ìš©ì€ êµ¬ê¸€ë§ì„ í†µí•´ ì–´ë µì§€ ì•Šê²Œ ì–»ì„ ìˆ˜ ìˆëŠ” í”í•œ ì§€ì‹ì¸ ë°˜ë©´, ì •í™•íˆ ì–¸ì œ ì“°ë©´ ì¢‹ì„ì§€, ì–¸ì œ ì“°ì¼ ìˆ˜ ìˆì„ì§€ì™€ ê°™ì€ ì‹¤ìš©ì ì¸ ë‚´ìš©ì€ ì°¾ì•„ë³´ê¸° ì–´ë ¤ì› ê¸°ë•Œë¬¸ì— Goë¥¼ í†µí•´ Mutexì™€ Semaphoreì„ ì´ìš©í•´ë³´ëŠ” ê°„ë‹¨í•œ í”„ë¡œê·¸ë¨ì„ ë§Œë“¤ì–´ ì‹¤ìŠµí•´ë³´ì•˜ë‹¤.&lt;/p>
&lt;p>ì˜ˆì œ í”„ë¡œê·¸ë¨ìœ¼ë¡œì„œ ì½”ë“œë¥¼ ê°„ê²°í•˜ê³  ì½ê¸° ì‰½ê²Œ ê¹”ë”í•˜ê²Œ ì œê³µí•´ë³´ê³ ìí–ˆëŠ”ë°, ê·¸ëŸ¬ê¸° ì‰½ì§€ ì•Šì•˜ë˜ ê²ƒ ê°™ì•„ ì•„ì‰½ë‹¤. ë‹¤ìŒì—” ê¸°íšŒê°€ ë˜ë©´ goì˜ benchmark testë¥¼ ì´ìš©í•´ë³´ë©´ ì–´ë–¨ê¹Œì‹¶ë‹¤.&lt;/p>
&lt;h2 id="ì°¸ê³ ">ì°¸ê³ &lt;/h2>
&lt;p>&lt;strong>Goroutineê³¼ Goroutine schedulingì— ëŒ€í•´&lt;/strong> - &lt;a class="link" href="https://thegopher.tistory.com/3" target="_blank" rel="noopener"
>https://thegopher.tistory.com/3&lt;/a>&lt;/p>
&lt;p>í™”ì¥ì‹¤ì— ë¹„ìœ í•œ ë®¤í…ìŠ¤ì™€ ì„¸ë§ˆí¬ì–´ - &lt;a class="link" href="https://worthpreading.tistory.com/90" target="_blank" rel="noopener"
>https://worthpreading.tistory.com/90&lt;/a>&lt;/p>
&lt;p>semaphore in Go &lt;a class="link" href="https://medium.com/@deckarep/gos-extended-concurrency-semaphores-part-1-5eeabfa351ce" target="_blank" rel="noopener"
>https://medium.com/@deckarep/gos-extended-concurrency-semaphores-part-1-5eeabfa351ce&lt;/a>&lt;/p>
&lt;p>cooperative vs preemptive - &lt;a class="link" href="https://medium.com/traveloka-engineering/cooperative-vs-preemptive-a-quest-to-maximize-concurrency-power-3b10c5a920fe" target="_blank" rel="noopener"
>https://medium.com/traveloka-engineering/cooperative-vs-preemptive-a-quest-to-maximize-concurrency-power-3b10c5a920fe&lt;/a>&lt;/p>
&lt;p>preemptive scheduling in go - &lt;a class="link" href="https://blog.puppyloper.com/menus/Golang/articles/Goroutine%EA%B3%BC%20Go%20scheduler" target="_blank" rel="noopener"
>https://blog.puppyloper.com/menus/Golang/articles/Goroutineê³¼ Go scheduler&lt;/a>&lt;/p></description></item><item><title>Go vs Java - Goì—ì„œì˜ ê°ì²´ ì§€í–¥</title><link>https://umi0410.github.io/blog/golang/go-vs-java-oop/</link><pubDate>Sat, 09 Jan 2021 12:46:54 +0900</pubDate><guid>https://umi0410.github.io/blog/golang/go-vs-java-oop/</guid><description>&lt;img src="https://umi0410.github.io/blog/golang/go-vs-java-oop/declaration.png" alt="Featured image of post Go vs Java - Goì—ì„œì˜ ê°ì²´ ì§€í–¥" />&lt;h2 id="ì‹œì‘í•˜ë©°">ì‹œì‘í•˜ë©°&lt;/h2>
&lt;p>ìš”ì¦˜ &lt;code>Go&lt;/code>ì™€ &lt;code>Java&lt;/code> ëª¨ë‘ë¥¼ ì´ìš©í•´ ê°œë°œì„ í•˜ë‹¤ë³´ë‹ˆ ê°ê°ì˜ ì¥ë‹¨ì ì— ëŒ€í•´ ëŠê»´ë³¼ ìˆ˜ ìˆì—ˆë‹¤. &lt;code>Go&lt;/code>ëŠ” ë¦¬ì†ŒìŠ¤ë¥¼ ì ê²Œ ë¨¹ìœ¼ë©° ì½”ë“œê°€ ê°„ê²°í•˜ê³  ë¼ì´ë¸ŒëŸ¬ë¦¬ë‚˜ í”„ë ˆì„ì›Œí¬ ë˜í•œ ì‹¬í”Œí•´ì„œ ì ìš©í•˜ê¸° í¸í•˜ë‹¤. &lt;code>Java&lt;/code>ëŠ” ì´ëŸ° ì €ëŸ° ê¸°ëŠ¥ì´ ë§ì€ ë°˜ë©´ ê·¸ëŸ° ê¸°ëŠ¥ì„ ì´ìš©í•˜ê¸° ìœ„í•´ ì´í•´í•´ì•¼í•˜ëŠ” ë‚´ìš©ë“¤ì´ ë§ê³ , ì½”ë“œê°€ íˆ¬ëª…í•˜ì§€ëŠ” ì•Šë‹¤(ë‹¤ì–‘í•œ Annotationì„ ì´ìš©í•˜ê²Œ ë˜ë©´ì„œ ì½”ë“œê°€ íˆ¬ëª…í•˜ê²Œ ê·¸ ë™ì‘ì„ ë‚˜íƒ€ë‚´ì§€ ì•ŠìŒ). Javaì˜ ì¥ì  ì¤‘ì—ì„œëŠ” íŠ¹íˆë‚˜ &lt;strong>ê°ì²´ì§€í–¥ì˜ ëŒ€í‘œì ì¸ ì–¸ì–´ë‹µê²Œ ìƒì†ê³¼ ë‹¤í˜•ì„±ì„ ëŠ¥ë ¥ì— ë”°ë¼ ììœ ìì¬ë¡œ ì´ìš©&lt;/strong>í•  ìˆ˜ ìˆë‹¤ëŠ” ì ì´ ë§¤ë ¥ì ì´ì—ˆë‹¤.&lt;/p>
&lt;p>Go ì–¸ì–´ë¥¼ ì¢‹ì•„í•˜ëŠ” ì…ì¥ì—ì„œ ê°œì¸ì ìœ¼ë¡œ ì´ëŸ° ê°ì²´ì§€í–¥ì ì¸ íŠ¹ì§•ì´ë‚˜ ì˜ˆì™¸ ì²˜ë¦¬ë¥¼ ì œì™¸í•˜ê³ ëŠ” ë”±íˆ Javaê°€ Goì— ë¹„í•´ ê°–ëŠ” ì¥ì ì´ í¬ê²Œ ëŠê»´ì§€ì§€ ì•Šì•˜ë‹¤. ì˜ˆì™¸ ì²˜ë¦¬ëŠ” Goê°€ ë°”ë¼ë³´ëŠ” ë°©í–¥ì´ ì¼ë°˜ì ì¸ ì˜ˆì™¸ ì²˜ë¦¬ì™€ ë‹¤ë¥´ê¸°ì— ì–´ì©” ìˆ˜ ì—†ì§€ë§Œ, ê°ì²´ì§€í–¥ì ì˜ íŠ¹ì§•ë“¤ì€ ì–´ë–»ê²Œ ì ìš©í•´ë³¼ ìˆ˜ ìˆì„ê¹Œí•˜ëŠ” ìƒê°ì— ê³µë¶€ë¥¼ ì¢€ í•´ë´¤ê³  ê·¸ ë‚´ìš©ì„ ì •ë¦¬í•´ë³¸ë‹¤. (&lt;em>ê¸°íšŒê°€ ëœë‹¤ë©´ Goì—ì„œ errorë¥¼ ë‹¤ë£¨ëŠ” ì² í•™ì— ëŒ€í•´ ì¶”ê°€ì ìœ¼ë¡œ ê³µë¶€í•´ë³´ê³ ì‹¶ë‹¤.&lt;/em>)&lt;/p>
&lt;p>â—&lt;strong>Goì— ëŒ€í•œ ê¸°ë³¸ì ì¸ ë‚´ìš©ì„ ì •ë¦¬í•´ë³´ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ê°ì²´ ì§€í–¥ ê´€ì ì—ì„œ ë°”ë¼ë³¸ Goì— ëŒ€í•œ ë‚´ìš©ì„ ì •ë¦¬í•´ë³´ëŠ” ê²ƒì´ë¯€ë¡œ Goì˜ ê¸°ì´ˆ ë‚´ìš©ì— ëŒ€í•œ ì„¤ëª…ì€ ìƒëµí•  ê²ƒì´ë¯€ë¡œ Goì— ëŒ€í•œ ê¸°ì´ˆ ì´í•´ê°€ ì—†ë‹¤ë©´, ê·¸ ë¶€ë¶„ì„ ë¨¼ì € ì•Œì•„ë³´ëŠ” ê²ƒì„ ì¶”ì²œí•œë‹¤!&lt;/strong>&lt;/p>
&lt;h3 id="ì˜ˆì‹œ-ì½”ë“œ">ì˜ˆì‹œ ì½”ë“œ&lt;/h3>
&lt;p>Goì—ì„œ ê°ì²´ ì§€í–¥ì„ ì ìš©í•œ ê°„ë‹¨í•œ ê³„ì‚°ê¸° í”„ë¡œê·¸ë¨ì„ ì˜ˆì‹œë¡œ ì‘ì„±í•´ë³´ì•˜ë‹¤. ì „ì²´ ì†ŒìŠ¤ì½”ë“œë¥¼ ë‹¤ ë³¼ í•„ìš”ëŠ” ì—†ê² ì§€ë§Œ í•„ìš”ì— ë”°ë¼ ì°¸ê³ í•  ìˆ˜ ìˆë„ë¡ ì•„ë˜ì™€ ê°™ì´ ì²¨ë¶€í•œë‹¤.&lt;/p>
&lt;p>&lt;strong>main íŒ¨í‚¤ì§€ - /main.go&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;bufio&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;calculator/calc&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;os&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;strconv&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;strings&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">(){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">var&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">calculator&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">calc&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Calculator&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">calc&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">NewCalculator&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="c1">// ê³„ì‚°ê¸° struct
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">operationUnit&lt;/span> &lt;span class="nx">calc&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">OperationUnit&lt;/span> &lt;span class="c1">// OperationUnitì´ë¼ëŠ” interface typeì„ í†µí•´ Polymorphism ì´ìš©
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">operationResult&lt;/span> &lt;span class="kt">float64&lt;/span> &lt;span class="c1">// ê³„ì‚° ê²°ê³¼ë¥¼ ë‹´ìŒ
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">operationErr&lt;/span> &lt;span class="kt">error&lt;/span> &lt;span class="c1">// ê³„ì‚° ìˆ˜í–‰ì— ëŒ€í•œ errorì„ ë‹´ìŒ
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// main packageì—ì„œëŠ” calc packageì— ì •ì˜ëœ unexported nameì¸ idì— ì ‘ê·¼í•  ìˆ˜ ì—†ë‹¤.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">//calculator.id = &amp;#34;Jinsu Park&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">scanner&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">bufio&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">NewScanner&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">os&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Stdin&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ì—°ì‚° optionì„ ìœ„í•´ ê°’ì„ ì…ë ¥ë°›ê¸° (e.g. 1)
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">`A simple calculator program.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">=======================================================
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">Operation options
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s"> 1. Mulitply a, b float 64
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s"> 2. Sqaure val, square float64
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">Please input an int for your desired operation.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">&amp;gt;&amp;gt;&amp;gt; `&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">scanner&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Scan&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">option&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">_&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">strconv&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Atoi&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">scanner&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Text&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// argsë¥¼ ìœ„í•´ ì…ë ¥ë°›ê¸° (e.g. 10 20)
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Please input floats as args.\n&amp;gt;&amp;gt;&amp;gt; &amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">scanner&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Scan&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">inputs&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nb">make&lt;/span>&lt;span class="p">([]&lt;/span>&lt;span class="kt">float64&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="nx">_&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">input&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="k">range&lt;/span> &lt;span class="nx">strings&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Split&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">scanner&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Text&lt;/span>&lt;span class="p">(),&lt;/span> &lt;span class="s">&amp;#34; &amp;#34;&lt;/span>&lt;span class="p">){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">f&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">_&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">strconv&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ParseFloat&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">input&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">64&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">inputs&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nb">append&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">inputs&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">f&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ì—°ì‚°ì— ëŒ€í•œ multiplexing. ì¦‰ optionì— ë”°ë¥¸ ì—°ì‚°ì„ ìˆ˜í–‰í•œë‹¤ëŠ” ì˜ë¯¸
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">// operationUnitì´ë¼ëŠ” OperationUnit interface typeì„ í†µí•´ Polymorphism ì´ìš©
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">switch&lt;/span> &lt;span class="nx">option&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">case&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">operationUnit&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">calculator&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Multiplier&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">case&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">operationUnit&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">calculator&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">SquareMultiplier&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Operateë¼ëŠ” ê¸°ëŠ¥ì„ ë‹¤ì–‘í•œ ë™ì‘ìœ¼ë¡œ ìˆ˜í–‰í•  ìˆ˜ ìˆë‹¤.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">operationResult&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">operationErr&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">operationUnit&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Operate&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">inputs&lt;/span>&lt;span class="o">...&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// result
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="nx">operationErr&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;[Error]&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">operationErr&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span> &lt;span class="k">else&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Result:&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">operationResult&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;strong>calc íŒ¨í‚¤ì§€ - /calc/calc.go&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">calc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;errors&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">var&lt;/span> &lt;span class="nx">autoIncrementID&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">type&lt;/span> &lt;span class="nx">Calculator&lt;/span> &lt;span class="kd">struct&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">id&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="c1">// ì œì¡°ëœ Calculatorì„ ì‹ë³„í•˜ê¸° ìœ„í•œ ID. ë³€ìˆ˜ëª…ì´ ì†Œë¬¸ìë¡œ ì‹œì‘í•˜ë¯€ë¡œ export ë˜ì§€ ì•ŠëŠ”ë‹¤.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">Multiplier&lt;/span> &lt;span class="nx">OperationUnit&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">SquareMultiplier&lt;/span> &lt;span class="nx">OperationUnit&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">type&lt;/span> &lt;span class="nx">OperationUnit&lt;/span> &lt;span class="kd">interface&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nf">IsValidInput&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">args&lt;/span> &lt;span class="o">...&lt;/span>&lt;span class="kt">float64&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="kt">bool&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nf">Operate&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">args&lt;/span> &lt;span class="o">...&lt;/span>&lt;span class="kt">float64&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">float64&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">error&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">type&lt;/span> &lt;span class="nx">MultiplyOperationUnit&lt;/span> &lt;span class="kd">struct&lt;/span>&lt;span class="p">{}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">type&lt;/span> &lt;span class="nx">SquareOperationUnit&lt;/span> &lt;span class="kd">struct&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">MultiplyOperationUnit&lt;/span> &lt;span class="c1">// Embedì˜ ì˜ˆì‹œ
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">NewCalculator&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">Calculator&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">c&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">Calculator&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">id&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">autoIncrementID&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Multiplier&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">MultiplyOperationUnit&lt;/span>&lt;span class="p">{},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">SquareMultiplier&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">SquareOperationUnit&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="nx">MultiplyOperationUnit&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">MultiplyOperationUnit&lt;/span>&lt;span class="p">{}},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">autoIncrementID&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">c&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">unit&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">MultiplyOperationUnit&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nf">IsValidInput&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">args&lt;/span> &lt;span class="o">...&lt;/span>&lt;span class="kt">float64&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="kt">bool&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nb">len&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">args&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="kc">false&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="kc">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">unit&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">MultiplyOperationUnit&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nf">Operate&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">args&lt;/span> &lt;span class="o">...&lt;/span>&lt;span class="kt">float64&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">float64&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">error&lt;/span>&lt;span class="p">){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">!&lt;/span>&lt;span class="nx">unit&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">IsValidInput&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">args&lt;/span>&lt;span class="o">...&lt;/span>&lt;span class="p">){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">errors&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">New&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;MultiplyOperationUnitì˜ argsê°€ ìœ íš¨í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">args&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="nx">args&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="kc">nil&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">//func (unit *SquareOperationUnit) IsValidInput(args ...float64) bool{
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// ... í•„ìš”ì— ë”°ë¼ ì •ì˜í•˜ë©´ Overrideì²˜ëŸ¼ ì´ìš© ê°€ëŠ¥
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">//}
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">unit&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">SquareOperationUnit&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nf">Operate&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">args&lt;/span> &lt;span class="o">...&lt;/span>&lt;span class="kt">float64&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">float64&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">error&lt;/span>&lt;span class="p">){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// *SquareOperationUnitì— ëŒ€í•œ IsValidInput ë©”ì†Œë“œëŠ” ì •ì˜í•œ ì  ì—†ì§€ë§Œ
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">// Embeddingì„ í†µí•´ ì¼ë°˜ì ì¸ OOPì—ì„œ ë¶€ëª¨ì˜ ë©”ì†Œë“œë¥¼ ì´ìš©í•˜ë“¯ì´ ì´ìš© ê°€ëŠ¥.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="p">!&lt;/span>&lt;span class="nx">unit&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">IsValidInput&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">args&lt;/span>&lt;span class="o">...&lt;/span>&lt;span class="p">){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">errors&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">New&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;SquareOperationUnitì˜ argsê°€ ìœ íš¨í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">var&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// val^square ì¦‰ &amp;#34;valì˜ square ì œê³±&amp;#34;ì— ëŒ€í•œ ê³„ì‚°
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">val&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">args&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">square&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">args&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">reduced&lt;/span> &lt;span class="kt">float64&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">val&lt;/span> &lt;span class="c1">// ì œê³± ì—°ì‚° ì¤‘ ê°’ì„ ë‹´ì•„ ë†“ëŠ” ë³€ìˆ˜
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">cnt&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nb">float64&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">// ì œê³± ì—°ì‚° ë£¨í”„ë¥¼ ìœ„í•œ counter
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="kt">error&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">;&lt;/span>&lt;span class="nx">cnt&lt;/span> &lt;span class="p">&amp;lt;&lt;/span> &lt;span class="nx">square&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="nx">cnt&lt;/span> &lt;span class="o">++&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">reduced&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">unit&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">MultiplyOperationUnit&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Operate&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">reduced&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">val&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">reduced&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="https://umi0410.github.io/blog/golang/go-vs-java-oop/preview.png"
width="557"
height="307"
srcset="https://umi0410.github.io/blog/golang/go-vs-java-oop/preview_hu606630559448eebea4de9d8c902ece24_23429_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/golang/go-vs-java-oop/preview_hu606630559448eebea4de9d8c902ece24_23429_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="preview.png"
class="gallery-image"
data-flex-grow="181"
data-flex-basis="435px"
>&lt;/p>
&lt;p>&lt;img src="https://umi0410.github.io/blog/golang/go-vs-java-oop/declaration.png"
width="406"
height="355"
srcset="https://umi0410.github.io/blog/golang/go-vs-java-oop/declaration_hu2809de309117ad963d612eaa5a399aab_35836_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/golang/go-vs-java-oop/declaration_hu2809de309117ad963d612eaa5a399aab_35836_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="declaration.png"
class="gallery-image"
data-flex-grow="114"
data-flex-basis="274px"
>&lt;/p>
&lt;ul>
&lt;li>Calculatorë¼ëŠ” ê³„ì‚°ê¸° &lt;code>struct&lt;/code>ê°€ ì¡´ì¬
&lt;ul>
&lt;li>âœ¨ &lt;code>id&lt;/code> fieldëŠ” ì†Œë¬¸ìë¡œ ì‹œì‘í•˜ê¸°ë•Œë¬¸ì— ì™¸ë¶€ì—ì„œ í•¨ë¶€ë¡œ ì ‘ê·¼í•  ìˆ˜ ì—†ë„ë¡ dataë¥¼ &lt;code>ìº¡ìŠí™”&lt;/code>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>ê³„ì‚°ê¸°ì—ì„œ ê°ê°ì˜ ì—°ì‚°ì„ ë‹´ë‹¹í•˜ëŠ” OperationUnit &lt;code>interface&lt;/code>ì¡´ì¬&lt;/li>
&lt;li>OperationUnit &lt;code>interface&lt;/code>ëŠ” Inputì˜ ìœ íš¨ì„±ì„ ê²€ì‚¬í•˜ëŠ” IsValidInput ë©”ì†Œë“œì™€ ì—°ì‚°ì„ ìˆ˜í–‰í•˜ëŠ” Operate ë©”ì†Œë“œ ì¡´ì¬&lt;/li>
&lt;li>ê°ê°ì˜ ì—°ì‚°ì„ ë‹´ë‹¹í•˜ëŠ” Unitì€ OperationUnit interfaceê°€ ì •ì˜í•œ ë©”ì†Œë“œë“¤ì„ êµ¬í˜„í•¨ìœ¼ë¡œì¨ duck-typingì„ í†µí•´ OperationUnit interfaceë¡œ ì‚¬ìš©ëœë‹¤. â‡’ âœ¨ interfaceë¥¼ í†µí•œ &lt;code>ì¶”ìƒí™”&lt;/code>ì™€ &lt;code>ë‹¤í˜•ì„±&lt;/code> ì´ìš© ê°€ëŠ¥
&lt;ul>
&lt;li>OperationUnit interfaceë¡œ ì‚¬ìš©ì´ ê°€ëŠ¥í•œ structì˜ ì˜ˆì‹œ
&lt;ul>
&lt;li>MultiplyOperationUnit struct - ê³±ì…ˆ ì—°ì‚°ì„ ë‹´ë‹¹&lt;/li>
&lt;li>SquareOperationUnit struct - ì œê³±ì…ˆ ì—°ì‚°ì„ ë‹´ë‹¹
&lt;ul>
&lt;li>âœ¨ &lt;code>Embed&lt;/code>ë¥¼ í†µí•´ MultiplyOperationUnitì„ &lt;code>ìƒì†&lt;/code>í•œ ê²ƒì²˜ëŸ¼ fieldì™€ methodë¥¼ ì‚¬ìš© ê°€ëŠ¥&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="ê°ì²´ì§€í–¥ì -ê´€ì ì—ì„œì˜-goì—-ëŒ€í•´">ê°ì²´ì§€í–¥ì  ê´€ì ì—ì„œì˜ Goì— ëŒ€í•´&lt;/h2>
&lt;p>GoëŠ” ì•„ë¬´ë˜ë„ ê°ì²´ ì§€í–¥ ì–¸ì–´ë¼ê³  í•˜ì§€ëŠ” ì•ŠëŠ” ë“¯í•˜ë‹¤. ì´ì— ëŒ€í•´ì„  ë‹¤ì–‘í•œ ì˜ê²¬ì´ ìˆëŠ” ê²ƒ ê°™ì€ë° Post-OOP ì–¸ì–´ë¼ëŠ” ì‚¬ëŒë„ ìˆê³  OOP ì–¸ì–´ëŠ” ì•„ë‹ˆì§€ë§Œ Object-Orientedí•˜ê²Œ í•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ OOP ì–¸ì–´ì´ë©´ì„œ OOPì–¸ì–´ê°€ ì•„ë‹ˆë¼ëŠ” ì‚¬ëŒë„ ìˆë‹¤.&lt;/p>
&lt;p>OOPì—ëŠ” í¬ê²Œ 4ê°€ì§€ ì›ì¹™ì´ ìˆë‹¤.&lt;/p>
&lt;ol>
&lt;li>ì—°ê´€ëœ ë³€ìˆ˜ì™€ í•¨ìˆ˜ë¥¼ í´ë˜ìŠ¤ë¡œ ë¬¶ìœ¼ë©° ì™¸ë¶€ì—ì„œ íŠ¹ì • ë°ì´í„°ë‚˜ ê¸°ëŠ¥ì— ì ‘ê·¼í•˜ì§€ ëª»í•˜ë„ë¡ í•˜ëŠ” ì •ë³´ë¥¼ ì€ë‹‰í•´ì£¼ëŠ” &lt;strong>ìº¡ìŠí™”&lt;/strong>&lt;/li>
&lt;li>ë¶€ëª¨ ê°ì²´ì˜ field, methodë¥¼ ìì‹ ê°ì²´ê°€ ì´ìš©í•  ìˆ˜ ìˆë„ë¡í•´ì£¼ê³ , Overrideí•  ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” &lt;strong>ìƒì†&lt;/strong>&lt;/li>
&lt;li>ì„¸ë¶€ ì‚¬í•­ì€ ì œì™¸í•˜ê³ , ì–´ë–¤ ê¸°ëŠ¥ì´ ì¡´ì¬í•˜ëŠ”ì§€ ë“±ì˜ ì¶”ìƒì ì¸ ì •ë³´ë§Œìœ¼ë¡œë„ ì´ìš©í•  ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” &lt;strong>ì¶”ìƒí™”&lt;/strong>&lt;/li>
&lt;li>ì¦‰ í•˜ë‚˜ì˜ íƒ€ì…ì´ ì—¬ëŸ¬ íƒ€ì…ìœ¼ë¡œ ì´ìš©ë  ìˆ˜ ìˆìœ¼ë©°, ê°ê°ì´ ë‹¤ì–‘í•˜ê²Œ ë™ì‘í•  ìˆ˜ ìˆëŠ” &lt;strong>ë‹¤í˜•ì„±&lt;/strong>&lt;/li>
&lt;/ol>
&lt;p>ê·¸ë¦¬ê³  ëŒ€í‘œì ì¸ OOP ì–¸ì–´ì¸ &lt;code>Java&lt;/code>ëŠ” ì´ëŸ¬í•œ ë‚´ìš©ë“¤ì„ ì•„ì£¼ ì˜ ì´ìš©í•  ìˆ˜ ìˆê²Œë” ë˜ì–´ìˆë‹¤. OOP ì–¸ì–´ê°€ ì•„ë‹Œ &lt;code>Go&lt;/code>ì—ì„œ ì´ëŸ¬í•œ &lt;strong>OOPì˜ íŠ¹ì§•ì´ì ì¥ì ì¸ ìš”ì†Œë“¤ì„ ì–´ë–»ê²Œ ì ìš©í•  ìˆ˜ ìˆì„ì§€&lt;/strong> ì•Œì•„ë³´ë„ë¡í•˜ê² ë‹¤.&lt;/p>
&lt;h2 id="-encapsulationìº¡ìŠí™”">ğŸ’Š Encapsulation(ìº¡ìŠí™”)&lt;/h2>
&lt;p>Goì—ì„œëŠ” Exportë¥¼ í†µí•´ ìº¡ìŠí™”ë¥¼ ì´ìš©í•  ìˆ˜ ìˆë‹¤. Exportì— ëŒ€í•´ ê°„ë‹¨íˆ ì„¤ëª…í•˜ìë©´ private, public ì„ ì´ìš©í•´ ë³€ìˆ˜ë‚˜ í•¨ìˆ˜ì— ì ‘ê·¼ ì œí•œì„ ë‘ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ì´ë¦„ì´ ëŒ€ë¬¸ìëƒ ì†Œë¬¸ìëƒì— ë”°ë¼ íŒ¨í‚¤ì§€ ì™¸ë¶€ì—ì„œ ì ‘ê·¼ì„ ì œì–´í•˜ëŠ” ê²ƒì„ ë§í•œë‹¤.&lt;/p>
&lt;p>Goì˜ Export ì´ìš© ë°©ë²•ì€ ë§ì´ ì°¾ì•„ë³¼ ìˆ˜ ìˆìœ¼ë‹ˆ ìº¡ìŠí™”ì— ì´ˆì ì„ ë§ì¶˜ ê·¸ ì“°ì„ì— ëŒ€í•´ ì•Œì•„ë³¸ë‹¤.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">// Calculatorì— ëŒ€í•œ ì •ì˜ì™€ êµ¬í˜„ì„ ë‹´ë‹¹í•˜ëŠ” calc íŒ¨í‚¤ì§€
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">package calc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">type&lt;/span> Calculator struct&lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ID int // ì œì¡°ëœ Calculatorì„ ì‹ë³„í•˜ê¸° ìœ„í•œ ID. ë³€ìˆ˜ëª…ì´ ì†Œë¬¸ìë¡œ ì‹œì‘í•˜ë¯€ë¡œ &lt;span class="nb">export&lt;/span> ë˜ì§€ ì•ŠëŠ”ë‹¤.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ìœ„ì™€ ê°™ì´ Calculatorë¥¼ ì •ì˜í•˜ëŠ” calcë¼ëŠ” íŒ¨í‚¤ì§€ê°€ ìˆë‹¤ê³  ê°€ì •í•˜ë‹¤. Calculatorë¥¼ ì‹ë³„í•˜ëŠ” IDì— ëŒ€í•œ ì‘ì—…ì€ calc íŒ¨í‚¤ì§€ì—ì„œ ë‹´ë‹¹í•˜ê³  í•¨ë¶€ë¡œ ì™¸ë¶€ì—ì„œ ê°’ì„ ë°”ê¾¸ì§€ ëª»í•˜ë„ë¡í•˜ê³ ì‹¶ì€ ê²½ìš° fieldê°€ ì†Œë¬¸ìë¡œ ì‹œì‘í•˜ë„ë¡ í•¨ìœ¼ë¡œì¨ ì™¸ë¶€ íŒ¨í‚¤ì§€ì—ì„œ ì§ì ‘ ì ‘ê·¼í•˜ì§€ ëª»í•˜ë„ë¡í•  ìˆ˜ ìˆë‹¤.&lt;/p>
&lt;p>í•„ìš”ì— ë”°ë¼ Javaì—ì„œ ê·¸ëŸ¬í•˜ë“¯ getterì™€ setterë¥¼ ì •ì˜í•´ì¤„ ìˆ˜ë„ ìˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">package main
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">func main&lt;span class="o">(){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> var &lt;span class="o">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> calculator *calc.Calculator &lt;span class="o">=&lt;/span> calc.NewCalculator&lt;span class="o">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> // main packageì—ì„œëŠ” calc packageì— ì •ì˜ëœ unexported nameì¸ idì— ì ‘ê·¼í•  ìˆ˜ ì—†ë‹¤.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> //calculator.id &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;Jinsu Park&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ì•ì„œ ë§í–ˆë“¯ì´ ì´ë ‡ê²Œ calc íŒ¨í‚¤ì§€ê°€ ì•„ë‹Œ ì™¸ë¶€ íŒ¨í‚¤ì§€(ì˜ˆë¥¼ ë“¤ì–´ main íŒ¨í‚¤ì§€)ì—ì„œëŠ” unexported nameì¸ idì— ì ‘ê·¼í•  ìˆ˜ ì—†ë‹¤.&lt;/p>
&lt;p>ì£¼ë¡œ ìº¡ìŠí™”ì™€ Goì— ëŒ€í•´ì„  ì€ë‹‰ì„ ì–´ë–»ê²Œ í•˜ëŠ”ê°€ê°€ ìš”ì ì´ë¼ê³  ìƒê°í•´ ì´ ë¶€ë¶„ì— ëŒ€í•´ ë‹¤ë¤„ë³´ì•˜ë‹¤.&lt;/p>
&lt;blockquote>
&lt;p>ìì„¸í•œ ë‚´ìš©ì€? - ì—°ê´€ëœ ë³€ìˆ˜ì™€ í•¨ìˆ˜ë¥¼ ë¬¶ì–´ì£¼ëŠ” ë‚´ìš©ì€ Goì˜ struct, receiverì™€ method ë“±ì— ëŒ€í•´ ê²€ìƒ‰í•´ë³´ë©´ ë” ê¹Šì´ ì•Œì•„ë³¼ ìˆ˜ ìˆë‹¤.&lt;/p>
&lt;/blockquote>
&lt;h2 id="-inheriatanceìƒì†">ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ Inheriatance(ìƒì†)&lt;/h2>
&lt;p>GoëŠ” Compositionì„ ì´ìš©í•œ Embeddingì´ë¼ëŠ” ë°©ì‹ì„ í†µí•´ Inheritanceì™€ ê°™ì€ ê¸°ëŠ¥ì„ ì´ìš©í•  ìˆ˜ ìˆê²Œ í•´ì¤€ë‹¤ëŠ” ì‹ìœ¼ë¡œ ë§ì´ë“¤ ì„¤ëª…ì„ í•˜ëŠ” ê²ƒ ê°™ì•˜ìœ¼ë‚˜ ì£¼ê´€ì ì¸ í•´ì„ì„ í•´ë³´ìë©´ Goì˜ &lt;code>Embedding&lt;/code>ì€ &lt;strong>Compositionì´ë©´ì„œ ìë™ìœ¼ë¡œ embedëœ fieldì˜ methodì™€ ë³¸ì¸ì˜ methodì¸ ê²ƒì²˜ëŸ¼ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ í•´ì£¼ê¸°ì— Inheritanceì²˜ëŸ¼ ì´ìš©&lt;/strong>í•  ìˆ˜ ìˆë‹¤ê³  ë³¼ ìˆ˜ ìˆê² ë‹¤.&lt;/p>
&lt;p>Goì˜ Embeddingì€ structì˜ fieldì— ë³„ë„ì˜ nameì´ ì•„ë‹Œ typeë§Œì„ ì ì–´ì¤Œìœ¼ë¡œì¨ ì´ìš©í•  ìˆ˜ ìˆë‹¤. Bë¼ëŠ” typeì´ ëŠ” ë©”ì†Œë“œ Say()ë¥¼ ê°€ì§€ê³  ìˆëŠ” ê²½ìš° struct Aê°€ type Bë¥¼ Embedí•œë‹¤ë©´ AëŠ” Bì˜ Say ë©”ì†Œë“œë¥¼ ë‘ ê°€ì§€ ë°©ë²•ìœ¼ë¡œ ì´ìš© ê°€ëŠ¥í•˜ë‹¤.&lt;/p>
&lt;ol>
&lt;li>&lt;code>A.Say()&lt;/code> - ì´ê²½ìš° ì•”ë¬µì ìœ¼ë¡œ 2.ë¡œ ë³€í™˜ë˜ì–´ ìˆ˜í–‰ë˜ëŠ” ì…ˆ&lt;/li>
&lt;li>&lt;code>A.B.Say()&lt;/code> - ì´ë ‡ê²Œ ëª…ì‹œì ìœ¼ë¡œ &lt;code>Selector&lt;/code>(ì—¬ê¸°ì„  B)ë¥¼ ì ì–´ì¤„ ìˆ˜ë„ ìˆë‹¤. ì¼ë°˜ì ì¸ &lt;code>Composition&lt;/code>ê³¼ ë™ì¼í•˜ë‹¤.&lt;/li>
&lt;/ol>
&lt;p>&lt;em>Goì—ì„œ Embeddingì„ ì‚¬ìš©í•˜ëŠ” ë°©ë²• ìì²´ ë˜í•œ ë§ì€ ë‚´ìš©ì„ ì¸í„°ë„·ì—ì„œ ì°¾ì•„ë³¼ ìˆ˜ ìˆìœ¼ë‹ˆ &lt;strong>ìƒì†ê³¼ Embeddingì— ì´ˆì ì„ ë§ì¶° ì„¤ëª…í•´ë³´ë„ë¡í•˜ê² ë‹¤.&lt;/strong>&lt;/em>&lt;/p>
&lt;p>ì¼ë°˜ì ì¸ ê°ì²´ ì§€í–¥ì ì¸ ë°©ì‹ì—ì„œëŠ” &lt;code>type MultiplyOperationUnit struct&lt;/code> ë¼ëŠ” typeì´ ì¡´ì¬í•˜ê³ &lt;/p>
&lt;p>&lt;code>type SquareOperationUnit struct&lt;/code> ê°€ &lt;code>MultiplyOperationUnit&lt;/code> typeì„ ìƒì†ë°›ëŠ”ë‹¤ë©´ SquareOperationUnitì€ IsValidCheck ë©”ì†Œë“œë¥¼ ë¹„ë¡¯í•œ MultiplyOperationUnitì˜ ë©”ì†Œë“œì™€ ë©¤ë²„ ë³€ìˆ˜ë¥¼ ì´ìš©í•  ìˆ˜ ìˆì„ ê²ƒì´ë‹¤.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">type&lt;/span> &lt;span class="nx">MultiplyOperationUnit&lt;/span> &lt;span class="kd">struct&lt;/span>&lt;span class="p">{}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">type&lt;/span> &lt;span class="nx">SquareOperationUnit&lt;/span> &lt;span class="kd">struct&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">MultiplyOperationUnit&lt;/span> &lt;span class="c1">// typeë§Œì„ ì „ë‹¬í•¨ìœ¼ë¡œì¨ Embed
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// ê³±ì…ˆ ì—°ì‚°ì— ëŒ€í•œ Input validation
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">func&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">unit&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">MultiplyOperationUnit&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nf">IsValidInput&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">args&lt;/span> &lt;span class="o">...&lt;/span>&lt;span class="kt">float64&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="kt">bool&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">args&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nb">len&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">args&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="kc">false&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="kc">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">unit&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">MultiplyOperationUnit&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nf">Operate&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">args&lt;/span> &lt;span class="o">...&lt;/span>&lt;span class="kt">float64&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">float64&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">error&lt;/span>&lt;span class="p">){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">!&lt;/span>&lt;span class="nx">unit&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">IsValidInput&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">args&lt;/span>&lt;span class="o">...&lt;/span>&lt;span class="p">){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">errors&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">New&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;MultiplyOperationUnitì˜ argsê°€ ìœ íš¨í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">...&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">unit&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">SquareOperationUnit&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nf">Operate&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">args&lt;/span> &lt;span class="o">...&lt;/span>&lt;span class="kt">float64&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">float64&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">error&lt;/span>&lt;span class="p">){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// *SquareOperationUnitì— ëŒ€í•œ IsValidInput ë©”ì†Œë“œëŠ” ì •ì˜í•œ ì  ì—†ì§€ë§Œ
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">// Embeddingì„ í†µí•´ ì¼ë°˜ì ì¸ OOPì—ì„œ ë¶€ëª¨ì˜ ë©”ì†Œë“œë¥¼ ì´ìš©í•˜ë“¯ì´ ì´ìš© ê°€ëŠ¥.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="p">!&lt;/span>&lt;span class="nx">unit&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">IsValidInput&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">args&lt;/span>&lt;span class="o">...&lt;/span>&lt;span class="p">){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">errors&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">New&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;SquareOperationUnitì˜ argsê°€ ìœ íš¨í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">...&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ì´ ê²½ìš° Goì—ì„œëŠ” SquareOperationUnitì´ MultiplyOperationUnitì„ Embedí•˜ë„ë¡ í•œë‹¤. í‰ë²”í•œ Compostion ë°©ì‹ìœ¼ë¡œ ì´ìš©í•  ìˆ˜ ìˆê² ì§€ë§Œ Goì˜ íŠ¹ì´í•œ Embed ë°©ì‹ì„ ì´ìš©í•¨ìœ¼ë¡œì¨ &lt;code>*SquareOperationUnit&lt;/code> ì— ëŒ€í•œ &lt;code>IsValidInput&lt;/code> &lt;strong>ë©”ì†Œë“œë¥¼ ì •ì˜í•œ ì  ì—†ì§€ë§Œ ì¼ë°˜ OOPì—ì„œ ë¶€ëª¨ í´ë˜ìŠ¤ì— ì •ì˜ëœ ë©”ì†Œë“œë¥¼ ì´ìš©í•˜ë“¯&lt;code>unit *SquareOperationUnit&lt;/code>ê³¼ ê°™ì´ ì´ìš© ê°€ëŠ¥&lt;/strong>í•˜ë‹¤.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">unit&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">SquareOperationUnit&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nf">IsValidInput&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">args&lt;/span> &lt;span class="o">...&lt;/span>&lt;span class="kt">float64&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">float64&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">error&lt;/span>&lt;span class="p">){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">...&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>OOPì—ì„œì˜ Method Overrideì™€ ê°™ì€ ì‘ì—…ì„ Goì—ì„œ í•˜ê³ ì‹¶ë‹¤ë©´ ìœ„ì™€ ê°™ì´ ì¶”ê°€ì ìœ¼ë¡œ ìì‹ ì˜ íƒ€ì…ì— ëŒ€í•œ methodë¥¼ ì •ì˜í•˜ë©´ëœë‹¤. ë©”ì†Œë“œë¥¼ ì¶”ê°€ì ìœ¼ë¡œ ì •ì˜í•´ì¤€ ë’¤ Selectorë¥¼ ì§€ì •í•˜ì§€ ì•Šìœ¼ë©´ ë‹¹ì—°íˆ ìš°ë¦¬ê°€ ë°”ë€ëŒ€ë¡œ Embedëœ typeì˜ methodê°€ ì•„ë‹Œ ìê¸° ìì‹ ì˜ methodë¥¼ í˜¸ì¶œí•˜ê²Œ ëœë‹¤.&lt;/p>
&lt;blockquote>
&lt;p>ìì„¸í•œ ë‚´ìš©ì€? - ì•„ë¬´ë˜ë„ Goì˜ Embeddingê³¼ Compositionì— ëŒ€í•œ ì´í•´ê°€ ì—†ë‹¤ë©´ ë¬´ìŠ¨ ë§ì¸ì§€ ì´í•´í•˜ê¸° í˜ë“¤ ìˆ˜ ìˆë‹¤. ë”°ë¼ì„œ í•´ë‹¹ ë‚´ìš©ë“¤ì— ëŒ€í•´ ì•Œì•„ë³¼ ê²ƒì„ ì¶”ì²œ!&lt;/p>
&lt;/blockquote>
&lt;h2 id="abstractionì¶”ìƒí™”">Abstraction(ì¶”ìƒí™”)&lt;/h2>
&lt;p>ì¶”ìƒí™”ëŠ” ê·¸ ê°ì²´ì˜ ì„¸ë¶€ ë‚´ìš©ì´ ì•„ë‹Œ ê³µí†µëœ ê¸°ëŠ¥ì„ ë°”íƒ•ìœ¼ë¡œ ì¶”ë ¤ë‚´ëŠ” ê²ƒì„ ì˜ë¯¸í•œë‹¤.&lt;/p>
&lt;p>ì¶”ìƒí™”ì— ìˆì–´ì„œëŠ” Javaì™€ Goê°€ interfaceë¥¼ ì´ìš©í•œë‹¤ëŠ” ì ì—ì„œ í¬ê²Œ ë‹¤ë¥´ì§„ ì•Šë‹¤.&lt;/p>
&lt;p>interfaceì— ì¶”ìƒì ìœ¼ë¡œ í•´ë‹¹ interfaceë¥¼ êµ¬í˜„í•˜ëŠ” typeë“¤ì´ êµ¬í˜„í•˜ê¸°ë¥¼ ë°”ë¼ëŠ” methodë¥¼ ì •ì˜ë§Œí•œë‹¤.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">type&lt;/span> &lt;span class="nx">OperationUnit&lt;/span> &lt;span class="kd">interface&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nf">IsValidInput&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">args&lt;/span> &lt;span class="o">...&lt;/span>&lt;span class="kt">float64&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="kt">bool&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nf">Operate&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">args&lt;/span> &lt;span class="o">...&lt;/span>&lt;span class="kt">float64&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">float64&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">error&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ì´ ê²½ìš° OperationUnitëŠ” &amp;ldquo;IsValidInputê³¼ Operate ê¸°ëŠ¥ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆëŠ” ë¬´ì–¸ê°€&amp;rdquo; ì´ë¼ê³  ì¶”ìƒí™”ëœ ê²ƒì´ë‹¤.&lt;/p>
&lt;blockquote>
&lt;p>ìì„¸í•œ ë‚´ìš©ì€? - ì¶”ìƒí™”ì˜ ì“°ì„ì€ ë‹¤í˜•ì„±ì˜ ì“°ì„ê³¼ë„ ë°€ì ‘í•œ ì—°ê´€ì´ ìˆë‹¤. Goì—ì„œ interfaceë¥¼ ì‚¬ìš©í•˜ëŠ” íŒ¨í„´ê³¼ ì‚¬ìš©ë²•ì— ëŒ€í•´ ì•Œì•„ë³´ë©´ ì¢‹ì„ ê²ƒ ê°™ë‹¤.&lt;/p>
&lt;/blockquote>
&lt;h2 id="-polymorphismë‹¤í˜•ì„±">ğŸŒ’ğŸŒ“ğŸŒ• Polymorphism(ë‹¤í˜•ì„±)&lt;/h2>
&lt;p>&lt;code>ë‹¤í˜•ì„±&lt;/code>ì´ë€ &lt;strong>í•œ ê°€ì§€ íƒ€ì…ì´ ê²½ìš°ì— ë”°ë¼ ê°™ì€ ê¸°ëŠ¥ì— ëŒ€í•´ ë‹¤ì–‘í•œ ë™ì‘ì„ ìˆ˜í–‰&lt;/strong>í•  ìˆ˜ ìˆëŠ” ê²ƒì„ ë§í•œë‹¤. &lt;strong>ì¶”ìƒí™”ëŠ” interfaceì— ëŒ€í•œ ì •ì˜&lt;/strong>ì— í•´ë‹¹í•˜ê³  &lt;strong>ë‹¤í˜•ì„±ì€ interface í™œìš©&lt;/strong>ì— í•´ë‹¹í•˜ëŠ” ë“¯í•˜ë‹¤.&lt;/p>
&lt;p>ì¼ë°˜ì ì¸ OOP ì–¸ì–´ì—ì„œëŠ” interfaceê°€ ì•„ë‹Œ ìƒì† ê´€ê³„ì—ì„œë„ ë¶€ëª¨â‡’ìì‹ìœ¼ë¡œ íƒ€ì… ë³€í™˜ì„ í†µí•´ ë‹¤í˜•ì„± í™œìš©ì´ ê°€ëŠ¥í•˜ë‹¤. í•˜ì§€ë§Œ GoëŠ” ì´ë¥¼ ì§€ì›í•˜ì§€ ì•ŠëŠ”ë‹¤. ì´ìœ ëŠ” ëŸ°íƒ€ì„ì— ë™ì ìœ¼ë¡œ method dispatch(í•´ë‹¹ typeì˜ ê°ì²´ í˜¹ì€ valueê°€ ì–´ë–¤ í•¨ìˆ˜ë¥¼ ë©”ì†Œë“œë¡œ í•  ì§€ ê²°ì •í•˜ëŠ” ê²ƒ)ì„ ìˆ˜í–‰í•¨ìœ¼ë¡œ ì¸í•œ ì˜¤ë²„í—¤ë“œë¥¼ ì¤„ì´ê¸° ìœ„í•´ì„œ ì»´íŒŒì¼ íƒ€ì„ì— ì •ì ìœ¼ë¡œ method dispatchí•  ìˆ˜ ìˆê²Œ í•˜ê¸° ìœ„í•´ì„œë¼ê³ í•œë‹¤.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">type&lt;/span> &lt;span class="nx">OperationUnit&lt;/span> &lt;span class="kd">interface&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nf">IsValidInput&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">args&lt;/span> &lt;span class="o">...&lt;/span>&lt;span class="kt">float64&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="kt">bool&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nf">Operate&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">args&lt;/span> &lt;span class="o">...&lt;/span>&lt;span class="kt">float64&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">float64&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">error&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">type&lt;/span> &lt;span class="nx">MultiplyOperationUnit&lt;/span> &lt;span class="kd">struct&lt;/span>&lt;span class="p">{}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">type&lt;/span> &lt;span class="nx">SquareOperationUnit&lt;/span> &lt;span class="kd">struct&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">MultiplyOperationUnit&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">...&lt;/span> &lt;span class="nx">ê°ì¢…&lt;/span> &lt;span class="nx">ë©”ì†Œë“œ&lt;/span> &lt;span class="nx">ì •ì˜&lt;/span> &lt;span class="nx">ìƒëµ&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">(){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">var&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">calculator&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">calc&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Calculator&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">calc&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">NewCalculator&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">operationUnit&lt;/span> &lt;span class="nx">calc&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">OperationUnit&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">operationResult&lt;/span> &lt;span class="kt">float64&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">operationErr&lt;/span> &lt;span class="kt">error&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ì—°ì‚°ì— ëŒ€í•œ multiplexing. ì¦‰ optionì— ë”°ë¥¸ ì—°ì‚°ì„ ìˆ˜í–‰í•œë‹¤ëŠ” ì˜ë¯¸
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">switch&lt;/span> &lt;span class="nx">option&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">case&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">operationUnit&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">calculator&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Multiplier&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">case&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">operationUnit&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">calculator&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">SquareMultiplier&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">operationResult&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">operationErr&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">operationUnit&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Operate&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">inputs&lt;/span>&lt;span class="o">...&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// result
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="nx">operationErr&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;[Error]&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">operationErr&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span> &lt;span class="k">else&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Result:&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">operationResult&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>operationUnitì´ë¼ëŠ” Interfaceì— ë‹¤ë¥¸ typeì˜ structì¸ calculator.Multiplierì™€ calculator.SquareMultiplierê°€ ë‹´ê¸¸ ìˆ˜ ìˆë‹¤.&lt;/p>
&lt;p>ì´ë¥¼ í†µí•´ &lt;code>operationUnit.Operate()&lt;/code> ëŠ” &lt;strong>ê²½ìš°ì— ë”°ë¼ &amp;ldquo;&lt;em>ì—°ì‚°&lt;/em>&amp;ldquo;ì´ë¼ëŠ” ê¸°ëŠ¥ìœ¼ë¡œ &lt;em>Multipliy&lt;/em> ì‘ì—…ì„ ìˆ˜í–‰í•  ìˆ˜ë„ ìˆê³ , &lt;em>SqaureMultipliy&lt;/em> ì‘ì—…ì„ ìˆ˜í–‰í•  ìˆ˜ë„ ìˆëŠ”ë°, ì´ë¥¼ ë‹¤í˜•ì„±&lt;/strong>ì´ë¼ê³  í•œë‹¤.&lt;/p>
&lt;h2 id="goì—ì„œì˜-ê°ì²´-ì§€í–¥ì˜-í•œê³„ì ê³¼-ì¥ì ">Goì—ì„œì˜ ê°ì²´ ì§€í–¥ì˜ í•œê³„ì ê³¼ ì¥ì &lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">public&lt;/span> &lt;span class="nx">class&lt;/span> &lt;span class="nx">Example&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">public&lt;/span> &lt;span class="nx">static&lt;/span> &lt;span class="nx">void&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">String&lt;/span>&lt;span class="p">[]&lt;/span> &lt;span class="nx">args&lt;/span>&lt;span class="p">){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Parent classì™€ Parentë¥¼ extendsí•œ Child classì— ëŒ€í•œ êµ¬í˜„ì€ ìƒëµí•œë‹¤.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">Parent&lt;/span> &lt;span class="nx">parent&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">new&lt;/span> &lt;span class="nf">Parent&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Parent&lt;/span> &lt;span class="nx">child&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">new&lt;/span> &lt;span class="nf">Child&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">parent&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ShowMetaData&lt;/span>&lt;span class="p">();&lt;/span> &lt;span class="c1">// parent.GetName() ì´ìš©
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="cm">/* Output
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> =======================================
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> Name: Parent
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> =======================================
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> */&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">child&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ShowMetaData&lt;/span>&lt;span class="p">();&lt;/span> &lt;span class="c1">// child.GetName()ì´ìš©.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">// ì´ ë•Œì—ëŠ” .ShowMetaData()ê°€ Parent classê°€ ì•„ë‹Œ Child classê°€ Overrideí•œ GetName() ì´ìš©
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="cm">/* Output
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> =======================================
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> Name: Child of Parent
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> =======================================
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> */&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ê°ì²´ ì§€í–¥ í”„ë¡œê·¸ë˜ë°ì—ì„  &lt;strong>ë¶€ëª¨ í´ë˜ìŠ¤ì— ì •ì˜ëœ ë©”ì†Œë“œê°€ ë‚´ë¶€ì—ì„œ ìì‹ì´ Overrideí•œ ë©”ì†Œë“œë¥¼ ì´ìš©í•  ìˆ˜ë„ ìˆëŠ”ë°, GoëŠ” ê·¸ëŸ° ê¸°ëŠ¥ì€ ì´ìš©í•  ìˆ˜ ì—†ë‹¤ëŠ” ì ì´ ê°€ì¥ í° í•œê³„ì &lt;/strong>ì¸ ê²ƒ ê°™ë‹¤.&lt;/p>
&lt;p>ì˜ˆë¥¼ ë“¤ì–´ Parent classì˜ .ShowMetaData()ë¼ëŠ” methodê°€ .GetName()ì´ë¼ëŠ” ë©”ì†Œë“œë¥¼ í˜¸ì¶œí•˜ëŠ” ê²½ìš°, javaì—ì„œëŠ” Childê°€ GetNameì„ Overrideí•˜ë©´ child.ShowMetaData() í˜¸ì¶œ ì‹œì— Childê°€ Overrideí•œ child.GetName()ì„ ì´ìš©í•˜ì§€ë§Œ, GoëŠ” ê·¸ëŸ´ ìˆ˜ ì—†ë‹¤. í•„ìš”í•œ ê²½ìš° í•¨ìˆ˜ë¥¼ ì¸ìë‚˜ fieldë¡œ ì „ë‹¬í•¨ìœ¼ë¡œì¨ ì‚¬ìš©í•  ìˆ˜ ìˆê² ì§€ë§Œ, ì‚¬ìš©ì„±ì´ ì œí•œì ì´ë‹¤. ì´ ë‚´ìš©ì— ëŒ€í•´ ì—¬ê¸°ì„œ ì„¤ëª…í•˜ë©´ ê¸€ì´ ê¸¸ì–´ì§ˆ ê²ƒ ê°™ì•„ ìì„¸í•œ ë¬˜ì‚¬ëŠ” ìƒëµí•˜ê² ë‹¤.&lt;/p>
&lt;p>ë°˜ë©´ Goì—ì„œì˜ ê°ì²´ ì§€í–¥ì€ &lt;strong>ì¥ì &lt;/strong>ì€ ì´ ê¸€(&lt;a class="link" href="https://www.toptal.com/go/golang-oop-tutorial" target="_blank" rel="noopener"
>https://www.toptal.com/go/golang-oop-tutorial&lt;/a>)ì˜ í›„ë°˜ë¶€ì— ì˜ ë‚˜ì™€ìˆëŠ”ë°, &lt;strong>êµ³ì´ Javaë¥¼ ì´ìš©í•˜ì§€ ì•Šì•„ë„ ì´ë ‡ê²Œ OOPê°€ ì¶©ë¶„íˆ ê°€ëŠ¥í•˜ë‹¤&lt;/strong>ëŠ” ê²ƒì´ í•µì‹¬ì´ë‹¤. Javaì˜ VM/JITìœ¼ë¡œ ì¸í•œ ë¦¬ì†ŒìŠ¤ ë¶€ì¡±, ììœ ë„ê°€ ë–¨ì–´ì§€ëŠ” í”„ë ˆì„ì›Œí¬, ë§ì€ annotation, &amp;hellip; ë“±ë“±ì˜ ë‹¨ì  ì—†ì´ë„ ì¶©ë¶„íˆ Goë¥¼ í†µí•´ ê°€ë³ê²Œ OOP í•  ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì´ ì¥ì ì´ë‹¤.&lt;/p>
&lt;h2 id="ë§ˆë¬´ë¦¬">ë§ˆë¬´ë¦¬&lt;/h2>
&lt;p>ì•„ë¬´ë˜ë„ ê°ì²´ ì§€í–¥ì  ê°œë°œì„ í•˜ëŠ” ë°ì— ìˆì–´ì„œëŠ” Javaê°€ ì¢€ ë” ì§ê´€ì ìœ¼ë¡œ ê·¸ëŒ€ë¡œ ì„¤ê³„, êµ¬í˜„í•´ì„œ ì´ìš©ì´ ê°€ëŠ¥í•œ ê²ƒ ê°™ë‹¤. ì²˜ìŒ Javaë¥¼ ê³µë¶€í–ˆì„ ë•Œë¶€í„° JavaëŠ” ê°ì²´ì§€í–¥ì ìœ¼ë¡œ ê°œë°œí•˜ëŠ” íŒ¨í„´ì— ëŒ€í•´ ìˆ˜ì—†ì´ ë§ì€ ì˜ˆì œê°€ ì¡´ì¬í–ˆê³ , ê·¸ íŒ¨í„´ì´ ëª…í™•í–ˆë˜ ë°˜ë©´ GoëŠ” ëª…í™•í•œ íŒ¨í„´ì´ë‚˜ ê¹”ë”í•˜ê²Œ ì •ì˜ê°€ ì—†ë‹¤(&lt;em>ì´ëŸ° ì‹ìœ¼ë¡œ OOP ì›ì¹™ì„ ì´ìš©í•´ë³¼ ìˆ˜ ìˆì§€ ì•Šì„ê¹Œ~ ì •ë„&lt;/em>). ì•„ë§ˆ ì• ì´ˆì— GoëŠ” ê°ì²´ ì§€í–¥ ì–¸ì–´ë¡œ ì„¤ê³„í•˜ì§€ ì•Šì•˜ê¸° ë•Œë¬¸ì´ ì•„ë‹ê¹Œì‹¶ë‹¤.&lt;/p>
&lt;p>ì´ë¥¼ ê³„ê¸°ë¡œ Goì—ì„œëŠ” OOP ì›ì¹™ë“¤ì´ ì–´ë–»ê²Œ ë‹¤ì–‘í•˜ê²Œ ì ìš©í•  ìˆ˜ ìˆëŠ”ì§€ ì¢€ ë” ìì„¸íˆ ì•Œì•„ë³¼ ìˆ˜ ìˆì—ˆë‹¤.&lt;/p>
&lt;h2 id="ì°¸ê³ ">ì°¸ê³ &lt;/h2>
&lt;ul>
&lt;li>[ë²ˆì—­] Goì™€ OOP - &lt;a class="link" href="https://mingrammer.com/translation-go-and-oop/" target="_blank" rel="noopener"
>https://mingrammer.com/translation-go-and-oop/&lt;/a>&lt;/li>
&lt;li>Golang OOP tutorial - &lt;a class="link" href="https://www.toptal.com/go/golang-oop-tutorial" target="_blank" rel="noopener"
>https://www.toptal.com/go/golang-oop-tutorial&lt;/a>&lt;/li>
&lt;li>go object-oriented - &lt;a class="link" href="https://golangkorea.github.io/post/go-start/object-oriented/" target="_blank" rel="noopener"
>https://golangkorea.github.io/post/go-start/object-oriented/&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Go ì–¸ì–´ë¡œ ì ìš©í•´ë³´ëŠ” Computer Science - Deadlock</title><link>https://umi0410.github.io/blog/golang/go-deadlock/</link><pubDate>Sun, 31 Jan 2021 18:25:54 +0900</pubDate><guid>https://umi0410.github.io/blog/golang/go-deadlock/</guid><description>&lt;img src="https://umi0410.github.io/blog/golang/go-deadlock/pprof-debugging-1.png" alt="Featured image of post Go ì–¸ì–´ë¡œ ì ìš©í•´ë³´ëŠ” Computer Science - Deadlock" />&lt;h2 id="ì‹œì‘í•˜ë©°">ì‹œì‘í•˜ë©°&lt;/h2>
&lt;p>ê°œë°œ ê³µë¶€ë¥¼ ì‹œì‘í•˜ê³  ì—¬íƒœê¹Œì§€ ëª‡ ë…„ê°„ ë°ë“œë½ì„ ì‹¤ì œë¡œ ì ‘í•  ì¼ì€ ì—†ì—ˆë‹¤. ì‚¬ì‹¤ ë™ì‹œì„±ì„ ì£¼ì˜í•´ì•¼í•˜ëŠ” ì‘ì—…ì„ í•´ë³¸ ì ë„ ì—†ì—ˆê³ , íŠ¸ëœì­ì…˜ì— ëŒ€í•œ ê°œë…ë„ ì—†ì—ˆê¸° ë•Œë¬¸ì¼ ìˆ˜ë„ ìˆë‹¤. ì „ê³µ ê³¼ëª©ì—ì„œ ë°ë“œë½ì— ëŒ€í•œ ë‚´ìš©ì„ ë“£ê³ ì„œë„ &amp;lsquo;&lt;em>ì•„ ì´ëŸ° ê²Œ ìˆêµ¬ë‚˜&lt;/em>&amp;rsquo; ì •ë„ë¡œë§Œ ìƒê°í•˜ê³  ë„˜ê²¼ì—ˆë‹¤. í•˜ì§€ë§Œ Go ì–¸ì–´ë¥¼ í†µí•´ ê°œë°œì„ í•˜ë˜ ë„ì¤‘ &lt;code>Channel&lt;/code>ì´ë‚˜ &lt;code>Mutex&lt;/code>ë¡œ ì¸í•´ ì¢…ì¢… ë°ë“œë½ì„ ê²½í—˜í•  ìˆ˜ ìˆì—ˆê³ , ì´ ê²½ìš° í”„ë¡œê·¸ë¨ì´ ì™„ì „íˆ ë©ˆì¶°ë²„ë¦¬ëŠ” í¬ë¦¬í‹°ì»¬í•œ ë¬¸ì œê°€ ë°œìƒí•˜ê¸°ë„ í–ˆê³ , ë””ë²„ê¹…í•˜ê¸° í˜ë“  ê²½ìš°ë„ ìˆì—ˆë‹¤. ê·¸ëŸ° ê²½í—˜ì„ í•˜ë©´ì„œ &amp;lsquo;&lt;em>ë°ë“œë½ ì´ ë…€ì„&amp;hellip; ë§Œë§Œì¹˜ ì•Šêµ¬ë‚˜&lt;/em>&amp;lsquo;ë¼ëŠ” ìƒê°ì„ í•˜ê³¤ í–ˆë‹¤.&lt;/p>
&lt;p>ì´ë²ˆ ê¸€ì—ì„œëŠ” &lt;strong>&lt;code>Golang&lt;/code> ì¦‰ &lt;code>Go&lt;/code> ì–¸ì–´ë¥¼ í†µí•´ ì–´ë–¤ ê²½ìš°ì— &lt;code>Deadlock&lt;/code>ì´ ë°œìƒí•  ìˆ˜ ìˆëŠ”ì§€ ì‹¤ì œ í”„ë¡œê·¸ë¨ì„ í†µí•´ ì•Œì•„ë³´ë ¤í•œë‹¤.&lt;/strong> Mutexì— ëŒ€í•œ &lt;code>Lock&lt;/code>ê³¼ ê°™ì´ ì¼ë°˜ì ìœ¼ë¡œ ë°œìƒí•  ìˆ˜ ìˆëŠ” ë°ë“œë½ë¶€í„° &lt;code>channel&lt;/code>ì´ë‚˜ &lt;code>goroutine&lt;/code>ì— ëŒ€í•œ &lt;code>Cooperative scheduling&lt;/code>ê³¼ ê°™ì€ Go ì–¸ì–´ì— íŠ¹í™”ëœ ë‚´ìš©ê¹Œì§€ë¥¼ ì •ë¦¬í•´ë³´ì•˜ë‹¤.&lt;/p>
&lt;h2 id="deadlockì´ë€">Deadlockì´ë€&lt;/h2>
&lt;blockquote>
&lt;p>Deadlockì´ë€ êµì°©ìƒíƒœë¥¼ ì˜ë¯¸í•˜ë©° ë‘ ê°œ ì´ìƒì˜ ì‘ì—…ì´ ì„œë¡œ ìƒëŒ€ë°©ì˜ ì‘ì—…ì´ ëë‚˜ê¸°ë§Œì„ ê¸°ë‹¤ë¦¬ê³  ìˆê¸° ë•Œë¬¸ì— ê²°ê³¼ì ìœ¼ë¡œ ì•„ë¬´ê²ƒë„ ì™„ë£Œë˜ì§€ ëª»í•˜ëŠ” ìƒíƒœë¥¼ ê°€ë¦¬í‚¨ë‹¤. - ìœ„í‚¤ë°±ê³¼ -&lt;/p>
&lt;/blockquote>
&lt;p>ë°ë“œë½ì˜ ê°œë… ìì²´ëŠ” ê·¸ë¦¬ ì–´ë µì§€ ì•Šê³ , ì˜ˆì‹œë¥¼ í†µí•´ì„œ ì‰½ê²Œ ì´í•´ê°€ ê°€ëŠ¥í•˜ë‹¤. ìœ„í‚¤ ë°±ê³¼ì— ë‚˜ì˜¨ ì˜ˆì‹œë¥¼ ì¸ìš©í•˜ìë©´ í•˜ë‚˜ì˜ ì‚¬ë‹¤ë¦¬ì— ìœ„ì—ì„œ ë‚´ë ¤ì˜¤ë ¤ëŠ” ì‚¬ëŒ, ì•„ë˜ì—ì„œ ì˜¬ë¼ê°€ëŠ” ì‚¬ëŒì´ ë™ì‹œì— ì˜¬ë¼ê°€ìˆìœ¼ë©´ ì•„ë¬´ë„ ë‚´ë ¤ì˜¤ê±°ë‚˜ ì˜¬ë¼ê°€ì§€ ëª»í•˜ëŠ” ê²½ìš°ë¥¼ ì˜ˆë¡œ ë“¤ ìˆ˜ ìˆë‹¤.&lt;/p>
&lt;h3 id="êµì°©-ìƒíƒœì˜-ì¡°ê±´">êµì°© ìƒíƒœì˜ ì¡°ê±´&lt;/h3>
&lt;p>ë” ìì„¸íˆ ì •ì˜ë‚˜ ì˜ë¯¸ì— ëŒ€í•´ ì„¤ëª…í•  ê²ƒì€ ì—†ì„ ë“¯í•˜ê³ , í•™ë¬¸ì ìœ¼ë¡œëŠ” ì£¼ë¡œ ì•„ë˜ì˜ 4ê°€ì§€ ì¡°ê±´ì„ í†µí•´ ë°œìƒí•œë‹¤ê³  ì„¤ëª…í•˜ëŠ” ê²ƒ ê°™ë‹¤.&lt;/p>
&lt;ol>
&lt;li>ìƒí˜¸ ë°°ì œ (Mutual exclusion) - í•˜ë‚˜ì˜ ìì›ì„ ë™ì‹œì— ì‚¬ìš©í•˜ì§€ ëª»í•˜ë„ë¡ í•˜ëŠ” ê²ƒ&lt;/li>
&lt;li>ì ìœ  ìƒíƒœë¡œ ëŒ€ê¸° (Hold and wait) - í•˜ë‚˜ì˜ ìì›ì„ ì†Œìœ í•œ ìƒíƒœë¡œ ë‹¤ë¥¸ ìì›ì„ ê¸°ë‹¤ë¦¬ê³  ìˆëŠ” ìƒíƒœ&lt;/li>
&lt;li>ì„ ì  ë¶ˆê°€ (No preemption) - ì»´í“¨í„° ë¶„ì•¼ì—ì„œì˜ ì„ ì ì€ í•œêµ­ë§ì˜ ì„ ì ê³¼ ë‹¤ì†Œ ë‹¤ë¥¸ ì˜ë¯¸. process í˜¹ì€ goroutineì˜ ìì›ì„ ë¹¼ì•—ëŠ” ê²ƒì„ ì„ ì ì´ë¼ê³  í•¨. ì„ ì  ë¶ˆê°€ë€ ê·¸ëŸ´ ìˆ˜ ì—†ëŠ” ìƒíƒœ.&lt;/li>
&lt;li>ìˆœí™˜ì„± ëŒ€ê¸° (Circular wait) - ê° í”„ë¡œì„¸ìŠ¤ê°€ ìˆœí™˜ì ìœ¼ë¡œ ë‹¤ìŒ í”„ë¡œì„¸ìŠ¤ê°€ ìš”êµ¬í•˜ëŠ” ìì›ì„ ê°€ì§€ê³ ìˆë‹¤. ì‰½ê²Œ 2ê°œì˜ í”„ë¡œì„¸ìŠ¤ë¥¼ ì˜ˆë¡œ ë“¤ë©´ AëŠ” Bê°€ ì†Œìœ  ì¤‘ì¸ ìì›ì„, BëŠ” Aê°€ ì†Œìœ  ì¤‘ì¸ ìì›ì„ ì–»ìœ¼ë ¤ê³  ëŒ€ê¸° ì¤‘ì¸ ìƒí™©ì„ ë§í•¨.&lt;/li>
&lt;/ol>
&lt;p>Deadlockì˜ ê°œë… ìì²´ê°€ ì–´ë µë‹¤ê±°ë‚˜ ìœ„ì˜ 4ê°€ì§€ ì¡°ê±´ì„ ì•”ê¸°í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•œ ê²ƒì€ ì•„ë‹ˆë¼ê³  ìƒê°í•œë‹¤. ì¤‘ìš”í•œ ê²ƒì€ ì‹¤ì œë¡œ ì–´ë–¤ ê²½ìš°ì— ë°ë“œë½ì´ ë°œìƒí•  ìˆ˜ ìˆì„ ì§€ íŒŒì•…í•˜ê³  ì£¼ì˜í•˜ëŠ” ê²ƒê³¼ ê·¸ ê²½ìš° ì–´ë–»ê²Œ í•´ê²°í•  ìˆ˜ ìˆì„ì§€ ì¸ì§€í•˜ëŠ” ê²ƒì´ë¼ê³  ìƒê°í•œë‹¤. ê·¸ëŸ¼ Go ì–¸ì–´ë¡œ ê°„ë‹¨í•œ í”„ë¡œê·¸ë¨ì„ ì§œë³´ë©° ì•Œì•„ë³´ì.&lt;/p>
&lt;h2 id="goì—ì„œ-ë°œìƒí• -ìˆ˜-ìˆëŠ”-deadlock">Goì—ì„œ ë°œìƒí•  ìˆ˜ ìˆëŠ” Deadlock&lt;/h2>
&lt;h3 id="channel">Channel&lt;/h3>
&lt;p>ì£¼ë¡œ ì±„ë„ì„ ì ‘í•œ ì§€ ì–¼ë§ˆ ì•ˆ ë˜ì–´ ê·¸ ë™ì‘ ë°©ì‹ì„ ì˜ ì´í•´í•˜ì§€ ëª»í•œ ì±„ ì‚¬ìš©í•  ê²½ìš° ì±„ë„ë¡œ ì¸í•œ ë°ë“œë½ì´ ë°œìƒí•œë‹¤.&lt;/p>
&lt;h4 id="unbuffered-channel">Unbuffered channel&lt;/h4>
&lt;p>&lt;img src="https://umi0410.github.io/blog/golang/go-deadlock/unbuffered-channel-1.png"
width="658"
height="523"
srcset="https://umi0410.github.io/blog/golang/go-deadlock/unbuffered-channel-1_hu10a616b58d6a106d3f4b8196ebfc4c11_56914_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/golang/go-deadlock/unbuffered-channel-1_hu10a616b58d6a106d3f4b8196ebfc4c11_56914_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="unbuffered-channel-1.png"
class="gallery-image"
data-flex-grow="125"
data-flex-basis="301px"
>&lt;/p>
&lt;p>íŠ¹íˆë‚˜ unbuffered channelì— ëŒ€í•œ ë¯¸ìˆ™í•œ ì‚¬ìš©ì€ ìì£¼ ë°ë“œë½ì„ ì•¼ê¸°í•œë‹¤. &lt;code>unbuffered channel&lt;/code>ì—ì„œ ë°œìƒí•˜ëŠ” ì¼ë°˜ì ì¸ ë°ë“œë½ì˜ ì˜ë¯¸ì¸ 2ê°œ ì´ìƒì˜ ì‘ì—… ì„œë¡œì˜ ì‘ì—…ì´ ì™„ë£Œë˜ê¸°ë¥¼ ëŒ€ê¸°í•˜ëŠ” êµì°© ìƒíƒœì™€ëŠ” ì•½ê°„ ë‹¤ë¥´ë‹¤ê³  ë³¼ ìˆ˜ë„ ìˆë‹¤. ì™œëƒí•˜ë©´ &lt;code>sender&lt;/code>ì™€ &lt;code>receiver&lt;/code> ì¤‘ ëˆ„êµ°ê°€ê°€ ë¨¼ì € ì‘ì—…ì„ ëë‚´ì•¼ì§€ ê·¸ ë‹¤ìŒìœ¼ë¡œ ëˆ„êµ°ê°€ê°€ ì‘ì—…ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆëŠ” ê²ƒì´ ì•„ë‹ˆë¼ &lt;strong>ì„œë¡œ ë™ì‹œì— í˜‘ë ¥í•´ì•¼ë§Œ unbuffered channelì— ëŒ€í•œ ëŒ€ê¸°ë¥¼ ëë‚¼ ìˆ˜ ìˆëŠ”ë° ì´ ê²½ìš°ëŠ” ë™ì‹œì— í˜‘ë ¥í•´ì¤„ ê·¸ ëˆ„êµ°ê°€(receiver)ê°€ ì—†ëŠ” ê²½ìš°&lt;/strong>ì´ê¸° ë•Œë¬¸ì´ë‹¤.&lt;/p>
&lt;p>&lt;img src="https://umi0410.github.io/blog/golang/go-deadlock/unbuffered-channel-2.png"
width="524"
height="280"
srcset="https://umi0410.github.io/blog/golang/go-deadlock/unbuffered-channel-2_huc23feddb7907332ddbd012773a8469b8_20930_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/golang/go-deadlock/unbuffered-channel-2_huc23feddb7907332ddbd012773a8469b8_20930_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="unbuffered-channel-2.png"
class="gallery-image"
data-flex-grow="187"
data-flex-basis="449px"
>&lt;/p>
&lt;p>ê·¸ë ‡ë‹¤ê³ í•´ì„œ ìœ„ì™€ ê°™ì´ ìê¸° í˜¼ì sendì™€ receiveë¥¼ í•˜ë ¤í•´ë´¤ì Unbuffered channelì€ senderì™€ receiverê°€ ëª¨ë‘ readyì—¬ì•¼ ì‘ì—…ì„ ì§„í–‰í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ë¶ˆê°€ëŠ¥í•˜ë‹¤. (&lt;em>Unbuffered channelì˜ ë™ì‘ì— ëŒ€í•´ ì¢€ ë” ê¶ê¸ˆí•˜ì‹  ë¶„ë“¤ì€ ì œê°€ ë²ˆì—­ì— ì°¸ì—¬í•œ &lt;a class="link" href="https://go-tour-ko.appspot.com/concurrency/2" target="_blank" rel="noopener"
>A Tour of Go&lt;/a>ë¥¼ ì°¸ê³ í•´ì£¼ì‹œë©´ ê°ì‚¬í•˜ê² ìŠµë‹ˆë‹¤!&lt;/em>)&lt;/p>
&lt;p>&lt;img src="https://umi0410.github.io/blog/golang/go-deadlock/unbuffered-channel-3.png"
width="667"
height="474"
srcset="https://umi0410.github.io/blog/golang/go-deadlock/unbuffered-channel-3_hu79ddac0bd959ff7fccac87fc3364f23d_48295_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/golang/go-deadlock/unbuffered-channel-3_hu79ddac0bd959ff7fccac87fc3364f23d_48295_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="unbuffered-channel-3.png"
class="gallery-image"
data-flex-grow="140"
data-flex-basis="337px"
>&lt;/p>
&lt;p>ë”°ë¼ì„œ &lt;strong>ë‹¤ë¥¸ goroutineì—ì„œ Aì— ëŒ€í•œ receiver ì—­í• ì„ í•´ì£¼ë©´ ëœë‹¤.&lt;/strong>&lt;/p>
&lt;h3 id="buffered-channel">Buffered channel&lt;/h3>
&lt;blockquote>
&lt;p>Buffered channelì„ ì´ìš©í•˜ë©´ ì–´ë–¨ì§€ ì¢€ ë” ìì„¸íˆ ë“¤ì–´ê°€ë³´ì. ë…ìë¶„ê»˜ì„œ Goì˜ channelì— ëŒ€í•´ ë³„ ê´€ì‹¬ì´ ì—†ë‹¤ë©´ íŒ¨ìŠ¤~!&lt;/p>
&lt;/blockquote>
&lt;p>&lt;img src="https://umi0410.github.io/blog/golang/go-deadlock/buffered-channel-1.png"
width="668"
height="474"
srcset="https://umi0410.github.io/blog/golang/go-deadlock/buffered-channel-1_hu3ce95aebbfcae3388bc01c477c5405bf_44856_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/golang/go-deadlock/buffered-channel-1_hu3ce95aebbfcae3388bc01c477c5405bf_44856_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="buffered-channel-1.png"
class="gallery-image"
data-flex-grow="140"
data-flex-basis="338px"
>&lt;/p>
&lt;p>ë§¨ ì²˜ìŒì— Unbuffered channelì—ì„œëŠ” ìœ„ì™€ ê°™ì´ í•œ goroutineì—ì„œ senderì™€ receiver ì—­í•  ëª¨ë‘ë¥¼ ìˆ˜í–‰í•˜ë ¤í•´ë„ ì´ë¯¸ senderì—ì„œ blockì´ ê±¸ë ¤ë²„ë ¤ deadlockì„ ì•¼ê¸°í•œë‹¤ê³  í–ˆìœ¼ë‚˜ buffered channelì—ì„œëŠ” ê·¸ë ‡ì§€ ì•Šë‹¤! &lt;strong>buffered channelì€ buffer sizeê¹Œì§€ëŠ” ì…ë ¥ ì‘ì—…ì´ ë¸”ë½ë˜ì§€ ì•Šê¸° ë•Œë¬¸&lt;/strong>ì´ë‹¤.&lt;/p>
&lt;p>&lt;img src="https://umi0410.github.io/blog/golang/go-deadlock/buffered-channel-2.png"
width="672"
height="609"
srcset="https://umi0410.github.io/blog/golang/go-deadlock/buffered-channel-2_hu5d060740dcd194dde0764aece5d1bf11_61778_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/golang/go-deadlock/buffered-channel-2_hu5d060740dcd194dde0764aece5d1bf11_61778_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="buffered-channel-2.png"
class="gallery-image"
data-flex-grow="110"
data-flex-basis="264px"
>&lt;/p>
&lt;p>í•˜ì§€ë§Œ &lt;strong>buffer sizeë¥¼ ë„˜ì–´ì„œëŠ” ìˆœê°„ë¶€í„°ëŠ” receiverê°€ channel ë‚´ì˜ ì•„ì´í…œì„ êº¼ë‚´ì–´ ì¤„ ë•Œê¹Œì§€ blockë˜ì–´ë²„ë¦¬ë¯€ë¡œ ì£¼ì˜&lt;/strong>í•´ì•¼í•œë‹¤.&lt;/p>
&lt;h3 id="mutexlockì˜-ì¤‘ì²©">Mutex.Lockì˜ ì¤‘ì²©&lt;/h3>
&lt;p>&lt;code>Mutex&lt;/code>ì˜ êµ¬í˜„ì— ë”°ë¼ ë‹¤ë¥´ê² ì§€ë§Œ Goì—ì„œëŠ” Lockì´ ê±¸ë¦° ìë¬¼ì‡ ì— ë‹¤ì‹œ ìê¸°ê°€ Lockì„ ê±¸ë ¤í•´ë„ Unlockì´ ë  ë•Œê¹Œì§€ëŠ” Lockì„ ê±¸ ìˆ˜ ì—†ë‹¤. ì¦‰ ì–´ë–¤ Mutexì— Lockì„ ê±´ ê²ƒì´ ìì‹ (Goroutine)ì´ë¼ í•´ë„ í•´ë‹¹ Mutexì— ë˜ ë‹¤ì‹œ Lockì„ ê±¸ë ¤í•˜ë©´ ê·¸ ì‘ì—…ì€ Mutexê°€ Unlock ë  ë•Œê¹Œì§€ ë¸”ë½ë˜ê³  ê²°ê³¼ì ìœ¼ë¡œëŠ” Deadlock ìƒíƒœê°€ ë˜ì–´ë²„ë¦°ë‹¤.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;sync&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">var&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">scores&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="kt">int&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="mi">10&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">30&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">20&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Mutex&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">sync&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Mutex&lt;/span>&lt;span class="p">{}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// Lockì„ ê±´ ë’¤ ì•ˆì „í•˜ê²Œ topScoreë¥¼ êµ¬í•¨.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">func&lt;/span> &lt;span class="nf">GetTopScore&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">playerIndex&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">topScore&lt;/span> &lt;span class="kt">int&lt;/span>&lt;span class="p">){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Mutex&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Lock&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">topScore&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="nx">idx&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">score&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="k">range&lt;/span> &lt;span class="nx">scores&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">topScore&lt;/span> &lt;span class="p">&amp;lt;&lt;/span> &lt;span class="nx">score&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">playerIndex&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">idx&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">topScore&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">score&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Mutex&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Unlock&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// GetTopScoreëŠ” ì´ë¯¸ Lockì„ ì´ìš©í•´ thread safeí•˜ê²Œ ì‘ì—…í•˜ëŠ”ë°
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// ê·¸ê±¸ ì¸ì§€í•˜ì§€ ëª»í•˜ê³  ì‹¤ìˆ˜ë¡œ ê·¸ ë°–ì¸ Awardì—ì„œ Lockì„ ê±¸ì–´ë²„ë¦¼.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">func&lt;/span> &lt;span class="nf">Award&lt;/span>&lt;span class="p">(){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Mutex&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Lock&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">playerIdx&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">topScore&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nf">GetTopScore&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Mutex&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Unlock&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;%dê°€ %dì˜ ì ìˆ˜ë¡œ ìš°ìŠ¹í–ˆìŠµë‹ˆë‹¤!&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">playerIdx&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">topScore&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">(){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nf">Award&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// deadlock ë°œìƒ
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ìœ„ì˜ ì˜ˆì‹œì—ëŠ” thread-safeí•˜ê²Œ top scoreë¥¼ êµ¬í•˜ëŠ” &lt;code>GetTopScore&lt;/code> í•¨ìˆ˜ê°€ ì„ ì–¸ë˜ì–´ìˆë‹¤. í•˜ì§€ë§Œ &lt;code>Award&lt;/code> í•¨ìˆ˜ì—ì„œ ì´ë¯¸ &lt;code>GetTopScore&lt;/code>ëŠ” scoresì— ëŒ€í•´ &lt;code>thread-safe&lt;/code>í•¨ì—ë„ ë¶ˆêµ¬í•˜ê³  Lockì„ ê±¸ê³  &lt;code>GetTopScore&lt;/code>ë¥¼ ìˆ˜í–‰í•˜ë ¤í•˜ê¸° ë•Œë¬¸ì— ë°ë“œë½ì´ ë°œìƒí•œë‹¤. ì´ ê²½ìš°ì—ëŠ” &lt;strong>innerì¸ GetTopScore í˜¹ì€ outerì¸ Award ë‘˜ ì¤‘ í•œ ê³³ì—ì„œë§Œ Lock, Unlock ì‘ì—…ì„ ìˆ˜í–‰&lt;/strong>í•˜ë„ë¡ í•´ì£¼ì–´ì•¼í•œë‹¤.&lt;/p>
&lt;p>innerì—ì„œ Lock/Unlockì„ ë‹´ë‹¹í•˜ëŠ” ê²Œ ì˜³ì„ ì§€ outerì—ì„œ Lock/Unlockì„ ë‹´ë‹¹í•˜ëŠ” ê²Œ ì˜³ì„ ì§€ëŠ” ì˜ ëª¨ë¥´ê² ë‹¤. innerì—ì„œ Lock/Unlockì„ ë‹´ë‹¹í•˜ë©´ outerì—ì„œëŠ” ë°ë“œë½ìœ¼ë¡œ ì¸í•´ ì ˆëŒ€ Lock/Unlockì„ ëª»í•œë‹¤ëŠ” ë‹¨ì ì´ ìˆì§€ë§Œ, í•´ë‹¹ ì‘ì—…ì€ ì–¸ì œë‚˜ Atomicí•˜ê²Œ thread-safeí•˜ë‹¤ëŠ” ê²ƒì´ ë³´ì¥ëœë‹¤ëŠ” ì¥ì ì´ ìˆë‹¤. ë°˜ë©´ outerì—ì„œ Lock/Unlockì„ ë‹´ë‹¹í•˜ë„ë¡í•˜ë©´ ë¹„êµì  ììœ ìì¬ë¡œ Lock/Unlockì„ ëª…ë ¹í•  ìˆ˜ ìˆëŠ” ë°˜ë©´ thread-safeí•´ì•¼í•  ë‚´ë¶€ ì‘ì—…ì´ unsafeí•´ì§ˆ ìˆ˜ë„ ìˆë‹¤. ì‹¤ìˆ˜ë¡œ Lock/Unlock ì‘ì—…ì„ ìŠì–´ë²„ë¦´ ìˆ˜ ìˆê¸° ë•Œë¬¸ì´ë‹¤. í•˜ì§€ë§Œ ë¬´ì—‡ë³´ë‹¤ë„ &lt;strong>innerì—ì„œ Lock/Unlockì„ ë‹´ë‹¹í•  ì§€ outerì—ì„œ ë‹´ë‹¹í•  ì§€ë¥¼ ì •í™•íˆ ì •í•  ìˆ˜ ì—†ëŠ” ì´ìœ ëŠ” outerë„ ê²°êµ­ì—” ë˜ ë‹¤ë¥¸ outerì˜ innerê°€ ë  ìˆ˜ ìˆê¸° ë•Œë¬¸&lt;/strong>ì´ë¼ê³  ìƒê°í•œë‹¤.&lt;/p>
&lt;h3 id="cooperative-scheduling-ë°©ì‹ì—ì„œì˜-ë¬´í•œ-loop">Cooperative scheduling ë°©ì‹ì—ì„œì˜ ë¬´í•œ Loop&lt;/h3>
&lt;p>Goroutine schedulerê°€ &lt;strong>Goroutineì„ ìŠ¤ì¼€ì¥´ë§ í•˜ëŠ” ë°©ì‹ì€ Go 1.14 ì´ì „ê¹Œì§€ëŠ” Cooperative ë°©ì‹ì´ì—ˆìœ¼ë‚˜, Go 1.14 ë¶€í„°ëŠ” Preemptiveí•œ ë°©ì‹ìœ¼ë¡œ ë°”ë€Œì—ˆë‹¤&lt;/strong>ê³  í•œë‹¤. OSê°€ Go processì˜ threadë¥¼ ìŠ¤ì¼€ì¥´ í•˜ëŠ” ë°©ì‹ì€ OS ë§ˆë‹¤ ë‹¤ë¥´ê² ì§€ë§Œ ëŒ€ì²´ë¡œ preemptiveí•  ê²ƒì´ê³  ì—¬ê¸°ì„œ ì–˜ê¸°í•˜ë ¤ëŠ” ìŠ¤ì¼€ì¥´ëŸ¬ëŠ” Goroutineì„ ìŠ¤ì¼€ì¥´ë§í•˜ëŠ” Goroutine schedulerì„ì„ ì£¼ì˜í•˜ì.&lt;/p>
&lt;p>Goroutineì€ syscallì™€ mutex, channel, í•¨ìˆ˜ ì½œ ë“±ìœ¼ë¡œ ì¸í•´ switch ë  ìˆ˜ ìˆëŠ”ë°, &lt;strong>cooperative ë°©ì‹ì„ ì´ìš©í•˜ëŠ” ê²½ìš°ì—ëŠ” ì´ëŸ¬í•œ goroutine switch ì¡°ê±´ì— í•´ë‹¹í•˜ì§€ ì•ŠëŠ” ê²½ìš° ì„ì˜ë¡œ goroutine switch í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ì§€ ì•ŠëŠ” í•œì€ ê°™ì€ ìŠ¤ë ˆë“œ ë‚´ì˜ ë‹¤ë¥¸ goroutineì€ ì ˆëŒ€ë¡œ ì‹¤í–‰ë  ìˆ˜ ì—†ë‹¤&lt;/strong>. preemption(ì„ ì ) ì¦‰ ë‹¤ë¥¸ goroutineì„ block ìƒíƒœë¡œ ë§Œë“¤ì–´ë²„ë¦¬ê³  ìì‹ ì´ CPUë¥¼ ì„ ì í•˜ëŠ” ê²ƒì´ ë¶ˆê°€ëŠ¥í–ˆê¸° ë•Œë¬¸ì´ë‹¤. í•˜ì§€ë§Œ Go 1.14ë¶€í„°ëŠ” ì•½ 10msë¥¼ ê¸°ì¤€ìœ¼ë¡œ preemptionì„ ìˆ˜í–‰í•˜ê³  ìˆë‹¤. Asynchronous preemptionì´ë¼ê³  ë¶€ë¥´ëŠ” ê²ƒ ê°™ì€ë°, ì •í™•íˆ ì™œ asynchronousì¸ì§€, ê¸°ì¡´ì˜ preemptive scheduleê³¼ëŠ” ë¬´ì—‡ì´ ë‹¤ë¥¸ì§€ëŠ” ì°¾ì•„ë´¤ìœ¼ë‚˜ ì œëŒ€ë¡œ ì„¤ëª…ë˜ì–´ìˆëŠ” ê³³ì„ ì°¾ì§€ ëª»í–ˆë‹¤.&lt;/p>
&lt;p>ì•ìœ¼ë¡œ ì´ì–´ì§€ëŠ” ë‚´ìš©ì€ &lt;em>ë°ë“œë½ì— ëŒ€í•œ ì˜ˆì‹œë¼ê¸° ë³´ë‹¤ëŠ” &amp;lsquo;cooperative ìŠ¤ì¼€ì¥´ë§ê³¼ preemptive ìŠ¤ì¼€ì¥´ë§ì˜ ì°¨ì´ë¡œ ì¸í•´ ë°ë“œë½ì´ ë°œìƒí•  ìˆ˜ë„ ìˆê³  ë°œìƒí•˜ì§€ ì•Šì„ ìˆ˜ë„ ìˆêµ¬ë‚˜&amp;rsquo;ì— ëŒ€í•´ ì•Œì•„ë³´ëŠ” ì˜ˆì‹œ&lt;/em>ì´ë‹¤.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">Foo&lt;/span>&lt;span class="p">(){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;No Deadlock. ë‚˜ë„ ì‹¤í–‰ë  ìˆ˜ ìˆì–´!&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">(){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">go&lt;/span> &lt;span class="nf">Foo&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">dummy&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="c1">// ê·¸ëƒ¥ for ë¬¸ ì•ˆì—ì„œ dummy ì‘ì—…ì„ ìˆ˜í–‰í•˜ê¸° ìœ„í•œ ë³€ìˆ˜
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">dummy&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>for ë¬¸ ì•ˆì—ì„œëŠ” í•¨ìˆ˜ì½œë„ syscallë„ channel/mutexë„ ì•„ë‹Œ goroutine swtichì™€ ê´€ë ¨ ì—†ëŠ” &lt;code>dummy += 1&lt;/code> ì‘ì—…ë§Œì„ ìˆ˜í–‰í•˜ê³  ìˆë‹¤. ì´ ê²½ìš° &lt;code>go Foo()&lt;/code>ë¥¼ í†µí•´ goroutineì„ ìƒì„±í•˜ê¸´ í•˜ì§€ë§Œ ê·¸ goroutineì€ ë°”ë¡œ ì‹¤í–‰ë˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ëŒ€ê¸° ìƒíƒœì´ë©° ë§Œì•½ ìŠ¤ë ˆë“œê°€ í•˜ë‚˜ë¼ë©´ cooperative ìŠ¤ì¼€ì¥´ë§ìœ¼ë¡œëŠ” Fooë¼ëŠ” goroutineì´ ì‹¤í–‰ë  ìˆ˜ê°€ ì—†ì„ ê²ƒì´ë‹¤.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Go ë²„ì „ &amp;gt;= 1.14 ì¼ ë•Œì—ë„ Deadlock ë°œìƒ&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ &lt;span class="nv">GOMAXPROCS&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">1&lt;/span> &lt;span class="nv">GODEBUG&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="nv">asyncpreemptoff&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">1&lt;/span> go run main.go
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>&lt;code>GOMAXPROCS=1&lt;/code> - Go í”„ë¡œê·¸ë¨ì´ ì‚¬ìš©í•  ìµœëŒ€ OS Thread ê°œìˆ˜ë¥¼ 1ê°œë¡œ ì œí•œí•¨ìœ¼ë¡œì¨ ì—¬ëŸ¬ ìŠ¤ë ˆë“œì—ì„œ Goroutineì´ ì‹¤í–‰ë˜ëŠ” ê²ƒì„ ë°©ì§€. (ë°ë“œë½ì„ ì•¼ê¸°í•´ë³´ë ¤ëŠ” ì¡°ê±´)&lt;/li>
&lt;li>&lt;code>GODEBUG=asyncpreemptoff=1&lt;/code> - Go 1.14ë¶€í„° ì ìš©ëœ Asynchronous preemptive schedulingì„ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ì˜µì…˜&lt;/li>
&lt;/ul>
&lt;p>ì´ ê²½ìš° Go ë²„ì „ì´ 1.14 ì´ìƒì´ë¼ë©´ FooëŠ” ì‹¤í–‰ë˜ì§€ ì•ŠëŠ”ë‹¤.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Go ë²„ì „ &amp;gt;= 1.14ì¸ ê²½ìš° async preemptionìœ¼ë¡œ ì¸í•´ Deadlock ë°œìƒ X&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ &lt;span class="nv">GOMAXPROCS&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">1&lt;/span> go run main.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">No Deadlock. ë‚˜ë„ ì‹¤í–‰ë  ìˆ˜ ìˆì–´!
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>í•˜ì§€ë§Œ asyncpreemptoff ì˜µì…˜ì„ ìƒëµí•˜ë©´ ê¸°ë³¸ì ìœ¼ë¡œ ì„ ì í˜• ìŠ¤ì¼€ì¥´ë§ì´ ì§€ì›ë˜ë¯€ë¡œ ì´ ê²½ìš°ì—” Deadlockì´ ë°œìƒí•˜ì§€ ì•Šê³  Foo() í•¨ìˆ˜ê°€ ì‹¤í–‰ë˜ëŠ” ê²ƒì„ &amp;ldquo;No Deadlock. ë‚˜ë„ ì‹¤í–‰ë  ìˆ˜ ìˆì–´!&amp;rdquo; ë¼ëŠ” Stdoutì„ í†µí•´ ë³¼ ìˆ˜ ìˆë‹¤.&lt;/p>
&lt;h4 id="pprofë¥¼-ì´ìš©í•œ-goroutine-schedule-ì‹œê°í™”">pprofë¥¼ ì´ìš©í•œ goroutine schedule ì‹œê°í™”&lt;/h4>
&lt;p>í•˜ì§€ë§Œ ì •ë§ë¡œ async preemptionì´ ë™ì‘í–ˆê¸° ë•Œë¬¸ì— ë°ë“œë½ì— ë¹ ì§€ì§€ ì•Šì€ ê²ƒì¸ì§€ ë‹¤ë¥¸ ì´ìœ  ë•Œë¬¸ì¸ì§€ëŠ” ê·¸ë‹¥ ì§ê´€ì ìœ¼ë¡œ ì™€ë‹¿ì§€ ì•ŠëŠ”ë‹¤. ê·¸ë˜ì„œ ëª‡ëª‡ ì™¸êµ­ ë¸”ë¡œê·¸ì˜ ê¸€ì—ì„œ ë´¤ë˜ &lt;code>pprof&lt;/code>ë¼ëŠ” ë„êµ¬ë¥¼ ì‚¬ìš©í•´ë´¤ê³ , ì²˜ìŒì—” ì‚¬ìš©ë²•ì´ ë‹¤ì†Œ ì–´ë ¤ì› ì§€ë§Œ ì¡°ê¸ˆ ìµìˆ™í•´ì§€ë‹ˆ ë„ˆë¬´ë‚˜ë„ í¸ë¦¬í–ˆë‹¤.
&lt;code>pprof&lt;/code>ëŠ” &lt;code>net/http&lt;/code> íŒ¨í‚¤ì§€ í•˜ìœ„ì— ì¡´ì¬í•˜ê³ , Goroutine scheduling, syscall log, CPU ì‚¬ìš© ë“±ì„ ì‹œê°í™”í•´ì„œ ë³´ì—¬ì£¼ëŠ” ê°„í¸í•œ ë””ë²„ê¹… ë„êµ¬ì´ë‹¤.
ìš”ì²­ì„ ë‚ ë¦¬ë©´ ìš”ì²­ ì´í›„ Nì´ˆ ê°„ì˜ goroutine schedulingì— ëŒ€í•œ ì •ë³´ë¥¼ ê¸°ë¡í•´ ë³´ì—¬ì£¼ëŠ” ê¸°ëŠ¥ì„ ì´ìš©í•´ë³´ì•˜ë‹¤.&lt;/p>
&lt;p>&lt;img src="https://umi0410.github.io/blog/golang/go-deadlock/pprof-debugging-1.png"
width="547"
height="502"
srcset="https://umi0410.github.io/blog/golang/go-deadlock/pprof-debugging-1_hu27a13bf8dcdafb0aaff224765e3a83ab_59369_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/golang/go-deadlock/pprof-debugging-1_hu27a13bf8dcdafb0aaff224765e3a83ab_59369_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="pprof-debugging-1.png"
class="gallery-image"
data-flex-grow="108"
data-flex-basis="261px"
>&lt;/p>
&lt;p>End Stack Traceë¥¼ í†µí•´ ì–´ë–¤ ì‘ì—…ìœ¼ë¡œ ì¸í•´ goroutineì´ ì ì‹œ ì¤‘ë‹¨ë˜ê³  CPUë¥¼ ë‹¤ë¥¸ goroutineì—ê²Œ ì–‘ë³´í•˜ê²Œ ë˜ëŠ”ì§€ ì•Œ ìˆ˜ ìˆë‹¤. ë†€ëê²Œë„ dummyì— ëŒ€í•œ ë¬´í•œ ë£¨í”„ ì§„í–‰ ë„ì¤‘ ì²˜ìŒìœ¼ë¡œ &lt;strong>async preemptionì´ ë°œìƒí•œ ë’¤ ì´ì–´ì„œ Foo í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•˜ëŠ” goroutineì´ CPUë¥¼ ì ìœ &lt;/strong>í•˜ê²Œ ëœë‹¤ëŠ” ê²ƒì„ ì‹œê°ì ìœ¼ë¡œ ë³¼ ìˆ˜ ìˆë‹¤.&lt;/p>
&lt;p>Wall Durationì€ í•´ë‹¹ ê³ ë£¨í‹´ ë¸”ëŸ­ì„ ìˆ˜í–‰í•œ ì‹œê°„ìœ¼ë¡œ ë³´ì—¬ì§€ê³  ì•½ 10msë¥¼ ê¸°ì¤€ìœ¼ë¡œ preemptiveí•˜ê²Œ switchê°€ ì¼ì–´ë‚  ìˆ˜ ìˆë‹¤ëŠ” ì—¬ëŸ¬ ë¸”ë¡œê·¸ì˜ ê¸€ë“¤ê³¼ ìœ ì‚¬í•˜ê²Œ 15,021,904ns, ì¦‰ ì•½ 15msë§Œì— asyncPreemptë¼ëŠ” ì´ë²¤íŠ¸ë¡œ ì¸í•´ goroutine switchê°€ ì¼ì–´ë‚¬ë‹¤.
cooperative ìŠ¤ì¼€ì¥´ë§ë§Œì„ ì´ìš©í•˜ëŠ” ê²½ìš°ì—ëŠ” ë°ë“œë½ìœ¼ë¡œ ì¸í•´ í•œ ë²ˆë„ Fooë¥¼ ì‹¤í–‰í•˜ëŠ” goroutineì´ ìˆ˜í–‰ë˜ì§€ ëª»í•œë‹¤ëŠ” ê²ƒë„ ì‹œê°í™”í•´ì„œ ì œê³µí•´ë³´ê³ ì‹¶ì—ˆì§€ë§Œ, ë‹¹ì—°í•˜ê²Œë„ ê·¸ ë°ë“œë½ìœ¼ë¡œ ì¸í•´ ì¼ì • ê¸°ê°„ë™ì•ˆ runtimeì„ ê´€ì°°í•œ ë’¤ ê·¸ ì •ë³´ë¥¼ ì €ì¥í•˜ëŠ” goroutine ì¡°ì°¨ ì‹¤í–‰í•  ìˆ˜ ì—†ì–´ ê·¸ ì •ë³´ë¥¼ ì–»ì„ ìˆ˜ ì—†ì—ˆë‹¤!&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-dockerfile" data-lang="dockerfile">&lt;span class="line">&lt;span class="cl">&lt;span class="c"># Goì˜ ë²„ì „ì„ 1.13ìœ¼ë¡œ ì œí•œí•´ë³¸ë‹¤.&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span>&lt;span class="k">FROM&lt;/span>&lt;span class="s"> golang:1.13&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span>&lt;span class="k">WORKDIR&lt;/span>&lt;span class="s"> /app&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span>&lt;span class="k">COPY&lt;/span> . .&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span>&lt;span class="k">ENTRYPOINT&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;go&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span>&lt;span class="k">CMD&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;run&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;main.go&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">$ docker build . -t tmp &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> docker run -it --rm -e &lt;span class="nv">GOMAXPROCS&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">1&lt;/span> tmp
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ê·¸ë ‡ë‹¤ë©´ ì •ë§ Goì˜ 1.14 ì´ì „ ë²„ì „ì€ Preemptiveí•œ ë°©ì‹ì´ ì•„ë‹ˆë¼ Cooperativeí•œ ë°©ì‹ì„ ì´ìš©í•˜ê³ , ì´ ê²½ìš° ë°ë“œë½ì´ ë°œìƒí• ê¹Œ? ì´ì „ ê¸€ë“¤ê³¼ ë§ˆì°¬ê°€ì§€ë¡œ Dockerë¥¼ ì´ìš©í•´ ê°„í¸í•˜ê²Œ Goì˜ ë²„ì „ì„ ë³€ê²½í•´ì„œ ì‹¤í–‰í•´ë³´ì. golang:1.13 ì´ë¯¸ì§€ë¥¼ ì´ìš©í•´ë³´ì•˜ë‹¤.&lt;/p>
&lt;p>1.13 ë²„ì „ ì´í•˜ë¡œëŠ” &lt;code>GODEBUG=asyncpreemptoff=1&lt;/code> ì˜µì…˜ì„ ì„¤ì •í•˜ì§€ ì•Šì•„ë„ cooperativeí•œ ìŠ¤ì¼€ì¥´ë§ë§Œì„ ì§€ì›í•˜ë¯€ë¡œ í”„ë¡œê·¸ë¨ì´ ë°ë“œë½ ìƒíƒœì— ë¹ ì ¸ Foo()ê°€ ì‹¤í–‰ë˜ì§€ ëª»í•¨ì„ ì•Œ ìˆ˜ ìˆë‹¤.&lt;/p>
&lt;h4 id="ì°¸ê³ -ì‚¬í•­-gomaxprocs1-ì˜µì…˜ì„-ì£¼ëŠ”-ì´ìœ ëŠ”">ì°¸ê³  ì‚¬í•­) GOMAXPROCS=1 ì˜µì…˜ì„ ì£¼ëŠ” ì´ìœ ëŠ”?&lt;/h4>
&lt;blockquote>
&lt;p>The GOMAXPROCS variable limits the number of operating system threads that can execute user-level Go code simultaneously. - go rutime package ë¬¸ì„œ -&lt;/p>
&lt;/blockquote>
&lt;p>&lt;code>GOMAXPROCS&lt;/code>ëŠ” &lt;strong>Go í”„ë¡œê·¸ë¨ì´ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ìµœëŒ€ì˜ OS ìŠ¤ë ˆë“œ ê°œìˆ˜&lt;/strong>ë¥¼ ì˜ë¯¸í•œë‹¤. ë§Œì•½ OS ìŠ¤ë ˆë“œê°€ 2ê°œ ì´ìƒìœ¼ë¡œ ìƒì„±ëœë‹¤ë©´ ìœ„ì˜ ê²½ìš° main goroutineê³¼ í•¨ìˆ˜ Fooë¥¼ ì‹¤í–‰í•˜ëŠ” Goroutineì´ ì„œë¡œ ë‹¤ë¥¸ ìŠ¤ë ˆë“œì— ë°°ì¹˜ë  ê²ƒì´ê³ , ê·¸ ê²½ìš° &lt;strong>Goì˜ ìŠ¤ì¼€ì¥´ëŸ¬ê°€ Cooperativeí•œ ë°©ì‹ì„ ì´ìš©í•œë‹¤í•´ë„ OS ìŠ¤ì¼€ì¥´ëŸ¬ê°€ Preemptiveí•˜ê²Œ ê°ê°ì˜ Go ìŠ¤ë ˆë“œ(OS Level)ë¥¼ ìŠ¤ì¼€ì¥´&lt;/strong>í•˜ê¸° ë•Œë¬¸ì— Foo goroutineë„ ì‹¤í–‰ë  ìˆ˜ ìˆëŠ” ê¸°íšŒê°€ ì£¼ì–´ì§„ë‹¤. ì´ ê²½ìš°ì—ëŠ” ë°ë“œë½ì´ ë°œìƒí•˜ì§€ ì•ŠëŠ”ë‹¤. ë”°ë¼ì„œ &lt;strong>ìš°ë¦¬ëŠ” ë°ë“œë½ì„ ë°œìƒì‹œì¼œë³´ê³ ì GOMAXPROCSë¥¼ 1ë¡œ ì œí•œ&lt;/strong>í•œë‹¤.&lt;/p>
&lt;h2 id="ë§ˆì¹˜ë©°">ë§ˆì¹˜ë©°&lt;/h2>
&lt;p>Goë¥¼ ì´ìš©í•´ ì‹¤ì œ í”„ë¡œê·¸ë¨ì„ ì§œë³´ë©° ì–´ë–¤ ê²½ìš°ì— Deadlockì´ ë°œìƒí•  ìˆ˜ ìˆëŠ”ì§€ ì•Œì•„ë³´ì•˜ë‹¤. ì´ ê¸€ì—ì„  ì„œë¡œ ê°™ì€ Mutexë¥¼ ì´ìš©í•˜ëŠ” ê²½ìš°ë¥¼ ì˜ˆì‹œë¡œ ë“¤ì—ˆì§€ë§Œ ì„œë¡œ ë‹¤ë¥¸ ë‘ Mutexë¥¼ í†µí•´ ì„œë¡œì˜ ì‘ì—…ì„ ê¸°ë‹¤ë¦¬ëŠ” ê²½ìš°ì˜ Deadlockë„ ê±°ì˜ ìœ ì‚¬í•˜ë©° ì¼ë°˜ì ìœ¼ë¡œ ë§í•˜ëŠ” Deadlockì— ê°€ì¥ ê°€ê¹Œìš´ ê²½ìš°ì´ê¸´í•  ê²ƒì´ë‹¤. ê·¸ë˜ë„ Goë¡œ ê°œë°œì„ í•˜ë©´ì„œ ì•„ì§ ì„œë¡œ ë‹¤ë¥¸ Mutexë¥¼ ì´ìš©í–ˆë˜ ê²½ìš°ê°€ ë”±íˆ ì—†ì—ˆê¸°ì— ê°™ì€ Mutexì— ì¤‘ì²©ìœ¼ë¡œ Lockì„ ê±¸ì—ˆë˜ ê²½ìš°ë¥¼ ì˜ˆì‹œë¡œ ë“¤ì–´ë³´ì•˜ë‹¤.&lt;/p>
&lt;p>&lt;code>Channel&lt;/code>ì´ë‚˜ &lt;code>Cooperative scheduling&lt;/code>ì˜ ê²½ìš°ëŠ” ì–´ëŠ ì •ë„ Goì— í•œì •ì ì¸ ë‚´ìš©ì´ê³  íŠ¹íˆë‚˜ ìŠ¤ì¼€ì¥´ë§ì€ ëŸ°íƒ€ì„ì´ë‚˜ ê³ ë£¨í‹´ ìŠ¤ì¼€ì¥´ ë°©ì‹ê¹Œì§€ ë‚´ë ¤ê°€ëŠ” ì„¸ë¶€ì ì¸ ë‚´ìš©ì´ê¸´í•˜ì§€ë§Œ Goì— íŠ¹íˆ ê´€ì‹¬ ìˆìœ¼ì‹  ë¶„ë“¤ê»˜ëŠ” ë‚˜ë¦„ ì¬ë¯¸ìˆëŠ” ë‚´ìš©ì´ ë˜ì§€ ì•Šì•˜ì„ê¹Œì‹¶ë‹¤.&lt;/p>
&lt;p>ê·¸ë¦¬ê³  ì´ì „ ê¸€ì—ì„  &lt;code>testing&lt;/code>ì˜ &lt;code>benchmark&lt;/code>ë¥¼ ì´ìš©í•´ ì¢€ ë” ì •í™•í•˜ê³  í¸ë¦¬í•œ ë²¤ì¹˜ë§ˆí‚¹ì„ ë„ì…í•´ë´¤ë‹¤ëŠ” ì ê³¼
ì´ë²ˆì—” ì¶”ê°€ì ìœ¼ë¡œ &lt;code>pprof&lt;/code>ë¥¼ ì´ìš©í•´ &lt;code>goroutine ìŠ¤ì¼€ì¥´ë§&lt;/code>ì„ ì‹œê°í™”í•´ë´¤ë‹¤ëŠ” ì ì—ì„œ Golangìœ¼ë¡œ ì ìš©í•´ë³´ëŠ” ì»´í“¨í„° ì‚¬ì´ì–¸ìŠ¤ë¼ëŠ” ì´ ì‹œë¦¬ì¦ˆë¥¼ ì²˜ìŒ ì‹œì‘í–ˆì„ ë•Œì— ë¹„í•´ ì»´í“¨í„° ì‚¬ì´ì–¸ìŠ¤ ë¿ë§Œ ì•„ë‹ˆë¼ ë””ë²„ê¹… ê¸°ìˆ ì´ë‚˜ ìŠ¤ì¼€ì¥´ë§ ë°©ì‹ ë“±ë“± ë‹¤ì–‘í•œ ì£¼ì œì— ëŒ€í•´ì„œë„ ê³µë¶€í•´ë³´ê³  ì ìš©í•´ë³¼ ìˆ˜ ìˆì—ˆë˜ ê²ƒ ê°™ì•„ ë¿Œë“¯í•˜ë‹¤.
ë‹¤ì†Œ Goë§Œì˜ ì§€ì—½ì ì¸ ë‚´ìš©ìœ¼ë¡œ ì—¬ê²¨ì§ˆ ìˆ˜ë„ ìˆê² ì§€ë§Œ ì¶”í›„ì— ë‚´ê°€ ì–´ë–¤ ì–¸ì–´ë¥¼ ê³µë¶€í•˜ë“  ì–´ë–¤ ê¸°ìˆ ì„ ê³µë¶€í•˜ë“  ì´ëŸ¬í•œ ê²½í—˜ë“¤ì„ ì–¼ë§ˆë“ ì§€ ë…¹ì—¬ë‚¼ ìˆ˜ ìˆì„ ê²ƒì´ë¼ ìƒê°í•œë‹¤!!&lt;/p>
&lt;h2 id="ì°¸ê³ ">ì°¸ê³ &lt;/h2>
&lt;ul>
&lt;li>
&lt;p>Go: How are Deadlocks Triggered? &lt;a class="link" href="https://medium.com/a-journey-with-go/go-how-are-deadlocks-triggered-2305504ac019" target="_blank" rel="noopener"
>https://medium.com/a-journey-with-go/go-how-are-deadlocks-triggered-2305504ac019&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Go: What Does a Goroutine Switch Actually Involve? &lt;a class="link" href="https://medium.com/a-journey-with-go/go-what-does-a-goroutine-switch-actually-involve-394c202dddb7" target="_blank" rel="noopener"
>https://medium.com/a-journey-with-go/go-what-does-a-goroutine-switch-actually-involve-394c202dddb7&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Goroutine and Preemption &lt;a class="link" href="https://medium.com/a-journey-with-go/go-goroutine-and-preemption-d6bc2aa2f4b7" target="_blank" rel="noopener"
>https://medium.com/a-journey-with-go/go-goroutine-and-preemption-d6bc2aa2f4b7&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Go: Asynchronous Preemption &lt;a class="link" href="https://medium.com/a-journey-with-go/go-asynchronous-preemption-b5194227371c" target="_blank" rel="noopener"
>https://medium.com/a-journey-with-go/go-asynchronous-preemption-b5194227371c&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ë°ë“œë½ ì •ì˜&lt;/p>
&lt;ul>
&lt;li>&lt;a class="link" href="https://namu.wiki/w/%EB%8D%B0%EB%93%9C%EB%9D%BD?from=Deadlock" target="_blank" rel="noopener"
>https://namu.wiki/w/%EB%8D%B0%EB%93%9C%EB%9D%BD?from=Deadlock&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://ko.wikipedia.org/wiki/%EA%B5%90%EC%B0%A9_%EC%83%81%ED%83%9C" target="_blank" rel="noopener"
>https://ko.wikipedia.org/wiki/%EA%B5%90%EC%B0%A9_%EC%83%81%ED%83%9C&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Go runtime documentation &lt;a class="link" href="https://golang.org/pkg/runtime/" target="_blank" rel="noopener"
>https://golang.org/pkg/runtime/&lt;/a>&lt;/p>
&lt;/li>
&lt;/ul></description></item><item><title>Go ì–¸ì–´ë¡œ ì ìš©í•´ë³´ëŠ” Computer Science - Cache</title><link>https://umi0410.github.io/blog/golang/go-cpu-cache/</link><pubDate>Wed, 27 Jan 2021 15:25:54 +0900</pubDate><guid>https://umi0410.github.io/blog/golang/go-cpu-cache/</guid><description>&lt;h2 id="ì‹œì‘í•˜ë©°">ì‹œì‘í•˜ë©°&lt;/h2>
&lt;p>ì €ë²ˆ í•™ê¸°ì— &lt;code>ì»´í“¨í„° êµ¬ì¡°&lt;/code>ë¥¼ ìˆ˜ê°•í•˜ë©´ì„œ ê°„ê³¼í•˜ê³  ìˆë˜ ë¡œìš° ë ˆë²¨ì˜ ì§€ì‹ì—ë„ í¥ë¯¸ê°€ ìƒê²¼ì—ˆë‹¤. ê·¸ ì¤‘ CPUì™€ Memory, Diskì˜ ì—­í• ì— ëŒ€í•´ ì•Œì•„ë³¼ ìˆ˜ ìˆì—ˆê³  &lt;strong>ìºì‹œëŠ” CPUì™€ Memory ì‚¬ì´ì— ìœ„ì¹˜í•´ ë©”ëª¨ë¦¬ ëŒ€ì‹  ë¹ ë¥´ê²Œ CPUì—ê²Œ ë°ì´í„°ë¥¼ ì œê³µí•˜ëŠ” ë…€ì„&lt;/strong>ì´ë¼ê³  ë°°ì› ë‹¤.&lt;/p>
&lt;p>ì´ì „ì—ëŠ” ì£¼ë¡œ ìºì‹œë¼ê³  í•˜ë©´ ì£¼ë¡œ CDNê³¼ ê°™ì€ ë„¤íŠ¸ì›Œí¬ì—ì„œ ì“°ì´ëŠ” ìºì‹œë“¤ë°–ì— ëª°ëë‹¤. ê·¸ë ‡ë‹¤ë³´ë‹ˆ L1 ìºì‹œ, L2 ìºì‹œ ê°™ì€ ì–˜ê¸°ë¥¼ ë“¤ìœ¼ë©´ OSI 7ê³„ì¸µê³¼ ì—°ê´€ ì§€ì–´ &amp;lsquo;ìŒ..? L2 ìºì‹œëŠ” ìŠ¤ìœ„ì¹˜ì—ì„œ ì“°ëŠ” ìºì‹œì¸ê°€..?&amp;rsquo; ë¼ëŠ” ìƒìƒì„ í•˜ê³¤í–ˆë‹¤.&lt;/p>
&lt;p>ì´ë²ˆì—ëŠ” Goë¥¼ í†µí•´ ë°°ì—´ì— ì—¬ëŸ¬ ì°¨ë¡€ ì ‘ê·¼í•˜ëŠ” í”„ë¡œê·¸ë¨ì„ ë§Œë“¤ì–´ë³´ê³  ë²¤ì¹˜ë§ˆí‚¹ì„ í†µí•´ ìºì‹œë¼ëŠ” ë…€ì„ì´ ì–´ë–¤ íš¨ê³¼ë¥¼ ê°€ì ¸ë‹¤ì£¼ëŠ”ì§€ ì§ì ‘ í™•ì¸í•´ë³´ë ¤í•œë‹¤.&lt;/p>
&lt;h2 id="ìºì‹œë€">ìºì‹œë€&lt;/h2>
&lt;p>ìºì‹œëŠ” ì•„ì£¼ ë‹¤ì–‘í•œ ë¬¸ë§¥ì—ì„œ ì‚¬ìš©ëœë‹¤. ê³µí†µì ìœ¼ë¡œ &amp;ldquo;ì‚¬ìš©ìê°€ ìš”ì²­í•  ê²ƒ ê°™ì€ ë°ì´í„°ë¥¼ ì‘ê³  ë¹ ë¥¸ ì €ì¥ì†Œì— ì €ì¥í•´ë†“ìŒìœ¼ë¡œì¨ ì¢€ ë” ë¹¨ë¦¬ í•´ë‹¹ ë°ì´í„°ë¥¼ ì œê³µí•œë‹¤&amp;quot;ëŠ” ëª©ì ì„ ê°–ëŠ”ë‹¤. CDN, DB, REST API, Memory, CPU ë“±ë“± ë‹¤ì–‘í•œ ê³³ì—ì„œ ì“°ì¼ ìˆ˜ ìˆì„ ê²ƒ ê°™ë‹¤. ê·¸ ì¤‘ ì´ë²ˆì—ëŠ” &lt;strong>CPUì™€ ë©”ëª¨ë¦¬ ì‚¬ì´ì˜ ìºì‹œ&lt;/strong>ì— ëŒ€í•´ ì•Œì•„ë³´ê² ë‹¤.&lt;/p>
&lt;p>CPUì™€ ë©”ëª¨ë¦¬ ì‚¬ì´ì˜ ìºì‹œëŠ” &lt;strong>ë©”ëª¨ë¦¬ì˜ ë°ì´í„°ë¥¼ ì–»ê¸° ìœ„í•´ ë©”ëª¨ë¦¬ì— ì§ì ‘ ì ‘ê·¼í•˜ì§€ ì•Šê³  ìºì‹œë¼ëŠ” ë¹ ë¥¸ ì €ì¥ì†Œë¥¼ ì´ìš©í•´ í•´ë‹¹ ë°ì´í„°ë¥¼ ì–»ê²Œë”&lt;/strong>í•´ì¤€ë‹¤. ì˜ˆë¥¼ ë“¤ì–´ ë³€ìˆ˜ a=10 ì´ë¼ëŠ” ë°ì´í„°ê°€ ë©”ëª¨ë¦¬ì— ì¡´ì¬í•œë‹¤í•´ë„ aì˜ ê°’ì„ ì–»ê¸° ìœ„í•´ ë©”ëª¨ë¦¬ì— ì§ì ‘ ì ‘ê·¼í•˜ê¸° ë³´ë‹¤ëŠ” ê°€ê¹Œìš°ë©´ì„œ ë¹ ë¥´ê²Œ ì´ìš© ê°€ëŠ¥í•œ ìºì‹œì—ì„œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ë„ ìˆë‹¤ëŠ” ê²ƒì´ë‹¤. ì‚¬ì‹¤ ìºì‹œì˜ ê°œë…ì ì¸ ì¸¡ë©´ì—ì„œ ë³´ë©´ ë©”ëª¨ë¦¬ ë˜í•œ ë””ìŠ¤í¬ ëŒ€ì‹  ë¹ ë¥´ê²Œ ê°’ì„ ì „ë‹¬í•´ì£¼ê¸° ìœ„í•œ ê²½ìš°ì¼ ìˆ˜ ìˆìœ¼ë‹ˆ ìºì‹œ ê¸°ëŠ¥ì„ í•œë‹¤ê³  ë³¼ ìˆ˜ ìˆë‹¤. ê·¸ë¦¬ê³  CPUì™€ ë©”ëª¨ë¦¬ ì‚¬ì´ì— ì •ë§ ìºì‹œë¼ëŠ” ì´ë¦„ì„ ê°–ëŠ” ë…€ì„ë“¤ì€ í”„ë¡œì„¸ì„œ ì†ì— ìˆëŠ” L1 ìºì‹œ, í”„ë¡œì„¸ì„œ ì˜†ì— ìˆëŠ” L2 ìºì‹œ, í”„ë¡œì„¸ì„œë“¤ì´ ê³µìœ í•˜ëŠ” L3 ìºì‹œê°€ ìˆê¸´ í•˜ì§€ë§Œ ì´ëŠ” ì‹œëŒ€ê°€ ì§€ë‚˜ë©´ì„œ ì–¼ë§ˆë“ ì§€ ë³€í•  ìˆ˜ ìˆëŠ” ë‚´ìš©ë“¤ì´ê¸° ë•Œë¬¸ì— ì–´ë–¤ ìºì‹œê°€ ì–´ë””ì— ìˆê³  ëˆ„êµ¬ë‘ ëˆ„ê°€ ê³µìœ í•˜ëŠ”ì§€ì™€ ê°™ì€ ì„¸ë¶€ ë‚´ìš©ì€ í¬ê²Œ ì¤‘ìš”í•˜ì§„ ì•Šì„ ê²ƒ ê°™ë‹¤.&lt;/p>
&lt;p>ë¬¼ë¦¬ì ì¸ í¬ê¸°ë‚˜ ê±°ë¦¬ëŠ” ì†ë„ì™€ ë°˜ë¹„ë¡€í•  ìˆ˜ ë°–ì— ì—†ë‹¤. ê±°ë¦¬ê°€ ë©€ë©´ ì •ë³´ê°€ ì „ë‹¬ë˜ëŠ” ì†ë„ê°€ ëŠë ¤ì§€ê³  í¬ê¸°ê°€ í¬ë©´ ì—¬ëŸ¬ Muxë‚˜ Gateë¥¼ ì´ìš©í•œë‹¤ëŠ” ê²ƒì´ê¸° ë•Œë¬¸ì— ëŠë ¤ì§„ë‹¤. ê·¸ë ‡ê¸°ë•Œë¬¸ì— ìºì‹œëŠ” ì‘ê³  ê°€ê¹Œì›Œì•¼í•œë‹¤. ë°ì´í„°ë¥¼ ìš”ì²­í•˜ëŠ” ë…€ì„ì€ CPUì´ê¸° ë•Œë¬¸ì— ìºì‹œëŠ” CPU ì† í˜¹ì€ ê·¸ ê·¼ì²˜ì— ìœ„ì¹˜í•œë‹¤. ë˜í•œ ì‘ì•„ì•¼í•˜ê¸°ë•Œë¬¸ì— ëª¨ë“  ì •ë³´ë¥¼ ë‹´ì„ ìˆ˜ ì—†ê³ , ì‚¬ìš©ìê°€ ìš”ì²­í• ë²•í•œ ë°ì´í„°ë§Œì„ ë‹´ì•„ì•¼í•œë‹¤. ì´ ë•Œ ì–´ë–»ê²Œ ì‚¬ìš©ìê°€ ìš”ì²­í•  ë²•í•œ ë°ì´í„°ë¥¼ ì •í• ê¹Œ? ì´ëŠ” &lt;code>ê³µê°„ ì§€ì—­ì„±&lt;/code>ê³¼ &lt;code>ì‹œê°„ ì§€ì—­ì„±&lt;/code>ì´ë¼ëŠ” ì¤‘ìš”í•œ ë‘ ê°€ì§€ ì„±ì§ˆì„ ê¸°ë°˜ìœ¼ë¡œ í•œë‹¤.&lt;/p>
&lt;p>ì´ì™¸ì—ë„ íƒœê·¸ë‚˜ ì¶©ëŒ ê°™ì€ ê°œë…ë“¤ì´ ìˆê¸´í•˜ì§€ë§Œ ì‹¤ì œë¡œ ë²¤ì¹˜ë§ˆí‚¹í•´ë³´ê¸°ë„ ì‰½ì§€ ì•Šê³  ë‹¤ì†Œ ì§€ì—½ì ì¸ ë‚´ìš©ì´ë¼ ê°„ë‹¨íˆë§Œ ì •ë¦¬í•´ë³´ë©´ íƒœê·¸ ì—†ì´ ì£¼ì†Œê°’ì„ ëª¨ë“ˆëŸ¬(ë‚˜ë¨¸ì§€)ì—°ì‚°í•´ì„œ cache line indexë¥¼ ê²°ì •í•˜ê³  ê·¸ê²ƒë§Œì„ ì´ìš©í•´ ë°ì´í„°ë¥¼ ì €ì¥í•˜ë©´ í•œ line ë‚´ì— ì €ì¥í•  ì›Œë“œ(Word)ì— ëŒ€í•œ ì¶©ëŒì´ ë°œìƒí•  ìˆ˜ ìˆë‹¤. cache lineì´ 20ê°œì¸ ìºì‹œëŠ” 0ë²ˆì§€ì™€ 20ë²ˆì§€ê°€ ê°™ì€ lineì´ë¯€ë¡œ ì¶©ëŒì´ ë°œìƒí•´ ê³„ì†í•´ì„œ ê°™ì€ lineì— ì„œë¡œì˜ ë°ì´í„°ê°€ ë²ˆê°ˆì•„ ì €ì¥ë  ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì´ë‹¤. í•˜ì§€ë§Œ íƒœê·¸ë¥¼ ì´ìš©í•˜ë©´ cache line ìˆ˜ëŠ” ì¤„ì–´ë“¤ë”ë¼ë„ í•œ lineë‚´ì— ì—¬ëŸ¬ íƒœê·¸ì˜ ì •ë³´ë¥¼ ì €ì¥í•  ìˆ˜ ìˆê²Œë˜ì–´ cache lineì´ 10ê°œì¸ cacheì˜ í•œ lineì— 0ë²ˆì§€ì™€ 20ë²ˆì§€ì˜ ë°ì´í„°ê°€ ë‹¤ë¥¸ íƒœê·¸ë¡œ ì €ì¥ë˜ì–´ ë¶ˆí•„ìš”í•œ ì¶©ëŒì„ ë°©ì§€í•  ìˆ˜ ìˆë‹¤ëŠ” ì¥ì ì´ìˆë‹¤. ê°„ë‹¨íˆ ì„¤ëª…í•˜ê¸°ëŠ” í˜ë“  ë‚´ìš©ì´ë¼ ì¢€ ë” ìì„¸íˆ ì•Œê³ ì‹¶ë‹¤ë©´ &lt;code>Direct mapped cache&lt;/code>ë‚˜ &lt;code>Fully associative cache&lt;/code> ë“±ìœ¼ë¡œ ê²€ìƒ‰í•´ë³´ê¸°ë¥¼ ê¶Œì¥í•œë‹¤.&lt;/p>
&lt;h2 id="spatial-locality">Spatial locality&lt;/h2>
&lt;p>&lt;code>Spatial locality(ê³µê°„ ì§€ì—­ì„±)&lt;/code>ì´ë€ ì§€ê¸ˆ &lt;strong>ìš”ì²­ ë°›ì€ ë°ì´í„°ì™€&lt;/strong> &lt;strong>ê°€ê¹Œìš´ ê³³ì— ìœ„ì¹˜í•œ ë°ì´í„°ëŠ” ë†’ì€ í™•ë¥ ë¡œ ë‹¤ì‹œ ìš”ì²­ ë°›ê²Œ ëœë‹¤&lt;/strong>ëŠ” ì„±ì§ˆì´ë‹¤. ì˜ˆë¥¼ ë“¤ì–´ 100ë²ˆì§€ì˜ a=10ê³¼ 108ë²ˆì§€ì˜ b=20ì´ ì¡´ì¬í•  ë•Œ ë³€ìˆ˜ aë¥¼ ìš”ì²­í•˜ë©´ ì´í›„ aì™€ ê°€ê¹Œìš´ ì£¼ì†Œì— ì €ì¥ëœ b ë˜í•œ ë†’ì€ í™•ë¥ ë¡œ ìš”ì²­ëœë‹¤ëŠ” ê²ƒì´ë‹¤.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">var&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">a&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="mi">10&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">b&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="mi">20&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">c&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="mi">30&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;a: %p\nb: %p\nc: %p\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">a&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">b&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">c&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">/*
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">Output:
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">a: 0xc000100010
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">b: 0xc000100018
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">c: 0xc000100020
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">*/&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>a, b, cì˜ í¬ê¸°ëŠ” 8ë°”ì´íŠ¸ë¡œ ì£¼ì†Œê°’ ë˜í•œ 8ë°”ì´íŠ¸ê°€ ì°¨ì´ë‚œë‹¤. (16ì§„ë²•ì´ê¸°ì— 20ê³¼ 18ì˜ ì°¨ì´ëŠ” 8ì´ë‹¤.) ì¦‰ ëŒ€ì²´ë¡œ &lt;strong>ë¹„ìŠ·í•œ ì‹œê¸°ì— í• ë‹¹ëœ ë³€ìˆ˜ëŠ” ê·¼ì ‘í•œ ë©”ëª¨ë¦¬ ì£¼ì†Œ&lt;/strong>ë¥¼ ê°–ê²Œ ëœë‹¤. ìš°ë¦¬ëŠ” ë¹„ìŠ·í•œ ì‹œê¸°ì— í• ë‹¹í•œ ë³€ìˆ˜ í˜¹ì€ ì—°ì†ëœ ë°°ì—´ ìš”ì†Œì— ìì£¼ ë¹ ë¥¸ ì‹œì¼ ë‚´ì— ì ‘ê·¼ì„ í•˜ì§€ ë§¨ ìœ„ì—ì„œ ì„ ì–¸í•œ ë³€ìˆ˜ì™€ ì € ë©€ë¦¬ ë§¨ ë°‘ì—ì„œ ì„ ì–¸í•œ ë³€ìˆ˜ë¥¼ ë§ˆêµ¬ì¡ì´ë¡œ ì™”ë‹¤ ê°”ë‹¤ í•˜ë©´ì„œ ì‘ì—…ì„ í•˜ì§€ ì•ŠëŠ” í¸ì´ê¸° ë•Œë¬¸ì— ê³µê°„ ì§€ì—­ì„±ì„ ê·¼ê±°ë¡œí•œ ìºì‹œê°€ íš¨ë ¥ì„ ê°–ê²Œ ëœë‹¤. ë§Œì•½ ê³µê°„ì ìœ¼ë¡œ ë¨¼ ë§¨ ìœ„ì˜ ë³€ìˆ˜ì™€ ë§¨ ì•„ë˜ì˜ ë³€ìˆ˜ë¥¼ ìì£¼ ë²ˆê°ˆì•„ê°€ë©° ì ‘ê·¼í•œë‹¤ë©´ ê·¸ê²ƒì€ ì‹œê°„ì§€ì—­ì„±ì„ ë„ëŠ” ê²½ìš°ì´ë‹¤.&lt;/p>
&lt;h2 id="temporal-locality">Temporal locality&lt;/h2>
&lt;p>&lt;code>Temporal locality(ì‹œê°„ ì§€ì—­ì„±)&lt;/code>ì´ë€ &lt;strong>ìµœê·¼ì— ìš”ì²­í–ˆë˜ ë°ì´í„°ëŠ” ë†’ì€ í™•ë¥ ë¡œ ë‹¤ì‹œ ìš”ì²­ ë°›ê²Œ ëœë‹¤&lt;/strong>ëŠ” ì„±ì§ˆì´ë‹¤. ì˜ˆë¥¼ ë“¤ì–´ 100ë²ˆì§€ì˜ a=10ê³¼ 9999ë²ˆì§€ì˜ b=20ì€ ì„œë¡œ ì£¼ì†Œì ì¸ ê±°ë¦¬ëŠ” ë©€ì§€ë§Œ ë‘˜ ë‹¤ ìµœê·¼ì— í˜¸ì¶œëë‹¤ë©´ ìºì‹œì— ì ì¬í•˜ê² ë‹¤ëŠ” ê²ƒì´ë‹¤. ìºì‹œëŠ” ì£¼ë¡œ ì§ì‚¬ê°í˜• í˜•íƒœë¡œ ìƒê²¼ìœ¼ë©° &lt;strong>ê°€ë¡œ(í–‰)ëŠ” ì—°ì†ëœ ì£¼ì†Œì˜ ë°ì´í„°ë¥¼ ì €ì¥í•˜ëŠ” ê³µê°„ ì§€ì—­ì„±, ì„¸ë¡œ(ì—´)ëŠ” ìµœê·¼ì— í˜¸ì¶œëœ ë°ì´í„°ë¥¼ ì €ì¥í•˜ëŠ” ì‹œê°„ ì§€ì—­ì„±&lt;/strong>ì„ ë‹´ë‹¹í•œë‹¤.&lt;/p>
&lt;h2 id="ë‘-ì§€ì—­ì„±-ë¹„êµ">ë‘ ì§€ì—­ì„± ë¹„êµ&lt;/h2>
&lt;p>12ì¹¸ì˜ ìºì‹œê°€ ìˆë‹¤ê³  ê°€ì •í•˜ì. ê°€ë¡œë¡œ 4ì¹¸ ì„¸ë¡œë¡œ 3ì¹¸ ì¡´ì¬í•œë‹¤ë©´ ê³µê°„/ì‹œê°„ ì§€ì—­ì„±ì˜ ê· í˜•ì´ ì¡íŒ ìºì‹œë¼ê³  ë³¼ ìˆ˜ ìˆë‹¤.(ê²½ìš°ì— ë”°ë¼ ë‹¤ë¥´ê² ì§€ë§Œ)&lt;/p>
&lt;p>&lt;img src="https://umi0410.github.io/blog/golang/go-cpu-cache/balanced-cache.png"
width="620"
height="107"
srcset="https://umi0410.github.io/blog/golang/go-cpu-cache/balanced-cache_hu49d8d624edd0378535d64f9a5c47e767_8216_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/golang/go-cpu-cache/balanced-cache_hu49d8d624edd0378535d64f9a5c47e767_8216_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="balanced-cache.png"
class="gallery-image"
data-flex-grow="579"
data-flex-basis="1390px"
>&lt;/p>
&lt;p>ì‹œê°„ ì§€ì—­ì„±ì€ ìµœê·¼ ë¶ˆë¦° ë°ì´í„°ëŠ” ë‹¤ì‹œ ë¶ˆë¦´ í™•ë¥ ì´ ë†’ë‹¤ëŠ” ê²ƒì´ê³  ì´ëŠ” ì—°ì†ëœ ê³µê°„ì´ ì•„ë‹Œ ë‹¤ì–‘í•œ ê³µê°„(ì£¼ì†Œ)ì˜ ë°ì´í„°ë¥¼ ìºì‹œì— ì €ì¥í•œë‹¤ëŠ” ë§ì´ê¸°ë„ í•˜ë‹¤. 0ë²ˆì§€ ë¶€ê·¼, 16ë²ˆì§€ ë¶€ê·¼, 24ë²ˆì§€ ë¶€ê·¼ì˜ ë‹¤ì–‘í•œ ê³µê°„ì˜ ë°ì´í„°ë¥¼ ì €ì¥í•  ìˆ˜ ìˆìœ¼ë©´ì„œ ê·¸ ë…€ì„ë“¤ê°„ì˜ ì£¼ë³€ ë°ì´í„°ë„ ì œê³µí•˜ëŠ” ê³µê°„ì§€ì—­ì„±ë„ ë§Œì¡±í•œë‹¤.&lt;/p>
&lt;p>ë‘ ê°€ì§€ ì§€ì—­ì„±ì— ì˜í•´ ë‹¤ì–‘í•œ ìºì‹œë“¤ì´ ë°ì´í„°ë¥¼ ì ì¬í•˜ê³  ì œê³µí•œë‹¤. ìš”ì ì€ ìºì‹œëŠ” ë¹ ë¥´ê²Œ ë™ì‘í•´ì•¼í•˜ê³  ê·¸ëŸ¬ê¸° ìœ„í•´ì„  í¬ê¸°ê°€ ì‘ê³  ê°€ê¹Œì›Œì•¼í•˜ë©° í¬ê¸°ê°€ ì‘ê¸° ë•Œë¬¸ì— ëª¨ë“  ë°ì´í„°ë¥¼ ë‹´ì„ ìˆ˜ ì—†ìœ¼ë‹ˆ ì•Œì§œ ë°ì´í„°ë§Œì„ ë‹´ì•„ì•¼í•˜ëŠ”ë° ê·¸ ì•Œì§œëŠ” ì§€ì—­ì„±ì„ ê¸°ë°˜ìœ¼ë¡œ ì„ ë³„ëœë‹¤ëŠ” ê²ƒì´ë‹¤. í¬ê¸°ê°€ í•œì •ì ì´ê¸° ë•Œë¬¸ì— í•œ ì§€ì—­ì„±ì„ í‚¤ìš°ë©´ í•œ ì§€ì—­ì„±ì€ ì‘ì•„ì§ˆ ìˆ˜ë°–ì— ì—†ë‹¤.&lt;/p>
&lt;h3 id="ê³µê°„-ì§€ì—­ì„±ì—-ì¹˜ìš°ì¹œ-ìºì‹œ-êµ¬ì¡°">ê³µê°„ ì§€ì—­ì„±ì— ì¹˜ìš°ì¹œ ìºì‹œ êµ¬ì¡°&lt;/h3>
&lt;p>&lt;img src="https://umi0410.github.io/blog/golang/go-cpu-cache/spatial-locality-biased-cache.png"
width="930"
height="110"
srcset="https://umi0410.github.io/blog/golang/go-cpu-cache/spatial-locality-biased-cache_hu038761de6193f1262a5c02c2aef3a97f_10262_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/golang/go-cpu-cache/spatial-locality-biased-cache_hu038761de6193f1262a5c02c2aef3a97f_10262_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="spatial-locality-biased-cache.png"
class="gallery-image"
data-flex-grow="845"
data-flex-basis="2029px"
>&lt;/p>
&lt;p>í•œì •ëœ í¬ê¸°ì˜ ìºì‹œ ì†ì—ì„œ ê³µê°„ì§€ì—­ì„±ì„ ê·¹ëŒ€í™”ì‹œì¼œë²„ë¦¬ë©´ ë‹¹ì—°íˆ ì¸ì ‘í•œ ê³µê°„ì˜ ìë£Œë§Œ ì´ìš©í•  ìˆ˜ ìˆê³ , ìµœê·¼ì— ë¶ˆë¦° ë°ì´í„°ë“¤ì€ ì•ˆì¤‘ì—ë„ ì—†ê³  ì¸ì ‘í•œ ê³µê°„ì˜ ë°ì´í„°ë§Œì„ ì €ì¥í•˜ê²Œ ëœë‹¤. ì˜ˆë¥¼ ë“¤ì–´ ë‹¤ìŒê³¼ ê°™ì€ ì‹œê°„ ì§€ì—­ì„±ì´ í•„ìš”í•œ ê²½ìš°ì— ì œëŒ€ë¡œ ê¸°ëŠ¥ì„ í•  ìˆ˜ ì—†ë‹¤.&lt;/p>
&lt;ol>
&lt;li>0~11ë²ˆì§€ ì‚¬ì´ì˜ ë°ì´í„°ê°€ í•œ ë²ˆ ì ‘ê·¼ â‡’ ìºì‹œì— 0~11ë²ˆì§€ ì ì¬&lt;/li>
&lt;li>ì´í›„ 12ë²ˆì§€ì˜ ë°ì´í„°ì— ì ‘ê·¼ â‡’ ìºì‹œì— ë°ì´í„°ê°€ ì—†ê¸°ë•Œë¬¸ì— 0~11ë²ˆì§€ì˜ ë°ì´í„° ëŒ€ì‹  12~23ë²ˆì§€ì˜ ë°ì´í„°ë¥¼ ìºì‹œì— ì ì¬&lt;/li>
&lt;li>ë‹¤ì‹œ ìµœê·¼ì— ì ‘ê·¼í–ˆë˜ ë°ì´í„°ì¸ 0ë²ˆì§€ì˜ ë°ì´í„°ì— ì ‘ê·¼ ì‹œë„
â‡’ 0ë²ˆ ë°ì´í„°ëŠ” ìµœê·¼ì— ì ‘ê·¼í–ˆë˜ ë°ì´í„°ì„ì—ë„ ì‹œê°„ ì§€ì—­ì„±ì´ í™œìš©ë˜ì§€ ëª»í•¨
â‡’ ìºì‹œì—ì„œ ë°ì´í„°ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ.&lt;/li>
&lt;/ol>
&lt;h3 id="ì‹œê°„-ì§€ì—­ì„±ì—-ì¹˜ìš°ì¹œ-ìºì‹œ-êµ¬ì¡°">ì‹œê°„ ì§€ì—­ì„±ì— ì¹˜ìš°ì¹œ ìºì‹œ êµ¬ì¡°&lt;/h3>
&lt;p>&lt;img src="https://umi0410.github.io/blog/golang/go-cpu-cache/temporal-locality-biased-cache.png"
width="312"
height="202"
srcset="https://umi0410.github.io/blog/golang/go-cpu-cache/temporal-locality-biased-cache_hu5d03129976ee7a9e19515a8e72953e35_8599_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/golang/go-cpu-cache/temporal-locality-biased-cache_hu5d03129976ee7a9e19515a8e72953e35_8599_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="temporal-locality-biased-cache.png"
class="gallery-image"
data-flex-grow="154"
data-flex-basis="370px"
>&lt;/p>
&lt;p>ìœ„ì˜ ê²½ìš° ìµœê·¼ì— í˜¸ì¶œëœ ë‹¤ì–‘í•œ ì£¼ì†Œì˜ ë°ì´í„°ë“¤ì„ ìºì‹œì— ì €ì¥í•´ì¤€ë‹¤. í•˜ì§€ë§Œ ìºì‹œì˜ í¬ê¸°ëŠ” í•œì •ë˜ì–´ìˆê¸° ë•Œë¬¸ì— ì„¸ë¡œê°€ ê¸¸ì–´ì§€ë©´ ê°€ë¡œëŠ” ì§§ì•„ì§„ë‹¤. ì¦‰ ìµœê·¼ ì ‘ê·¼ì„ ì‹œë„í•œ ë‹¤ì–‘í•œ ì£¼ì†Œì˜ ë°ì´í„°ë¥¼ ì €ì¥í•  ìˆ˜ ìˆì§€ë§Œ ê·¸ ë°ì´í„°ì˜ ì¸ê·¼ ë°ì´í„°ì— ëŒ€í•œ ì €ì¥ì€ ë§ì´ í•  ìˆ˜ ì—†ë‹¤ëŠ” ê²ƒì´ë‹¤.&lt;/p>
&lt;p>ì˜ˆë¥¼ ë“¤ì–´ ìœ„ì˜ ê·¸ë¦¼ê³¼ ê°™ì€ ê²½ìš° ìµœê·¼ 0, 3, 12, 18, 6, 20ë²ˆì§€ì˜ ë°ì´í„°ì— ì ‘ê·¼í–ˆê³  ì´í›„ì—ë„ í•´ë‹¹ ë²ˆì§€ì— ëŒ€í•œ ë°ì´í„°ë¥¼ ìºì‹œë¥¼ í†µí•´ ì´ìš©í•  ìˆ˜ ìˆë‹¤. ë°”ë¡œ ë‚´ê°€ ìµœê·¼ì— ì ‘ê·¼í–ˆë˜ ë°ì´í„°ì´ê¸°ë•Œë¬¸ì´ë‹¤. í•˜ì§€ë§Œ ë§Œì•½ 18ë²ˆì§€ì˜ ë°ì´í„°ì— ì ‘ê·¼í•œ ê²½ìš° ë†’ì€ í™•ë¥ ë¡œ ê³µê°„ì§€ì—­ì„±ì— ì˜ê±° 19, 20, 21, &amp;hellip; ë²ˆì§€ì˜ ë°ì´í„°ì— ì ‘ê·¼í•˜ê² ì§€ë§Œ, ì´ ì˜ˆì‹œëŠ” ì‹œê°„ì§€ì—­ì„±ì— ì¹˜ìš°ì³ì ¸ 19ë²ˆì§€ì˜ ë°ì´í„°ë§Œì„ ìºì‹œì—ì„œ ì œê³µë°›ì„ ìˆ˜ ìˆë‹¤.&lt;/p>
&lt;h2 id="í”„ë¡œê·¸ë¨ì„-í†µí•œ-ë²¤ì¹˜ë§ˆí‚¹">í”„ë¡œê·¸ë¨ì„ í†µí•œ ë²¤ì¹˜ë§ˆí‚¹&lt;/h2>
&lt;p>ì €ë²ˆì— Mutex, Semaphoreë¥¼ ì§ì ‘ ë²¤ì¹˜ë§ˆí‚¹í•´ë³´ë©´ì„œ Goì˜ ë‚´ì¥ ë²¤ì¹˜ë§ˆí¬ ê¸°ëŠ¥ì„ ì´ìš©í•˜ë©´ ì¢€ ë” í¸ë¦¬í•˜ê²Œ ê²°ê³¼ë¥¼ ë³´ì—¬ì¤„ ìˆ˜ ìˆì„ ê²ƒ ê°™ì•˜ê¸°ì— ì´ë²ˆì— Goì˜ ë‚´ì¥ ë²¤ì¹˜ë§ˆí¬ ê¸°ëŠ¥ì„ ì´ìš©í•´ë´¤ë‹¤.&lt;/p>
&lt;p>&lt;strong>1000í–‰ 1000ì—´ì˜ 2ì°¨ì› intí˜• ë°°ì—´ì˜ ì–´ë– í•œ ìš”ì†Œì— ì ‘ê·¼í•´ì„œ +1 í•˜ëŠ” ì‘ì—…ì„ 1000íšŒ ìˆ˜í–‰í•˜ëŠ” ê²ƒì„ í•˜ë‚˜ì˜ ì‹¸ì´í´ë¡œ í•˜ëŠ” ë²¤ì¹˜ë§ˆí¬&lt;/strong>ë¥¼ ì‘ì„±í–ˆë‹¤. 2ì°¨ì› ë°°ì—´ì€ ê°€ë¡œë¡œëŠ” ì—°ì†ì ì¸ ì£¼ì†Œê°’ì„ ê°–ê¸°ì— ê³µê°„ ì§€ì—­ì„±ì„ í™œìš©í•  ìˆ˜ ìˆì§€ë§Œ ì„¸ë¡œë¡œëŠ” N * (intí˜• ìë£Œí˜•ì˜ í¬ê¸°)ì”© ì°¨ì´ ë‚˜ëŠ” ì£¼ì†Œê°’ì„ ê°–ê¸° ë•Œë¬¸ì— ê³µê°„ ì§€ì—­ì„±ì„ í™œìš©í•˜ê¸° í˜ë“¤ê³ , ìµœê·¼ ì ‘ê·¼í–ˆë˜ ì£¼ì†Œë¼ë©´ ì‹œê°„ ì§€ì—­ì„±ì€ í™œìš©í•  ìˆ˜ ìˆë‹¤.&lt;/p>
&lt;p>&lt;strong>ê³µê°„ ì§€ì—­ì„±&lt;/strong> (ê°€ë¡œë¡œ ì—°ì†ì ì¸ ë°ì´í„°)&lt;/p>
&lt;ul>
&lt;li>ê³µê°„ ì§€ì—­ì„±ì„ ì‚¬ìš©í•˜ëŠ” ê²½ìš° ê°€ë¡œë¡œ ì—°ì†ëœ ìš”ì†Œì— ì ‘ê·¼. ì¦‰ ì—°ì†ëœ ì£¼ì†Œë¥¼ ê°–ëŠ” 1000ê°œì˜ ìš”ì†Œì— ì ‘ê·¼&lt;/li>
&lt;li>ê³µê°„ ì§€ì—­ì„±ì„ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ê²½ìš°ì—ëŠ” ì„¸ë¡œë¡œ ìš”ì†Œì— ì ‘ê·¼. ì¦‰ 1000 * int ìë£Œí˜•ì˜ í¬ê¸°ë§Œí¼ ì°¨ì´ë‚˜ëŠ” ì—°ì†ë˜ì§€ ì•Šì€ ì£¼ì†Œì˜ 1000ê°œì˜ ìš”ì†Œì— ì ‘ê·¼&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>ì‹œê°„ ì§€ì—­ì„±&lt;/strong> (ì—°ì†ì  ì£¼ì†Œì™€ ìƒê´€ì—†ì´ ìµœê·¼ì— ë¶ˆë¦° ë°ì´í„°)&lt;/p>
&lt;ul>
&lt;li>ì‹œê°„ ì§€ì—­ì„±ì„ ì‚¬ìš©í•˜ëŠ” ê²½ìš° ì£¼ì†Œê°’ì´ ê·¼ì ‘í•˜ì§„ ì•Šì§€ë§Œ 4ê°œ í˜¹ì€ 16ê°œì˜ ë°ì´í„°ì—ë§Œ ê³„ì†í•´ì„œ ì ‘ê·¼&lt;/li>
&lt;li>ì‹œê°„ ì§€ì—­ì„±ì„ ì‚¬ìš©í•˜ì§€ ì•Šì€ ê²½ìš°ì—ëŠ” ê³„ì†í•´ì„œ ì²˜ìŒ ì ‘ê·¼í•˜ëŠ” ë°ì´í„°ì—ë§Œ ì ‘ê·¼&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;testing&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">var&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Size&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="mi">1000&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">generateArray&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">[][]&lt;/span>&lt;span class="kt">int&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">arr&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nb">make&lt;/span>&lt;span class="p">([][]&lt;/span>&lt;span class="kt">int&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">Size&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="nx">i&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="nx">i&lt;/span> &lt;span class="p">&amp;lt;&lt;/span> &lt;span class="nx">Size&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="nx">i&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">arr&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">i&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nb">make&lt;/span>&lt;span class="p">([]&lt;/span>&lt;span class="kt">int&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">Size&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="nx">j&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="nx">j&lt;/span> &lt;span class="p">&amp;lt;&lt;/span> &lt;span class="nx">Size&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="nx">j&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">arr&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">i&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="nx">j&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">arr&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">BenchmarkSpatialLocality&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">b&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">testing&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">B&lt;/span>&lt;span class="p">){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">b&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Run&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;ê³µê°„ì§€ì—­ì„± ì‚¬ìš©&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">b&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">testing&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">B&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">arr&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nf">generateArray&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">b&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ResetTimer&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="nx">n&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="nx">n&lt;/span> &lt;span class="p">&amp;lt;&lt;/span> &lt;span class="nx">b&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">N&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="nx">n&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="nx">i&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="nx">i&lt;/span> &lt;span class="p">&amp;lt;&lt;/span> &lt;span class="nx">Size&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="nx">i&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">arr&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="nx">i&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">b&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Run&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;ê³µê°„ì§€ì—­ì„± X&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">b&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">testing&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">B&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">arr&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nf">generateArray&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">b&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ResetTimer&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="nx">n&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="nx">n&lt;/span> &lt;span class="p">&amp;lt;&lt;/span> &lt;span class="nx">b&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">N&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="nx">n&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="nx">i&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="nx">i&lt;/span> &lt;span class="p">&amp;lt;&lt;/span> &lt;span class="nx">Size&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="nx">i&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">arr&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">i&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">BenchmarkTemporalLocality&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">b&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">testing&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">B&lt;/span>&lt;span class="p">){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">b&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Run&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;ì‹œê°„ ì§€ì—­ì„± ì ê·¹ ì‚¬ìš©. ìµœê·¼ ì ‘ê·¼í•œ ë°ì´í„° 4ê°œ.&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">b&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">testing&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">B&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">arr&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nf">generateArray&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">b&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ResetTimer&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="nx">n&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="nx">n&lt;/span> &lt;span class="p">&amp;lt;&lt;/span> &lt;span class="nx">b&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">N&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="nx">n&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="nx">i&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="nx">i&lt;/span> &lt;span class="p">&amp;lt;&lt;/span> &lt;span class="nx">Size&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="nx">i&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">arr&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">i&lt;/span>&lt;span class="o">%&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">b&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Run&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;ì‹œê°„ ì§€ì—­ì„± ì¡°ê¸ˆ ì‚¬ìš©. ìµœê·¼ ì ‘ê·¼í•œ ë°ì´í„° 16ê°œ.&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">b&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">testing&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">B&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">arr&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nf">generateArray&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">b&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ResetTimer&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="nx">n&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="nx">n&lt;/span> &lt;span class="p">&amp;lt;&lt;/span> &lt;span class="nx">b&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">N&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="nx">n&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="nx">i&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="nx">i&lt;/span> &lt;span class="p">&amp;lt;&lt;/span> &lt;span class="nx">Size&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="nx">i&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">arr&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">i&lt;/span>&lt;span class="o">%&lt;/span>&lt;span class="mi">16&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ì‚¬ì‹¤ ì™„ë²½í•˜ê²Œ ìƒˆë¡œìš´ ë°ì´í„°ëŠ” ì•„ë‹˜. ë²¤ì¹˜ë§ˆí‚¹í•˜ëŠ” ë™ì•ˆ ê³„ì†í•´ì„œ ë°˜ë³µë˜ê¸° ë•Œë¬¸ì—
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">b&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Run&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;ì‹œê°„ ì§€ì—­ì„± X. ìƒˆë¡œìš´ ë°ì´í„°ì—ë§Œ ì ‘ê·¼.&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">b&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">testing&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">B&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">arr&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nf">generateArray&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">b&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ResetTimer&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="nx">n&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="nx">n&lt;/span> &lt;span class="p">&amp;lt;&lt;/span> &lt;span class="nx">b&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">N&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="nx">n&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="nx">i&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="nx">i&lt;/span> &lt;span class="p">&amp;lt;&lt;/span> &lt;span class="nx">Size&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="nx">i&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">arr&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">i&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">goos&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">linux&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">goarch&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">amd64&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">pkg&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">playground&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">unix&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">socket&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">cache&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">BenchmarkSpatialLocality&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">ê³µê°„ì§€ì—­ì„±_ì‚¬ìš©&lt;/span> &lt;span class="mi">50000&lt;/span> &lt;span class="mi">894&lt;/span> &lt;span class="nx">ns&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">op&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">BenchmarkSpatialLocality&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">ê³µê°„ì§€ì—­ì„±_X&lt;/span> &lt;span class="mi">50000&lt;/span> &lt;span class="mi">6561&lt;/span> &lt;span class="nx">ns&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">op&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">BenchmarkTemporalLocality&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">ì‹œê°„_ì§€ì—­ì„±_ì ê·¹_ì‚¬ìš©&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">_ìµœê·¼_ì ‘ê·¼í•œ_ë°ì´í„°_4ê°œ&lt;/span>&lt;span class="p">.&lt;/span> &lt;span class="mi">50000&lt;/span> &lt;span class="mi">1918&lt;/span> &lt;span class="nx">ns&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">op&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">BenchmarkTemporalLocality&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">ì‹œê°„_ì§€ì—­ì„±_ì¡°ê¸ˆ_ì‚¬ìš©&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">_ìµœê·¼_ì ‘ê·¼í•œ_ë°ì´í„°_16ê°œ&lt;/span>&lt;span class="p">.&lt;/span> &lt;span class="mi">50000&lt;/span> &lt;span class="mi">4153&lt;/span> &lt;span class="nx">ns&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">op&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">BenchmarkTemporalLocality&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">ì‹œê°„_ì§€ì—­ì„±_X&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">_ìƒˆë¡œìš´_ë°ì´í„°ì—ë§Œ_ì ‘ê·¼&lt;/span>&lt;span class="p">.&lt;/span> &lt;span class="mi">50000&lt;/span> &lt;span class="mi">6564&lt;/span> &lt;span class="nx">ns&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">op&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ê²°ê³¼ë¥¼ í™•ì¸í•´ë³´ë‹ˆ ê°„ë‹¨í•œ ë°°ì—´ ë‚´ì˜ ìš”ì†Œë“¤ì— ëŒ€í•œ ì—°ì‚°ì¸ë°ë„ ê½¤ë‚˜ ì°¨ì´ê°€ ì»¸ë‹¤.&lt;/p>
&lt;h2 id="ë§ˆì¹˜ë©°">ë§ˆì¹˜ë©°&lt;/h2>
&lt;p>ì €ë²ˆ í•™ê¸°ì— ì»´í“¨í„° êµ¬ì¡°ë¥¼ ìˆ˜ê°•í•˜ë©´ì„œ CPU-Memory ìºì‹œì˜ íš¨ê³¼ë¥¼ ì§ì ‘ ë°°ì—´ì— ëŒ€í•œ í”„ë¡œê·¸ë¨ì„ í†µí•´ ë³´ì—¬ì£¼ëŠ” ì˜ˆì‹œë¥¼ ë³´ê³  ì‹ ê¸°í–ˆë˜ ê¸°ì–µì´ ìˆì–´ì„œ ì´ë ‡ê²Œ ë²¤ì¹˜ë§ˆí‚¹ í”„ë¡œê·¸ë¨ì„ ì‘ì„±í•´ë´¤ë‹¤. ë‹¤ë¥¸ CS ì£¼ìš” ì§€ì‹ë“¤ì— ë¹„í•´ ì–´ë ¤ìš¸ ê²ƒì€ ì—†ëŠ” í¸ì´ê³  ìš°ë¦¬ê°€ ì‰½ê²Œ ì ‘í•´ì˜¤ë˜ ë‚´ìš©ì´ë¼ ë” ì´í•´í•˜ê¸° ì‰½ì§€ ì•Šì•˜ì„ê¹Œ ì‹¶ë‹¤.&lt;/p>
&lt;h2 id="ì°¸ê³ ">ì°¸ê³ &lt;/h2>
&lt;ul>
&lt;li>ìºì‹œë€ - &lt;a class="link" href="https://ko.wikipedia.org/wiki/%EC%BA%90%EC%8B%9C" target="_blank" rel="noopener"
>https://ko.wikipedia.org/wiki/ìºì‹œ&lt;/a>&lt;/li>
&lt;li>ìºì‹œê°€ ë™ì‘í•˜ëŠ” ì•„ì£¼ êµ¬ì²´ì ì¸ ì›ë¦¬ - &lt;a class="link" href="https://parksb.github.io/article/29.html" target="_blank" rel="noopener"
>https://parksb.github.io/article/29.html&lt;/a>&lt;/li>
&lt;li>cache mapping - &lt;a class="link" href="https://m.blog.naver.com/jkssleeky/220478400046" target="_blank" rel="noopener"
>https://m.blog.naver.com/jkssleeky/220478400046&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Go ì–¸ì–´ë¡œ ì ìš©í•´ë³´ëŠ” Computer Science - Concurrency vs Parallelism</title><link>https://umi0410.github.io/blog/golang/go-concurrency-vs-parallelism/</link><pubDate>Thu, 04 Feb 2021 12:46:54 +0900</pubDate><guid>https://umi0410.github.io/blog/golang/go-concurrency-vs-parallelism/</guid><description>&lt;img src="https://umi0410.github.io/blog/golang/go-concurrency-vs-parallelism/concurrency-vs-parallelism.jpg" alt="Featured image of post Go ì–¸ì–´ë¡œ ì ìš©í•´ë³´ëŠ” Computer Science - Concurrency vs Parallelism" />&lt;h2 id="ì‹œì‘í•˜ë©°">ì‹œì‘í•˜ë©°&lt;/h2>
&lt;p>&lt;code>Go&lt;/code> ì–¸ì–´ë¥¼ ì²˜ìŒ ë°°ìš¸ ë•Œ &lt;code>channel&lt;/code>ì´ë‚˜ &lt;code>goroutine&lt;/code>ì— ëŒ€í•´ ë°°ìš°ë©´ì„œ &lt;code>Concurrency&lt;/code> ì¦‰ &lt;code>ë™ì‹œì„±&lt;/code>ìœ¼ë¡œ ì¸í•´ ë§ì´ í˜ë“¤ì—ˆë˜ ê¸°ì–µì´ ë‚œë‹¤. &amp;lsquo;&lt;em>ë™ì‹œì„±ê³¼ ë³‘ë ¬ì„±ì´ ë„ëŒ€ì²´ ë­ê°€ ë‹¤ë¥´ë‹¤ëŠ” ê²ƒì´ëƒ..!&lt;/em>&amp;rsquo; Rob Pike ì•„ì €ì”¨ê°€ ë™ì‹œì„±ì— ê´€í•´ í–ˆë˜ ì„¸ë¯¸ë‚˜ ì˜ìƒë“¤ì„ ë³´ë©° ê°™ì´ ìŠ¤í„°ë”” í•˜ë˜ ë©¤ë²„ë“¤ê³¼ ë©˜ë¶•ì— ë¹ ì§€ê¸°ë„ í–ˆê³ , ì´ëŸ° ì €ëŸ° ì˜ê²¬ êµë¥˜ë„ í–ˆë‹¤ê°€ ë©°ì¹  ì§€ë‚˜ê³  ë³´ë©´ ë‹¤ì‹œ ë³‘ë ¬ì„±ê³¼ í—·ê°ˆë¦¬ê³ , ì œëŒ€ë¡œ ëœ í•œê¸€ ìë£ŒëŠ” ì°¾ê¸° í˜ë“¤ì—ˆë‹¤. &amp;lsquo;&lt;em>ë™ì‹œì„±ì€ ì‚¬ëŒì´ ëŠë¼ê¸°ì— ë™ì‹œì²˜ëŸ¼ ëŠê»´ì§€ëŠ” ê²ƒì´ê³  ë³‘ë ¬ì„±ì€ ì‹¤ì œë¡œ ë™ì‹œì ì¸ ì‹œì ì— ëŒ€í•œ ê²ƒì´ë‹¤.&lt;/em>&amp;rsquo; ë¼ëŠ” ë‚´ìš©ì´ ë§ì•˜ì§€ë§Œ ì™€ë‹¿ì§€ëŠ” ì•Šì•˜ë‹¤.&lt;/p>
&lt;p>ê·¸ë¦¬ê³  ì´ë²ˆì— ë‹¤ë¤„ë³¼ ë™ì‹œì„±ì€ ì£¼ë¡œ &amp;ldquo;&lt;strong>ì œì–´&lt;/strong>&amp;ldquo;ë¼ëŠ” ë‹¨ì–´ì™€ í•¨ê»˜ ì–¸ê¸‰ë˜ëŠ” &amp;ldquo;&lt;strong>ë™ì‹œì„± ì œì–´&lt;/strong>&amp;ldquo;ì—ì„œì˜ ë™ì‹œì„±ì´ë‚˜ Concurrencyì™€ëŠ” ì¡°ê¸ˆ ë‹¤ë¥¸ ì˜ë¯¸ë¥¼ ê°–ëŠ”ë‹¤ê³  ìƒê°í•œë‹¤. ë™ì‹œì„± ì œì–´ì—ì„œì˜ ë™ì‹œì„±ì€ ê·¸ëƒ¥ ë™ì‹œì— ë¬´ì–¸ê°€ì— ì ‘ê·¼í•˜ëŠ” ê²ƒì„ ì–´ë–»ê²Œ ì œì–´í•˜ê±°ë‚˜ ë§‰ê² ëƒëŠ” ì˜ë¯¸ì¼ ë¿ì´ì§€ë§Œ ë™ì‹œì„±-ë³‘ë ¬ì„±ì—ì„œì˜ ë™ì‹œì„±ì€ ì–´ë–»ê²Œ ì‘ì—…ë“¤ì´ ë™ì‹œì— ìˆ˜í–‰ë˜ëŠëƒì— ì´ˆì ì„ ë§ì¶”ëŠ” ëŠë‚Œì´ê¸° ë•Œë¬¸ì´ë‹¤.&lt;/p>
&lt;ul>
&lt;li>ë™ì‹œì„± ì œì–´ì˜ ì˜ˆì‹œ - ì—¬ëŸ¬ clientê°€ í•˜ë‚˜ì˜ db rowì— accessí•  ë•Œ ì–´ë–»ê²Œ ì œì–´í•  ê²ƒì¸ê°€&lt;/li>
&lt;li>ì´ë²ˆì— ë‹¤ë£° ë™ì‹œì„±ì˜ ì˜ˆì‹œ - ì–´ë–¤ ì‘ì—…ì„ ë™ì‹œì„±ì„ ì´ìš©í•´ ìˆ˜í–‰í•˜ëŠ” ê²ƒì´ ì¢‹ì„ê¹Œ ë³‘ë ¬ì„±ì„ ì´ìš©í•´ ìˆ˜í–‰í•˜ëŠ” ê²ƒì´ ì¢‹ì„ê¹Œ&lt;/li>
&lt;/ul>
&lt;p>&lt;code>Golang&lt;/code>ì„ ì²˜ìŒ ì ‘í•œ ì§€ ë²Œ ì¨ ë°˜ë…„ì´ ë„˜ì€ ê²ƒ ê°™ë‹¤. ì²˜ìŒ í•œ 4ê°œì›” ê°€ëŸ‰ì€ ê±°ì˜ ë¨¸ë¦¿ ì†ì— ì•„ë¥¸ê±°ë¦¬ëŠ” ë¬¼ìŒí‘œ ê°™ì€ ë‚´ìš©ì´ì—ˆëŠ”ë°, ê¾¸ì¤€íˆ ê³µë¶€í•˜ë‹¤ë³´ë‹ˆ ì¡°ê¸ˆ ì•Œ ê²ƒ ê°™ë‹¤. ì´ë²ˆ ê¸€ì—ì„œëŠ” ê·¸ëŸ¬í•œ ë‚´ìš©ì„ ì¶”ìƒì ì¸ ë§ë³´ë‹¨ ì˜ˆì‹œì™€ ì½”ë“œë¡œ ëª…í™•íˆ ì •ë¦¬í•´ë³´ê³ ì í•œë‹¤.&lt;/p>
&lt;h2 id="concurrency-is-not-parallelism">Concurrency is not parallelism&lt;/h2>
&lt;p>ìœ„ì˜ ë¬¸ì¥ì€ ë™ì‹œì„±ê³¼ ë³‘ë ¬ì„±ì— ëŒ€í•´ ì•Œì•„ë³´ë ¤í•˜ë©´ ë§¤ë²ˆ ë³´ê²Œ ë˜ëŠ” ë¬¸ì¥ì¸ë‹¤. ê·¸ë ‡ë‹¤. ë™ì‹œì„±ì€ ë³‘ë ¬ì„±ê³¼ ë‹¤ë¥´ë‹¤. ì´ì— ëŒ€í•´ ì„¤ëª…í•  ë•Œ ì˜ì–´ê¶Œì—ì„œëŠ” ì•„ë˜ì˜ ë‘ ë¬¸ì¥ì´ ìì£¼ ë“±ì¥í•˜ëŠ” ë“¯ í•˜ë‹¤.&lt;/p>
&lt;ul>
&lt;li>
&lt;p>&lt;em>Concurrency is about dealing with lots of things at once.&lt;/em>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;em>Parallelism is about doing lots of things at once.&lt;/em>&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>í•œ ë²ˆì— dealing withí•˜ëŠ” ê²ƒê³¼ í•œ ë²ˆì— doingí•˜ëŠ” ê²ƒì´ë¼ê³  í•œë‹¤. í•˜ì§€ë§Œ ì˜ ì™€ë‹¿ì§€ ì•ŠëŠ”ë‹¤&amp;hellip; ì•„ë§ˆ ì € ê¸€ì„ ë³´ê³  ì´í•´í•  ìˆ˜ ìˆëŠ” í•œêµ­ì¸ì€ ê·¹íˆ ë“œë¬¼ì§€ ì•Šì„ê¹Œ ì‹¶ë‹¤.&lt;/p>
&lt;h3 id="ì˜ˆì‹œë¡œ-ë³´ëŠ”-ë™ì‹œì„±-vs-ë³‘ë ¬ì„±">ì˜ˆì‹œë¡œ ë³´ëŠ” ë™ì‹œì„± vs ë³‘ë ¬ì„±&lt;/h3>
&lt;p>ë”°ë¼ì„œ ì¢€ ë” ì‰½ê²Œ ì˜ˆì‹œë¡œ ì„¤ëª…í•´ë³´ë ¤ í•œë‹¤. ì˜ˆë¥¼ ë“¤ì–´ &lt;strong>ì‚¬íšŒì  ê±°ë¦¬ ë‘ê¸°ë¡œ ì¸í•´ ìš°ë¦¬ Gopher(ê³ í¼)ê°€ ì¹œêµ¬ë“¤ê³¼ ë– ë‚˜ë ¤ëŠ” ì˜ˆì•½í–ˆë˜ ì—¬í–‰ì´ ì·¨ì†Œë˜ì—ˆê³ , í•­ê³µê¶Œ, í˜¸í…”, ë ŒíŠ¸ì¹´ ì˜ˆì•½ì„ ëª¨ë‘ ì·¨ì†Œí•´ì•¼í•˜ëŠ” ìƒí™©&lt;/strong>ì´ë¼ê³  í•´ë³´ì.&lt;/p>
&lt;ul>
&lt;li>&lt;strong>ë™ì‹œì„±&lt;/strong>(Concurrent)ì˜ ì˜ˆì‹œ - ë§Œì•½ ëª¨ë“  ì·¨ì†Œ ì‘ì—…ì´ &lt;strong>ê³ ê°ì„¼í„° 1ëŒ€1 ì±„íŒ…&lt;/strong>ìœ¼ë¡œ ì´ë£¨ì–´ì§€ëŠ” ê²½ìš°. Gopher1 &lt;strong>í˜¼ì ëª¨ë“  ì·¨ì†Œ ì‘ì—…ì„ ë™ì‹œì ìœ¼ë¡œ ìˆ˜í–‰ ê°€ëŠ¥&lt;/strong>
&lt;ul>
&lt;li>Gopher1 í˜¼ì í•­ê³µê¶Œ ì·¨ì†Œ ì‹ ì²­, í˜¸í…”, ë ŒíŠ¸ì¹´ì˜ ê³ ê°ì„¼í„° 1ëŒ€1 ì±„íŒ…ì— ì˜ˆì•½ ì·¨ì†Œ ì‹ ì²­ì„ í•¨&lt;/li>
&lt;li>ìƒë‹´ì‚¬ë¶„ì´ ë‹µì¥ì„ ì£¼ëŠ” ëŒ€ë¡œ ì‘ì—…ì„ ì§„í–‰&lt;/li>
&lt;li>Gopher1 í˜¼ìì„œ ì„¸ ê°œì˜ ì·¨ì†Œ ì‘ì—…ì„ ë™ì‹œì— ì§„í–‰í•˜ëŠ” ì…ˆì´ë‹¤.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;strong>ë³‘ë ¬ì„±&lt;/strong>(Parallelism)ì˜ ì˜ˆì‹œ - ë§Œì•½ ëª¨ë“  ì·¨ì†Œ ì‘ì—…ì´ &lt;strong>ê³ ê°ì„¼í„° ì „í™” ìƒë‹´&lt;/strong>ìœ¼ë¡œ ì´ë£¨ì–´ ì§€ëŠ” ê²½ìš°. Gopher1 &lt;strong>í˜¼ì ëª¨ë“  ì·¨ì†Œ ì‘ì—…ì„ ë™ì‹œì— ì§„í–‰í•  ìˆ˜ëŠ” ì—†ê³ , Gopher 1, 2, 3ì´ ë³‘ë ¬ì ìœ¼ë¡œ ì§„í–‰í•  ìˆœ ìˆìŒ&lt;/strong>.&lt;/li>
&lt;/ul>
&lt;p>ë’¤ì—ì„œ ì„¤ëª…í•˜ê¸´ í•˜ê² ì§€ë§Œ ì „ìì˜ ê²½ìš°ì—ë§Œ ë™ì‹œì„±ì´ ì¼ì–´ë‚  ìˆ˜ ìˆëŠ” ì´ìœ ëŠ” Gopherê°€ 1ëŒ€1 ì±„íŒ…ìœ¼ë¡œ ì‘ì—…ì„ ì§„í–‰í•  ë•ŒëŠ” í•œê°€í•œ ë°˜ë©´(CPU ì ìœ ìœ¨ì´ ë‚®ê³ , ìƒë‹´ì‚¬ì˜ ë©”ì‹œì§€ë¥¼ ê¸°ë‹¤ë¦¬ëŠë¼ ë§ì€ ë¸”ë½í‚¹ì´ ì¡´ì¬) ì „í™”ë¡œ ì‘ì—…ì„ ì§„í–‰í•  ë•Œì—ëŠ” ì—¬ëŸ¬ ëª…ê³¼ ì „í™”í•  ìˆ˜ ì—†ê¸° ë•Œë¬¸ì´ë‹¤.(CPU ì ìœ ìœ¨ì´ ë†’ìŒ.)&lt;/p>
&lt;p>í•­ê³µê¶Œ ì·¨ì†Œ ì „í™” ë„ì¤‘ ì ì‹œ ì§€ì—°ë˜ëŠ” ì‹œê°„ì— ì „í™”ë¥¼ ëŠê³  í˜¸í…” ê³ ê° ì„¼í„°ì— ì „í™”ë¥¼ ê±°ëŠ” ë°©ì‹ìœ¼ë¡œ Gopher1 í˜¼ì Concurrentí•˜ê²Œ ì‘ì—…ì„ ì§„í–‰í•  ìˆ˜ ìˆê² ì§€ë§Œ ì´ ê²½ìš° &lt;strong>ê³„ì†í•´ì„œ ì „í™”ë¥¼ ëŠê³  ë‹¤ì‹œ ê±¸ê³  ìƒí™© ì„¤ëª…ì„ í•˜ëŠ” ë™ì•ˆì— ì§€ì—°ì‹œê°„ì´ ë°œìƒí•´ì„œ íš¨ìœ¨ì´ ì¢‹ì§€ ì•Šë‹¤&lt;/strong>. ì´ ì§€ì—° ì‹œê°„ì„ í•­ê³µê¶Œ ì·¨ì†Œ ì „í™” =&amp;gt; í˜¸í…” ì˜ˆì•½ ì·¨ì†Œ ì „í™”ë¡œì˜ context switch penaltyë¡œ ë³¼ ìˆ˜ ìˆë‹¤.&lt;/p>
&lt;h2 id="í”„ë¡œê·¸ë¨ìœ¼ë¡œ-ì•Œì•„ë³´ëŠ”-concurrency-vs-parallelism">í”„ë¡œê·¸ë¨ìœ¼ë¡œ ì•Œì•„ë³´ëŠ” Concurrency vs Parallelism&lt;/h2>
&lt;p>ë™ì‹œì„±ê³¼ ë³‘ë ¬ì„±ì„ ë¹„êµí•˜ëŠ” í•œê¸€ ìë£ŒëŠ” ì°¾ê¸° í˜ë“  í¸ì´ê³ , ì˜ì–´ë¡œ ëœ ìë£ŒëŠ” ê½¤ë‚˜ ë§ì´ ì°¾ì•„ë³¼ ìˆ˜ ìˆì§€ë§Œ, ê·¸ë˜ì„œ &amp;ldquo;ì–¸ì œ&amp;rdquo;, &amp;ldquo;ë¬´ì—‡ì„&amp;rdquo;, &amp;ldquo;ì™œ&amp;rdquo; ì¨ì•¼í•˜ëŠ” ì§€ì— ëŒ€í•œ ë‚´ìš©ì€ ì˜ ì°¾ì•„ë³´ê¸° í˜ë“¤ë‹¤. ê²Œë‹¤ê°€ ê°„í˜¹ Concurrent programmingì˜ ì¥ì ì´ë¼ë©´ì„œ parallelismì„ ì„¤ëª…í•˜ëŠ” ê²½ìš°ë„ ìˆì–´ í˜¼ë€ìŠ¤ëŸ¬ì› ë‹¤.&lt;/p>
&lt;p>&lt;img src="https://umi0410.github.io/blog/golang/go-concurrency-vs-parallelism/concurrency-vs-parallelism.jpg"
width="1845"
height="1000"
srcset="https://umi0410.github.io/blog/golang/go-concurrency-vs-parallelism/concurrency-vs-parallelism_hu86023f6654c19803b1eea4e88bc97fcd_191924_480x0_resize_q75_box.jpg 480w, https://umi0410.github.io/blog/golang/go-concurrency-vs-parallelism/concurrency-vs-parallelism_hu86023f6654c19803b1eea4e88bc97fcd_191924_1024x0_resize_q75_box.jpg 1024w"
loading="lazy"
alt="concurrency-vs-parallelism.jpg"
class="gallery-image"
data-flex-grow="184"
data-flex-basis="442px"
>&lt;/p>
&lt;p>&lt;strong>ë™ì‹œì„±&lt;/strong>ì´ë€ í•œ ì‘ì—…ì´ ì™„ë£Œëœ ë’¤ ë‹¤ìŒ ì‘ì—…ì´ ìˆ˜í–‰ë˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ê³„ì†í•´ì„œ ì ì ˆíˆ switch ë˜ë©° ë™ì‹œì— ì§„í–‰ë˜ì–´ë‚˜ê°€ëŠ” ê²ƒì„ ì˜ë¯¸í•œë‹¤. ê·¸ ê²°ê³¼ ì¼ì • ê¸°ê°„ë™ì•ˆ ìˆ˜í–‰í•œ ì‘ì—…ë“¤ì— ëŒ€í•´ ë§í•  ë•Œ ê·¸ ì‘ì—…ë“¤ì€ ë™ì‹œì— ìˆ˜í–‰ëë‹¤ê³  í•  ìˆ˜ ìˆê²Œ ëœë‹¤. í•œ ìˆœê°„ì—ëŠ” ì—„ë°€íˆ ë”°ì§€ë©´ í•œ ì‘ì—…ì´ ìˆ˜í–‰ëœë‹¤.&lt;/p>
&lt;p>&lt;strong>ë³‘ë ¬ì„±&lt;/strong>ì´ë€ ì—¬ëŸ¬ ì½”ì–´ì—ì„œ ì‘ì—…ì´ ë³‘ë ¬ì ìœ¼ë¡œ ì§„í–‰ë˜ëŠ” ê²ƒì„ ì˜ë¯¸í•œë‹¤. ê·¸ ê²°ê³¼ ì¼ì •í•œ ê¸°ê°„ì´ ì•„ë‹Œ ìˆœê°„ì„ ë†“ê³  ë´¤ì„ ë•Œì—ë„ ì—¬ëŸ¬ ì‘ì—…ì´ ë³‘ë ¬ì ìœ¼ë¡œ ë™ì‹œì— ìˆ˜í–‰ë˜ê²Œ ëœë‹¤.&lt;/p>
&lt;p>ì½”ì–´ ìˆ˜ ë³´ë‹¤ ë§ì€ ìŠ¤ë ˆë“œê°€ ì´ìš©ë  ê²½ìš°ëŠ” ë™ì‹œì„±ê³¼ ë³‘ë ¬ì„±ì´ í•¨ê»˜ ì´ìš©ëœë‹¤ê³  ë³¼ ìˆ˜ ìˆë‹¤. ì¦‰ ì—¬ëŸ¬ ìŠ¤ë ˆë“œì— ê±¸ì³ ì—¬ëŸ¬ ì‘ì—…ì´ ì™„ë£Œ ë˜ì§€ ì•Šì•˜ì§€ë§Œ ì ì ˆíˆ switchë˜ë©° ì§„í–‰ëœë‹¤ëŠ” ì˜ë¯¸ì´ë‹¤.&lt;/p>
&lt;p>í”„ë¡œê·¸ë˜ë°ì ìœ¼ë¡œ ë´¤ì„ ë•Œ ê°™ì´ ë™ì‹œì„±ì€ ë¸”ë½ì´ ë§ì´ ê±¸ë¦¬ëŠ” ì‘ì—…ì— ìœ ë¦¬í•˜ê³ , ë³‘ë ¬ì„±ì€ CPU boundí•œ ì‘ì—…ì— ìœ ë¦¬í•˜ë‹¤ê³  ìƒê°ëœë‹¤. ê·¸ëŸ¼ ì¢€ ë” ìì„¸íˆ ë™ì‹œì„±ê³¼ ë³‘ë ¬ì„±ì´ &amp;ldquo;&lt;strong>ì–¸ì œ&lt;/strong>&amp;rdquo; &amp;ldquo;&lt;strong>ì™œ&lt;/strong>&amp;rdquo; ìœ ë¦¬í•œì§€ ì•Œì•„ë³´ì.&lt;/p>
&lt;h3 id="concurrency---blockì´-ë§ì€-ì‘ì—…ì—-ìœ ë¦¬">Concurrency - Blockì´ ë§ì€ ì‘ì—…ì— ìœ ë¦¬&lt;/h3>
&lt;p>&lt;strong>ì˜ˆìƒ: ë¸”ë½ì´ ë§ì€ ì‘ì—…ì˜ ê²½ìš° Core ìˆ«ìì— ìƒê´€ ì—†ì´ ëŒ€ì²´ë¡œ ë§ì€ thread(í˜¹ì€ goroutine)ì„ ìƒì„±í•  ìˆ˜ë¡ ì‘ì—…ì´ ë¹¨ë¼ì§ˆ ê²ƒì´ë‹¤.&lt;/strong>&lt;/p>
&lt;p>blockì´ ë§ì€ ì‘ì—…ì´ ë­ê°€ ìˆì„ê¹Œ? ë„¤íŠ¸ì›Œí¬ IO ë¸”ë½ì´ ë§ì´ ê±¸ë¦´ ì‘ì—…ìœ¼ë¡œì„œ &lt;a class="link" href="https://example.com" target="_blank" rel="noopener"
>https://example.com&lt;/a> ì— ìš”ì²­/ì‘ë‹µì„ ì–»ëŠ” ì‘ì—…ì„ 64ë²ˆ ìˆ˜í–‰í•´ë³´ê² ë‹¤. &lt;strong>coreì˜ ìˆ«ìë¥¼ 1ê°œë¡œ ì œí•œ&lt;/strong>í•˜ì—¬ concurrencyì˜ íš¨ê³¼ë¥¼ ê´€ì°°í•´ë³´ê¸° ìœ„í•´ 4ê°œì˜ ì½”ì–´ë¡œ 8ê°œì˜ ìŠ¤ë ˆë“œë¥¼ í•˜ì´í¼ìŠ¤ë ˆë”©í•˜ëŠ” ë‚´ ë©íƒ‘ì´ ì•„ë‹Œ AWS EC2 t2.microì—ì„œ ë²¤ì¹˜ë§ˆí¬ë¥¼ ìˆ˜í–‰í–ˆë‹¤.&lt;/p>
&lt;h4 id="í”„ë¡œê·¸ë¨-ì½”ë“œ">í”„ë¡œê·¸ë¨ ì½”ë“œ&lt;/h4>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/stretchr/testify/assert&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;net/http&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;sync&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;testing&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">Benchmarkë™ì‹œì„±&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">b&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">testing&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">B&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="nx">_&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">goroutineNum&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="k">range&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="kt">int&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">8&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">16&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">32&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">64&lt;/span>&lt;span class="p">}{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">b&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Run&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Sprintf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;%dê°œì˜ goroutine&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">goroutineNum&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">b&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">testing&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">B&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="nx">i&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="nx">i&lt;/span> &lt;span class="p">&amp;lt;&lt;/span> &lt;span class="nx">b&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">N&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="nx">i&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nf">doë™ì‹œì„±&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">b&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">goroutineNum&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">doë™ì‹œì„±&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">b&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">testing&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">B&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">goroutineNum&lt;/span> &lt;span class="kt">int&lt;/span>&lt;span class="p">){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">wg&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">sync&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">WaitGroup&lt;/span>&lt;span class="p">{}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">totalRep&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="mi">64&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="nx">n&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="nx">n&lt;/span> &lt;span class="p">&amp;lt;&lt;/span> &lt;span class="nx">goroutineNum&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="nx">n&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">wg&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">go&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">num&lt;/span> &lt;span class="kt">int&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="nx">j&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="nx">j&lt;/span> &lt;span class="p">&amp;lt;&lt;/span> &lt;span class="nx">totalRep&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="nx">goroutineNum&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="nx">j&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">resp&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">http&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;https://example.com&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">assert&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">NoError&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">b&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">assert&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Equal&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">b&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">200&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">resp&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">StatusCode&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">wg&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Done&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}(&lt;/span>&lt;span class="nx">n&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">wg&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Wait&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h4 id="core-1ê°œì˜-aws-ec2-t2microì—ì„œì˜-ë²¤ì¹˜ë§ˆí‚¹">Core 1ê°œì˜ AWS EC2 t2.microì—ì„œì˜ ë²¤ì¹˜ë§ˆí‚¹&lt;/h4>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">ubuntu@ip-172-31-12-2:~/concurrency$ &lt;span class="nv">CGO_ENABLED&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">0&lt;/span> go &lt;span class="nb">test&lt;/span> ./concurrency_test.go -bench&lt;span class="o">=&lt;/span>. -benchtime&lt;span class="o">=&lt;/span>1x
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">goos: linux
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">goarch: amd64
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Benchmarkë™ì‹œì„±/1ê°œì˜_goroutine &lt;span class="m">1&lt;/span> &lt;span class="m">9426630119&lt;/span> ns/op
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Benchmarkë™ì‹œì„±/4ê°œì˜_goroutine &lt;span class="m">1&lt;/span> &lt;span class="m">2354737545&lt;/span> ns/op
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Benchmarkë™ì‹œì„±/8ê°œì˜_goroutine &lt;span class="m">1&lt;/span> &lt;span class="m">1192283559&lt;/span> ns/op
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Benchmarkë™ì‹œì„±/16ê°œì˜_goroutine &lt;span class="m">1&lt;/span> &lt;span class="m">604589767&lt;/span> ns/op
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Benchmarkë™ì‹œì„±/32ê°œì˜_goroutine &lt;span class="m">1&lt;/span> &lt;span class="m">313062480&lt;/span> ns/op
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Benchmarkë™ì‹œì„±/64ê°œì˜_goroutine &lt;span class="m">1&lt;/span> &lt;span class="m">182304298&lt;/span> ns/op
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">PASS
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ok command-line-arguments 28.809s
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>64ë²ˆ ìš”ì²­/ì‘ë‹µ ì‘ì—…ì„ ìˆ˜í–‰í•  ë•Œ ë§¨ ìœ„ì˜ ê²½ìš°ëŠ” 1ê°œì˜ goroutineì´ 64ë²ˆ, ë§¨ ë°‘ì˜ ê²½ìš°ì—ëŠ” 64ê°œì˜ goroutineì´ ê°ê° 1ë²ˆì”© ìˆ˜í–‰í•˜ëŠ” ì‹ìœ¼ë¡œ ì§„í–‰í–ˆë‹¤. 1ê°œì˜ ì½”ì–´ë¥¼ ê°–ëŠ” t2.microì—ì„œë„ 64ê°œì˜ goroutineìœ¼ë¡œ concurrentí•˜ê²Œ ì‘ì—…ì„ ì§„í–‰í•˜ëŠ” ê²ƒì´ ë” ì†ë„ê°€ ë¹¨ëë‹¤. &lt;strong>ë„¤íŠ¸ì›Œí¬ IOë¡œ CPUê°€ ë†€ê³ ìˆëŠ” ì‹œê°„ì´ ë§ì•˜ê¸° ë•Œë¬¸ì— í•˜ë‚˜ì˜ ì½”ì–´ë¡œë„ concurrentí•˜ê²Œ ìˆ˜ ë§ì€ ì‘ì—…ì„ íš¨ìœ¨ì ìœ¼ë¡œ ì§„í–‰&lt;/strong>í•  ìˆ˜ ìˆì—ˆë‹¤.&lt;/p>
&lt;h3 id="parallelism---cpu-boundí•œ-ì‘ì—…ì—-ìœ ë¦¬">Parallelism - CPU boundí•œ ì‘ì—…ì— ìœ ë¦¬&lt;/h3>
&lt;p>&lt;strong>ì˜ˆìƒ: CPU boundí•œ ì‘ì—…ì˜ ê²½ìš° ì½”ì–´ì˜ ê°œìˆ˜ê¹Œì§€ëŠ” goroutineì´ ëŠ˜ì–´ë‚  ìˆ˜ë¡ ì„±ëŠ¥ì´ ì¢‹ì„ ê²ƒì´ë‹¤.&lt;/strong>&lt;/p>
&lt;p>(&lt;em>ì•„ì§ ì½”ì–´ì™€ í”„ë¡œì„¸ì„œ, vCPUì˜ ì°¨ì´ëŠ” ëª…í™•íˆëŠ” ëª¨ë¥´ê² ë‹¤&lt;/em>)&lt;/p>
&lt;p>CPU Boundí•œ ì‘ì—…ì˜ ê²½ìš°ëŠ” ì •ë§ ë™ì‹œì„±ë³´ë‹¨ ë³‘ë ¬ì„±ì„ ì´ìš©í•  ë•Œ ë” ì¢‹ì€ ì„±ëŠ¥ì„ ë³´ì¼ê¹Œ? ì¼ì¢…ì˜ ì œê³± ì—°ì‚°ìœ¼ë¡œ CPUë¥¼ í˜¹ì‚¬ì‹œí‚¤ëŠ” ì‘ì—…ì„ ì •ì˜í–ˆë‹¤. ë³‘ë ¬ì„±ì˜ ê²½ìš° ì–´ë–¤ ê²½ìš°ê¹Œì§€ê°€ ë³‘ë ¬ì„±ì´ê³ , ì–´ë–¤ ê²½ìš°ê¹Œì§€ê°€ ë™ì‹œì„± + ë³‘ë ¬ì„±ì¸ì§€ í—·ê°ˆë¦´ ìˆ˜ ìˆê¸°ì— ì •ë¦¬í•´ë³¸ë‹¤.&lt;/p>
&lt;ol>
&lt;li>ì½”ì–´ 1ê°œì— ì—¬ëŸ¬ í˜¹ì€ goroutine =&amp;gt; ë‹¹ì—°íˆ ë³‘ë ¬ì„±ì´ ì¼ì–´ë‚  ì½”ì–´ë“¤ì´ ì—†ìœ¼ë‹ˆ ë™ì‹œì„±&lt;/li>
&lt;li>ì½”ì–´ Nê°œì— Nê°œ ì´í•˜ì˜ ì—¬ëŸ¬ goroutine =&amp;gt; ë³‘ë ¬ì„±&lt;/li>
&lt;li>ì½”ì–´ Nê°œì— Nê°œ ì´ìƒì˜ ì—¬ëŸ¬ goroutine =&amp;gt; ë™ì‹œì„± + ë³‘ë ¬ì„±. &lt;strong>í•˜ì§€ë§Œ CPU Bound í•œ ì‘ì—…ì˜ ê²½ìš° ë™ì‹œì„±ì€ ë³„ ì´ì ì„ ê°€ì ¸ë‹¤ ì£¼ì§€ ì•ŠëŠ”ë‹¤.&lt;/strong>&lt;/li>
&lt;/ol>
&lt;h4 id="í”„ë¡œê·¸ë¨-ì½”ë“œ-1">í”„ë¡œê·¸ë¨ ì½”ë“œ&lt;/h4>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;sync&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;testing&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">Benchmarkë³‘ë ¬ì„±&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">b&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">testing&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">B&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="nx">_&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">goroutineNum&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="k">range&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="kt">int&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">8&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">16&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">32&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">64&lt;/span>&lt;span class="p">}{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">b&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Run&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Sprintf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;%dê°œì˜ goroutine&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">goroutineNum&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">b&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">testing&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">B&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="nx">i&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="nx">i&lt;/span> &lt;span class="p">&amp;lt;&lt;/span> &lt;span class="nx">b&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">N&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="nx">i&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nf">doë³‘ë ¬ì„±&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">b&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">goroutineNum&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">doë³‘ë ¬ì„±&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">b&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">testing&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">B&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">goroutineNum&lt;/span> &lt;span class="kt">int&lt;/span>&lt;span class="p">){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">wg&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">sync&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">WaitGroup&lt;/span>&lt;span class="p">{}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">totalRep&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="mi">1024&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="mi">1024&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">dummyNumber&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="mi">12345&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="nx">n&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="nx">n&lt;/span> &lt;span class="p">&amp;lt;&lt;/span> &lt;span class="nx">goroutineNum&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="nx">n&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">wg&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">go&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">num&lt;/span> &lt;span class="kt">int&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="nx">j&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="nx">j&lt;/span> &lt;span class="p">&amp;lt;&lt;/span> &lt;span class="nx">totalRep&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="nx">goroutineNum&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="nx">j&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">dummyNumber&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">dummyNumber&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="nx">dummyNumber&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&lt;/span> &lt;span class="mi">100000&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">wg&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Done&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}(&lt;/span>&lt;span class="nx">n&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">wg&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Wait&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h4 id="core-1ê°œì˜-aws-t2microì—ì„œì˜-ë²¤ì¹˜ë§ˆí‚¹">Core 1ê°œì˜ AWS t2.microì—ì„œì˜ ë²¤ì¹˜ë§ˆí‚¹&lt;/h4>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">ubuntu@ip-172-31-12-2:~/concurrency$ &lt;span class="nv">CGO_ENABLED&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">0&lt;/span> go &lt;span class="nb">test&lt;/span> ./parallelism_test.go -bench&lt;span class="o">=&lt;/span>. -benchtime&lt;span class="o">=&lt;/span>10x
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">goos: linux
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">goarch: amd64
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Benchmarkë³‘ë ¬ì„±/1ê°œì˜_goroutine &lt;span class="m">10&lt;/span> &lt;span class="m">15228154&lt;/span> ns/op
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Benchmarkë³‘ë ¬ì„±/4ê°œì˜_goroutine &lt;span class="m">10&lt;/span> &lt;span class="m">14048765&lt;/span> ns/op
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Benchmarkë³‘ë ¬ì„±/8ê°œì˜_goroutine &lt;span class="m">10&lt;/span> &lt;span class="m">14038413&lt;/span> ns/op
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Benchmarkë³‘ë ¬ì„±/16ê°œì˜_goroutine &lt;span class="m">10&lt;/span> &lt;span class="m">13916091&lt;/span> ns/op
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Benchmarkë³‘ë ¬ì„±/32ê°œì˜_goroutine &lt;span class="m">10&lt;/span> &lt;span class="m">13877358&lt;/span> ns/op
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Benchmarkë³‘ë ¬ì„±/64ê°œì˜_goroutine &lt;span class="m">10&lt;/span> &lt;span class="m">14082735&lt;/span> ns/op
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">PASS
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ok command-line-arguments 0.946s
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>t2.microì˜ ê²½ìš° ì½”ì–´ê°€ 1ê°œì´ê¸° ë•Œë¬¸ì— ë³‘ë ¬ì„±ì´ ì¡´ì¬í•  ê²ƒë„ ì—†ì´ ë™ì‹œì„±ë§Œì´ ì¡´ì¬í•œë‹¤ê³  í–ˆë“¯ì´ goroutineì´ ë§ì•„ì ¸ë„ ì„±ëŠ¥ì´ ì¢‹ì•„ì§€ì§€ ì•ŠëŠ”ë‹¤. ë˜ë ¤ ë¶ˆí•„ìš”í•œ goroutineì„ ê´€ë¦¬í•˜ê¸° ìœ„í•œ ì½”ìŠ¤íŠ¸ì™€ ë¯¸ë¯¸í•˜ê² ì§€ë§Œ ì¡´ì¬í•  goroutineì— ëŒ€í•œ context switchë¡œ ì¸í•´ ì‘ì—…ì´ ë” ë”ëŒì§€ê¸°ë„ í•˜ëŠ” ê²°ê³¼ë¥¼ ë³¼ ìˆ˜ ìˆë‹¤.&lt;/p>
&lt;h4 id="core-4ê°œë¡œ-8ê°œì˜-vcpuë¥¼-ê°€ì§„-ë‚˜ì˜-ë©íƒ‘ì—ì„œì˜-ë²¤ì¹˜ë§ˆí‚¹">Core 4ê°œë¡œ 8ê°œì˜ vCPUë¥¼ ê°€ì§„ ë‚˜ì˜ ë©íƒ‘ì—ì„œì˜ ë²¤ì¹˜ë§ˆí‚¹&lt;/h4>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">$ go &lt;span class="nb">test&lt;/span> ./parallelism_test.go -bench&lt;span class="o">=&lt;/span>. -benchtime&lt;span class="o">=&lt;/span>10x
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">goos: linux
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">goarch: amd64
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Benchmarkë³‘ë ¬ì„±/1ê°œì˜_goroutine-8 &lt;span class="m">10&lt;/span> &lt;span class="m">10263785&lt;/span> ns/op
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Benchmarkë³‘ë ¬ì„±/4ê°œì˜_goroutine-8 &lt;span class="m">10&lt;/span> &lt;span class="m">7342331&lt;/span> ns/op
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Benchmarkë³‘ë ¬ì„±/8ê°œì˜_goroutine-8 &lt;span class="m">10&lt;/span> &lt;span class="m">4872064&lt;/span> ns/op
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Benchmarkë³‘ë ¬ì„±/16ê°œì˜_goroutine-8 &lt;span class="m">10&lt;/span> &lt;span class="m">5000452&lt;/span> ns/op
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Benchmarkë³‘ë ¬ì„±/32ê°œì˜_goroutine-8 &lt;span class="m">10&lt;/span> &lt;span class="m">4830541&lt;/span> ns/op
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Benchmarkë³‘ë ¬ì„±/64ê°œì˜_goroutine-8 &lt;span class="m">10&lt;/span> &lt;span class="m">4968710&lt;/span> ns/op
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">PASS
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ok command-line-arguments 0.419s
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ë‚´ ë©íƒ‘ì€ ì‹¤ì œ coreëŠ” 4ê°œì§€ë§Œ 8ê°œì˜ ìŠ¤ë ˆë“œê¹Œì§€ ë³‘ë ¬ì ìœ¼ë¡œ ì²˜ë¦¬ê°€ ê°€ëŠ¥í•˜ë¯€ë¡œ 8ê°œë¼ê³  ë³¼ ìˆ˜ ìˆë‹¤.&lt;/p>
&lt;p>ë”°ë¼ì„œ &lt;strong>8ê°œì˜ goroutineê¹Œì§€ëŠ” ë³‘ë ¬ì„±ì— ì˜í•´ ì„±ëŠ¥ì´ ì ì  ì¢‹ì•„ì§€ê³ , 8ê°œ ì´ˆê³¼ì˜ goroutineë¶€í„°ëŠ” ë³‘ë ¬ì„±ê³¼ ë™ì‹œì„±ì´ ëª¨ë‘ ì ìš©ë˜ê² ì§€ë§Œ í˜„ì¬ì˜ ì‘ì—…ì€ CPU boundí•˜ê¸° ë•Œë¬¸ì— ë™ì‹œì„±ì€ ê·¸ë‹¥ ì´ì ì„ ê°€ì ¸ë‹¤ì£¼ì§€ ëª»í•˜ê³  EC2ì˜ ê²½ìš°ì™€ ë§ˆì°¬ê°€ì§€ë¡œ ê³¼ì‰ë˜ëŠ” goroutineìœ¼ë¡œ ì¸í•´ ì˜¤íˆë ¤ ì„±ëŠ¥ì„ ì €í•˜&lt;/strong>ì‹œí‚¬ ìˆ˜ ìˆë‹¤. ì½”ë“œì— ì²¨ë¶€ëŠ” í•˜ì§€ ì•Šì•˜ì§€ë§Œ ê·¹ë‹¨ì ìœ¼ë¡œ ê³¼ì‰ë˜ëŠ” goroutineì€ ì•„ë˜ì™€ ê°™ì€ ì„±ëŠ¥ ì €í•˜ë¥¼ ì•¼ê¸°í•˜ê¸°ë„ í–ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-text" data-lang="text">&lt;span class="line">&lt;span class="cl">Benchmarkë³‘ë ¬ì„±/8ê°œì˜_goroutine-8 10 580169905 ns/op
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Benchmarkë³‘ë ¬ì„±/16ê°œì˜_goroutine-8 10 602391376 ns/op
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Benchmarkë³‘ë ¬ì„±/1024*1024ê°œì˜_goroutine-8 10 879079810 ns/op
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>(&lt;em>í•œí¸ìœ¼ë¡  1024*1024ê°œì˜ goroutineì„ ê´€ë¦¬í•˜ëŠ” ë°ì—ë„ ì„±ëŠ¥ ì €í•˜ê°€ ì €ì •ë„ ë¿ì´ë¼ë‹ˆ ëŒ€ë‹¨í•˜ë‹¨ ìƒê°ë„ ë“ ë‹¤&amp;hellip;!&lt;/em>)&lt;/p>
&lt;h2 id="ë§ˆì¹˜ë©°">ë§ˆì¹˜ë©°&lt;/h2>
&lt;p>ë™ì‹œì„±ê³¼ ë³‘ë ¬ì„±ì€ Goë¥¼ ê³µë¶€í•˜ë©´ì„œ ì»´í“¨í„° êµ¬ì¡°ë¥¼ ê³µë¶€í•˜ë©´ì„œ ë„ˆë¬´ë„ ë§ì´ íŒŒê³ ë“¤ì—ˆë˜ ë‚´ìš©ì´ë¼ ìˆ ìˆ  ì í ì¤„ ì•Œì•˜ëŠ”ë° ì‹œê°„ì´ ì¢€ ì§€ë‚˜ì„œì¸ì§€ ê°€ë¬¼ê°€ë¬¼í•œ ë‚´ìš©ë„ ì¢€ ìˆì—ˆê³  ë‚´ìš©ë„ ì‰½ì§€ ì•Šì•˜ìœ¼ë©° ì¢‹ì€ ì˜ˆì‹œë¥¼ ì–´ë–»ê²Œ ë“¤ì–´ì•¼í•  ì§€ ë§ì´ ê³ ë¯¼ì´ ëë˜ ê²ƒ ê°™ë‹¤. ì´ëŸ° ì €ëŸ° ìƒê°ë“¤ë¡œ ì¸í•´ ì„¤ëª…ì´ë‚˜ ì§„í–‰ì´ ê·¸ë ‡ê²Œ ê¹”ë”íˆ ëœ ê²ƒ ê°™ì§„ ì•Šì§€ë§Œ ê·¸ë˜ë„ ê²°ë¡ ì´ ê¹”ë”í•˜ê²Œ ë‚˜ì™€ì„œ ë‹¤í–‰ì´ë‹¤. ì‚¬ì‹¤ ì´ëŸ° ì½”ì–´ë‚˜ ê³ ë£¨í‹´, ìŠ¤ë ˆë“œì˜ ê°œìˆ˜ì— ë”°ë¼ ë³‘ë ¬ì„±ì´ë‚˜ ë™ì‹œì„±ì„ êµ¬ë¶„ ì§“ê¸°ë³´ë‹¤ &amp;lsquo;&lt;em>ë™ì‹œì„±ì€ ì£¼ë¡œ êµ¬ì¡°ì™€ ê´€ë ¨ë˜ê³  ë³‘ë ¬ì„±ì€ ì‹¤í–‰ê³¼ ê´€ë ¨ëœë‹¤.&lt;/em>&amp;lsquo;ì™€ ê°™ì€ ì² í•™ì ì¸ ë‚´ìš©ë„ ê°„ê°„íˆ ë‚˜ì˜¤ê¸´ í•˜ì§€ë§Œ ëª‡ ë‹¬ ì§¸ ê·¸ë‹¥ ì™€ë‹¿ì§€ ì•Šê³ , ê°„ê°„íˆ ë“±ì¥í•  ë¿ ì˜¤í”¼ì…œí•œ ë‚´ìš©ì€ ì•„ë‹Œ ë“¯í•˜ì—¬ ìƒëµí–ˆë‹¤.&lt;/p>
&lt;p>ê·¸ë¦¬ê³  ì´ë²ˆì—” ë²¤ì¹˜ë§ˆí¬ í…ŒìŠ¤íŠ¸ì— í•œê¸€ ì´ë¦„ì„ ë„ì…í•´ë´¤ëŠ”ë° ì½ê¸°ë„ í¸í•˜ê³  ë‚˜ë¦„ ê·€ì—¬ìš´ ê²ƒ ê°™ë‹¤. ã…ã… ì¢…ì¢… ê°œë°œí•˜ë©´ì„œ í…ŒìŠ¤íŠ¸ ì½”ë“œ ì§¤ ë•Œì—ë„ í•œê¸€ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ë¥¼ ì‚¬ìš©í•´ë³´ë ¤í•œë‹¤.&lt;/p>
&lt;h2 id="ì°¸ê³ ">ì°¸ê³ &lt;/h2>
&lt;p>Concurrency is not parallelism &lt;a class="link" href="https://blog.golang.org/waza-talk" target="_blank" rel="noopener"
>https://blog.golang.org/waza-talk&lt;/a>&lt;/p>
&lt;p>Concurrency is not parallelism slide - Rob Pike &lt;a class="link" href="https://talks.golang.org/2012/waza.slide#1" target="_blank" rel="noopener"
>https://talks.golang.org/2012/waza.slide#1&lt;/a>&lt;/p>
&lt;p>Back to the Essence - Concurrency vs Parallelism &lt;a class="link" href="https://homoefficio.github.io/2019/02/02/Back-to-the-Essence-Concurrency-vs-Parallelism/" target="_blank" rel="noopener"
>https://homoefficio.github.io/2019/02/02/Back-to-the-Essence-Concurrency-vs-Parallelism/&lt;/a>&lt;/p>
&lt;p>[ ì œ 4íšŒ íŒŒì´ì¬ ê²©ì›” ì„¸ë¯¸ë‚˜ ] ë™ì‹œì„±ê³¼ ë³‘ë ¬ì„± - ì´ì°¬í˜• &lt;a class="link" href="https://youtu.be/Iv3e9Dxt9WY" target="_blank" rel="noopener"
>https://youtu.be/Iv3e9Dxt9WY&lt;/a>&lt;/p></description></item><item><title>Go ì–¸ì–´ë¡œ ì ìš©í•´ë³´ëŠ” Computer Science - Socket (Unix Domain Socket, Network/TCP/UDP Socket)</title><link>https://umi0410.github.io/blog/golang/go-socket/</link><pubDate>Sat, 13 Feb 2021 14:10:54 +0900</pubDate><guid>https://umi0410.github.io/blog/golang/go-socket/</guid><description>&lt;img src="https://umi0410.github.io/blog/golang/go-socket/server-client-socket.jpeg" alt="Featured image of post Go ì–¸ì–´ë¡œ ì ìš©í•´ë³´ëŠ” Computer Science - Socket (Unix Domain Socket, Network/TCP/UDP Socket)" />&lt;h2 id="ì‹œì‘í•˜ë©°">ì‹œì‘í•˜ë©°&lt;/h2>
&lt;p>ê°œë°œ ê³µë¶€ë¥¼ ì²˜ìŒ ì‹œì‘í•œ ì§€ ì–¸ì œ ì•ˆ ëì„ ë¬´ë µ, ì˜ê²½ ë³µë¬´ë¥¼ í•˜ë©° ìë°”ë¡œ TCP Socketì„ ì´ìš©í•´ ì˜† ì»´í“¨í„°ì™€ ì±„íŒ…ì„ í•˜ëŠ” í”„ë¡œê·¸ë¨ì„ ë§Œë“¤ì–´ ë³´ëŠ” ê²ƒì„ ì‹œì‘ìœ¼ë¡œ dockerë‚˜ mysqlê³¼ ê°™ì€ ë‹¤ì–‘í•œ ì˜¤í”ˆì†ŒìŠ¤ë“¤ì„ ì´ìš©í•´ë³´ë©´ì„œë‚˜ ë„¤íŠ¸ì›Œí¬ë¥¼ ê³µë¶€í•˜ë©´ì„œ ë‹¤ì–‘í•˜ê²Œ ë“¤ì–´ì™”ë˜ &lt;code>ì†Œì¼“&lt;/code>ì´ì§€ë§Œ ì •í™•íˆ ì–´ë–¤ ì—­í• ì„ í•˜ëŠ”ì§€ ì–´ë–¤ ì¢…ë¥˜ê°€ ìˆëŠ”ì§€ ì–´ë–»ê²Œ ë™ì‘í•˜ëŠ”ì§€ ì•Œì§€ ëª»í–ˆë‹¤.&lt;/p>
&lt;p>ì˜¤ëŠ˜ì€ ê·¸ë ‡ê²Œ ì•Œì­ë‹¬ì­í•œ ì¡´ì¬ì˜€ë˜ ì†Œì¼“ì„ í¬ê²Œ &lt;strong>&lt;code>Unix Domain Socket&lt;/code>ì™€ &lt;code>Network Socket&lt;/code> ë‘ ê°€ì§€ë¡œ ë‚˜ëˆ  ì •ë¦¬í•´ë³´ê³  Unix Domain Socketê³¼ TCPë¥¼ ì‚¬ìš©í•˜ëŠ” Network Socketì„ ë²¤ì¹˜ë§ˆí¬í•´ë³´ê³  ì–´ë–¤ ì°¨ì´ê°€ ìˆëŠ”ì§€ í™•ì¸&lt;/strong>í•´ë³´ë„ë¡ í•˜ê² ë‹¤. ì£¼ë¡œ ë‚´ê°€ ì†Œì¼“ì„ ì ‘í–ˆë˜ ìë£Œë‚˜ ì´ìŠˆ ìƒí™©ì—ì„œëŠ” UDPë³´ë‹¤ëŠ” TCPê°€ ë§ì´ ë“±ì¥í–ˆì—ˆê¸° ë•Œë¬¸ì— &lt;strong>UDPì— ëŒ€í•œ ë‚´ìš©ì€ ê±°ì˜ ì œì™¸í•  ê²ƒì´ë¯€ë¡œ ëŒ€ë¶€ë¶„ì´ Network socketê³¼ Unix domain socket ê°ê°ì˜ stream(network socketì—ì„  tcpë¥¼ ì´ìš©í•˜ëŠ” ê²½ìš°ì— í•´ë‹¹) type socket&lt;/strong>ì— ê´€ë ¨í•œ ë‚´ìš©ì¼ ê²ƒì´ë‹¤.&lt;/p>
&lt;h2 id="socket-ì´ë€">Socket ì´ë€&lt;/h2>
&lt;p>ì†Œì¼“ì€ ì–´ë– í•œ í†µì‹ ì—ì„œì˜ Endpoint(ëì ) ì—­í• ì„ í•œë‹¤. ëì ì´ ì—†ìœ¼ë©´ ì–´ë””ì™€ ì–´ë””ê°€ í†µì‹ í•˜ëŠ”ì§€ ì–´ë””ì— ë°ì´í„°ë¥¼ ì¨ì•¼í•˜ëŠ”ì§€ ì•Œ ìˆ˜ ì—†ë‹¤.&lt;/p>
&lt;p>ì†Œì¼“ì„ ë§ˆì¹˜ ì „êµ¬ ì†Œì¼“ê³¼ ê°™ì´ ì†Œì¼“ì´ë¼ê³  ë¶€ë¥´ëŠ” ì´ìœ ëŠ” ì†Œì¼“ì— ì˜¬ë°”ë¥´ê²Œ ë°ì´í„°ë¥¼ ì ê¸°ë§Œ í•˜ë©´ í†µì‹ ì„ ìœ„í•œ ì„¸ë¶€ì ì¸ ë™ì‘ì€ ì†Œì¼“ì´ ì•Œì•„ì„œ ìˆ˜í–‰í•˜ê¸° ë•Œë¬¸ì´ë‹¤. ë”°ë¼ì„œ ìš°ë¦¬ëŠ” í†µì‹ ì„ í•˜ê¸° ìœ„í•œ Socketì„ ì˜¬ë°”ë¥´ê²Œ ìƒì„±í•˜ê³ , ê·¸ ê³³ì— ë°ì´í„°ë¥¼ ì˜¬ë°”ë¥´ê²Œ ì ê±°ë‚˜ ê·¸ê³³ì˜ ë°ì´í„°ë¥¼ ì˜¬ë°”ë¥´ê²Œ ì½ê¸°ë§Œ í•˜ë©´ ëœë‹¤. ì‹¤ì œ ë°ì´í„° ì „ì†¡ì€ ì†Œì¼“ì´ ì•Œì•„ì„œ ìˆ˜í–‰í•´ì¤€ë‹¤.&lt;/p>
&lt;p>ì†Œì¼“ì€ ê°™ì€ í˜¸ìŠ¤íŠ¸ ë‚´ì—ì„œ IPCë¥¼ ìœ„í•´ ì‚¬ìš©ë˜ëŠ” &lt;code>Unix domain socket&lt;/code>ê³¼ ë„¤íŠ¸ì›Œí¬ í†µì‹ ì„ í•˜ê¸° ìœ„í•´ ì‚¬ìš©ë˜ëŠ” &lt;code>Network socket&lt;/code>ìœ¼ë¡œ ë¶„ë¥˜í•  ìˆ˜ ìˆë‹¤. ê°„í˜¹ unix domain socketê³¼ TCPë¥¼ ì´ìš©í•˜ëŠ” Network socket, UDPë¥¼ ì´ìš©í•˜ëŠ” Network socket ì´ë ‡ê²Œ ì„¸ ê°€ì§€ë¡œ ë¶„ë¥˜í•˜ëŠ” ê²½ìš°ë¥¼ ë³¸ ê²ƒ ê°™ì€ë° ì´ëŠ” ì˜ëª»ëœ ë¶„ë¥˜ë¼ê³  ìƒê°í•œë‹¤. Network socket ë¿ë§Œ ì•„ë‹ˆë¼ Unix domain socket ë˜í•œ stream(Network socketì˜ ê²½ìš° TCPë¥¼ ì´ìš©í•˜ëŠ” ê²½ìš°ì— í•´ë‹¹) íƒ€ì…ê³¼ datagram íƒ€ì…(Network socketì˜ ê²½ìš° UDPë¥¼ ì´ìš©í•˜ëŠ” ê²½ìš°ì— í•´ë‹¹)ìœ¼ë¡œ ì‚¬ìš©ë  ìˆ˜ ìˆê¸° ë•Œë¬¸ì´ë‹¤.&lt;/p>
&lt;h3 id="ì„œë²„-ì†Œì¼“ê³¼-í´ë¼ì´ì–¸íŠ¸-ì†Œì¼“">ì„œë²„ ì†Œì¼“ê³¼ í´ë¼ì´ì–¸íŠ¸ ì†Œì¼“&lt;/h3>
&lt;p>&lt;img src="https://umi0410.github.io/blog/golang/go-socket/server-client-socket.jpeg"
width="2146"
height="1000"
srcset="https://umi0410.github.io/blog/golang/go-socket/server-client-socket_huc5be35f5857cc34672b838b13057c03e_282874_480x0_resize_q75_box.jpeg 480w, https://umi0410.github.io/blog/golang/go-socket/server-client-socket_huc5be35f5857cc34672b838b13057c03e_282874_1024x0_resize_q75_box.jpeg 1024w"
loading="lazy"
alt="server-client-socket.jpeg"
class="gallery-image"
data-flex-grow="214"
data-flex-basis="515px"
>&lt;/p>
&lt;p>ì†Œì¼“ì„ ì—­í• ì˜ ì¸¡ë©´ì—ì„œ ë¶„ë¥˜í•œë‹¤ë©´ ì„œë²„ ì†Œì¼“ê³¼ í´ë¼ì´ì–¸íŠ¸ ì†Œì¼“ìœ¼ë¡œ ë‚˜ëˆŒ ìˆ˜ ìˆë‹¤. ë™ì¼í•œ êµ¬ì¡°ì˜ ì†Œì¼“ì´ì§€ë§Œ ìƒì„±ë˜ëŠ” ì‹œê¸°ë‚˜ ì—­í• ì´ ë‹¤ë¥¼ ë¿ì´ë‹¤.&lt;/p>
&lt;ul>
&lt;li>&lt;strong>ì„œë²„ ì†Œì¼“&lt;/strong> - í´ë¼ì´ì–¸íŠ¸ ì†Œì¼“ì˜ ì—°ê²° ìš”ì²­ì„ ë°›ì•„ë“¤ì´ê¸°ë§Œ í•  ë¿. ì‹¤ì œ ì„œë²„ ì¸¡ì—ì„œì˜ ë°ì´í„°ì˜ ì†¡ìˆ˜ì‹ ì€ ì„œë²„ ì†Œì¼“ì´ í´ë¼ì´ì–¸íŠ¸ ì†Œì¼“ì˜ ì—°ê²° ìš”ì²­ì„ ìˆ˜ë½í•˜ë©´ì„œ ìƒˆë¡œ ë§Œë“¤ì–´ì§€ëŠ” ì†Œì¼“ì„ í†µí•´ ìˆ˜í–‰.&lt;/li>
&lt;li>&lt;strong>í´ë¼ì´ì–¸íŠ¸ ì†Œì¼“&lt;/strong> - í´ë¼ì´ì–¸íŠ¸ê°€ ì„œë²„ì™€ í†µì‹ í•˜ê³ ì í•  ë•Œ ìƒì„±í•˜ëŠ” ì†Œì¼“. í´ë¼ì´ì–¸íŠ¸ëŠ” ì‹¤ì œ ë°ì´í„° ì†¡ìˆ˜ì‹ ë„ ì´ ì†Œì¼“ì„ í†µí•´ ìˆ˜í–‰.&lt;/li>
&lt;/ul>
&lt;p>ì„œë²„ ì†Œì¼“ê³¼ í´ë¼ì´ì–¸íŠ¸ ì†Œì¼“ì´ ë‹¨ìˆœí•œê²Œ 1:Nìœ¼ë¡œë§Œ í†µì‹ í•˜ë©´ ì´ë ‡ê²Œ ì„œë²„ ì†Œì¼“ì´ í´ë¼ì´ì–¸íŠ¸ ì†Œì¼“ì˜ ìš”ì²­ì„ ìˆ˜ë½í•œ ë’¤ ìƒˆë¡œ ì†Œì¼“ì„ ë§Œë“¤ í•„ìš” ì—†ì§€ ì•Šì„ê¹Œì‹¶ì§€ë§Œ ê·¸ë ‡ê²Œ ë˜ë©´ ì„œë²„ê°€ ê° í´ë¼ì´ì–¸íŠ¸ì™€ í†µì‹ í•  ë•Œ í•˜ë‚˜ì˜ ì†Œì¼“ì„ ì´ìš©í•˜ë¯€ë¡œ ì˜¬ë°”ë¥´ê²Œ ì›í•˜ëŠ” í´ë¼ì´ì–¸íŠ¸ì™€ í†µì‹ í•  ìˆ˜ ì—†ì„í…Œë‹ˆ ì¢‹ì€ ë°©ì‹ì´ ì•„ë‹ ê²ƒì´ë‹¤.&lt;/p>
&lt;p>ê·¸ë ‡ë‹¤ë©´ ê³¼ì—° &lt;strong>ì •ë§ ì„œë²„ì—ì„œëŠ” ì—°ê²°ì„ accept í•œ ë’¤ ì†Œì¼“ì„ ìƒˆë¡œ ìƒì„±í• ê¹Œ?&lt;/strong> í™•ì¸í•´ë³´ì.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;log&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;net&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;os&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;time&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">var&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">network&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">&amp;#34;tcp&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">address&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">&amp;#34;0.0.0.0:8080&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">os&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Remove&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">address&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">socket&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">net&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Listen&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">network&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">address&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Fatal&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">connectedSocket&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">socket&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Accept&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Fatal&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">go&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="nx">i&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="nx">i&lt;/span> &lt;span class="o">&amp;lt;=&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="nx">i&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">connectedSocket&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Write&lt;/span>&lt;span class="p">([]&lt;/span>&lt;span class="nb">byte&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;pong\n&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Sleep&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Second&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">connectedSocket&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Close&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ê°„ë‹¨í•˜ê²Œ TCP í†µì‹ í”„ë¡œê·¸ë¨ì„ í•˜ë‚˜ ë§Œë“¤ì–´ë´¤ë‹¤. ë‹¨ìˆœíˆ 1ì´ˆ ê°„ê²©ìœ¼ë¡œ pongì„ 5ë²ˆ ì¶œë ¥í•œ ë’¤ ì—°ê²°ì„ ëŠëŠ” í”„ë¡œê·¸ë¨ì´ë‹¤.&lt;/p>
&lt;p>&lt;strong>ìš”ì²­ ì „&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">$ netstat --tcp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Active Internet connections &lt;span class="o">(&lt;/span>w/o servers&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Proto Recv-Q Send-Q Local Address Foreign Address State
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">tcp &lt;span class="m">0&lt;/span> &lt;span class="m">0&lt;/span> ip-172-31-34-13.ap-:ssh 124.50.93.166:60082 ESTABLISHED
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">tcp &lt;span class="m">0&lt;/span> &lt;span class="m">0&lt;/span> ip-172-31-34-13.ap-:ssh 124.50.93.166:60084 ESTABLISHED
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">tcp &lt;span class="m">0&lt;/span> &lt;span class="m">0&lt;/span> ip-172-31-34-13.ap-:ssh 124.50.93.166:60078 ESTABLISHED
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;strong>ìš”ì²­ ìˆ˜ë½ í›„ í†µì‹  ì¤‘&lt;/strong> - ì†Œì¼“ì´ í•˜ë‚˜ ìƒì„±ë˜ì–´ ESTABLISHED ìƒíƒœ&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">$ netstat --tcp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Active Internet connections &lt;span class="o">(&lt;/span>w/o servers&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Proto Recv-Q Send-Q Local Address Foreign Address State
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">tcp &lt;span class="m">0&lt;/span> &lt;span class="m">0&lt;/span> ip-172-31-34-13.ap-:ssh 124.50.93.166:60082 ESTABLISHED
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">tcp &lt;span class="m">0&lt;/span> &lt;span class="m">0&lt;/span> ip-172-31-34-13.ap-:ssh 124.50.93.166:60084 ESTABLISHED
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">tcp &lt;span class="m">0&lt;/span> &lt;span class="m">0&lt;/span> ip-172-31-34-13.ap-:ssh 124.50.93.166:60078 ESTABLISHED
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">tcp6 &lt;span class="m">0&lt;/span> &lt;span class="m">0&lt;/span> ip-172-31-34-1:http-alt 124.50.93.166:42434 ESTABLISHED
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;strong>í†µì‹  ì¢…ë£Œ&lt;/strong> - ìƒì„±ë˜ì—ˆë˜ ì†Œì¼“ì´ TIME_WAIT ìƒíƒœ. ì ì‹œ í›„ ì‚¬ë¼ì§„ë‹¤.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">$ netstat --tcp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Active Internet connections &lt;span class="o">(&lt;/span>w/o servers&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Proto Recv-Q Send-Q Local Address Foreign Address State
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">tcp &lt;span class="m">0&lt;/span> &lt;span class="m">0&lt;/span> ip-172-31-34-13.ap-:ssh 124.50.93.166:60082 ESTABLISHED
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">tcp &lt;span class="m">0&lt;/span> &lt;span class="m">0&lt;/span> ip-172-31-34-13.ap-:ssh 124.50.93.166:60084 ESTABLISHED
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">tcp &lt;span class="m">0&lt;/span> &lt;span class="m">0&lt;/span> ip-172-31-34-13.ap-:ssh 124.50.93.166:60078 ESTABLISHED
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">tcp6 &lt;span class="m">0&lt;/span> &lt;span class="m">0&lt;/span> ip-172-31-34-1:http-alt 124.50.93.166:42434 TIME_WAIT
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;blockquote>
&lt;p>ê¹”ë”í•œ ë„¤íŠ¸ì›Œí¬ ì •ë³´ë¥¼ ë³´ê¸° ìœ„í•´ ìˆœìˆ˜í•œ AWS EC2 t2.micro ì¸ìŠ¤í„´ìŠ¤ì—ì„œ ì‘ì—…í•´ë³´ì•˜ë‹¤. ë§¨ ìœ„ 3ì¤„ì— ë‚˜ì˜¨ ì†Œì¼“ ì •ë³´ëŠ” ssh ì ‘ì†ìœ¼ë¡œ ì¸í•œ ì†Œì¼“ ì •ë³´ì´ë‹¤.&lt;/p>
&lt;p>ë˜í•œ ì„œë²„ ì†Œì¼“ì€ ì¶œë ¥ë˜ì§€ ì•Šì•˜ëŠ”ë° ì´ëŠ” ìš°ë¦¬ëŠ” í‰ì†Œì— listen ì¤‘ì¸ í¬íŠ¸ë‚˜ ì„œë²„ ì†Œì¼“ì„ ë³´ê¸° ìœ„í•´ netstatì— -l ì˜µì…˜ì„ ì „ë‹¬í•œ ë°˜ë©´ ì´ë²ˆì—” &amp;ndash;tcp ì˜µì…˜ì„ í†µí•´ listen ì¤‘ì¸ ì„œë²„ ì†Œì¼“ì´ ì•„ë‹Œ í´ë¼ì´ì–¸íŠ¸ì˜ ìš”ì²­ì„ ìˆ˜ë½í•œ ë’¤ ìƒì„±ë˜ëŠ” ì†Œì¼“ì„ ë³´ë ¤í•˜ê³ ìˆê¸° ë•Œë¬¸ì´ë‹¤.&lt;/p>
&lt;/blockquote>
&lt;p>4ë²ˆ ì§¸ ì¤„ì˜ ì†Œì¼“ ì •ë³´ê°€ ë°”ë¡œ ìš°ë¦¬ê°€ ìƒê°í•˜ëŠ” ì„œë²„ ì†Œì¼“ì´ clientì˜ ì—°ê²° ìš”ì²­ì„ accept í›„ ìƒì„±í•˜ëŠ” socketì´ë‹¤. í´ë¼ì´ì–¸íŠ¸ì˜ ìš”ì²­ì„ accept í›„ì— ìƒˆë¡œìš´ ì†Œì¼“ì´ ìƒì„±ë˜ë©° í†µì‹  ì¢…ë£Œ í›„ ì ì‹œ ê¸°ë‹¤ë¦° ë’¤ ì‚¬ë¼ì§„ë‹¤.&lt;/p>
&lt;h3 id="network-socket">Network Socket&lt;/h3>
&lt;p>&lt;code>Network socket&lt;/code>ì€ ë„¤íŠ¸ì›Œí¬ í†µì‹ ì´ í•„ìš”í•œ ì‘ì—…ì„ ìˆ˜í–‰í•  ë•Œ ì´ìš©í•˜ëŠ” ì†Œì¼“ì˜ í•œ ì¢…ë¥˜ë¡œ ë‹¤ì‹œ ë™ì‘ ë°©ì‹ì— ë”°ë¼ TCP í”„ë¡œí† ì½œì„ ì´ìš©í•˜ëŠ” stream socketê³¼ UDP í”„ë¡œí† ì½œì„ ì´ìš©í•˜ëŠ” datagram socketìœ¼ë¡œ êµ¬ë¶„í•  ìˆ˜ ìˆë‹¤. ì‚¬ìš©ìëŠ” socketì— ë°ì´í„°ë¥¼ ì ê¸°ë§Œ í•˜ë©´ ë„¤íŠ¸ì›Œí¬ì™€ ê´€ë ¨ëœ ì‘ì—…ì€ socketì´ ì•Œì•„ì„œ ìˆ˜í–‰í•´ì¤€ë‹¤. ì½ì„ ë•Œì—ë„ ë§ˆì°¬ê°€ì§€ì´ë‹¤.&lt;/p>
&lt;p>TCP socketì´ë¼ê³  ë¶€ë¥´ëŠ” ì‚¬ëŒë„ ìˆê³  stream socket, TCP/IP socketì´ë¼ ë¶€ë¥´ëŠ” ì‚¬ëŒë„ ìˆëŠ” ê²ƒ ê°™ë‹¤. ì •í™•í•œ ëª…ì¹­ì€ ëª¨ë¥´ê² ì§€ë§Œ ì‚¬ìš©í•˜ê±°ë‚˜ ì´í•´í•˜ëŠ” ë°ì—ëŠ” ë¬´ë¦¬ê°€ ì—†ì„ ê²ƒ ê°™ë‹¤.
TCPë¥¼ ì´ìš©í•˜ëŠ” stream typeì˜ Network socketê³¼ stream typeì˜ Unix domain socketì€ ì‚¬ìš© ë°©ë²•ì´ ë§¤ìš° ìœ ì‚¬í•˜ë‹¤. ë‘˜ ë‹¤ stream typeì´ê³ , ì†Œì¼“ì— ë°ì´í„°ë¥¼ ì ì€ ë’¤ì˜ ì‘ì—…ì€ ì†Œì¼“ì´ ì•Œì•„ì„œ ìˆ˜í–‰í•´ì£¼ê¸° ë•Œë¬¸ì´ë‹¤. ê°ê°ì˜ ì†Œì¼“ì„ ì´ìš©í•´ ì„œë²„ë¥¼ ë„ìš°ëŠ” ì‘ì—…ì€ ì¸ìì˜ ê°’ë§Œ ì¡°ê¸ˆ ë‹¬ë¼ì§ˆ ë¿ì´ë‹¤. ì´ëŠ” ê¸€ì˜ í•˜ë¶€ì˜ ì½”ë“œì—ì„œ í™•ì¸í•´ë³¼ ìˆ˜ ìˆë‹¤.&lt;/p>
&lt;h4 id="socketê³¼-port">Socketê³¼ Port&lt;/h4>
&lt;p>Network socketì— ëŒ€í•´ì„œëŠ” socketê³¼ portì˜ êµ¬ë¶„ì´ë‚˜ ì—­í• ì´ ì• ë§¤í•˜ê²Œ ëŠê»´ì§ˆ ìˆ˜ ìˆë‹¤. í†µì‹ ì„ í•  ë•Œ IP ì£¼ì†Œë¥¼ ì´ìš©í•´ ëª©ì ì§€ì¸ Hostë¥¼ ì°¾ì„ ìˆ˜ëŠ” ìˆì§€ë§Œ ê·¸ Hostì˜ ì–´ë–¤ í”„ë¡œì„¸ìŠ¤ê³¼ í†µì‹ í•˜ë ¤ëŠ” ê²ƒì¸ì§€ëŠ” ì•Œ ìˆ˜ ì—†ë‹¤. ì˜¬ë°”ë¥¸ í”„ë¡œì„¸ìŠ¤ë¥¼ ì°¾ì„ ìˆ˜ ìˆë„ë¡ í”„ë¡œì„¸ìŠ¤ì™€ ì–´ë– í•œ ìˆ«ìë¥¼ ë§¤í•‘ì‹œí‚¤ëŠ”ë° ì´ ìˆ«ìë¥¼ Port ë²ˆí˜¸ë¼ê³  í•œë‹¤. ì˜ˆë¥¼ ë“¤ì–´ 123.123.123.123:8080ìœ¼ë¡œ ìš”ì²­ì„ ë³´ë‚´ëŠ” ê²ƒì€ 123.123.123.123ì˜ IP ì£¼ì†Œë¥¼ ê°–ëŠ” Hostì˜ 8080ë²ˆ í¬íŠ¸ì— ë§µí•‘ëœ í”„ë¡œì„¸ìŠ¤ì— ìš”ì²­ì„ ë³´ë‚´ëŠ” ê²ƒì´ë‹¤.&lt;/p>
&lt;p>ì´ ë•Œ Portì™€ í”„ë¡œì„¸ìŠ¤ë¥¼ ê·¸ëƒ¥ ì—°ê²°í•  ìˆ˜ëŠ” ì—†ê³  Socketì´ë¼ëŠ” ë…€ì„ì´ í•„ìš”í•˜ë‹¤. Socketì€ ì‹¤ì§ˆì ìœ¼ë¡œ ì–´ë–¤ í”„ë¡œì„¸ìŠ¤ë¥¼ ì–´ë–¤ í¬íŠ¸ì— ë§µí•‘ì‹œí‚¬ì§€ì— ëŒ€í•œ ì •ë³´ê°€ í•„ìš”í•˜ê³  ë„¤íŠ¸ì›Œí¬ ì‘ì—…ì„ ì•Œì•„ì„œ ìˆ˜í–‰í•œë‹¤.&lt;/p>
&lt;p>ì¡°ê¸ˆ ë¹„ìœ ë¥¼ í•´ë³´ìë©´ íšŒì‚¬ë‚´ì— ì–´ë–¤ ë¶€ì„œê°€ ìˆê³  ì™¸ë¶€ì—ì„œ í•´ë‹¹ ë¶€ì„œì™€ ì‘ì—…í•˜ê¸° ìœ„í•´ì„  ì–´ë– í•œ ê³ ìœ í•œ ë¶€ì„œ ë²ˆí˜¸ê°€ í•„ìš”í•˜ê³ , ì´ë•Œ ì™¸ë¶€ì™€ í•´ë‹¹ ë¶€ì„œê°„ì— ì˜¤ê°€ëŠ” í†µì‹ ì„ ë‹´ë‹¹í•˜ëŠ” ë‹´ë‹¹ìê°€ ìˆì–´ì•¼í•˜ëŠ” ê²½ìš°ì— ë¹„ìœ í•´ ë³¼ ìˆ˜ ìˆë‹¤. &amp;ldquo;ì–´ë–¤ ë¶€ì„œ&amp;quot;ëŠ” í”„ë¡œì„¸ìŠ¤ì´ê³  &amp;ldquo;ê³ ìœ í•œ ë¶€ì„œ ë²ˆí˜¸&amp;quot;ëŠ” í¬íŠ¸ ë²ˆí˜¸, í†µì‹ ì„ ë‹´ë‹¹í•˜ëŠ” ë‹´ë‹¹ìëŠ” ì†Œì¼“ì— í•´ë‹¹í•œë‹¤.&lt;/p>
&lt;h3 id="unix-domain-socket">Unix Domain Socket&lt;/h3>
&lt;p>Unix Domain Socketì€ IPC(Inter-Process Communication, í”„ë¡œì„¸ìŠ¤ ê°„ í†µì‹ )ì˜ ì—¬ëŸ¬ ë°©ë²• ì¤‘ ê°€ì¥ ììœ ë¡œìš°ë©´ì„œ ì‚¬ìš©í•˜ëŠ” ë°ì— ìˆì–´ ì œí•œì´ ë³„ë¡œ ì—†ëŠ” ë°©ë²•ì´ë‹¤. ë„¤íŠ¸ì›Œí¬ ì†Œì¼“ê³¼ ë‹¬ë¦¬ ê°™ì€ í˜¸ìŠ¤íŠ¸ ë‚´ì˜ í”„ë¡œì„¸ìŠ¤ ê°„ í†µì‹ ì„ ë‹´ë‹¹í•˜ê¸° ë•Œë¬¸ì— ì•„ë¬´ëŸ° ë„¤íŠ¸ì›Œí¬ ì‘ì—…ì´ í•„ìš” ì—†ë‹¤. í•˜ì§€ë§Œ TCPë‚˜ UDPë¥¼ ì´ìš©í•˜ëŠ” Network socketì„ ì´ìš©í•  ë•Œì™€ ì¸ì ê°’ë§Œ ì¡°ê¸ˆ ë°”ê¾¸ì–´ ë™ì¼í•œ ë°©ì‹ìœ¼ë¡œ ì‚¬ìš©ì´ ê°€ëŠ¥í•˜ë‹¤.&lt;/p>
&lt;h4 id="-ìƒìƒì˜-ë‚˜ë˜---ìš°ë¦¬ê°€-ì•Œê²Œ-ëª¨ë¥´ê²Œ-ê²ªì—ˆë˜-unix-domain-socketì˜-permissionì˜¤ë¥˜ì—-ëŒ€í•´">ğŸŒˆ ìƒìƒì˜ ë‚˜ë˜ - ìš°ë¦¬ê°€ ì•Œê²Œ ëª¨ë¥´ê²Œ ê²ªì—ˆë˜ Unix domain socketì˜ Permissionì˜¤ë¥˜ì— ëŒ€í•´&lt;/h4>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">$ mysql
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">stat /var/lib/mysql/mysql.sock
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">stat: cannot stat &lt;span class="s1">&amp;#39;/var/lib/mysql/mysql.sock&amp;#39;&lt;/span>: Permission denied
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">$ docker
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker: Got permission denied &lt;span class="k">while&lt;/span> trying to connect to the Docker daemon socket at unix:///var/run/docker.sock
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ì£¼ë¡œ ìš°ë¦¬ê°€ &lt;code>MySQL&lt;/code>ì´ë‚˜ &lt;code>Docker&lt;/code>ë¥¼ &lt;code>localhost&lt;/code>ì—ì„œ ì‚¬ìš©í•  ë•Œ &lt;strong>unix socketì— ëŒ€í•œ permission ì—ëŸ¬&lt;/strong>ë¥¼ ê²ªì€ ì ì´ ìˆì„ ê²ƒì´ë‹¤. MySQLì´ë‚˜ Dockerë¥¼ ë¹„ë¡¯í•œ ë§ì€ ì˜¤í”ˆì†ŒìŠ¤ë“¤ì´ ì•„ë§ˆ ì„±ëŠ¥ìƒì˜ ì´ì ì„ ìœ„í•´ localhostì—ì„œ ì„œë¹„ìŠ¤ë¥¼ ì´ìš©í•  ê²½ìš° Network socketì´ ì•„ë‹Œ Unix domain socketì„ ë§ì´ë“¤ ì´ìš©í•˜ëŠ” ê²ƒìœ¼ë¡œ ì•Œê³ ìˆë‹¤. ê·¸ë ‡ê¸° ë•Œë¬¸ì— ì£¼ë¡œ MySQL ì„¤ì¹˜ ì´í›„ Remoteì—ì„œëŠ” ì ‘ì†ì´ ë˜ëŠ”ë° &lt;strong>localhostì—ì„œëŠ” ê¶Œí•œ ë¬¸ì œë¡œ ì ‘ì†ì´ ì•ˆëœë‹¤ê±°ë‚˜ Docker ì„¤ì¹˜ ì´í›„ ì‚¬ìš©ìë¥¼ docker groupì— ë„£ì–´ì£¼ëŠ” ê²½ìš°&lt;/strong>ê°€ ë§ì´ ìˆë‹¤.&lt;/p>
&lt;p>ì•„ë§ˆë„ ë„¤íŠ¸ì›Œí¬ í†µì‹ ì„ í†µí•´ ì„œë²„ ì†Œì¼“ì— ì ‘ê·¼í•˜ëŠ” ë„¤íŠ¸ì›Œí¬ ì†Œì¼“ê³¼ ë‹¬ë¦¬ unix domain socketì€ client processê°€ ì§ì ‘ serverì˜ socket fileì— ì ‘ê·¼í•˜ê¸° ë•Œë¬¸ì— ì´ë•Œ ì“°ê¸° ê¶Œí•œ ë•Œë¬¸ì— ê·¸ëŸ° ê¶Œí•œ ì˜¤ë¥˜ê°€ ìƒê¸°ëŠ” ê²ƒì´ ì•„ë‹ê¹Œë¼ëŠ” ìƒìƒì˜ ë‚˜ë˜ë¥¼ í¼ì³ë³¸ë‹¤.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ubuntu ì‚¬ìš©ìë¡œ unix domain socket server í”„ë¡œì„¸ìŠ¤ë¥¼ ë„ìš´ ê²½ìš°&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ubuntu ì‚¬ìš©ìë¡œëŠ” ì˜ ì ‘ì†ì´ ëœë‹¤.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ubuntu@ec2 $ go &lt;span class="nb">test&lt;/span> -v
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">===&lt;/span> RUN &lt;span class="nv">TestSocket&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">===&lt;/span> RUN TestSocket/tcp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2021/02/13 12:59:06 &lt;span class="nv">pong&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">===&lt;/span> RUN TestSocket/unix
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2021/02/13 12:59:06 pong
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">--- PASS: TestSocket &lt;span class="o">(&lt;/span>0.00s&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> --- PASS: TestSocket/tcp &lt;span class="o">(&lt;/span>0.00s&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> --- PASS: TestSocket/unix &lt;span class="o">(&lt;/span>0.00s&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">PASS
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ok uds 0.004s
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># serverê°€ ìƒì„±í•œ unix domain socketì— write ê¶Œí•œì´ ì—†ëŠ”&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># guest1ì´ë¼ëŠ” ì‚¬ìš©ìë¡œëŠ” serverì™€ unix domain socketìœ¼ë¡œëŠ” í†µì‹ í•  ìˆ˜ ì—†ê³ ,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ì•ì„œ ì˜¤í”ˆì†ŒìŠ¤ë¥¼ ì´ìš©í•˜ë©° ê²ªì—ˆë˜ ì—ëŸ¬ì™€ ë§ˆì°¬ê°€ì§€ë¡œ ê¶Œí•œ ì´ìŠˆê°€ ë°œìƒí•œë‹¤.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># í•˜ì§€ë§Œ TCP ì†Œì¼“ì„ ì´ìš©í•œ ê²½ìš°ëŠ” ì›í™œíˆ ping-pong testê°€ ì„±ê³µí•œ ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">guest1@ec2 $ go &lt;span class="nb">test&lt;/span> -v
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">===&lt;/span> RUN &lt;span class="nv">TestSocket&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">===&lt;/span> RUN TestSocket/tcp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2021/02/13 12:59:01 &lt;span class="nv">pong&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">===&lt;/span> RUN TestSocket/unix
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> main_test.go:21:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Error Trace: main_test.go:21
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Error: Received unexpected error:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> dial unix jinsu.sock: connect: permission denied
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Test: TestSocket/unix
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">--- FAIL: TestSocket &lt;span class="o">(&lt;/span>0.00s&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> --- PASS: TestSocket/tcp &lt;span class="o">(&lt;/span>0.00s&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> --- FAIL: TestSocket/unix &lt;span class="o">(&lt;/span>0.00s&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># í•˜ì§€ë§Œ ì¬ë¯¸ìˆê²Œë„ guest1ë„ socketì— writeí•  ìˆ˜ ìˆë„ë¡ ê¶Œí•œì„ ìˆ˜ì •í•´ì£¼ë‹ˆ&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># guest1ë„ unix domain socketìœ¼ë¡œ ë¬´ë¦¬ ì—†ì´ í†µì‹ ì´ ê°€ëŠ¥í–ˆë‹¤!&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">guest1@ec2 $ sudo chmod &lt;span class="m">777&lt;/span> jinsu.sock
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">guest1@ec2 $ go &lt;span class="nb">test&lt;/span> -v
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">===&lt;/span> RUN &lt;span class="nv">TestSocket&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">===&lt;/span> RUN TestSocket/tcp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2021/02/13 12:59:06 &lt;span class="nv">pong&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">===&lt;/span> RUN TestSocket/unix
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2021/02/13 12:59:06 pong
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">--- PASS: TestSocket &lt;span class="o">(&lt;/span>0.00s&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> --- PASS: TestSocket/tcp &lt;span class="o">(&lt;/span>0.00s&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> --- PASS: TestSocket/unix &lt;span class="o">(&lt;/span>0.00s&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">PASS
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ok uds 0.004s
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ë”°ë¼ì„œ ubuntu ì‚¬ìš©ìë¡œ TCP socketê³¼ Unix domain socket ë‘ ê°€ì§€ ë°©ë²•ìœ¼ë¡œ ì„œë²„ ì—­í• ì„ í•  ìˆ˜ ìˆëŠ” í”„ë¡œì„¸ìŠ¤ë¥¼ ë„ìš´ ë’¤ ubuntu ì‚¬ìš©ìì™€ guest1 ì‚¬ìš©ìë¡œ í†µì‹  í…ŒìŠ¤íŠ¸ë¥¼ ì§„í–‰í•´ë³´ì•˜ë‹¤.&lt;/p>
&lt;p>ì„œë²„ê°€ ìƒì„±í•œ unix domain socketì€ &lt;code>srwxrwxr-x&lt;/code> ì˜ í˜•ì‹ê³¼ ê¶Œí•œì„ ê°–ê³  ìˆê¸° ë•Œë¬¸ì— guest1ì€ ì´ ì†Œì¼“ì— ëŒ€í•´ readì™€ execute ê¶Œí•œ ë¿ì´ê³ , writeëŠ” ë¶ˆê°€ëŠ¥í•˜ê¸°ì— unix domain socketì„ ì´ìš©í•´ì„œëŠ” í†µì‹ í•  ìˆ˜ ì—†ë‹¤. ë”°ë¼ì„œ ìš°ë¦¬ê°€ í‰ì†Œì— ì˜¤í”ˆì†ŒìŠ¤ë¥¼ localhostì—ì„œ ì´ìš©í•˜ë©´ì„œ ì¢…ì¢… ë§ì´í–ˆë˜ ì†Œì¼“ì— ëŒ€í•œ permission errorì„ ë§Œë‚˜ë³¼ ìˆ˜ ìˆì—ˆë‹¤! ë°˜ë©´ socketì— ëŒ€í•œ ì ‘ê·¼ ê¶Œí•œì´ í•„ìš” ì—†ëŠ” TCPë¡œëŠ” í†µì‹ ì´ ê°€ëŠ¥í–ˆê³ , ë†€ëê²Œë„ guest1ì—ê²Œ ì†Œì¼“ íŒŒì¼ì— ëŒ€í•œ write ê¶Œí•œì„ ë¶€ì—¬í•´ì£¼ì Unix domain socketìœ¼ë¡œë„ í†µì‹ ì´ ê°€ëŠ¥í•´ì§„ ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤.&lt;/p>
&lt;p>&lt;strong>ìƒìƒì˜ ë‚˜ë˜ ì •ë¦¬: unix domain socketì„ í†µí•´ ì ‘ì†ì„ ì‹œë„í•  ë•Œì—ëŠ” unix domain socket fileì— ëŒ€í•œ ì ‘ê·¼ì„ í•˜ëŠ” í”„ë¡œì„¸ìŠ¤ê°€ í•´ë‹¹ socket fileì— ëŒ€í•œ ì ì ˆí•œ permissionì„ ê°–ê³  ìˆì–´ì•¼í•œë‹¤.&lt;/strong>&lt;/p>
&lt;blockquote>
&lt;p>ë˜í•œ êµ¬ê¸€ë§ ë„ì¤‘ ë³´ì•˜ë˜ ì¬ë¯¸ìˆëŠ” ì˜ˆì‹œëŠ” databaseë¥¼ í†µí•´ authentication/authorizationì„ ìˆ˜í–‰í•˜ëŠ” ì¼ë°˜ì ì¸ ì„œë¹„ìŠ¤ì™€ ë‹¬ë¦¬ Unix domain socketì„ ì´ìš©í•˜ëŠ” ê²½ìš°ì—ëŠ” linux user ì‹œìŠ¤í…œì„ ì´ìš©í•´ì„œë„ ê¶Œí•œ/ì¸ì¦ ê´€ë¦¬ë¥¼ ìˆ˜í–‰í•˜ëŠ” ê²½ìš°ë„ ì¡´ì¬í•  ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì´ì—ˆë‹¤.&lt;/p>
&lt;/blockquote>
&lt;h2 id="ë²¤ì¹˜ë§ˆí‚¹-unix-domain-socket-vs-network-socket">ë²¤ì¹˜ë§ˆí‚¹ Unix domain socket vs Network socket&lt;/h2>
&lt;p>Unix domain socketê³¼ Network socketì˜ ì„±ëŠ¥ì„ ë¹„êµí•˜ëŠ” ë²¤ì¹˜ë§ˆí¬ë¥¼ ì‘ì„±í–ˆë‹¤.
ë‘ ê²½ìš° ëª¨ë‘ Stream typeì˜ socketì„ ì´ìš©í•˜ë„ë¡ í–ˆê³ , Network socketì˜ ê²½ìš°ëŠ” íŠ¹íˆë‚˜ ì´ ê²½ìš° TCP í”„ë¡œí† ì½œì„ ì´ìš©í•˜ê²Œ ëœë‹¤.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// main.go
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// í•œ í”„ë¡œì„¸ìŠ¤ ë‚´ì—ì„œ TCP Socketê³¼ Unix Domain Socket ë‘ ê°€ì§€ë¥¼ ì´ìš©í•´
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// í†µì‹ í•  ìˆ˜ ìˆëŠ” í”„ë¡œê·¸ë¨
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;errors&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;io&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;log&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;net&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;os&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;time&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">go&lt;/span> &lt;span class="nf">RunTCPSocketServer&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">go&lt;/span> &lt;span class="nf">RunUnixDomainSocketServer&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Dummy waiting...&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Sleep&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Minute&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">RunTCPSocketServer&lt;/span>&lt;span class="p">(){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Run TCPSocketServer...&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nf">run&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;tcp&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;0.0.0.0:8080&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">RunUnixDomainSocketServer&lt;/span>&lt;span class="p">(){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Run UnixDomainSocketServer...&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">serverSocketName&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="s">&amp;#34;jinsu.sock&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">os&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Remove&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">serverSocketName&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nf">run&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;unix&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">serverSocketName&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// TCP socketì„ ì´ìš©í•´ ì„œë²„ë¥¼ ë„ìš°ë“  Unix Domain Socketì„ ì´ìš©í•´ ì„œë²„ë¥¼ ë„ìš°ë“ 
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// ê°„ë‹¨íˆ ì¸ì ê°’ë§Œ ë³€ê²½í•´ì„œ ì´ìš©í•  ìˆ˜ ìˆë‹¤!
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">func&lt;/span> &lt;span class="nf">run&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">network&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">address&lt;/span> &lt;span class="kt">string&lt;/span>&lt;span class="p">){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">buf&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nb">make&lt;/span>&lt;span class="p">([]&lt;/span>&lt;span class="kt">byte&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1024&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">socket&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">net&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Listen&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">network&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">address&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Fatal&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">connectedSocket&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">socket&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Accept&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Fatal&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">go&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">n&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">connectedSocket&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Read&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">buf&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">!&lt;/span>&lt;span class="nx">errors&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Is&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">io&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">EOF&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Fatal&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span> &lt;span class="k">else&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;[Error]&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">break&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">network&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;Client sent:&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">n&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">connectedSocket&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Write&lt;/span>&lt;span class="p">([]&lt;/span>&lt;span class="nb">byte&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;pong&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">connectedSocket&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Close&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// main_test.go
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// tcp socketê³¼ unix domain socketì„ ì´ìš©í•´ ì„±ê³µì ìœ¼ë¡œ ì„œë²„ì™€ í†µì‹ ì´
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// ì´ë£¨ì–´ì§€ëŠ”ì§€ í…ŒìŠ¤íŠ¸í•˜ëŠ” í…ŒìŠ¤íŠ¸ ì½”ë“œ
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// tcpì™€ unix domain socketì˜ ì„±ëŠ¥ì„ ë¹„êµí•˜ëŠ” ë²¤ì¹˜ë§ˆí¬ ì½”ë“œ
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;errors&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/stretchr/testify/assert&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;io&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;log&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;net&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;testing&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">TestSocket&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">t&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">testing&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">T&lt;/span>&lt;span class="p">){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">args&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="p">[][]&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">[]&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="s">&amp;#34;tcp&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;0.0.0.0:8080&amp;#34;&lt;/span>&lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">[]&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="s">&amp;#34;unix&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;jinsu.sock&amp;#34;&lt;/span>&lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="nx">_&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">arg&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="k">range&lt;/span> &lt;span class="nx">args&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">t&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Run&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">arg&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">t&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">testing&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">T&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">conn&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">net&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Dial&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">arg&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="nx">arg&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">assert&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">NoError&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">t&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">buf&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nb">make&lt;/span>&lt;span class="p">([]&lt;/span>&lt;span class="kt">byte&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1024&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">_&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">conn&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Write&lt;/span>&lt;span class="p">([]&lt;/span>&lt;span class="nb">byte&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;ping&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Fatal&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">n&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">conn&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Read&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">buf&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">!&lt;/span> &lt;span class="nx">errors&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Is&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">io&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">EOF&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">string&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">buf&lt;/span>&lt;span class="p">[:&lt;/span>&lt;span class="nx">n&lt;/span>&lt;span class="p">]))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">BenchmarkSocket&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">b&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">testing&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">B&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">args&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="p">[][]&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">[]&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="s">&amp;#34;tcp&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;0.0.0.0:8080&amp;#34;&lt;/span>&lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">[]&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="s">&amp;#34;unix&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;jinsu.sock&amp;#34;&lt;/span>&lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="nx">_&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">arg&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="k">range&lt;/span> &lt;span class="nx">args&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">b&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Run&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">arg&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">b&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">testing&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">B&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">//log.Println(&amp;#34;Out&amp;#34;) // b.Nê³¼ ìƒê´€ ì—†ì´ argsì˜ ê¸¸ì´ì— ë”°ë¼ ì¶œë ¥ë¨.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">conn&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">net&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Dial&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">arg&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="nx">arg&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">assert&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">NoError&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">b&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">buf&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nb">make&lt;/span>&lt;span class="p">([]&lt;/span>&lt;span class="kt">byte&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1024&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="nx">i&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="nx">i&lt;/span> &lt;span class="p">&amp;lt;&lt;/span> &lt;span class="nx">b&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">N&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="nx">i&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">//log.Println(&amp;#34;In&amp;#34;) // b.Në§Œí¼ ìˆ˜í–‰ë¨
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">_&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">conn&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Write&lt;/span>&lt;span class="p">([]&lt;/span>&lt;span class="nb">byte&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;ping&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">assert&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">NoError&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">b&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">_&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">conn&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Read&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">buf&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">!&lt;/span>&lt;span class="nx">errors&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Is&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">io&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">EOF&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">b&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Fail&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">$ go &lt;span class="nb">test&lt;/span> -bench&lt;span class="o">=&lt;/span>. -benchtime&lt;span class="o">=&lt;/span>100000x
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">goos: linux
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">goarch: amd64
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pkg: uds
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">BenchmarkSocket/tcp 100000 &lt;span class="m">104537&lt;/span> ns/op
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">BenchmarkSocket/unix 100000 &lt;span class="m">83456&lt;/span> ns/op
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">PASS
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ok uds 18.808s
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>10000ë²ˆì˜ ping-pongì„ ìˆ˜í–‰í•˜ëŠ” ë²¤ì¹˜ë§ˆí¬ë¥¼ ìˆ˜í–‰í–ˆë‹¤.
ê·¸ ê²°ê³¼ &lt;strong>TCP socketì„ ì´ìš©í•  ê²½ìš°ëŠ” í•œ ë²ˆì˜ ping-pongì— ì•½ 104537ns, unix domain socketì„ ì´ìš©í•  ê²½ìš°ëŠ” í•œ ë²ˆì˜ ping-pongì— ì•½ 83456ns&lt;/strong>ê°€ ì†Œìš”ëœ ê²ƒì„ ë³´ì•„ &lt;strong>ì˜ˆìƒëŒ€ë¡œ ë„¤íŠ¸ì›Œí¬ í†µì‹ ì´ ì¼ì ˆ í•„ìš”í•˜ì§€ ì•Šì€ unix domain socketì´ ì¢€ ë” ì„±ëŠ¥ì´ ì¢‹ì€ ê²ƒìœ¼ë¡œ ë³´ì—¬ì¡Œë‹¤&lt;/strong>. ì‚¬ì „ì— ìë£Œ ì¡°ì‚¬ë¥¼ í•  ë•Œì—ëŠ” unix domain socketì´ tcp socketì„ ì´ìš©í•  ë•Œë³´ë‹¤ ì•½ 2ë°°ê°€ëŸ‰ ì„±ëŠ¥ì´ ìš°ì›”í•  ê²ƒì´ë¼ê³  ë“¤ì—ˆëŠ”ë°, ê·¸ë ‡ê²Œ ë§ì€ ì°¨ì´ê°€ ë‚˜ëŠ” ê²ƒ ê°™ì§€ëŠ” ì•Šë‹¤. í•˜ì§€ë§Œ ì–´ëŠ ì •ë„ ë°ì´í„°ì˜ í¬ê¸°ë‚˜ ë²„í¼ì˜ í¬ê¸°ì— ë”°ë¼ ë‹¬ë¼ì§ˆ ìˆ˜ë„ ìˆì„ ê²ƒ ê°™ê³  ë” ê¹Šì€ ì›ë¦¬ë“¤ì´ ì¡´ì¬í•  ê²ƒ ê°™ì•„ ë” ìì„¸íˆëŠ” ì¸¡ì •í•´ë³´ì§€ ëª»í–ˆë‹¤.&lt;/p>
&lt;h2 id="ë§ˆì¹˜ë©°">ë§ˆì¹˜ë©°&lt;/h2>
&lt;p>ì‚¬ì‹¤ ì´ë²ˆì— ë‹¤ë£¬ ì†Œì¼“ì´ë¼ëŠ” ì£¼ì œëŠ” Goë¡œ ì ìš©í•´ë³´ëŠ” Computer Scienceë¼ëŠ” ì´ ì‹œë¦¬ì¦ˆë¥¼ ì •ë¦¬í•´ë‚˜ê°€ë˜ ì´ˆê¸°ì— 2ë²ˆ ì§¸ ê¸€ë¡œ ì‹œë„í–ˆë˜ ì£¼ì œì˜€ëŠ”ë° ë‹¹ì‹œì—” Go benchmarkë„ ì²˜ìŒ ì‚¬ìš©í•´ë´¤ì—ˆê³  ë‚´ìš©ì´ ì–´ë ¤ì› ë˜ í„°ë¼ ë²¤ì¹˜ë§ˆí¬ë„ ì œëŒ€ë¡œ ë˜ì§€ ì•Šê³  ì •ë¦¬ë„ í•˜ê¸° í˜ë“¤ì–´ì„œ ì¤‘ë‹¨í–ˆë˜ ì£¼ì œì´ë‹¤. í•˜ì§€ë§Œ ì´ë²ˆì—” ê°™ì€ ë‚´ìš©ì— ëŒ€í•´ ë‘ ë²ˆì§¸ ì •ë¦¬í•´ì„œì¸ì§€ ì „ë³´ë‹¤ ë‚´ìš©ë„ ì˜ ì´í•´ëê³ , ë²¤ì¹˜ë§ˆí‚¹ ì½”ë“œì™€ ê²°ê³¼ë„ ê¹”ë”í•˜ê²Œ ë‚˜ì™”ë˜ ê²ƒ ê°™ì•„ ë¿Œë“¯í•˜ë‹¤.&lt;/p>
&lt;p>ê·¸ë¦¬ê³  ê·¸ ë™ì•ˆ ë„ì»¤ë‚˜ MySQL ê°™ì€ ì˜¤í”ˆì†ŒìŠ¤ë“¤ì„ ì‚¬ìš©í•˜ë©´ì„œ ê°„í˜¹ ì†Œì¼“ì— ëŒ€í•œ ì˜¤ë¥˜ë¥¼ ì ‘í•  ë•Œë‚˜ ì´ëŸ° ì €ëŸ° ê¸€ì—ì„œ ì†Œì¼“ ê´€ë ¨í•œ ë‚´ìš©ì´ ë“±ì¥í•  ë•Œ ì •í™•íˆ ì–´ë–¤ ì—­í• ì¸ì§€ ì´ìœ ê°€ ë­”ì§€ ìì„¸íˆ ì•Œì§€ ëª»í–ˆëŠ”ë° ì´ë²ˆ ê¸°íšŒë•ì— ì•ìœ¼ë¡œëŠ” ì¢€ ë” ì˜ ì´í•´í•´ë³¼ ìˆ˜ ìˆì„ ê²ƒ ê°™ë‹¤.&lt;/p>
&lt;h2 id="ì°¸ê³ ">ì°¸ê³ &lt;/h2>
&lt;ul>
&lt;li>
&lt;p>ì†Œì¼“ &lt;a class="link" href="http://www.ktword.co.kr/abbr_view.php?nav=&amp;amp;m_temp1=280&amp;amp;id=742" target="_blank" rel="noopener"
>http://www.ktword.co.kr/abbr_view.php?nav=&amp;m_temp1=280&amp;id=742&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ë„¤íŠ¸ì›Œí¬ ì†Œì¼“ &lt;a class="link" href="https://ko.wikipedia.org/wiki/%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC_%EC%86%8C%EC%BC%93" target="_blank" rel="noopener"
>https://ko.wikipedia.org/wiki/%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC_%EC%86%8C%EC%BC%93&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ì†Œì¼“ í”„ë¡œê·¸ë˜ë° &lt;a class="link" href="https://recipes4dev.tistory.com/153" target="_blank" rel="noopener"
>https://recipes4dev.tistory.com/153&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>UDS (Unix Domain Socket) &lt;a class="link" href="http://www.dreamy.pe.kr/zbxe/CodeClip/119393" target="_blank" rel="noopener"
>http://www.dreamy.pe.kr/zbxe/CodeClip/119393&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>[Linux/UDS/Unix Domain Socket] UDS &lt;a class="link" href="https://yaaam.tistory.com/entry/LinuxUDSUnix-Domain-Socket-UDS" target="_blank" rel="noopener"
>https://yaaam.tistory.com/entry/LinuxUDSUnix-Domain-Socket-UDS&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Unix file type &lt;a class="link" href="https://en.wikipedia.org/wiki/Unix_file_types" target="_blank" rel="noopener"
>https://en.wikipedia.org/wiki/Unix_file_types&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>C# - .NET Core Unix Domain Socket ì‚¬ìš© ì˜ˆì œ &lt;a class="link" href="https://www.sysnet.pe.kr/2/0/11963" target="_blank" rel="noopener"
>https://www.sysnet.pe.kr/2/0/11963&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Unix Domain Socket &lt;a class="link" href="https://www.joinc.co.kr/w/Site/system_programing/IPC/Unix_Domain_Socket" target="_blank" rel="noopener"
>https://www.joinc.co.kr/w/Site/system_programing/IPC/Unix_Domain_Socket&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Unix Domain Socket - UDP &lt;a class="link" href="https://www.joinc.co.kr/w/Site/system_programing/IPC/Unix_Domain_Socket_UDP" target="_blank" rel="noopener"
>https://www.joinc.co.kr/w/Site/system_programing/IPC/Unix_Domain_Socket_UDP&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>What is the difference between Unix sockets and TCP/IP sockets? &lt;a class="link" href="https://serverfault.com/questions/124517/what-is-the-difference-between-unix-sockets-and-tcp-ip-sockets" target="_blank" rel="noopener"
>https://serverfault.com/questions/124517/what-is-the-difference-between-unix-sockets-and-tcp-ip-sockets&lt;/a>&lt;/p>
&lt;/li>
&lt;/ul></description></item><item><title>ê°œë°œ ì° - Go Memory Leak(ë©”ëª¨ë¦¬ ëˆ„ìˆ˜) ê´€ë ¨ ì´ìŠˆ</title><link>https://umi0410.github.io/blog/golang/go-memory-leak-issue/</link><pubDate>Wed, 27 Jan 2021 15:25:54 +0900</pubDate><guid>https://umi0410.github.io/blog/golang/go-memory-leak-issue/</guid><description>&lt;img src="https://umi0410.github.io/blog/golang/go-memory-leak-issue/memory-leak-graph.png" alt="Featured image of post ê°œë°œ ì° - Go Memory Leak(ë©”ëª¨ë¦¬ ëˆ„ìˆ˜) ê´€ë ¨ ì´ìŠˆ" />&lt;h2 id="ì‹œì‘í•˜ë©°">ì‹œì‘í•˜ë©°&lt;/h2>
&lt;blockquote>
&lt;p>ì´ ê¸€ì€ Go 1.15 ë²„ì „ì„ ë°”íƒ•ìœ¼ë¡œ ê°œë°œí•˜ë©° ê²ªì€ ì´ìŠˆì— ëŒ€í•´ ì„¤ëª…í•˜ê³  ìˆìœ¼ë©° Go 1.16ì—ì„œëŠ” í•´ë‹¹ ì´ìŠˆê°€ ê°œì„ ë  ê²ƒì´ë¼ê³  í•©ë‹ˆë‹¤.&lt;/p>
&lt;/blockquote>
&lt;p>&lt;img src="https://umi0410.github.io/blog/golang/go-memory-leak-issue/memory-leak-graph.png"
width="478"
height="253"
srcset="https://umi0410.github.io/blog/golang/go-memory-leak-issue/memory-leak-graph_hu1f014e9e399a42abc11cd4e02aac56df_8940_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/golang/go-memory-leak-issue/memory-leak-graph_hu1f014e9e399a42abc11cd4e02aac56df_8940_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="memory-leak-graph.png"
class="gallery-image"
data-flex-grow="188"
data-flex-basis="453px"
>&lt;/p>
&lt;p>ì§„í–‰ ì¤‘ì¸ &lt;a class="link" href="https://github.com/search?q=topic%3Akhumu&amp;#43;org%3Akhu-dev&amp;#43;fork%3Atrue" target="_blank" rel="noopener"
>ì¿ ë®¤&lt;/a>ë¼ëŠ” í”„ë¡œì íŠ¸ì—ì„œ Goë¥¼ ì´ìš©í•´ ì´ë¯¸ì§€ì— ëŒ€í•œ url í•´ì‹±, ë¦¬ì‚¬ì´ì§•, ì„¬ë„¤ì¼, ì„¼í„° í¬ë¡­ ì‘ì—…ì„ í•˜ëŠ” ì´ë¯¸ì§€ í”„ë¡œì„¸ì‹± ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ë¥¼ ê°œë°œí•˜ê³ ìˆì—ˆë‹¤. 1ì°¨ì ìœ¼ë¡œ ì–´ëŠ ì •ë„ ê°œë°œì´ ëë‚œ ë’¤ ë²¤ì¹˜ë§ˆí¬ ê²¸ ë¶€í•˜ í…ŒìŠ¤íŠ¸ ê²¸í•´ì„œ ì–¼ë§ˆë‚˜ í•´ë‹¹ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ê°€ ì˜ ë²„í‹°ë©´ì„œ ì‘ì—…ì„ ìˆ˜í–‰í•˜ëŠ”ì§€ í™•ì¸í•´ë³´ë ¤ í–ˆìœ¼ë‚˜ &lt;strong>Memoryê°€ í•œ ë²ˆ ì¹˜ì†Ÿê²Œë˜ë©´ ì–´ëŠ ì •ë„ ì´í•˜ë¡œ ë–¨ì–´ì§€ì§€ ì•ŠëŠ” ì´ìŠˆ&lt;/strong>ê°€ ë°œê²¬ë˜ì—ˆë‹¤.&lt;/p>
&lt;p>í—ˆìš©í•  ìˆ˜ ìˆëŠ” ì–‘ë³´ë‹¤ ë§ì€ ìš”ì²­ì„ ë³´ë‚¼ ê²½ìš° ì• í”Œë¦¬ì¼€ì´ì…˜ ë ˆë²¨ ì´ì „ì—ì„œ ìš”ì²­ì„ ì°¨ë‹¨í•´ì£¼ì§€ ì•Šìœ¼ë©´ ì• í”Œë¦¬ì¼€ì´ì…˜ ë‹¨ì—ì„œëŠ” í„°ì§€ê±°ë‚˜ ë¬¸ì œê°€ ìƒê¸°ëŠ” ê²ƒì€ ë‹¹ì—°í•˜ê² ì§€ë§Œ ì‚¬ì§„ì²˜ëŸ¼ &lt;strong>ì‘ì—…ì„ ë‹¤ ìˆ˜í–‰í•œ ë’¤ì—ë„ ë©”ëª¨ë¦¬ê°€ ì œëŒ€ë¡œ í•´ì œë˜ì§€ ì•ŠëŠ” ê²ƒì´ ì´ìŠˆ&lt;/strong>ì˜€ë‹¤.&lt;/p>
&lt;h2 id="ì´ìŠˆì˜-ì›ì¸ì„-íŒŒí—¤ì¹˜ê¸°-ìœ„í•´-í–ˆë˜-ë…¸ë ¥ë“¤">ì´ìŠˆì˜ ì›ì¸ì„ íŒŒí—¤ì¹˜ê¸° ìœ„í•´ í–ˆë˜ ë…¸ë ¥ë“¤&amp;hellip;&lt;/h2>
&lt;p>ì´ ì´ìŠˆë¥¼ ì¡ì•„ë³´ë ¤ ì—¬ëŸ¬ ê°€ì§€ ë””ë²„ê¹… ì‘ì—…ì„ í•´ë´¤ìœ¼ë‚˜ ê³„ì†í•´ì„œ ë©”ëª¨ë¦¬ ì´ìŠˆê°€ ë°œìƒí–ˆê³ , ê°ì¢… ì»¤ë®¤ë‹ˆí‹°ì—ì„œ ë„ì›€ì„ êµ¬í•´ë³´ê³ ìí–ˆë‹¤. Go ì˜¤í”ˆ ì¹´í†¡ë°©, Reddit, Slack ë“±ì—ì„œ ì˜ê²¬ì„ êµ¬í•´ë³´ì•˜ë‹¤. ì¬ë¯¸ìˆëŠ” ê²½í—˜ì´ì—ˆìœ¼ë©° ë•ë¶„ì— ì›ì¸ì„ íŒŒì•…í•  ìˆ˜ ìˆë˜ ê²ƒ ê°™ë‹¤.&lt;/p>
&lt;p>&lt;img src="https://umi0410.github.io/blog/golang/go-memory-leak-issue/slack-thread.png"
width="848"
height="1150"
srcset="https://umi0410.github.io/blog/golang/go-memory-leak-issue/slack-thread_hu69f0526f70cab8af73be7fa93df29141_179801_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/golang/go-memory-leak-issue/slack-thread_hu69f0526f70cab8af73be7fa93df29141_179801_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="slack-thread.png"
class="gallery-image"
data-flex-grow="73"
data-flex-basis="176px"
>&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>&lt;img src="https://umi0410.github.io/blog/golang/go-memory-leak-issue/reddit.png"
width="765"
height="846"
srcset="https://umi0410.github.io/blog/golang/go-memory-leak-issue/reddit_hu42e416b3ff1d468e25261abe6aea76a6_136808_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/golang/go-memory-leak-issue/reddit_hu42e416b3ff1d468e25261abe6aea76a6_136808_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="reddit.png"
class="gallery-image"
data-flex-grow="90"
data-flex-basis="217px"
>&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;h2 id="ì–´ë–¤-ìƒí™©ì—-memory-leakì´-ë°œìƒí•œ-ê²ƒì¼ê¹Œ">ì–´ë–¤ ìƒí™©ì— Memory Leakì´ ë°œìƒí•œ ê²ƒì¼ê¹Œ?&lt;/h2>
&lt;p>ê·¸ëŸ¼ ìì„¸íˆ ì–´ë–¤ ì´ìŠˆê°€ ìˆì—ˆê³ , ì–´ë–»ê²Œ ê·¸ ìƒí™©ì„ ë¶„ì„í•  ìˆ˜ ìˆì—ˆìœ¼ë©° ì–´ë–»ê²Œ í•´ê²°í•  ìˆ˜ ìˆì„ì§€ ì•Œì•„ë³´ë„ë¡í•˜ê² ë‹¤.&lt;/p>
&lt;p>&lt;strong>tl;dr - ìì„¸í•œ ë¬˜ì‚¬ë³´ë‹¤ëŠ” ê·¸ëƒ¥ ë”± ì›ì¸/ê²°ê³¼ë§Œ ê¶ê¸ˆí•˜ì‹  ë¶„ë“¤ì„ ìœ„í•œ ìš”ì•½&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>ì›ì¸ - í™ ë©”ëª¨ë¦¬ì— ë©”ëª¨ë¦¬ë¥¼ í• ë‹¹ë°›ì•˜ëŠ”ë° í˜¹ì‹œ &lt;strong>ì¬ì‚¬ìš©í•  ìˆ˜ë„ ìˆì–´ OSì—ê²Œ ë°”ë¡œ ë©”ëª¨ë¦¬ë¥¼ ë°˜í™˜í•˜ì§€ ì•ŠìŒ&lt;/strong>.&lt;/li>
&lt;li>ê²°ê³¼ - &lt;strong>OSê°€ ë©”ëª¨ë¦¬ ë¶€ì¡±í•˜ë‹ˆ ë‹¬ë¼ê³  í•˜ë©´ ê·¸ë•Œ í™ ë©”ëª¨ë¦¬ ì‚¬ì´ì¦ˆë¥¼ ì‹¤ì œë¡œ ì¤„ì¸ë‹¤&lt;/strong>. (&lt;em>í•˜ì§€ë§Œ go 1.16 ë²„ì „ë¶€í„°ëŠ” ê°œì„ ë  ì˜ˆì •ì´ë‹¤.&lt;/em>)&lt;/li>
&lt;li>ì •í™•íˆ ì´ëŸ¬í•œ ê²ƒì„ ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ë¼ê³  í•˜ëŠ”ì§€ëŠ” ëª…í™•í•˜ì§€ ì•Šë‹¤. Go ëŸ°íƒ€ì„ì´ ë†€ê³  ìˆëŠ” ë©”ëª¨ë¦¬ë¥¼ ê°–ê³ ëŠ” ìˆì§€ë§Œ ì–¸ì œë“  OSì—ê²Œ ë°˜í™˜í•´ì¤„ ìˆ˜ëŠ” ìˆê¸° ë•Œë¬¸ì´ë‹¤. (&lt;em>í•˜ì§€ë§Œ ë§¤ë„ëŸ½ê²Œ OSì—ê²Œ ë°˜í™˜í•´ì£¼ëŠ” ëŠë‚Œì€ ì•„ë‹ˆê¸´í–ˆë‹¤.&lt;/em>)&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;time&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">(){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="nx">routine&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="nx">routine&lt;/span> &lt;span class="p">&amp;lt;&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="nx">routine&lt;/span> &lt;span class="o">++&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nf">DoFloat&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// dummy waiting..
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Sleep&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Second&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">DoFloat&lt;/span>&lt;span class="p">(){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">var&lt;/span> &lt;span class="nx">tmp&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="mi">400000000&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="kt">float64&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">tmp&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="c1">// tmpì— ì ‘ê·¼í•˜ì§€ ì•Šìœ¼ë©´ unused variableì´ ë˜ê¸° ë•Œë¬¸ì— dummyí•œ access ì‘ì—… ìˆ˜í–‰
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ì²˜ìŒì—” ì´ë¯¸ì§€ ë¦¬ì‚¬ì´ì§• ì‹œ ë©”ëª¨ë¦¬ê°€ ì œëŒ€ë¡œ í•´ì œë˜ì§€ì•ŠëŠ” ê²ƒì„ ë³´ê³  ì´ìŠˆë¥¼ ë°œê²¬í–ˆì§€ë§Œ, ì‚¬ëŒë“¤ì—ê²Œ ë„ì›€ì„ êµ¬í•˜ê³ ì í•  ë•Œ, ì´ìŠˆì— ëŒ€í•´ ì„¤ëª…í•  ë•Œ ì „ì²´ í”„ë¡œê·¸ë¨ ì½”ë“œë¥¼ ì²¨ë¶€í•  ìˆ˜ëŠ” ì—†ì—ˆê¸°ì— &lt;strong>ë¬¸ì œ ìƒí™©ì„ ê°„ë‹¨í•˜ê²Œ í‘œí˜„í•  ìˆ˜ ìˆëŠ” ì½”ë“œë¥¼ ì§œë³´ê³ ì&lt;/strong>í–ˆë‹¤. ì´ë¦¬ ì €ë¦¬ í”„ë¡œê·¸ë¨ì„ ê°„ì†Œí™”í•˜ë©´ì„œ &lt;strong>ì»¤ë‹¤ë€ ë°°ì—´ ìƒì„±ì‹œì—ë„ ê°™ì€ ë©”ëª¨ë¦¬ ì´ìŠˆ&lt;/strong>ê°€ ë°œìƒí•œë‹¤ëŠ” ê²ƒì„ ì•Œê²Œë˜ì—ˆë‹¤.&lt;/p>
&lt;p>ê·¸ë˜ì„œ ì•„ì£¼ ê°„ë‹¨í•œ ë°°ì—´ ìƒì„± ì˜ˆì‹œë¥¼ í†µí•´ ì‚¬ëŒë“¤ì—ê²Œ ì´ ì´ìŠˆì— ëŒ€í•´ ì„¤ëª…í•´ë³´ê³ ìí–ˆë‹¤. ì´ ì˜ˆì‹œì—ì„œëŠ” &lt;code>8ë°”ì´íŠ¸ì˜ float6&lt;/code>4ë¡œ ì´ë£¨ì–´ì§„ &lt;code>400000000ì¹¸ì˜ ë°°ì—´ tmp&lt;/code>ë¥¼ ì„ ì–¸í•œë‹¤.&lt;/p>
&lt;p>&lt;img src="https://umi0410.github.io/blog/golang/go-memory-leak-issue/unit-conversion.png"
width="569"
height="167"
srcset="https://umi0410.github.io/blog/golang/go-memory-leak-issue/unit-conversion_hufbecc09a52a79e4f645bd7e3e96526f8_8388_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/golang/go-memory-leak-issue/unit-conversion_hufbecc09a52a79e4f645bd7e3e96526f8_8388_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="unit-conversion.png"
class="gallery-image"
data-flex-grow="340"
data-flex-basis="817px"
>&lt;/p>
&lt;p>8ë°”ì´íŠ¸ê°€ 400000000ì¹¸ì´ë©´ &lt;code>400000000 * 8 / 1024(KB) / 1024(MB) / 1024(GB) = ì•½ 2.9GB&lt;/code> í˜¹ì€ ê·¸ëŒ€ë¡œ 1000ë‹¨ìœ„ ì”©ìœ¼ë¡œ ë‚˜ëˆ  &lt;code>3.2GB&lt;/code>ì„ í• ë‹¹í•˜ëŠ” ê²ƒì´ë‹¤.&lt;/p>
&lt;p>ì›ë˜ëŠ” ìŠ¤íƒ ë©”ëª¨ë¦¬ì— í• ë‹¹ëœ ë’¤ ë‹¤ë¥¸ ê³³ì—ì„œ ì´ ë…€ì„ì„ ì°¸ì¡°í•˜ëŠ” ì¼ì´ ì—†ê¸° ë•Œë¬¸ì— ë°”ë¡œ releaseë˜ì–´ ìŠ¤íƒ ë©”ëª¨ë¦¬ì—ì„œ ì ìœ ê°€ í•´ì œë˜ì–´ì•¼í•œë‹¤. í•˜ì§€ë§Œ ëª‡ëª‡ ê²½ìš°ì— ìŠ¤íƒì´ ì•„ë‹Œ í™ì— ë°ì´í„°ê°€ ì €ì¥ë  ìˆ˜ ìˆë‹¤ê³  í•˜ëŠ”ë°, ì´ ê²½ìš°ì—ëŠ” ë„ˆë¬´ í° ê°’ì„ ì„ ì–¸í•˜ì—¬ ìŠ¤íƒì´ ì•„ë‹Œ í™ì— ë°ì´í„°ê°€ ì €ì¥ë˜ì—ˆê³ , í™ì´ í• ë‹¹ë°›ì€ ë©”ëª¨ë¦¬ë¥¼ í•´ì œí•´ì£¼ì§€ ì•Šì•„ ìƒê¸°ëŠ” ë¬¸ì œì˜€ë‹¤. ì‚¬ì‹¤ ì´ëŸ° í˜„ìƒë„ ì •í™•íˆ ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ í˜¹ì€ Memory Leakë¼ê³  í•˜ëŠ”ì§€ëŠ” ì˜ ëª¨ë¥´ê² ë‹¤. ì™œëƒí•˜ë©´ &lt;strong>ë©”ëª¨ë¦¬ì—ì„œ í•´ì œí•  ìˆ˜ ì—†ëŠ” ìˆ˜ì¤€ìœ¼ë¡œ ê·¸ ê°’ì˜ ì£¼ì†Œë¥¼ ìƒì–´ë²„ë ¤ ì‹¤ì œë¡œ ê·¸ ê³µê°„ì´ ëˆ„ìˆ˜ê°€ ë˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ì•„ì§ ë”±íˆ OSê°€ ë¶€ë‹´ì„ ëŠë¼ì§€ ì•Šê¸° ë•Œë¬¸ì— Go Runtimeì˜ Heapì—ì„œ í•´ë‹¹ ì£¼ì†ŒëŠ” ë¹„ì›Œë’€ì§€ë§Œ OSì—ê²Œ ë°˜ë‚©ì€ ì•ˆ í•œ ìƒíƒœ&lt;/strong>ì¸ ê²ƒì´ê¸° ë•Œë¬¸ì´ë‹¤.&lt;/p>
&lt;p>&lt;img src="https://umi0410.github.io/blog/golang/go-memory-leak-issue/top-memory-leak.png"
width="1011"
height="168"
srcset="https://umi0410.github.io/blog/golang/go-memory-leak-issue/top-memory-leak_hu95afae50a0e35fe52fc1dc07fc2fa740_148991_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/golang/go-memory-leak-issue/top-memory-leak_hu95afae50a0e35fe52fc1dc07fc2fa740_148991_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="top-memory-leak.png"
class="gallery-image"
data-flex-grow="601"
data-flex-basis="1444px"
>&lt;/p>
&lt;p>ì‹¤í–‰í•´ë³´ë©´ 10ë²ˆì˜ DoFloat() í›„ì— ê·¸ëƒ¥ for loopì—ì„œ time.Sleep ì¤‘ì´ê¸°ì— &lt;strong>CPUë¥¼ ê±°ì˜ ì‚¬ìš©í•˜ì§€ ì•Šê³  ìˆëŠ” ë°˜ë©´ ë‚´ Laptopì˜ 16GBì˜ Memory ì¤‘ 20.5%ì¸ 3.2GBë¥¼ ì‚¬ìš© ì¤‘&lt;/strong>ì¸ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆì—ˆë‹¤.&lt;/p>
&lt;h2 id="í•´ê²°-í•´ë³´ê¸°">í•´ê²° í•´ë³´ê¸°&lt;/h2>
&lt;h3 id="go-runtimeì€-osì—ê²Œ-ë”-ì´ìƒ-ì´-ë©”ëª¨ë¦¬ê°€-í•„ìš”í•˜ì§€-ì•Šë‹¤ê³ -ì•Œë ¤ì£¼ê¸°ë§Œ-í•˜ì§€-ê·¸-memoryë¥¼-ì‹¤ì œë¡œ-íšŒìˆ˜í• -ì§€-ë§ì§€ëŠ”-osì—ê²Œ-ë‹¬ë ¤ìˆë‹¤">Go runtimeì€ OSì—ê²Œ ë” ì´ìƒ ì´ ë©”ëª¨ë¦¬ê°€ í•„ìš”í•˜ì§€ ì•Šë‹¤ê³  ì•Œë ¤ì£¼ê¸°ë§Œ í•˜ì§€ ê·¸ Memoryë¥¼ ì‹¤ì œë¡œ íšŒìˆ˜í•  ì§€ ë§ì§€ëŠ” OSì—ê²Œ ë‹¬ë ¤ìˆë‹¤.&lt;/h3>
&lt;blockquote>
&lt;p>The Go runtime only advises the OS when it no longer needs memory and it is up to the OS to reclaim it - @justinisrael&lt;/p>
&lt;/blockquote>
&lt;p>ë‚´ê°€ Redditì—ì„œ ì‚¬ëŒë“¤ê»˜ ì—¬ì­¤ë´¤ë˜ ê¸€ì— ë‹´ê¸´ í•œ ëŒ“ê¸€ì„ ì¸ìš©í•´ë³´ì•˜ë‹¤. ê³¼ì—° ì € ë§ì´ ì‚¬ì‹¤ì¼ê¹Œ? í”„ë¡œì„¸ìŠ¤ë¥¼ ì—¬ëŸ¬ë²ˆ ë„ì›Œë³´ì•˜ë‹¤.&lt;/p>
&lt;p>&lt;img src="https://umi0410.github.io/blog/golang/go-memory-leak-issue/top-multiple-process.png"
width="766"
height="180"
srcset="https://umi0410.github.io/blog/golang/go-memory-leak-issue/top-multiple-process_hufe31e37f113f3799dd881c2f2d7ba7ae_38707_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/golang/go-memory-leak-issue/top-multiple-process_hufe31e37f113f3799dd881c2f2d7ba7ae_38707_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="top-multiple-process.png"
class="gallery-image"
data-flex-grow="425"
data-flex-basis="1021px"
>&lt;/p>
&lt;p>í”„ë¡œì„¸ìŠ¤ë¥¼ í•˜ë‚˜ ë„ì› ì„ ë•Œì—ëŠ” ì•„ê¹ŒëŠ” Dummy waiting ì¤‘ì´ë©´ì„œë„ &lt;strong>Memoryë¥¼ 20% ê°€ê¹Œì´ ì ìœ í•˜ê³  ìˆì—ˆëŠ”ë° ì—¬ëŸ¬ í”„ë¡œì„¸ìŠ¤ë¥¼ ë„ìš°ë©´ì„œ ë©”ëª¨ë¦¬ê°€ ë¶€ì¡±í•´ì§€ì ë†€ê³ ìˆë˜ Heap memoryë¥¼ ë°˜í™˜í•˜ì—¬ ê±°ì˜ ì•½ 0.6%ì˜ ë©”ëª¨ë¦¬ë§Œ ì ìœ &lt;/strong> ì¤‘ì¸ ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤.&lt;/p>
&lt;p>ë§ˆì§€ë§‰ í”„ë¡œì„¸ìŠ¤ëŠ” ì•„ì§ DoFloat() ì‘ì—…ì„ ì§„í–‰ ì¤‘ì´ë¯€ë¡œ ì—¬ì „íˆ 19.8%ì˜ ë©”ëª¨ë¦¬ë¥¼ ì ìœ  ì¤‘ì´ê³ , ì‘ì—…ì´ ì™„ë£Œëœ ë’¤ì—ë„ OSê°€ Reclaim(ë‹¤ì‹œ ë©”ëª¨ë¦¬ë¥¼ ê°€ì ¸ê°€ëŠ” ê²ƒ)í•˜ê¸° ì „ê¹Œì§€ëŠ” ì•½ 20%ëŒ€ë¥¼ ìœ ì§€í•˜ëŠ” ê²ƒìœ¼ë¡œ ë³´ì—¬ì¡Œë‹¤.&lt;/p>
&lt;p>í•˜ì§€ë§Œ ì¢€ ë” ìì„¸íˆ ê¸°ë¡í•´ë³´ê³ ì‹¶ì—ˆë‹¤. Goì˜ ë‚´ì¥ íŒ¨í‚¤ì§€ &lt;code>runtime&lt;/code>ì˜ Memory ê´€ë ¨ ê¸°ëŠ¥ì„ ì´ìš©í•˜ë©´ ë  ê²ƒ ê°™ì•˜ë‹¤. &lt;code>runtime.ReadMemStats(*runtime.MemStats)&lt;/code>ë¥¼ ì´ìš©í•˜ë©´ ëŸ°íƒ€ì„ ë„ì¤‘ ìì‹ ì˜ ëŸ°íƒ€ì„ ìƒí™©ì„ ì•Œì•„ë³¼ ìˆ˜ ìˆë‹¤. ìì„¸í•œ ì‚¬ìš©ë²•ì€ êµ¬ê¸€ë§ì„ í†µí•´ ì‰½ê²Œ ì–»ì„ ìˆ˜ ìˆìœ¼ë‹ˆ ì§€ë©´ ê´€ê³„ìƒ ìƒëµí•œë‹¤.&lt;/p>
&lt;p>&lt;img src="https://umi0410.github.io/blog/golang/go-memory-leak-issue/runtime-memory-leak.png"
width="387"
height="231"
srcset="https://umi0410.github.io/blog/golang/go-memory-leak-issue/runtime-memory-leak_hub8c90c70b0c23dfa44a0b6e91e7a7e33_13785_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/golang/go-memory-leak-issue/runtime-memory-leak_hub8c90c70b0c23dfa44a0b6e91e7a7e33_13785_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="runtime-memory-leak.png"
class="gallery-image"
data-flex-grow="167"
data-flex-basis="402px"
>&lt;/p>
&lt;p>ì¦‰ í™ ë©”ëª¨ë¦¬ê°€ í™•ë³´ê°„ ê³µê°„ì€ ê±°ëŒ€í•œ ë°°ì—´ì„ ìƒì„±í•˜ëŠ” í•¨ìˆ˜ì¸ DoFloatì„ ì§„í–‰í•˜ëŠ” ë™ì•ˆì€ ì‹¤ì œë¡œ Allocate í• ë‹¹í•˜ì—¬ ì‚¬ìš©í•˜ëŠ” ë°˜ë©´ DoFloatì„ ëª¨ë‘ ë§ˆì¹œ ë’¤ì—ëŠ” &lt;strong>í™ ë©”ëª¨ë¦¬ëŠ” ê³µê°„ì„ í™•ë³´í•˜ê³ ëŠ” ìˆì§€ë§Œ Idle(ë†€ê³  ìˆëŠ”) ìƒíƒœë¡œ ì¡´ì¬&lt;/strong>í•˜ëŠ” ê²ƒì´ì—ˆë‹¤.&lt;/p>
&lt;p>ë‚˜ëŠ” ì´ëŸ¬í•œ ê²½ìš°ë¥¼ ì²˜ìŒ ë§ì´í–ˆì§€ë§Œ, &lt;strong>ê°ì¢… ê°€ë¹„ì§€ ì»¬ë ‰í„°ê°€ ìˆëŠ” ì–¸ì–´ì—ì„œ ê°ê°ì˜ ê°€ë¹„ì§€ ì»¬ë ‰í„°ë‚˜ ëŸ°íƒ€ì„ì„ êµ¬í˜„í•˜ëŠ” ë°©ë²•ì— ë”°ë¼ ì´ëŸ° ì‹ìœ¼ë¡œ í™ ë©”ëª¨ë¦¬ë¥¼ ì¬ì‚¬ìš©í•˜ëŠ” ê²½ìš°ë¥¼ ëŒ€ë¹„í•´ í•œ ë²ˆ í• ë‹¹ë°›ì€ ë©”ëª¨ë¦¬ë¥¼ ì™„ì „íˆ OSì—ê²Œ ë°˜í™˜í•˜ì§€ ì•ŠëŠ” ê²½ìš°ê°€ ìˆë‹¤&lt;/strong>ê³  í•œë‹¤.&lt;/p>
&lt;h3 id="go-116-ë²„ì „ë¶€í„°ëŠ”-ë©”ëª¨ë¦¬-ê³„ì‚°-ë°©ì‹ì´-ë°”ë€”-ê²ƒì´ë‹¤-ê·¸ë˜ì„œ-ê´œì°®ì„-ê²ƒì´ë‹¤">Go 1.16 ë²„ì „ë¶€í„°ëŠ” ë©”ëª¨ë¦¬ ê³„ì‚° ë°©ì‹ì´ ë°”ë€” ê²ƒì´ë‹¤. (ê·¸ë˜ì„œ ê´œì°®ì„ ê²ƒì´ë‹¤.)&lt;/h3>
&lt;blockquote>
&lt;p>&amp;ldquo;There was a change to how memory is calculated on 1.16&amp;rdquo; - @gopj&lt;/p>
&lt;/blockquote>
&lt;p>ê³¼ì—° ì‚¬ì‹¤ì¼ì§€ í™•ì¸í•´ë³´ì. ê°„ë‹¨íˆ Dockerë¥¼ í†µí•´ ë‚˜ì˜ Local í™˜ê²½ì—ì„œ ë³„ ë‹¤ë¥¸ ì„¸íŒ… ì—†ì´ Go ë²„ì „ì„ ë‹¤ë¥´ê²Œ í•˜ì—¬ ì‹¤í–‰í•  ìˆ˜ ìˆì—ˆë‹¤. ì‹¤ì œë¡œ ì´ ì´ìŠˆë¥¼ ì»¤ë®¤ë‹ˆí‹°ì— ì œê¸°í•˜ê¸° ì „ì—ë„ Dockerë¥¼ ì´ìš©í•´ 1.2, 1.3, 1.4 ë“±ì˜ ë²„ì „ì—ì„œë„ ì‹¤í–‰í•´ë³´ì•˜ë‹¤. ë‚˜ì˜ ë©íƒ‘ì€ 1.5 ë²„ì „ì„ ì‚¬ìš© ì¤‘ì´ì—ˆë‹¤. 1.16 ë²„ì „ì€ ì•„ì§ rcëŠ” Release Candidateì˜ ì¤„ì„ë§ë¡œ ë³´í†µ ë°°í¬ í›„ë³´ ë²„ì „ì„ ì˜ë¯¸í•œë‹¤.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-docker" data-lang="docker">&lt;span class="line">&lt;span class="cl">&lt;span class="c"># Dockerfile&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span>&lt;span class="k">FROM&lt;/span>&lt;span class="s"> golang:1.16-rc&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span>&lt;span class="k">WORKDIR&lt;/span>&lt;span class="s"> /app&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span>&lt;span class="k">COPY&lt;/span> main.go main.go&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span>&lt;span class="k">ENTRYPOINT&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;go&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span>&lt;span class="k">CMD&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;run&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;./main.go&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ì´ë¯¸ì§€ ë¹Œë“œ í›„ ì»¨í…Œì´ë„ˆ ì‹¤í–‰&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ docker build . -t tmp &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> docker run --rm --it tmp
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="https://umi0410.github.io/blog/golang/go-memory-leak-issue/go-1.16-memory-not-leaking.png"
width="759"
height="63"
srcset="https://umi0410.github.io/blog/golang/go-memory-leak-issue/go-1.16-memory-not-leaking_hue8ad343e4b80c73af1daf2aadf5c34cb_12663_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/golang/go-memory-leak-issue/go-1.16-memory-not-leaking_hue8ad343e4b80c73af1daf2aadf5c34cb_12663_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="go-1.16-memory-not-leaking.png"
class="gallery-image"
data-flex-grow="1204"
data-flex-basis="2891px"
>&lt;/p>
&lt;p>&lt;code>1.16-rc&lt;/code> ë²„ì „ì„ ì‚¬ìš©í•˜ì ê²°ê³¼ì ìœ¼ë¡œ ë‹¤ë¥¸ ë©”ëª¨ë¦¬ ë¶€í•˜ê°€ ì‹¬í•œ í”„ë¡œì„¸ìŠ¤ë¥¼ ì‹¤í–‰ì‹œí‚¤ì§€ ì•Šì•˜ì§€ë§Œ &lt;strong>ìˆ˜ì‹­ ì´ˆ ì´ë‚´ì— ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” í™ ë©”ëª¨ë¦¬ê°€ OSì—ê²Œ ë°˜í™˜&lt;/strong>ë˜ì—ˆë‹¤!!!&lt;/p>
&lt;blockquote>
&lt;p>í•˜ì§€ë§Œ ì—¬ì „íˆ runtime.MemStatsì—ì„œëŠ” HeapMemoryì— Idleí•œ ë©”ëª¨ë¦¬ í¬ê¸°ê°€ í¬ê²Œ ì¡í˜€ìˆì—ˆëŠ”ë°, ì´ ë¶€ë¶„ì€ rc ë²„ì „ì´ê¸° ë•Œë¬¸ì— runtimeê¹Œì§€ ì™„ì „íˆ ê¸°ëŠ¥ì´ ê°œë°œë˜ì§€ ì•Šì•„ì„œì¸ì§€ ì´ì „ì—ë„ ë©”ëª¨ë¦¬ëŠ” ë°˜í™˜í–ˆì§€ë§Œ ë©”ëª¨ë¦¬ë¥¼ í‘œì‹œí•˜ê¸° ìœ„í•œ ê³„ì‚°ì˜ ë¬¸ì œë§Œ ê°œì„ ì´ ëœ ê²ƒì¸ì§€ëŠ” í™•ì‹¤í•˜ì§„ ì•Šì§€ë§Œ ì—¬íŠ¼ ì´ìŠˆì— ëŒ€í•´ì„œëŠ” íŒŒì•…í•  ìˆ˜ ìˆì—ˆë‹¤!&lt;/p>
&lt;/blockquote>
&lt;h2 id="ë§ˆì¹˜ë©°">ë§ˆì¹˜ë©°&lt;/h2>
&lt;p>ê°œë°œì´ë‚˜ ìš´ì˜ì„ í•˜ë©´ì„œ ì´ëŸ° ì €ëŸ° ì´ìŠˆë“¤ì´ ìˆì—ˆì§€ë§Œ ì´ë²ˆ ê²½ìš°ì²˜ëŸ¼ ë¡œìš° ë ˆë²¨ìŠ¤ëŸ½ê²Œ ë“¤ì–´ê°€ì„œ ëŸ°íƒ€ì„ ë™ì•ˆ ë©”ëª¨ë¦¬ ê´€ë¦¬ê°€ ì–´ë–»ê²Œ ë˜ëŠ”ì§€ê¹Œì§€ íƒêµ¬í•´ë³¸ ì ì€ ë“œë¬¼ì—ˆë˜ ê²ƒ ê°™ë‹¤. ë„ì €íˆ ì›ì¸ì„ ëª¨ë¥´ê² ì–´ì„œ &amp;lsquo;&lt;em>í•˜ ê²°êµ­ í¬ê¸°í•˜ê³  ì´ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ëŠ” Lambdaë¡œ ëŒë ¤ì•¼í•˜ë‚˜&amp;hellip;&lt;/em>&amp;rsquo; ì‹¶ì—ˆë‹¤. í•˜ì§€ë§Œ ëª‡ ì‹œê°„ì„ ê³ ìƒí•˜ê³  ì§ì ‘ ì˜ê²¬ì„ êµ¬í•˜ëŸ¬ ë‹¤ë‹ˆë©´ì„œ ìƒˆë¡œ ë°°ìš°ê²Œ ëœ ë‚´ìš©ë„ ë§ì•˜ê³ , ì™¸êµ­ì— ê³„ì‹  ëª‡ëª‡ ê°œë°œì ë¶„ë“¤ê³¼ë„ ì´ë ‡ê²Œ ì†Œí†µí•  ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì´ ì‹ ê¸°í–ˆë‹¤. (&lt;em>ê·¸ë¦¬ê³  ì°¸ ì„¸ì„¸í•œ ì§€ì‹ê¹Œì§€ ê²¸ë¹„í•œ ë¶„ë“¤ì´ ë§ë‹¤ëŠ” ê²ƒì´ ë†€ë¼ì› ë‹¤&amp;hellip;&lt;/em>)&lt;/p>
&lt;p>ê²°ê³¼ì ìœ¼ë¡œ í•´ë‹¹ ì´ìŠˆëŠ” ì•„ë§ˆ Goì˜ &lt;code>1.16&lt;/code> ë²„ì „ì´ íŒ¨ì¹˜ë˜ë©´ ì™„ì „íˆ í•´ê²° ê°€ëŠ¥í•  ê²ƒ ê°™ê³  ê·¸ ì´ì „ì—ë„ ì‚¬ì‹¤ Hostì—ì„œ ë©”ëª¨ë¦¬ ë¶€ë‹´ì„ ëŠë¼ë©´ Go runtimeì´ ì•ˆ ì“°ê³  ìˆëŠ” í™ ë©”ëª¨ë¦¬ë¥¼ ë°˜í™˜í•´ì¤€ë‹¤ê³  í•˜ë‹ˆ í° ë¬¸ì œëŠ” ì—†ì„ ê²ƒ ê°™ë‹¤. í•˜ì§€ë§Œ ì‹¤ì œë¡œ Hostê°€ ë¶€ë‹´ì„ ëŠë¼ëŠ” ì„  ì´ì „ì— ë©”ëª¨ë¦¬ë¥¼ ë°˜í™˜ë°›ê³  ì‹¶ë‹¤ë©´ Pod levelì—ì„œ ë©”ëª¨ë¦¬ ë¦¬ì†ŒìŠ¤ë¥¼ ì œí•œí•´ë³¼ ìˆ˜ëŠ” ìˆì„ ê²ƒ ê°™ë‹¤.&lt;/p>
&lt;p>í˜¹ì‹œ ë‹¤ìŒì—ë„ ì´ëŸ° í”ì¹˜ ì•Šì€ ê³ ëœ ì´ìŠˆë¥¼ ë§ì´í•œë‹¤ë©´ ê·¸ ì›ì¸ê³¼ í•´ë²•ì„ ì´ë ‡ê²Œ ë˜ ê¸°ë¡í•  ìˆ˜ ìˆê¸°ë¥¼ ë°”ë˜ë³¸ë‹¤.&lt;/p></description></item></channel></rss>