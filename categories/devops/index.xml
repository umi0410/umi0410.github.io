<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>devops on Jinsu Playground</title><link>https://umi0410.github.io/categories/devops/</link><description>Recent content in devops on Jinsu Playground</description><generator>Hugo -- gohugo.io</generator><language>ko-kr</language><lastBuildDate>Thu, 11 Aug 2022 03:20:00 +0900</lastBuildDate><atom:link href="https://umi0410.github.io/categories/devops/index.xml" rel="self" type="application/rss+xml"/><item><title>Virtual Serviceì™€ Destination Ruleì„ ì´ìš©í•´ mesh ë‚´ë¶€ íŠ¸ë˜í”½ì„ ì›í•˜ëŠ” ëŒ€ë¡œ ë¼ìš°íŒ…í•´ë³´ê¸°</title><link>https://umi0410.github.io/blog/devops/virtual-service-destination-rule-mesh-internal-traffic/</link><pubDate>Thu, 11 Aug 2022 03:20:00 +0900</pubDate><guid>https://umi0410.github.io/blog/devops/virtual-service-destination-rule-mesh-internal-traffic/</guid><description>&lt;img src="https://umi0410.github.io/blog/devops/virtual-service-destination-rule-mesh-internal-traffic/preview.png" alt="Featured image of post Virtual Serviceì™€ Destination Ruleì„ ì´ìš©í•´ mesh ë‚´ë¶€ íŠ¸ë˜í”½ì„ ì›í•˜ëŠ” ëŒ€ë¡œ ë¼ìš°íŒ…í•´ë³´ê¸°" />&lt;h2 id="ì‹œì‘í•˜ë©°">ì‹œì‘í•˜ë©°&lt;/h2>
&lt;p>ë°ë¸Œì˜µìŠ¤ ì—”ì§€ë‹ˆì–´ë¡œ ì…ì‚¬í•œ ë’¤ ì£¼ë¡œ ë§¡ê³  ìˆëŠ” ì‘ì—…ì€ &lt;code>Istio&lt;/code> ê´€ë ¨ ì‘ì—…ì´ë‹¤. í‰ì†Œ ì°¸ ê´€ì‹¬ ìˆì—ˆë˜ ë¶„ì•¼ì´ê¸°ë„ í•˜ê³  istio ë¿ë§Œ ì•„ë‹ˆë¼ ë„¤íŠ¸ì›Œí¬ì— ëŒ€í•´ ê°œì¸ì ìœ¼ë¡œ ì •ë§ ê³µë¶€í•´ë³´ê³ ì‹¶ì—ˆëŠ”ë° ë•ë¶„ì— ì¬ë¯¸ìˆê²Œ ê³µë¶€í•˜ê³  ì„±ì¥í•˜ë©° ê·¼ë¬´í•˜ê³  ìˆëŠ” ê²ƒ ê°™ë‹¤. ğŸ˜Š&lt;/p>
&lt;p>ê·¼ë° ìš”ì¦˜ ë“¤ì–´ ì ì  ë‹¨ìˆœíˆ â€˜ì–´ë–»ê²Œ ì €ë–»ê²Œ í•˜ë‹ˆê¹Œ ëŒì•„ëŠ”ê°€ë„¤~ ì˜¤.. ë‚˜ istio ì¢€ íŒŒì•…í•œë“¯?ã…‹ã…‹â€™ ìˆ˜ì¤€ì˜ ìì„¸ë¡œëŠ” íŠ¸ëŸ¬ë¸”ìŠˆíŒ…ì„ í•˜ê±°ë‚˜ ì˜¬ë°”ë¥´ê²Œ ì„¤ê³„í•˜ê¸°ê°€ ì‰½ì§€ ì•Šì€ ê²½ìš°ë“¤ì´ ì¦ì•„ì¡Œë‹¤.&lt;/p>
&lt;p>ë”°ë¼ì„œ í‰ì†Œ ê¶ê¸ˆí–ˆë˜ ë‚´ìš© ì¤‘ í•˜ë‚˜ë¥¼ ì‚´ì§ íŒŒí—¤ì³ë³¼ê¹Œí•œë‹¤.&lt;/p>
&lt;p>ë‚˜ëŠ” ì£¼ë¡œ istio &lt;code>ingress gateway&lt;/code>ì™€ ê´€ë ¨ëœ ì‘ì—…ì„ ë§ì´ í–ˆì—ˆê³  ì´ ê²½ìš° Virtual ServiceëŠ” í•­ìƒ ingress gatewayë¥¼ ì°¸ì¡°í•˜ë„ë¡ ì„¤ì •í•´ì™”ë‹¤. ê·¼ë° istioë¥¼ ì²˜ìŒ ë°°ìš¸ ë•ŒëŠ” ë¶„ëª… â€˜client ì¸¡ì—ì„œ outbound handlerë¡œì„œì˜ Envody ì‚¬ì´ë“œì¹´ì„ í†µí•´ ì•Œì•„ì„œ ìš°ë¦¬ê°€ ì˜ë„í•˜ëŠ” ëª©ì ì§€ë¥¼ ì°¾ì•„ì„œ ìš”ì²­ì„ ë³´ë‚¸ë‹¤.â€™ ì´ëŸ° ì‹ìœ¼ë¡œ ë°°ì› ë˜ ê²ƒ ê°™ì€ë° â€˜ì™œ ë‚˜ëŠ” Virtual Serviceë¥¼ ì´ìš©í•  ë•Œ í•­ìƒ Gatewayë¥¼ ì„¤ì •í•´ì¤˜ì•¼í•˜ëŠ” ê²ƒì´ì—ˆì„ê¹Œ?â€™í•˜ëŠ” ê¶ê¸ˆì¦ì´ ìƒê²¼ë‹¤.&lt;/p>
&lt;ul>
&lt;li>&lt;strong>Virtual ServiceëŠ” Gatewayì— ingress gatewayë¥¼ ì„¤ì •í•´ì£¼ì§€ ì•Šì•„ë„ ë˜ëŠ” ê²ƒì¼ê¹Œ?&lt;/strong>&lt;/li>
&lt;li>&lt;strong>Virtual Serviceì— ì„¤ì •í•œ ë‚´ìš©ì€ ingress gatewayë¡œ ë“¤ì–´ì˜¨ ìš”ì²­ë¿ë§Œ ì•„ë‹ˆë¼ mesh ë‚´ë¶€ì—ì„œì˜ ìš”ì²­ì—ë„ ì ìš©ë  ìˆ˜ ìˆëŠ” ê²ƒì¸ê°€?&lt;/strong>&lt;/li>
&lt;li>&lt;strong>Destination Ruleì€ ë­í•˜ëŠ” ë…€ì„ì¼ê¹Œ? ì£¼ë¡œ ì–˜ëŠ” Virtual Serviceì™€ í•¨ê»˜ ì“°ëŠ” ì˜ˆì‹œê°€ ë§ì´ ë³´ì´ë˜ë° ê¼­ Virtual Serviceì™€ í•¨ê»˜ ì¨ì•¼í•˜ëŠ” ê±¸ê¹Œ?&lt;/strong>&lt;/li>
&lt;/ul>
&lt;p>ë”°ë¼ì„œ ì´ë²ˆ ê¸€ì—ì„œëŠ” ìœ„ì™€ ê°™ì€ ê¶ê¸ˆì¦ë“¤ì— ëŒ€í•´ ì‚½ì§ˆí•´ë³¸ ë‚´ìš©ì„ ì •ë¦¬í•´ë³´ë ¤í•œë‹¤. ì‘ì—…í•´ë³¸ ë‚´ìš©ì€ ì•„ë˜ì™€ ê°™ë‹¤.&lt;/p>
&lt;ol>
&lt;li>&lt;strong>ingress gatewayë¥¼ í†µí•´ ë“¤ì–´ì˜¤ëŠ” ìš”ì²­ì´ ì•„ë‹ˆë¼ mesh ë‚´ë¶€ì—ì„œ ë³´ë‚´ëŠ” ìš”ì²­ì— ëŒ€í•´ ì ìš©ë  ìˆ˜ ìˆë„ë¡ Virtual Serviceë¥¼ ì •ì˜í•œ ë’¤ mesh ë‚´ë¶€ì—ì„œ ìš”ì²­ì„ ë³´ë‚´ë³´ê¸°&lt;/strong>&lt;/li>
&lt;li>&lt;strong>Virtual Service ì—†ì´ Destination ì´ìš©í•´ë³´ê¸°&lt;/strong>&lt;/li>
&lt;/ol>
&lt;h2 id="virtual-serviceì™€-destination-ruleì—-ëŒ€í•´-ì§šê³ -ë„˜ì–´ê°€ë³´ì">Virtual Serviceì™€ Destination Ruleì— ëŒ€í•´ ì§šê³  ë„˜ì–´ê°€ë³´ì.&lt;/h2>
&lt;blockquote>
&lt;p>virtual services as how you route your trafficÂ toÂ a given destination, and then you use destination rules to configure what happens to trafficÂ forÂ that destination. Destination rules are applied after virtual service routing rules are evaluated, so they apply to the trafficâ€™s â€œrealâ€ destination.&lt;/p>
&lt;/blockquote>
&lt;p>&lt;a class="link" href="https://istio.io/latest/docs/concepts/traffic-management/#destination-rules" target="_blank" rel="noopener"
>https://istio.io/latest/docs/concepts/traffic-management/#destination-rules&lt;/a>&lt;/p>
&lt;blockquote>
&lt;/blockquote>
&lt;p>istioë¥¼ ì²˜ìŒ ë°°ìš¸ ë•Œì—ëŠ” (ë¬¼ë¡  ì´ ê¸€ì„ ì“°ê¸° ì „ê¹Œì§€ë„.. ã…ã…;;) Virtual Serviceì™€ Destination Ruleì´ ì°¸ í—·ê°ˆë ¸ë‹¤.&lt;/p>
&lt;p>Virtual ServiceëŠ” Gatewayë¥¼ í†µí•´ &lt;code>hosts&lt;/code> ì„¤ì •í•œ í˜¸ìŠ¤íŠ¸ë¥¼ ì´ìš©í•´ ë“¤ì–´ì˜¨ ìš”ì²­ì„ ì–´ë–¤ ê¸°ì¤€ìœ¼ë¡œ ì–´ë–¤ (ì•½ê°„ì€ ê°€ìƒì¸) ëª©ì ì§€ë¡œ ë³´ë‚´ì¤„ ê²ƒì¸ê°€ë¥¼ ì˜ë¯¸í•œë‹¤. ì´ ë§ë„ ì¢€ í—·ê°ˆë¦´ ìˆ˜ ìˆëŠ”ë° ì˜ˆë¥¼ ë“¤ë©´ ë‹¤ìŒê³¼ ê°™ë‹¤.&lt;/p>
&lt;ul>
&lt;li>ingress gateway ë¥¼ í†µí•´&lt;/li>
&lt;li>Virtual Serviceì˜ hostsì¸ [â€&lt;a class="link" href="http://foo.jinsu.me/" target="_blank" rel="noopener"
>foo.jinsu.me&lt;/a>â€] ì¤‘ í•˜ë‚˜ì¸ foo.jinsu.meë¥¼ ì´ìš©í•´ ë“¤ì–´ì˜¨ ìš”ì²­ì„&lt;/li>
&lt;li>subsetì´ë‚˜ weightì— ë”°ë¼ foo v1 ì´ë‚˜ foo v2 ë¡œ ë³´ë‚¸ë‹¤.&lt;/li>
&lt;/ul>
&lt;p>ìœ„ì™€ ê°™ì€ ì„¤ì •ì„ í•´ì£¼ëŠ” ê²ƒì´ Virtual Serviceì´ë‹¤.&lt;/p>
&lt;p>ê·¸ëŸ¼ foo v1ê³¼ foo v2ëŠ” ëˆ„ê°€ ì •ì˜í•´ì¤„ê¹Œ? ê·€ì‹  ê°™ì´ ì•Œì•„ì„œ v1ì— ëŒ€í•œ endpointì™€ v2ì— ëŒ€í•œ endpointë¥¼ ë¶„ë¥˜í•  ìˆ˜ëŠ” ì—†ì„í…ë° ë§ì´ë‹¤. ë°”ë¡œ ì´ë•Œ Destination Ruleì´ ë“±ì¥í•œë‹¤.&lt;/p>
&lt;p>Destination Ruleì€ ì–´ë–¤ ê¸°ì¤€ìœ¼ë¡œ íŠ¹ì • Service(ì¿ ë²„ì˜ ê¸°ë³¸ ë¦¬ì†ŒìŠ¤ íƒ€ì…)ì— ëŒ€í•œ subsetì„ ë‚˜ëˆŒì§€ ì •ì˜í•  ìˆ˜ ìˆë‹¤. í˜¹ì€ ê·¸ ì™¸ì—ë„ ê¸°ë³¸ì ìœ¼ë¡œ Serviceê°€ ì œê³µí•˜ì§€ ì•ŠëŠ” ìœ ìš©í•œ ë°©ì‹ë“¤ì„ í†µí•´ Endpointê°€ ê´€ë¦¬ë  ìˆ˜ ìˆë„ë¡ í•´ì¤€ë‹¤. ì´ë•Œ ë§í•˜ëŠ” EndpointëŠ” ì¿ ë²„ì˜ ê¸°ë³¸ ë¦¬ì†ŒìŠ¤ íƒ€ì… ì¤‘ í•˜ë‚˜ì¸ Endpointê°€ ì•„ë‹ˆë¼ Destination Ruleì„ í†µí•´ ì‹¤ì œë¡œ íŠ¸ë˜í”½ì´ í˜ë ¤ë³´ë‚´ì§„ë‹¤ëŠ” ì˜ë¯¸ì˜ Endpointë¥¼ ì˜ë¯¸í•œë‹¤.&lt;/p>
&lt;p>ê·¼ë° ë­,,, ë‚˜ë¦„ëŒ€ë¡œ ë‘ ê°œë…ì„ ì •ë¦¬í•´ë³´ë ¤í–ˆëŠ”ë° ì‹œì›í•œ ì •ë¦¬ëŠ” ì•„ë‹Œ ê²ƒ ê°™ë‹¤â€¦ ì“°ë‹¤ë³´ë©´ ê°ì´ì˜¤ëŠ”ë° ì•„ì§ ë”± ê¹”ë”í•˜ê²Œ ì •ë¦¬í•  ìˆ˜ ìˆëŠ” ìˆ˜ì¤€ì˜ ì´í•´ëŠ” ì•„ë‹Œê°€ë³´ë‹¤.&lt;/p>
&lt;h2 id="mesh-ë‚´ë¶€ì˜-í†µì‹ ì—ì„œë„-virtual-serviceë‚˜-destination-ruleì´-ë™ì‘í•˜ëŠ”ê°€">mesh ë‚´ë¶€ì˜ í†µì‹ ì—ì„œë„ virtual serviceë‚˜ destination ruleì´ ë™ì‘í•˜ëŠ”ê°€?&lt;/h2>
&lt;p>ì•ì„œ Virtual Serviceì— ëŒ€í•´ ì„¤ëª…í•  ë•Œ â€œGatewayë¥¼ í†µí•´ ë“¤ì–´ì˜¨ ìš”ì²­ì´ â€¦(ìƒëµ)â€ ì´ë¼ë©° ì„¤ëª…ì„ í–ˆëŠ”ë° ê·¸ë ‡ë‹¤ë©´ &lt;strong>Virtual ServiceëŠ” ingress gatewayë¥¼ í†µí•´ ë“¤ì–´ì˜¨ ìš”ì²­ì— ëŒ€í•œ ì„¤ì •ë§Œ ì •ì˜ê°€ ê°€ëŠ¥í•˜ëƒë¼ê³ í•˜ë©´ ê·¸ê±´ ë‹¹ì—°íˆ ì•„ë‹ˆë‹¤.&lt;/strong> ì• ì´ˆì— istioë¥¼ í†µí•´ ìš°ë¦¬ê°€ ì–»ê³  ì‹¶ì€ ê²ƒì€ ingressì— ëŒ€í•œ ê¸°ëŠ¥ë¿ë§Œ ì•„ë‹ˆë¼ mesh ë‚´ë¶€ í†µì‹ ì— ëŒ€í•œ ê¸°ëŠ¥ë„ í° ë¶€ë¶„ì¼ ê²ƒì´ë‹ˆ ë§ì´ë‹¤.&lt;/p>
&lt;blockquote>
&lt;p>The reserved word mesh is used to imply all the sidecars in the mesh. When this field is omitted, the default gateway (mesh) will be used, which would apply the rule to all sidecars in the mesh.&lt;/p>
&lt;/blockquote>
&lt;p>&lt;a class="link" href="https://istio.io/latest/docs/reference/config/networking/virtual-service/#VirtualService" target="_blank" rel="noopener"
>https://istio.io/latest/docs/reference/config/networking/virtual-service/#VirtualService&lt;/a>&lt;/p>
&lt;blockquote>
&lt;/blockquote>
&lt;p>&lt;strong>Virtual Serviceê°€ &lt;code>mesh&lt;/code> ë¼ëŠ” ì˜ˆì•½ëœ gateway ì´ë¦„ì„ ì´ìš©í•˜ë©´ ê·¸ê²ƒì€ mesh ë‚´ì˜ sidecarë“¤ì—ê²Œ ëª¨ë‘ ì ìš©ë˜ëŠ” ruleì´ ëœë‹¤.&lt;/strong> Virtual Serviceì˜ gatewaymesh ë‚´ë¶€ í†µì‹ ì— ìˆì–´ Virtual Serviceì˜ ì—­í• ì´ í¼ì—ë„ ë¶ˆêµ¬í•˜ê³  ì•„ì´ëŸ¬ë‹ˆí•˜ê²Œë„ ìœ„ì™€ ê°™ì€ ë‚´ìš©ì„ ì°¾ì•„ë³¼ ìˆ˜ ìˆëŠ” ë¬¸ì„œê°€ ë§ì§€ëŠ” ì•Šì•˜ë‹¤.&lt;/p>
&lt;p>ì •ë¦¬í•˜ìë©´ â€œmesh ë‚´ë¶€ì˜ í†µì‹ ì—ì„œë„ virtual serviceë‚˜ destination ruleì´ ë™ì‘í•˜ëŠ”ê°€?â€ì— ëŒ€í•œ ëŒ€ë‹µì€ ì•„ë˜ì™€ ê°™ë‹¤.&lt;/p>
&lt;ul>
&lt;li>&lt;strong>Virtual Serviceì˜ gatewaysì— &lt;code>mesh&lt;/code> ê°€ í¬í•¨ë˜ì–´ìˆê±°ë‚˜ &lt;code>gateways&lt;/code> ê°€ ìƒëµë˜ì—ˆê³ , client ì¸¡ envoy sidecarê°€ outbound handler ì—­í• ì„ ìˆ˜í–‰í•œë‹¤ë©´ â†’ YES&lt;/strong>&lt;/li>
&lt;li>Virtual Serviceì˜ gatewaysë¥¼ ì •ì˜í–ˆëŠ”ë° &lt;code>mesh&lt;/code> ê°€ í¬í•¨ë˜ì–´ìˆì§€ ì•Šë‹¤ë©´ â†’ NO&lt;/li>
&lt;li>client ì¸¡ envoy sidecarê°€ ì¡´ì¬í•˜ì§€ ì•Šê±°ë‚˜ outbound handler ì—­í• ì„ ì œëŒ€ë¡œ ìˆ˜í–‰í•˜ì§€ ëª»í•œë‹¤ë©´ â†’ NO&lt;/li>
&lt;/ul>
&lt;p>ê·¸ëŸ¼ í•œ ë²ˆ ì‹¤ìŠµì„ í†µí•´ í™•ì¸í•´ë³´ì.&lt;/p>
&lt;h2 id="mesh-ë‚´ë¶€-í†µì‹ ì—ì„œ-virtual-service--destination-ruleì„-í†µí•´-service-subsetê³¼-weight-ì´ìš©í•´ë³´ê¸°">mesh ë‚´ë¶€ í†µì‹ ì—ì„œ Virtual Service + Destination Ruleì„ í†µí•´ Service subsetê³¼ weight ì´ìš©í•´ë³´ê¸°&lt;/h2>
&lt;p>&lt;code>httpping-without-sidecar&lt;/code>ë¼ëŠ” ì´ë¦„ì˜ ì„œë¹„ìŠ¤ë¥¼ ë°°í¬í•´ë‘ì—ˆê³ , ì´ëŠ” golangìœ¼ë¡œ ë§Œë“¤ì–´ì§„ ìš”ì²­ì´ ë“¤ì–´ì˜¬ ë•Œ â€œpongâ€ ë¡œê·¸ë¥¼ ë‚¨ê¸°ëŠ” ë‹¨ìˆœí•œ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ë‹¤. ì´ ì„œë¹„ìŠ¤ì˜ Podë“¤ì€ Envoy ì‚¬ì´ë“œì¹´ë¥¼ ì£¼ì…ë°›ì§€ ì•ŠëŠ”ë‹¤.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">$ kubectl get pod -l &lt;span class="nv">app&lt;/span>&lt;span class="o">=&lt;/span>httpping-without-sidecar
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME READY STATUS RESTARTS AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">httpping-without-sidecar-v1-7fd6bfdb57-bcpdh 1/1 Running &lt;span class="m">0&lt;/span> 2m54s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">httpping-without-sidecar-v1-7fd6bfdb57-s4smn 1/1 Running &lt;span class="m">0&lt;/span> 2m54s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">httpping-without-sidecar-v1-7fd6bfdb57-zg8td 1/1 Running &lt;span class="m">0&lt;/span> 2m54s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">httpping-without-sidecar-v2-5df8b7f656-n4cvh 1/1 Running &lt;span class="m">0&lt;/span> 2m53s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">httpping-without-sidecar-v2-5df8b7f656-nfm6q 1/1 Running &lt;span class="m">0&lt;/span> 2m53s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">httpping-without-sidecar-v2-5df8b7f656-vbgpr 1/1 Running &lt;span class="m">0&lt;/span> 2m53s
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>v1 ê³¼ v2ì— ëŒ€í•œ Deployment ê°ê° ë°°í¬í•´ë‘ì—ˆë‹¤.&lt;/p>
&lt;p>ê° ë²„ì „ë³„ë¡œ 3ê°œì˜ Podê°€ ë°°í¬ë˜ì–´ìˆë‹¤.&lt;/p>
&lt;p>ë²„ì „ ë³„ë¡œ Podë“¤ì€ ë‹¤ìŒê³¼ ê°™ì´ ë¼ë²¨ì´ ë¶™ì–´ìˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="c"># v1 Podì˜ ê²½ìš°&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">app&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">httpping-without-sidecar&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">version&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">v1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="c"># v2 Podì˜ ê²½ìš°&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">app&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">httpping-without-sidecar&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">version&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">v2&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Service, Destination Rule, Virtual ServiceëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">apiVersion&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">v1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">kind&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Service&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">metadata&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">namespace&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">infra-jinsu-lab&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">httpping-without-sidecar&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">spec&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">selector&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">app&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">httpping-without-sidecar&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ports&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">protocol&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">TCP&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">port&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">8080&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">targetPort&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">80&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ServiceëŠ” versionì„ ëª…ì‹œí•˜ì§€ ì•Šì€ ì±„ appë§Œì„ ëª…ì‹œí•˜ëŠ” ìˆ˜í¼ì…‹ìœ¼ë¡œì„œ ì •ì˜í–ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">apiVersion&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">networking.istio.io/v1alpha3&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">kind&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">DestinationRule&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">metadata&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">namespace&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">infra-jinsu-lab&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">httpping-without-sidecar-destination&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">spec&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">host&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">httpping-without-sidecar&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">subsets&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">v1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">labels&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">app&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">httpping-without-sidecar&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">version&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">v1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">v2&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">labels&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">app&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">httpping-without-sidecar&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">version&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">v2&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Destination Ruleì€ Serviceì— í•´ë‹¹í•˜ëŠ” Endpointë“¤ì˜ Subsetì²˜ëŸ¼ ì •ì˜ëœë‹¤.&lt;/p>
&lt;p>version ë¼ë²¨ì´ ì¶”ê°€ë˜ì—ˆë‹¤.&lt;/p>
&lt;p>hostëŠ” Serviceë¥¼ ê°€ë¦¬í‚¬ ìˆ˜ ìˆëŠ” ì´ë¦„ì´ì–´ì•¼í•œë‹¤. ê°™ì€ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì¼ ê²½ìš° Short nameìœ¼ë¡œ í‘œí˜„í•  ìˆ˜ë„ ìˆê³ , ì–¸ì œëŠ” FQDN(e.g. httpping-with-sidecar.infra-jinsu.lab.svc.cluster.local)ìœ¼ë¡œ í‘œí˜„í•  ìˆ˜ë„ ìˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">apiVersion&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">networking.istio.io/v1alpha3&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">kind&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">VirtualService&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">metadata&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">namespace&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">infra-jinsu-lab&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">httpping-without-sidecar&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">spec&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">hosts&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;httpping-without-sidecar&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">gateways&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">mesh&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">http&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">match&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">uri&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">prefix&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">/&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">route&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">destination&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">host&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">httpping-without-sidecar&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">subset&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">v1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">port&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">number&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">8080&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">weight&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">10&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">destination&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">host&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">httpping-without-sidecar&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">subset&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">v2&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">port&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">number&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">8080&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">weight&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">90&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ì•ì„œ ë§í•œëŒ€ë¡œ í´ëŸ¬ìŠ¤í„° ë‚´ë¶€ í†µì‹ ì— ëŒ€í•´ Virtual Serviceë¥¼ ì ìš©í•˜ë ¤ë©´ &lt;code>gateways&lt;/code> ë¥¼ ìƒëµí•˜ê±°ë‚˜ &lt;code>mesh&lt;/code> ë¼ëŠ” ì˜ˆì•½ëœ ì´ë¦„ì˜ ê²Œì´íŠ¸ì›¨ì´ë¥¼ í¬í•¨ì‹œì¼œì¤€ë‹¤. ë˜í•œ mesh ë‚´ë¶€ í†µì‹ ì— ëŒ€í•´ì„œëŠ” hostsì— Destination Ruleì²˜ëŸ¼ Serviceë¥¼ ì°¸ì¡°í•  ìˆ˜ ìˆëŠ” ì´ë¦„ì„ ì ì–´ì¤€ë‹¤.&lt;/p>
&lt;p>ê·¸ë¦¬ê³ ì„œëŠ” Destination Ruleì—ì„œ ì •ì˜í•œ v1 subsetì€ weightë¥¼ 10ìœ¼ë¡œ, v2 subsetì€ weightë¥¼ 90ìœ¼ë¡œ ì„¤ì •í•´ì¤¬ë‹¤. ì´ë ‡ê²Œ ë˜ë©´ &lt;strong>ëˆ„êµ°ê°€ê°€ ì„œë¹„ìŠ¤ë¥¼ í–¥í•´ ìš”ì²­ì„ ë³´ëƒˆì„ ë•Œ v1ê³¼ v2ê°€ 1ëŒ€9ì˜ ë¹„ìœ¨ë¡œ ë¡œë“œë°¸ëŸ°ìŠ¤ê°€ ë  ê²ƒì´ë‹¤&lt;/strong> ğŸ™‚&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">curl -H &lt;span class="s1">&amp;#39;foo: bar&amp;#39;&lt;/span> http://httpping-without-sidecar.infra-jinsu-lab:8080/ping
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="https://umi0410.github.io/blog/devops/virtual-service-destination-rule-mesh-internal-traffic/weight.png"
width="2558"
height="1409"
srcset="https://umi0410.github.io/blog/devops/virtual-service-destination-rule-mesh-internal-traffic/weight_hu479968be15567657f18e71d11f31e69a_283588_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/devops/virtual-service-destination-rule-mesh-internal-traffic/weight_hu479968be15567657f18e71d11f31e69a_283588_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="ì¢Œì¸¡ì€ weightê°€ 10ì¸ v1 Pod 3ê°œ | ìš°ì¸¡ì€ weightê°€ 90ì¸ v2 Pod 3ê°œ"
class="gallery-image"
data-flex-grow="181"
data-flex-basis="435px"
>&lt;/p>
&lt;p>Envoy ì‚¬ì´ë“œì¹´ê°€ ì‚½ì…ëœ ì–´ë–¤ Podì—ì„œ ìœ„ì˜ ì»¤ë§¨ë“œë¥¼ í†µí•´ &lt;code>httpping-without-sidecar&lt;/code> ì„œë¹„ìŠ¤ë¡œ ìš”ì²­ì„ ë³´ë‚¸ ê²½ìš°ì˜ ëª¨ìŠµì´ë‹¤. ì¢Œì¸¡ ë¡œê·¸ëŠ” v1 Pod 3ê°œì˜ ë¡œê·¸ì´ê³ , ìš°ì¸¡ ë¡œê·¸ëŠ” v2 Pod 3ê°œì˜ ë¡œê·¸ì´ë‹¤.&lt;/p>
&lt;p>&lt;strong>Virtual Serviceì—ì„œ ì •ì˜í•œëŒ€ë¡œ ëŒ€ë¶€ë¶„ì˜ íŠ¸ë˜í”½ì€ v2ë¡œ í˜ëŸ¬ê°”ê³  Destination Ruleì—ì„œ ì •ì˜í•œ ëŒ€ë¡œ v1, v2ì— ëŒ€í•œ subsetì´ ì˜ ë¶„ë¥˜ëœ ë“¯í•˜ë‹¤!&lt;/strong>&lt;/p>
&lt;p>ì°¸ê³ ë¡œ ë‹¹ì—°íˆë„ í´ë¼ì´ì–¸íŠ¸ ì¸¡ì—ì„œ Enovyê°€ outbound handlingì„ í•´ì£¼ì§€ ëª»í•œë‹¤ë©´(í˜¹ì€ sidecarê°€ ì‚½ì…ë˜ì§€ ì•Šì•˜ë‹¤ë©´) weight ì¡°ì ˆë„ ë˜ì§€ ì•Šê³  ê·¸ëƒ¥ ë¼ìš´ë“œë¡œë¹ˆìœ¼ë¡œ ë¶€í•˜ê°€ ë¶„ì‚°ë  ê²ƒì´ë‹¤.&lt;/p>
&lt;h2 id="virtual-service-ì—†ì´-destination-ruleë§Œìœ¼ë¡œ-ì›í•˜ëŠ”-ë°©ì‹ì„-í†µí•´-ë¶€í•˜-ë¶„ì‚°ì‹œí‚¤ê¸°">Virtual Service ì—†ì´ Destination Ruleë§Œìœ¼ë¡œ ì›í•˜ëŠ” ë°©ì‹ì„ í†µí•´ ë¶€í•˜ ë¶„ì‚°ì‹œí‚¤ê¸°&lt;/h2>
&lt;p>ì´ë²ˆì—ëŠ” &lt;strong>Virtual Service ì—†ì´ Destination Ruleì˜ ê¸°ëŠ¥ ì¤‘ í•˜ë‚˜ì¸ consistentHashë¥¼ í†µí•œ ë¡œë“œë°¸ëŸ°ìŠ¤ë¥¼ í•´ë³¼ ê²ƒì´ë‹¤. ì´ë¥¼ ì´ìš©í•˜ë©´ íŠ¹ì • í‚¤ì— ëŒ€í•œ ê°’ì„ í•´ì‹±í•´ì„œ í•´ë‹¹ í•´ì‹œ ê°’ì„ ë‹´ë‹¹í•˜ëŠ” Podì—ê²Œ ìš”ì²­ì„ ë³´ë‚¼ ê²ƒì´ë‹¤!&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">$ kubectl delete virtualservice httpping-without-sidecar
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">virtualservice.networking.istio.io &lt;span class="s2">&amp;#34;httpping-without-sidecar&amp;#34;&lt;/span> deleted
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Virtual Service ì—†ì´ ë™ì‘í•¨ì„ ë¶„ëª…íˆ í•˜ê¸° ìœ„í•´ ì‚­ì œí•´ì¤€ë‹¤.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">apiVersion&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">networking.istio.io/v1alpha3&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">kind&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">DestinationRule&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">metadata&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">namespace&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">infra-jinsu-lab&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">httpping-without-sidecar-destination&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">spec&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">host&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">httpping-without-sidecar&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">trafficPolicy&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">loadBalancer&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">consistentHash&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">httpHeaderName&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">foo&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ì´ë²ˆì—ëŠ” Destinationì„ ìœ„ì™€ ê°™ì´ ì‘ì„±í•´ì¤Œìœ¼ë¡œì¨ í—¤ë” ì¤‘ fooë¼ëŠ” í‚¤ì— ëŒ€í•œ ê°’ì— ë”°ë¼ ë¶€í•˜ê°€ ë¶„ì‚°ë˜ë„ë¡ í•  ê²ƒì´ë‹¤. &lt;strong>ê°™ì€ ê°’ìœ¼ë¡œ ìš”ì²­ì„ ë³´ë‚´ë©´ ë‹´ë‹¹í•˜ëŠ” í•´ì‹œ ê°’ì´ ë³€ê²½ë˜ì§€ ì•ŠëŠ” í•œ ê°™ì€ Podë¡œë§Œ ìš”ì²­&lt;/strong>ì´ ê°ˆ ê²ƒì´ë‹¤.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">curl -H &lt;span class="s1">&amp;#39;foo: bar&amp;#39;&lt;/span> http://httpping-with-sidecar.infra-jinsu-lab:8080/ping
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Envoy ì‚¬ì´ë“œì¹´ê°€ ì‚½ì…ë˜ì–´ outbound handlerê°€ ì˜ ë™ì‘ ì¤‘ì¸ ë‹¤ë¥¸ Podì—ì„œ ìœ„ì™€ ê°™ì´ ìš”ì²­ì„ ì—¬ëŸ¬ ì°¨ë¡€ ë³´ë‚´ë´¤ë‹¤.&lt;/p>
&lt;p>&lt;img src="https://umi0410.github.io/blog/devops/virtual-service-destination-rule-mesh-internal-traffic/consistent-hash.png"
width="2560"
height="1395"
srcset="https://umi0410.github.io/blog/devops/virtual-service-destination-rule-mesh-internal-traffic/consistent-hash_huec96e079d93944483a2dbb05770995ea_198415_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/devops/virtual-service-destination-rule-mesh-internal-traffic/consistent-hash_huec96e079d93944483a2dbb05770995ea_198415_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="Consistent Hash ì„¤ì • í›„ foo: barë¼ëŠ” ë™ì¼í•œ í—¤ë”ë¡œ ìš”ì²­ì„ ë³´ë‚¸ ê²½ìš°ì˜ ë¡œê·¸"
class="gallery-image"
data-flex-grow="183"
data-flex-basis="440px"
>&lt;/p>
&lt;p>ìœ„ì™€ ê°™ì´ í•˜ë‚˜ì˜ Podë¡œë§Œ ìš”ì²­ì´ ê°„ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆì—ˆë‹¤!&lt;/p>
&lt;h2 id="ë§ˆì¹˜ë©°">ë§ˆì¹˜ë©°&lt;/h2>
&lt;p>ì´ë²ˆ ì£¼ì— ì—…ë¬´ê°€ ì •ë§ ë§ì•˜ëŠ”ë° ì´ë˜ ì €ë˜ ì˜¤ê°”ë˜ ëŒ€í™” ì¤‘ì— í—·ê°ˆë¦¬ëŠ” ë¶€ë¶„ì´ ìˆì–´ì„œ ê°‘ìê¸° ì•¼ë°¤ì— ì´ë ‡ê²Œ ë‚´ìš©ì„ ì •ë¦¬í•´ë´¤ë‹¤. ê³µì‹ ë¬¸ì„œë¥¼ ë‹¤ì‹œ í•œ ë²ˆ ì •ë…í•œ ë’¤ â€˜ì•„~ ì–˜ì˜ ì—­í• ì€ ì´ê±°ë‹ˆê¹Œ ì´ë ‡ê²Œ í•˜ë©´ ì´ë ‡ê²Œ ë˜ê² êµ°!â€™ì´ë¼ë©° ì‚´ì§ì¿µ ì´í•´ë¥¼ í•œ ë’¤ì— ì‹¤ìŠµì„ í•´ë´¤ê³  ê²°ê³¼ê°€ ì˜ ë‚˜ì™€ì„œ ë¿Œë“¯í•˜ë‹¤. ë§˜ í¸íˆ ì˜ ìˆ˜ ìˆì„ ë“¯.&lt;/p>
&lt;p>ë‹¤ë§Œ ë¬¸ì„œ ë‚´ìš©ê³¼ ì»¨ì…‰ë“¤ì˜ â€œì—­í• &amp;quot;ì´ë‚˜ â€œì˜ë¯¸&amp;quot;ì— ëŒ€í•œ ì´í•´ ë¿ë§Œ ì•„ë‹ˆë¼ ì‹¤ì œ ë™ì‘ í”Œë¡œìš°ê¹Œì§€ë„ ì•Œê³  ì‹¶ì€ ë§ˆìŒì€ ìˆëŠ”ë° ë„ˆë¬´ ì¡°ê¸‰í•´í•˜ëŠ” ê²ƒë³´ë‹¤ëŠ” ë¹ ë¥´ì§„ ì•Šë”ë¼ë„ ê¾¸ì¤€í•˜ê²Œ ì´ë ‡ê²Œ í•˜ë‚˜ í•˜ë‚˜ ê³µë¶€í•´ë‚˜ê°€ë©´ ë  ê²ƒì´ë¼ê³  ë¯¿ëŠ”ë‹¤!&lt;/p>
&lt;h2 id="ì°¸ê³ ">ì°¸ê³ &lt;/h2>
&lt;ul>
&lt;li>ê°ì¢… istio ë¬¸ì„œë“¤
&lt;ul>
&lt;li>Traffic Management ì»¨ì…‰ &lt;a class="link" href="https://istio.io/latest/docs/concepts/traffic-management/" target="_blank" rel="noopener"
>https://istio.io/latest/docs/concepts/traffic-management/&lt;/a>&lt;/li>
&lt;li>Traffic Management, Networking config ê´€ë ¨ ë¬¸ì„œ &lt;a class="link" href="https://istio.io/latest/docs/reference/config/networking/" target="_blank" rel="noopener"
>https://istio.io/latest/docs/reference/config/networking/&lt;/a>
&amp;laquo;&amp;laquo;&amp;laquo;&amp;lt; HEAD&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Using Istio VirtualService from inside of the cluster - &lt;a class="link" href="https://stackoverflow.com/questions/65626962/using-istio-virtualservice-from-inside-of-the-cluster" target="_blank" rel="noopener"
>https://stackoverflow.com/questions/65626962/using-istio-virtualservice-from-inside-of-the-cluster&lt;/a>
=======&lt;/li>
&lt;li>Using Istio VirtualService from inside of the cluster - &lt;a class="link" href="https://stackoverflow.com/questions/65626962/using-istio-virtualservice-from-inside-of-the-cluster" target="_blank" rel="noopener"
>https://stackoverflow.com/questions/65626962/using-istio-virtualservice-from-inside-of-the-cluster&lt;/a>&lt;/li>
&lt;/ul>
&lt;blockquote>
&lt;blockquote>
&lt;blockquote>
&lt;blockquote>
&lt;blockquote>
&lt;blockquote>
&lt;blockquote>
&lt;p>a5aea5fa65117a37072d4d860951c123a5333dcf&lt;/p>
&lt;/blockquote>
&lt;/blockquote>
&lt;/blockquote>
&lt;/blockquote>
&lt;/blockquote>
&lt;/blockquote>
&lt;/blockquote></description></item><item><title>istioì™€ envoy proxyë¥¼ í†µí•´ ê²½í—˜í•´ë³´ëŠ” ë„¤íŠ¸ì›Œí¬ ì¸í„°í˜ì´ìŠ¤ (istio 1.10)</title><link>https://umi0410.github.io/blog/devops/istio-1-10-network-interface/</link><pubDate>Sun, 17 Jul 2022 22:00:00 +0900</pubDate><guid>https://umi0410.github.io/blog/devops/istio-1-10-network-interface/</guid><description>&lt;img src="https://umi0410.github.io/blog/devops/istio-1-10-network-interface/preview.png" alt="Featured image of post istioì™€ envoy proxyë¥¼ í†µí•´ ê²½í—˜í•´ë³´ëŠ” ë„¤íŠ¸ì›Œí¬ ì¸í„°í˜ì´ìŠ¤ (istio 1.10)" />&lt;h2 id="ì‹œì‘í•˜ë©°">ì‹œì‘í•˜ë©°&lt;/h2>
&lt;p>ìš”ì¦˜ istioë¥¼ ê³µë¶€í•˜ë˜ ì¤‘ istioê°€ ë³€í™”í•´ì˜¨ ê³¼ì •ì— ëŒ€í•´ì„œë„ í¥ë¯¸ê°€ ìƒê²¨ ì§€ë‚œ ë²„ì „ë“¤ì˜ ë¦´ë¦¬ì¦ˆ ë…¸íŠ¸ë“¤ë„ ì½ì–´ë³´ê³  ìˆìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë˜ ì¤‘ í˜„ ì‹œì (2022ë…„ 7ì›”)ì—ëŠ” ì´ë¯¸ ê³µì‹ì ì¸ End of Lifeê°€ ì§€ë‚œ &lt;strong>2021ë…„ 3ì›” ì²˜ìŒ ë¦´ë¦¬ì¦ˆëœ istio 1.10ì˜ ë¦´ë¦¬ì¦ˆ ë…¸íŠ¸ë¥¼ ë³´ë‹¤ê°€ ì¬ë¯¸ìˆëŠ” ì ì„ í•˜ë‚˜ ë°œê²¬&lt;/strong>í•  ìˆ˜ ìˆì—ˆëŠ”ë°ìš”.&lt;/p>
&lt;p>ë°”ë¡œ &lt;strong>envoy proxyê°€ &lt;code>eth0&lt;/code>ì— ëŒ€í•œ ìš”ì²­ì„ ë„˜ê²¨ì£¼ëŠ” containerì˜ network interfaceê°€ &lt;code>lo&lt;/code> ì—ì„œ &lt;code>eth0&lt;/code> ë¡œ ë³€ê²½ë˜ì—ˆë‹¤&lt;/strong>ëŠ” ì ì…ë‹ˆë‹¤. ë„¤íŠ¸ì›Œí¬ì— ëŒ€í•´, ê·¸ ì¤‘ì—ì„œë„ íŠ¹íˆ ë„¤íŠ¸ì›Œí¬ ì¸í„°í˜ì´ìŠ¤ì— ëŒ€í•´ ì˜ ëª°ëë˜ ë•Œì—ëŠ” ì´ ë³€ê²½ì‚¬í•­ì— ê·¸ë‹¥ ê´€ì‹¬ì´ ì•ˆ ê°”ì„ ê²ƒ ê°™ì€ë° ìµœê·¼ ë„¤íŠ¸ì›Œí¬ ì¸í„°í˜ì´ìŠ¤ì— ëŒ€í•´ ê³µë¶€ë¥¼ í•´ì„œì¸ì§€ ì´ ë³€ê²½ì‚¬í•­ì— ê´€ì‹¬ì´ ê°”ìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>ê·¸ë˜ì„œ ì´ë²ˆ ê¸€ì—ì„œëŠ” ë„¤íŠ¸ì›Œí¬ ì¸í„°í˜ì´ìŠ¤ì™€ ê´€ë ¨ëœ &lt;code>istio&lt;/code> &lt;code>1.9&lt;/code> â†’ &lt;code>1.10&lt;/code>ì˜ ë³€ê²½ì‚¬í•­ì„ ì‹¤ì œ ì‘ì—…ì„ í†µí•´ í™•ì¸í•´ë³´ë ¤í•©ë‹ˆë‹¤. ì‹¤ì œ ì‘ì—…ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.&lt;/p>
&lt;ul>
&lt;li>&lt;strong>istio 1.9&lt;/strong> - ì„œë²„ë¥¼ &lt;code>lo&lt;/code> (ë£¨í”„ë°± ì¸í„°í˜ì´ìŠ¤)ì˜ IP(127.0.0.1)ë¡œ ë„ìš´ ê²½ìš° Serviceì— ìš”ì²­ì„ ë³´ë‚´ ì„±ê³µì ì¸ ì‘ë‹µì„ ë°›ì„ ìˆ˜ ìˆìŒì„ í™•ì¸&lt;/li>
&lt;li>&lt;strong>istio 1.9&lt;/strong> - ì„œë²„ë¥¼ &lt;code>eth0&lt;/code> ì˜ IPë¡œ ë„ìš´ ê²½ìš° Serviceì— ìš”ì²­ì„ ë³´ë‚´ë„ ìš”ì²­ì´ ì œëŒ€ë¡œ ì „ë‹¬ë˜ì§€ ì•ŠìŒì„ í™•ì¸&lt;/li>
&lt;li>&lt;strong>istio 1.10&lt;/strong> - ì„œë²„ë¥¼ &lt;code>lo&lt;/code> (ë£¨í”„ë°± ì¸í„°í˜ì´ìŠ¤)ì˜ IP(127.0.0.1)ë¡œ ë„ìš´ ê²½ìš° Serviceì— ìš”ì²­ì„ ë³´ë‚´ë„ ìš”ì²­ì´ ì œëŒ€ë¡œ ì „ë‹¬ë˜ì§€ ì•ŠìŒì„ í™•ì¸&lt;/li>
&lt;li>&lt;strong>istio 1.10&lt;/strong> - ì„œë²„ë¥¼ &lt;code>eth0&lt;/code> ì˜ IPë¡œ ë„ìš´ ê²½ìš° Serviceì— ìš”ì²­ì„ ë³´ë‚´ ì„±ê³µì ì¸ ì‘ë‹µì„ ë°›ì„ ìˆ˜ ìˆìŒì„ í™•ì¸&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://umi0410.github.io/blog/devops/istio-1-10-network-interface/version-compatibility.png"
width="2602"
height="710"
srcset="https://umi0410.github.io/blog/devops/istio-1-10-network-interface/version-compatibility_hu9ee91d2674eb5146d2a8fafcbb1eff3a_90034_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/devops/istio-1-10-network-interface/version-compatibility_hu9ee91d2674eb5146d2a8fafcbb1eff3a_90034_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="istio &amp;lt;-&amp;gt; k8s ë²„ì „ í˜¸í™˜ì„±"
class="gallery-image"
data-flex-grow="366"
data-flex-basis="879px"
>&lt;/p>
&lt;p>&lt;code>k8s&lt;/code> ë²„ì „ì€ istio 1.9ì™€ istio 1.10 ëª¨ë‘ì™€ í˜¸í™˜ë˜ëŠ” k8s &lt;code>1.20&lt;/code> ì„ ì´ìš©í•  ê²ƒì´ê³  k8sëŠ” &lt;code>minikube&lt;/code>ë¥¼ í†µí•´ ë¡œì»¬ì—ì„œ êµ¬ì„±í•  ê²ƒì…ë‹ˆë‹¤.&lt;/p>
&lt;p>âš ï¸ ì°¸ê³ ë¡œ M1 ë§¥ë¶ì˜ minikubeì—ì„  envoy proxyê°€ ë™ì‘í•˜ì§€ ì•Šì•„ì„œì¸ì§€ istioë¥¼ ì œëŒ€ë¡œ ì´ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ë”°ë¼ì„œ ì €ëŠ” ubuntuì—ì„œ minikubeë¥¼ í†µí•´ ì‘ì—…í–ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;h2 id="istio-19--110-ë³€ê²½ì‚¬í•­-ì¤‘-ì¬ë¯¸ìˆëŠ”-ì ">istio 1.9 â†’ 1.10 ë³€ê²½ì‚¬í•­ ì¤‘ ì¬ë¯¸ìˆëŠ” ì &lt;/h2>
&lt;p>&lt;img src="https://umi0410.github.io/blog/devops/istio-1-10-network-interface/networking-change.png"
width="2280"
height="970"
srcset="https://umi0410.github.io/blog/devops/istio-1-10-network-interface/networking-change_hu6fe6d6382b53ebbea105f054157c1f5e_208679_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/devops/istio-1-10-network-interface/networking-change_hu6fe6d6382b53ebbea105f054157c1f5e_208679_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="1.10 ë¦´ë¦¬ì¦ˆ ë…¸íŠ¸"
class="gallery-image"
data-flex-grow="235"
data-flex-basis="564px"
>&lt;/p>
&lt;p>(ì°¸ê³ : &lt;a class="link" href="https://istio.io/latest/news/releases/1.10.x/announcing-1.10/" target="_blank" rel="noopener"
>https://istio.io/latest/news/releases/1.10.x/announcing-1.10/&lt;/a>)&lt;/p>
&lt;p>1.10 ë²„ì „ì˜ ë³€ê²½ì‚¬í•­ì— ëŒ€í•´ ì¢€ ë” ìì„¸íˆ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤. ì´ì „ ë²„ì „ì—ì„œëŠ” Sidecar Envoy Proxyê°€ &lt;code>eth0&lt;/code>ìœ¼ë¡œ ë“¤ì–´ì˜¨ ìš”ì²­ì„ &lt;code>lo&lt;/code>ë¡œ ë„˜ê²¨ì¤˜ì™”ëŠ”ë° ì´ë²ˆ ë²„ì „(1.10)ì—ì„œë¶€í„°ëŠ” &lt;code>eth0&lt;/code>ë¡œ ë“¤ì–´ì˜¨ ìš”ì²­ì„ eth0ë¡œ ë„˜ê²¨ì¤€ë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤.&lt;/p>
&lt;p>ëŒ€ë¶€ë¶„ ì„œë²„ë¥¼ ë„ìš¸ ë•Œ &lt;code>0.0.0.0&lt;/code>ì„ í†µí•´ loopback interfaceì™€ ethernet interface ëª¨ë‘ì— ì„œë²„ë¥¼ ë„ìš°ëŠ” ê²½ìš°ê°€ ë§ì•„ í•´ë‹¹ ë‚´ìš©ì´ í° ë³€í™”ë¥¼ ê°€ì ¸ì˜¤ì§„ ì•Šì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>í•˜ì§€ë§Œ ë§Œì•½ ê¸°ì¡´ì— íŠ¹ì • interfaceì˜ IPë§Œì„ ì§€ì •í•´ì„œ ì„œë²„ë¥¼ ë„ìš°ëŠ” ê²½ìš°ê°€ ìˆì—ˆë‹¤ë©´ ì´ ë³€ê²½ì‚¬í•­ìœ¼ë¡œ ì¸í•´ í†µì‹  ì¥ì• ê°€ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;ul>
&lt;li>loopback interfaceì˜ IPë¡œë§Œ ì„œë²„ë¥¼ ë„ìš´ ê²½ìš° â†’ &lt;code>eth0&lt;/code>ë¡œ ë³´ë‚¸ ìš”ì²­ì„ sidecarë¥¼ ê±°ì³ &lt;code>lo&lt;/code>ê°€ ë°›ì„ ìˆ˜ ìˆë˜ ì»¨í…Œì´ë„ˆê°€ ìš”ì²­ì„ ë°›ì„ ìˆ˜ ì—†ì–´ì§.&lt;/li>
&lt;li>eth0 interfaceì˜ IPë¡œë§Œ ì„œë²„ë¥¼ ë ìš´ ê²½ìš° â†’ &lt;code>eth0&lt;/code>ë¡œ ë³´ë‚¸ ìš”ì²­ì„ sidecarë¥¼ ê±°ì³ ì—¬ì „íˆ &lt;code>eth0&lt;/code>ê°€ ìš”ì²­ì„ ë°›ì„ ìˆ˜ ìˆì–´ì§.&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>ì´ëŸ¬í•œ ë³€ê²½ ì‚¬í•­ì´ ì¶”ê°€ëœ ì´ìœ ëŠ”?&lt;/strong>&lt;/p>
&lt;p>On-premiseë‚˜ non-k8s í™˜ê²½ì—ì„œëŠ” ë³´í†µ &lt;code>lo&lt;/code> ì— ì„œë²„ë¥¼ ë„ìš°ëŠ” ê²½ìš°ëŠ” ì™¸ë¶€ì—ì„œì˜ ì ‘ì†ì„ ë§‰ìœ¼ë ¤ëŠ” ê²½ìš°ì¼ ê²ƒì…ë‹ˆë‹¤. ë°˜ë©´ &lt;code>eth0&lt;/code> ì— ì„œë²„ë¥¼ ë„ìš°ëŠ” ê²½ìš°ëŠ” ì™¸ë¶€ì—ì„œì˜ ì ‘ì†ì„ í—ˆìš©í•˜ë ¤ëŠ” ê²½ìš°ì¼ ê²ƒì…ë‹ˆë‹¤.&lt;/p>
&lt;p>í•˜ì§€ë§Œ ì´ì „ì—ëŠ” ì´ëŸ¬í•œ ê¸°ì¡´ í™˜ê²½ì—ì„œ istioë¥¼ ë„ì…í•˜ê²Œ ë˜ë©´ ê¸°ì¡´ì˜ ì˜ë„ì™€ ë°˜ëŒ€ë˜ê²Œ ì˜¤íˆë ¤ &lt;code>lo&lt;/code> ì— ì„œë²„ë¥¼ ë„ìš´ ê²½ìš° ì˜¤íˆë ¤ envoy sidecarì—ê²Œ ìš”ì²­ì„ ì „ë‹¬ë°›ì„ ìˆ˜ ìˆì–´ì§€ê³ , &lt;code>eth0&lt;/code> ì— ì„œë²„ë¥¼ ë„ìš´ ê²½ìš°ëŠ” ì˜¤íˆë ¤ enovy sidecarì—ê²Œ ìš”ì²­ì„ ì „ë‹¬ë°›ì„ ìˆ˜ ì—†ì—ˆë˜ ëª¨ìˆœëœ ìƒí™©ì´ ë°œìƒí–ˆë‹¤ê³  í•©ë‹ˆë‹¤.&lt;/p>
&lt;p>ë”°ë¼ì„œ ì´ëŸ¬í•œ ëª¨ìˆœëœ ìƒí™©ë“¤ì„ ë°©ì§€í•˜ê³ ì ì´ëŸ¬í•œ ë³€ê²½ì‚¬í•­ì´ ì¶”ê°€ë˜ì—ˆë‹¤ê³  í•©ë‹ˆë‹¤.&lt;/p>
&lt;h2 id="minikubeë¥¼-í†µí•´-k8s-12015-í™˜ê²½-êµ¬ì¶•í•˜ê¸°">minikubeë¥¼ í†µí•´ k8s 1.20.15 í™˜ê²½ êµ¬ì¶•í•˜ê¸°&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">$ minikube start --profile k8s-1-20 --kubernetes-version 1.20.15
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ìœ„ì˜ ëª…ë ¹ì–´ë¥¼ í†µí•´ íŠ¹ì • k8s ë²„ì „(1.20.15)ì˜ í™˜ê²½ì„ ë¡œì»¬ì— êµ¬ì¶•í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;h2 id="k8sì—-istio-19ì™€-110-ì„¤ì¹˜í•˜ê¸°">k8sì— istio 1.9ì™€ 1.10 ì„¤ì¹˜í•˜ê¸°&lt;/h2>
&lt;p>istioctlì„ í†µí•´ ë‘ ë²„ì „ì˜ istioë¥¼ k8s clusterì— ë°°í¬í•´ì¤„ ê²ƒì…ë‹ˆë‹¤.&lt;/p>
&lt;p>istioctlì˜ ë²„ì „ì— ë§ê²Œ istioê°€ ì„¤ì¹˜ë˜ê¸° ë•Œë¬¸ì— ê·¸ë•Œ ê·¸ë•Œ í¸ë¦¬í•˜ê²Œ istioctlì˜ ë²„ì „ì„ ë³€ê²½í•´ì•¼í•©ë‹ˆë‹¤. ë”°ë¼ì„œ ì €ëŠ” &lt;a class="link" href="https://github.com/asdf-vm/asdf" target="_blank" rel="noopener"
>asdf&lt;/a>ë¼ëŠ” ë„êµ¬ë¥¼ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤. ìŠ¤íƒ€ ìˆ˜ëŠ” ì ì§€ë§Œ &lt;a class="link" href="https://github.com/virtualstaticvoid/asdf-istioctl" target="_blank" rel="noopener"
>asdfì˜ istioctl plugin&lt;/a>ì„ ì´ìš©í•˜ê¸°ë„ í–ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://umi0410.github.io/blog/devops/istio-1-10-network-interface/istioctl-profiles.png"
width="3182"
height="582"
srcset="https://umi0410.github.io/blog/devops/istio-1-10-network-interface/istioctl-profiles_huc2f3f759952870d04254f07cdea3bebc_60119_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/devops/istio-1-10-network-interface/istioctl-profiles_huc2f3f759952870d04254f07cdea3bebc_60119_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="ë¯¸ë¦¬ ì •ì˜ë˜ì–´ ìˆëŠ” Profile ëª©ë¡"
class="gallery-image"
data-flex-grow="546"
data-flex-basis="1312px"
>&lt;/p>
&lt;p>ì°¸ê³ : &lt;a class="link" href="https://istio.io/latest/docs/setup/additional-setup/config-profiles/" target="_blank" rel="noopener"
>https://istio.io/latest/docs/setup/additional-setup/config-profiles/&lt;/a>&lt;/p>
&lt;p>istioctlì„ í†µí•´ istioë¥¼ í´ëŸ¬ìŠ¤í„°ì— ë°°í¬í•  ë•Œì—ëŠ” ë¯¸ë¦¬ ì •ì˜ë˜ì–´ìˆëŠ” profileì´ë¼ëŠ” ê²ƒì„ ì´ìš©í•´ ì¢€ ë” í¸ë¦¬í•˜ê²Œ ì„¤ì •ì„ í•´ì¤„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë²ˆ ì‘ì—…ì—ì„œ gatewayë“¤ì€ í•„ìš” ì—†ê¸° ë•Œë¬¸ì— ì €ëŠ” minimal profileì„ í†µí•´ ì„¤ì¹˜í•´ì£¼ê² ìŠµë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">asdf plugin-add istioctl https://github.com/virtualstaticvoid/asdf-istioctl.git &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span>asdf install istioctl 1.9.9 &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span>asdf install istioctl 1.10.6
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ìœ„ì˜ ëª…ë ¹ì–´ë¥¼ í†µí•´ istioctl 1.9.9ì™€ 1.10.6 ë‘ ë²„ì „ì„ ëª¨ë‘ ì„¤ì¹˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">$ asdf global istioctl 1.9.9 &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> istioctl version
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">no running Istio pods in &lt;span class="s2">&amp;#34;istio-system&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">1.9.9
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>istioctl 1.9.9ë¥¼ ì´ìš©í•˜ë„ë¡ ì„¤ì •í•©ë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">istioctl install --set &lt;span class="nv">profile&lt;/span>&lt;span class="o">=&lt;/span>minimal --set &lt;span class="nv">revision&lt;/span>&lt;span class="o">=&lt;/span>1-9 --set values.global.proxy.holdApplicationUntilProxyStarts&lt;span class="o">=&lt;/span>&lt;span class="nb">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">! values.global.proxy.holdApplicationUntilProxyStarts is deprecated&lt;span class="p">;&lt;/span> use meshConfig.defaultConfig.holdApplicationUntilProxyStarts instead
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">! Istio is being downgraded from 1.9.0 -&amp;gt; 1.9.9.This will install the Istio 1.9.9 minimal profile with &lt;span class="o">[&lt;/span>&lt;span class="s2">&amp;#34;Istio core&amp;#34;&lt;/span> &lt;span class="s2">&amp;#34;Istiod&amp;#34;&lt;/span>&lt;span class="o">]&lt;/span> components into the cluster. Proceed? &lt;span class="o">(&lt;/span>y/N&lt;span class="o">)&lt;/span> y
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">âœ” Istio core installed
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">âœ” Istiod installed
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">âœ” Installation &lt;span class="nb">complete&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>istio 1.9.9ë¥¼ &lt;code>1-9&lt;/code>ë¼ëŠ” revisionìœ¼ë¡œ ê¹”ì•„ì¤ë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;code>values.global.proxy.holdApplicationUntilProxyStarts&lt;/code>ì™€ &lt;code>meshConfig.defaultConfig.holdApplicationUntilProxyStarts&lt;/code>ëŠ” envoy proxyê°€ ì¤€ë¹„ëœ ë’¤ì—
ìš°ë¦¬ê°€ ì •ì˜í•œ ì‹¤ì œ ì»¨í…Œì´ë„ˆë¥¼ ì‹œì‘í•˜ëŠ” ì˜µì…˜ì…ë‹ˆë‹¤. ì „ìëŠ” Deprecated ë˜ì—ˆë‹¤ê³  ê²½ê³ ê°€ ëœ¨ì§€ë§Œ ì ìš©í•´ë³¸ ê²°ê³¼ 1.9 ë²„ì „ ëŒ€ì—ì„œëŠ” ì—¬ì „íˆ ì „ìë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒ ê°™ë”ë¼êµ¬ìš”.
ë”°ë¼ì„œ ì €ëŠ” 1.9.9 ë²„ì „ì—ì„œëŠ” ì „ìì˜ ì¸ìë¥¼, 1.10.6 ë²„ì „ì—ì„œëŠ” í›„ìì˜ ì¸ìë¥¼ ì ìš©í•´ì£¼ì—ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>ë§Œì•½ envoy proxyê°€ ì™„ì „íˆ ì¤€ë¹„ë˜ê¸° ì „ì— ë‹¤ë¥¸ ì»¨í…Œì´ë„ˆì—ì„œ ë„¤íŠ¸ì›Œí¬ ì‘ì—…ì„ ìˆ˜í–‰í•˜ë©´ í•´ë‹¹ ì‘ì—…ì€ ì„±ê³µì ìœ¼ë¡œ ìˆ˜í–‰ë˜ì§€ ì•Šì„ ê²ƒì…ë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">$ asdf global istioctl 1.10.6 &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> istioctl version
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">client version: 1.10.6
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">control plane version: 1.9.9
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">data plane version: none
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>istioctl 1.10.6ì„ ì´ìš©í•˜ë„ë¡ ì„¤ì •í•©ë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">$ istioctl install --set &lt;span class="nv">profile&lt;/span>&lt;span class="o">=&lt;/span>minimal --set &lt;span class="nv">revision&lt;/span>&lt;span class="o">=&lt;/span>1-10 --set meshConfig.defaultConfig.holdApplicationUntilProxyStarts&lt;span class="o">=&lt;/span>&lt;span class="nb">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">WARNING: Istio is being upgraded from 1.9.9 -&amp;gt; 1.10.6.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">WARNING: Before upgrading, you may wish to use &lt;span class="s1">&amp;#39;istioctl analyze&amp;#39;&lt;/span> to check forIST0002 and IST0135 deprecation warnings.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">This will install the Istio 1.10.6 minimal profile with &lt;span class="o">[&lt;/span>&lt;span class="s2">&amp;#34;Istio core&amp;#34;&lt;/span> &lt;span class="s2">&amp;#34;Istiod&amp;#34;&lt;/span>&lt;span class="o">]&lt;/span> components into the cluster. Proceed? &lt;span class="o">(&lt;/span>y/N&lt;span class="o">)&lt;/span> y
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">âœ” Istio core installed
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">âœ” Istiod installed
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">âœ” Installation &lt;span class="nb">complete&lt;/span> Thank you &lt;span class="k">for&lt;/span> installing Istio 1.10. Please take a few minutes to tell us about your install/upgrade experience! https://forms.gle/KjkrDnMPByq7akrYA
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>istio 1.10.6ì„ &lt;code>1-10&lt;/code>ì´ë¼ëŠ” revisionìœ¼ë¡œ ê¹”ì•„ì¤ë‹ˆë‹¤.&lt;/p>
&lt;p>ì›Œë‹ì´ ë– ìˆê¸´ í•˜ì§€ë§Œ ê·¸ë‹¥ ìƒê´€ì€ ì—†ìŠµë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">$ kubectl get pod -n istio-system
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME READY STATUS RESTARTS AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">istiod-1-10-5cd4d5b44d-b98xm 1/1 Running &lt;span class="m">0&lt;/span> 84s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">istiod-1-9-6b549b9d87-9f76b 1/1 Running &lt;span class="m">0&lt;/span> 2m56s
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ì˜ ê¹”ë ¸ë‹¤ë©´ ìœ„ì™€ ê°™ì´ Podë“¤ì´ ì„±ê³µì ìœ¼ë¡œ ë–´ì„ ê²ƒì…ë‹ˆë‹¤.&lt;/p>
&lt;h2 id="istio-sidecarê°€-injectedëœ-netcat-server--client-pod-ë°°í¬í•˜ê¸°">istio sidecarê°€ injectedëœ netcat server &amp;amp; client Pod ë°°í¬í•˜ê¸°&lt;/h2>
&lt;p>ì´ì œ netcat serverì´ì clientê°€ ë  Pod ë“¤ì„ ë°°í¬í•´ì¤„ ê²ƒì…ë‹ˆë‹¤.&lt;/p>
&lt;p>ë°°í¬í•  ë¦¬ì†ŒìŠ¤ë“¤ì€ ëª¨ë‘ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.&lt;/p>
&lt;ul>
&lt;li>&lt;strong>Namespace rev-1-9&lt;/strong> - istio 1.9ì˜ sidecar injectë¥¼ ë°›ì„ Namespace&lt;/li>
&lt;li>&lt;strong>Namespace rev-1-10&lt;/strong> - istio 1.10ì˜ sidecar injectë¥¼ ë°›ì„ Namespace&lt;/li>
&lt;li>&lt;strong>Pod netcat-client&lt;/strong> - &lt;code>default&lt;/code> Namespaceì—ì„œ ê° Serviceë¥¼ í†µí•´ netcat ìš”ì²­ì„ ë‚ ë ¤ì¤„ client&lt;/li>
&lt;li>&lt;strong>Pod netcat-lo&lt;/strong> - &lt;code>lo&lt;/code> ì¸í„°í˜ì´ìŠ¤ì˜ IP ì— netcat ì„œë²„ë¥¼ ë„ìš°ëŠ” Pod.&lt;/li>
&lt;li>&lt;strong>Pod netcat-eth0&lt;/strong> - &lt;code>eth0&lt;/code> ì¸í„°í˜ì´ìŠ¤ì˜ IPì— netcat ì„œë²„ë¥¼ ë„ìš°ëŠ” Pod.&lt;/li>
&lt;li>&lt;strong>Service lo&lt;/strong> - &lt;code>lo&lt;/code> ì¸í„°í˜ì´ìŠ¤ì˜ IPì— netcat ì„œë²„ë¥¼ ë„ìš´ Podë¥¼ ë…¸ì¶œì‹œì¼œì¤„ Service&lt;/li>
&lt;li>&lt;strong>Service eth0&lt;/strong> - &lt;code>eth0&lt;/code> ì¸í„°í˜ì´ìŠ¤ì˜ IPì— netcat ì„œë²„ë¥¼ ë„ìš´ Podë¥¼ ë…¸ì¶œì‹œì¼œì¤„ Service&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>(netcat ì„œë²„ PodëŠ” 8080 í¬íŠ¸ì— ìš”ì²­ì´ TCP ì»¤ë„¥ì…˜ì´ í˜•ì„±ë˜ë©´ â€œpongâ€ìœ¼ë¡œ ì‘ë‹µí•˜ëŠ” Podì…ë‹ˆë‹¤.)&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">apiVersion&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">v1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">kind&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Namespace&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">metadata&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">labels&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">istio.io/rev&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">1-9&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">rev-1-9&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nn">---&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">apiVersion&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">v1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">kind&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Namespace&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">metadata&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">labels&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">istio.io/rev&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">1-10&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">rev-1-10&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nn">---&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">apiVersion&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">v1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">kind&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Pod&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">metadata&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">namespace&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">default&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">netcat-client&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">spec&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">containers&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">ubuntu:22.04&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">command&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;/bin/bash&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;-c&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">args&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="p">|&lt;/span>&lt;span class="sd">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> apt update &amp;amp;&amp;amp; apt install -y ncat
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> while true;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> do sleep 60;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> done;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">imagePullPolicy&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">IfNotPresent&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">netcat-client&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">restartPolicy&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Always&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nn">---&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">apiVersion&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">v1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">kind&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Pod&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">metadata&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">namespace&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">rev-1-9&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">netcat-lo&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">labels&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">app&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">rev-1-9-lo&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">spec&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">containers&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">ubuntu:22.04&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">command&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;/bin/bash&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;-c&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">args&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="p">|&lt;/span>&lt;span class="sd">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> apt update &amp;amp;&amp;amp; apt install -y net-tools ncat
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> ifconfig eth0 | grep &amp;#39;inet &amp;#39; | awk &amp;#39;{print $2}&amp;#39;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> while true
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> do echo &amp;#39;pong&amp;#39; | nc -l 127.0.0.1 8080
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> sleep 1
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> done&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">imagePullPolicy&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">IfNotPresent&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">ubuntu&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ports&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">containerPort&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">8080&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">restartPolicy&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Always&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nn">---&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">apiVersion&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">v1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">kind&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Pod&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">metadata&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">namespace&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">rev-1-10&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">netcat-lo&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">labels&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">istio.io/rev&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">1-10&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">app&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">rev-1-10-lo&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">spec&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">containers&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">ubuntu:22.04&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">command&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;/bin/bash&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;-c&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">args&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="p">|&lt;/span>&lt;span class="sd">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> apt update &amp;amp;&amp;amp; apt install -y net-tools ncat
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> while true
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> do echo &amp;#39;pong&amp;#39; | nc -l 127.0.0.1 8080
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> sleep 1
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> done&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">imagePullPolicy&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">IfNotPresent&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">ubuntu&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ports&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">containerPort&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">8080&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">restartPolicy&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Always&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nn">---&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">apiVersion&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">v1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">kind&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Pod&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">metadata&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">namespace&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">rev-1-9&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">netcat-eth0&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">labels&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">istio.io/rev&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">1-9&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">app&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">rev-1-9-eth0&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">spec&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">containers&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">ubuntu:22.04&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">command&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;/bin/bash&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;-c&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">args&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="p">|&lt;/span>&lt;span class="sd">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> apt update &amp;amp;&amp;amp; apt install -y net-tools ncat
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> ifconfig eth0 | grep &amp;#39;inet &amp;#39; | awk &amp;#39;{print $2}&amp;#39;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> while true
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> do echo &amp;#39;pong&amp;#39; | nc -l $(ifconfig eth0 | grep &amp;#39;inet &amp;#39; | awk &amp;#39;{print $2}&amp;#39;) 8080
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> sleep 1
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> done&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">imagePullPolicy&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">IfNotPresent&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">ubuntu&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ports&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">containerPort&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">8080&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">restartPolicy&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Always&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nn">---&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">apiVersion&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">v1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">kind&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Pod&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">metadata&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">namespace&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">rev-1-10&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">netcat-eth0&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">labels&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">istio.io/rev&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">1-10&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">app&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">rev-1-10-eth0&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">spec&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">containers&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">ubuntu:22.04&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">command&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;/bin/bash&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;-c&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">args&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="p">|&lt;/span>&lt;span class="sd">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> apt update &amp;amp;&amp;amp; apt install -y net-tools ncat
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> ifconfig eth0 | grep &amp;#39;inet &amp;#39; | awk &amp;#39;{print $2}&amp;#39;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> while true
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> do echo &amp;#39;pong&amp;#39; | nc -l $(ifconfig eth0 | grep &amp;#39;inet &amp;#39; | awk &amp;#39;{print $2}&amp;#39;) 8080
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> done&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">imagePullPolicy&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">IfNotPresent&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">ubuntu&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ports&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">containerPort&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">8080&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">restartPolicy&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Always&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nn">---&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">apiVersion&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">v1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">kind&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Service&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">metadata&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">namespace&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">rev-1-9&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">lo&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">spec&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ports&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">port&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">8080&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">protocol&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">TCP&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">selector&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">app&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">rev-1-9-lo&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nn">---&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">apiVersion&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">v1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">kind&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Service&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">metadata&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">namespace&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">rev-1-9&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">eth0&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">spec&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ports&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">port&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">8080&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">protocol&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">TCP&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">selector&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">app&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">rev-1-9-eth0&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nn">---&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">apiVersion&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">v1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">kind&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Service&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">metadata&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">namespace&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">rev-1-10&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">lo&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">spec&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ports&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">port&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">8080&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">protocol&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">TCP&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">selector&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">app&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">rev-1-10-lo&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nn">---&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">apiVersion&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">v1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">kind&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Service&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">metadata&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">namespace&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">rev-1-10&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">eth0&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">spec&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ports&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">port&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">8080&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">protocol&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">TCP&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">selector&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">app&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">rev-1-10-eth0&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">$ kubectl apply -f tmp.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">namespace/rev-1-9 created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">namespace/rev-1-10 created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pod/netcat-client created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pod/netcat-lo created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pod/netcat-lo created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pod/netcat-eth0 created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pod/netcat-eth0 created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">service/lo created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">service/eth0 created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">service/lo created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">service/eth0 created
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ìœ„ì˜ ëª…ë ¹ì–´ë“¤ì„ ì´ìš©í•´ sidecarê°€ injectedë  netcat ì„œë²„ì™€ í´ë¼ì´ì–¸íŠ¸ Podë¥¼ ë°°í¬í•´ì¤ë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">$ kubectl get pod -A
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAMESPACE NAME READY STATUS RESTARTS AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">default netcat-client 1/1 Running &lt;span class="m">0&lt;/span> 15m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">istio-system istiod-1-10-5cd4d5b44d-8lv2h 1/1 Running &lt;span class="m">0&lt;/span> 145m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">istio-system istiod-1-9-5ccbd888d8-scdzz 1/1 Running &lt;span class="m">0&lt;/span> 107m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rev-1-10 netcat-eth0 2/2 Running &lt;span class="m">0&lt;/span> 18m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rev-1-10 netcat-lo 2/2 Running &lt;span class="m">0&lt;/span> 18m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rev-1-9 netcat-eth0 2/2 Running &lt;span class="m">1&lt;/span> 17m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rev-1-9 netcat-lo 2/2 Running &lt;span class="m">1&lt;/span> 17m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ kubectl get svc -A
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAMESPACE NAME TYPE CLUSTER-IP EXTERNAL-IP PORT&lt;span class="o">(&lt;/span>S&lt;span class="o">)&lt;/span> AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">default kubernetes ClusterIP 10.96.0.1 &amp;lt;none&amp;gt; 443/TCP 3h10m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">istio-system istiod-1-10 ClusterIP 10.110.227.112 &amp;lt;none&amp;gt; 15010/TCP,15012/TCP,443/TCP,15014/TCP 3h3m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">istio-system istiod-1-9 ClusterIP 10.107.205.100 &amp;lt;none&amp;gt; 15010/TCP,15012/TCP,443/TCP,15014/TCP 145m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-system kube-dns ClusterIP 10.96.0.10 &amp;lt;none&amp;gt; 53/UDP,53/TCP,9153/TCP 3h10m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rev-1-10 eth0 ClusterIP 10.111.38.103 &amp;lt;none&amp;gt; 8080/TCP 35m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rev-1-10 lo ClusterIP 10.106.100.209 &amp;lt;none&amp;gt; 8080/TCP 35m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rev-1-9 eth0 ClusterIP 10.105.29.177 &amp;lt;none&amp;gt; 8080/TCP 35m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rev-1-9 lo ClusterIP 10.100.228.64 &amp;lt;none&amp;gt; 8080/TCP 35m
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ì„±ê³µì ìœ¼ë¡œ ë°°í¬í–ˆë‹¤ë©´ ìœ„ì™€ ê°™ì„ ê²ƒì…ë‹ˆë‹¤.&lt;/p>
&lt;h2 id="netcat-ì„œë²„ë“¤ì—ê²Œ-ìš”ì²­-ë³´ë‚´ë³´ê¸°">netcat ì„œë²„ë“¤ì—ê²Œ ìš”ì²­ ë³´ë‚´ë³´ê¸°&lt;/h2>
&lt;p>kubectl execì™€ netcat ëª…ë ¹ì–´ë¥¼ í†µí•´ &lt;code>netcat-client&lt;/code> ì˜ ì´ë¦„ìœ¼ë¡œ ë°°í¬í•œ Podë¡œ ê° Serviceë“¤ì„ ê±°ì³ ê° Podì—ê²Œ ìš”ì²­ì„ ë³´ë‚´ë³¼ ê²ƒì…ë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">$ kubectl &lt;span class="nb">exec&lt;/span> -n default netcat-client -- bash -c &lt;span class="s2">&amp;#34;echo &amp;#39;ping&amp;#39; | nc lo.rev-1-9 8080&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pong
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ kubectl &lt;span class="nb">exec&lt;/span> -n default netcat-client -- bash -c &lt;span class="s2">&amp;#34;echo &amp;#39;ping&amp;#39; | nc eth0.rev-1-9 8080&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Ncat: Connection reset by peer.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">command&lt;/span> terminated with &lt;span class="nb">exit&lt;/span> code &lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ê° Podì˜ netcat serverê°€ ì„±ê³µì ìœ¼ë¡œ ì‹¤í–‰ë˜ë©´ ìœ„ì™€ ê°™ì´ &lt;code>netcat-client&lt;/code> Podë¥¼ ì´ìš©í•´ ëª…ë ¹ì„ ë‚ ë ¤ ì‘ë‹µì„ ë°›ì•„ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>(&lt;strong>ì´ˆê¸° ì„œë²„ê°€ êµ¬ë™ë˜ê¸°ê¹Œì§€ ë‹¤ì†Œ ì‹œê°„ì´ ê±¸ë¦´ ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/strong> ì´ ê²½ìš° ì„œë²„ì˜ ë¡œê·¸ë¥¼ í†µí•´ ì„œë²„ê°€ êµ¬ë™ëëŠ”ì§€ë¥¼ í™•ì¸í•´ë³´ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.)&lt;/p>
&lt;p>&lt;code>eth0&lt;/code>ì˜ IPì— ì„œë²„ë¥¼ ë„ìš´ Podë¥¼ ëª©ì ì§€ë¡œ í•˜ëŠ” Serviceì—ê²Œ ìš”ì²­ì„ ë³´ë‚¼ ê²½ìš° í•´ë‹¹ ëª©ì ì§€ Podê°€ istio 1.9ì— ì˜í•´ sidecar injection ë˜ì—ˆë‹¤ë©´ Pod ë‚´ì˜ ì„œë²„ëŠ” ì˜¬ë°”ë¥´ê²Œ ìš”ì²­ì„ ì „ë‹¬ë°›ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">$ kubectl &lt;span class="nb">exec&lt;/span> -n default netcat-client -- bash -c &lt;span class="s2">&amp;#34;echo &amp;#39;ping&amp;#39; | nc lo.rev-1-10 8080&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Ncat: Connection reset by peer.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">command&lt;/span> terminated with &lt;span class="nb">exit&lt;/span> code &lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ kubectl &lt;span class="nb">exec&lt;/span> -n default netcat-client -- bash -c &lt;span class="s2">&amp;#34;echo &amp;#39;ping&amp;#39; | nc eth0.rev-1-10 8080&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pong
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>istio 1.10ì„ ì´ìš©í•œ ê²½ìš° ê²°ê³¼ëŠ” ì˜ˆìƒëŒ€ë¡œ istio 1.9ì™€ ë°˜ëŒ€ì…ë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;code>lo&lt;/code> ì˜ IPì— ì„œë²„ë¥¼ ë„ìš´ Podë¥¼ ëª©ì ì§€ë¡œ í•˜ëŠ” Serviceì—ê²Œ ìš”ì²­ì„ ë³´ë‚¼ ê²½ìš° í•´ë‹¹ ëª©ì ì§€ Podê°€ istio 1.10ì— ì˜í•´ sidecar injection ë˜ì—ˆë‹¤ë©´ Pod ë‚´ì˜ ì„œë²„ëŠ” ì˜¬ë°”ë¥´ê²Œ ìš”ì²­ì„ ì „ë‹¬ë°›ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.&lt;/p>
&lt;h2 id="ë§ˆì¹˜ë©°">ë§ˆì¹˜ë©°&lt;/h2>
&lt;p>ìš”ì¦˜ ë²„ì „ì´ ì°¸ ì¤‘ìš”í•˜ë‹¤ëŠ” ìƒê°ì´ ë“­ë‹ˆë‹¤. ì‹¤ì œë¡œ &lt;strong>ì´ë ‡ê²Œ ë²„ì „ì— ë”°ë¼ í†µì‹ ì´ ë˜ê³  ì•ˆ ë˜ê³ ê°€ ê²°ì •ë  ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì„ í™•ì¸í•´ë³´ë‹ˆ í•œì¸µ ë” ë²„ì „ì´ ì¤‘ìš”í•˜ê²Œ ëŠê»´ì§‘ë‹ˆë‹¤.&lt;/strong>&lt;/p>
&lt;p>ë”°ë¡œ ì»¨í…Œì´ë„ˆ ì´ë¯¸ì§€ë¥¼ ì œì‘í•˜ê³  imagePullSecretì„ ê¸°ì…í•˜ê¸° ê·€ì°®ì•„ì„œ ê¸°ì¡´ì— ì¡´ì¬í•˜ëŠ” Ubuntu ì´ë¯¸ì§€ë¥¼ í™œìš©í•˜ë ¤ë‹¤ ë³´ë‹ˆ ê°„ë‹¨í•˜ê²Œ ë„¤íŠ¸ì›Œí¬ í†µì‹ ì„ í•˜ê¸° ìœ„í•´ netcatì„ ì ê·¹ í™œìš©í•´ë´¤ìŠµë‹ˆë‹¤. ì˜¤íˆë ¤ ë„ˆë¬´ ì½”ë“œê°€ ê¸¸ì–´ì¡Œë‚˜ ì‹¶ê¸°ë„í•˜ë„¤ìš”.&lt;/p>
&lt;p>ì´ ì‘ì—…ì„ í•˜ë©´ì„œ ì™„ì „íˆ ì´í•´í•˜ì§€ ëª»í•œ ë¶€ë¶„ì´ í•œ ê°€ì§€ ì¡´ì¬í•˜ê¸´ í•©ë‹ˆë‹¤. ì‘ì—…í•˜ë©° ê²½í—˜í•œ ë°”ë¡œëŠ” Podì˜ IPë¡œ ìš”ì²­ì„ ë³´ë‚´ëŠ” ê²½ìš°ì—ëŠ” istio ë²„ì „ì— ë¬´ê´€í•˜ê²Œ eth0ì˜ IPë¡œ ì„œë²„ë¥¼ ë„ì›Œì•¼ë§Œ ì™¸ë¶€(ë™ë£Œ Podë“¤)ì—ì„œëŠ” ì ‘ì†ì´ ê°€ëŠ¥í•˜ê³ , loì˜ IPë¡œ ì„œë²„ë¥¼ ë„ìš°ëŠ” ê²½ìš° Podì˜ IPë¡œ ì ‘ì†ì´ ë¶ˆê°€ëŠ¥í–ˆëŠ”ë°ìš”. ì‚¬ì‹¤ ì´ë¡œ ì¸í•´ ë§ì€ ì‚½ì§ˆì„ í–ˆìŠµë‹ˆë‹¤â€¦ ì™œ ì„œë¹„ìŠ¤ë¡œ ì ‘ì†í•  ë•Œì—ëŠ” ì˜ˆìƒëŒ€ë¡œ ë²„ì „ì— ë§ëŠ” ë™ì‘ì„ í•˜ëŠ”ë°, Podì˜ IPë¡œ ì§ì ‘ ì ‘ì†í•  ë•Œì—ëŠ” ë¬´ì¡°ê±´ eth0ì˜ IPë¡œ ì„œë²„ë¥¼ ë„ìš´ ê²½ìš°ì—ë§Œ ì™¸ë¶€ì—ì„œ ì ‘ê·¼ì´ ê°€ëŠ¥í•œì§€ëŠ” ì˜ ëª¨ë¥´ê² ìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>í•˜ì§€ë§Œ ê³¼ê±° ë²„ì „ì˜ istioë¥¼ í†µí•´ ë„¤íŠ¸ì›Œí¬ ì¸í„°í˜ì´ìŠ¤ì˜ ë™ì‘ì„ í™•ì¸í•´ë³´ëŠ” ê²ƒì€ ì´ ì •ë„ë¡œ ì¶©ë¶„í•  ê²ƒ ê°™ë‹¤ê³  ìƒê°ì´ ë“¤ì–´ ì´ë²ˆ ê¸€ì€ ì—¬ê¸°ì„œ ë§ˆë¬´ë¦¬ ì§€ìœ¼ë ¤í•©ë‹ˆë‹¤. ğŸ™‚&lt;/p></description></item><item><title>ì¿ ë²„ë„¤í‹°ìŠ¤ë¡œ Clova AI Custom Extension ë°°í¬í•˜ê¸° (feat. Istio, Cert Manager)</title><link>https://umi0410.github.io/blog/clova-ai-on-k8s/</link><pubDate>Wed, 13 Jul 2022 23:00:00 +0900</pubDate><guid>https://umi0410.github.io/blog/clova-ai-on-k8s/</guid><description>&lt;img src="https://umi0410.github.io/blog/clova-ai-on-k8s/preview.png" alt="Featured image of post ì¿ ë²„ë„¤í‹°ìŠ¤ë¡œ Clova AI Custom Extension ë°°í¬í•˜ê¸° (feat. Istio, Cert Manager)" />&lt;h2 id="ì‹œì‘í•˜ë©°">ì‹œì‘í•˜ë©°&lt;/h2>
&lt;p>&lt;img src="https://umi0410.github.io/blog/clova-ai-on-k8s/preview.png"
width="827"
height="555"
srcset="https://umi0410.github.io/blog/clova-ai-on-k8s/preview_hu0de35698344aa28c3f5141b2d5dcaef6_812038_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/clova-ai-on-k8s/preview_hu0de35698344aa28c3f5141b2d5dcaef6_812038_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="Clova AI ìŠ¤í”¼ì»¤"
class="gallery-image"
data-flex-grow="149"
data-flex-basis="357px"
>&lt;/p>
&lt;p>&lt;strong>ì˜¬í•´ì—ëŠ” ë§ì€ ë³€í™”ê°€ ìˆì—ˆë‹¤!&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>ğŸ’¼ &lt;strong>ë°ë¸Œì˜µìŠ¤ ì—”ì§€ë‹ˆì–´&lt;/strong>ë¡œ íšŒì‚¬ë¥¼ ê°€ê²Œ ëê³  ì•„ì£¼ ë§Œì¡± ì¤‘ì´ë‹¤!&lt;/li>
&lt;li>ğŸ  íšŒì‚¬ì˜ ì¢‹ì€ ë³´ìƒ, ë³µì§€ì— í˜ì…ì–´ ìƒì•  ì²« &lt;strong>ìì·¨&lt;/strong>ë¥¼ í•˜ê²Œ ëë‹¤.&lt;/li>
&lt;li>ğŸ’» &lt;strong>ë„¤íŠ¸ì›Œí¬&lt;/strong>ë‚˜ &lt;strong>ë¦¬ëˆ…ìŠ¤&lt;/strong>, &lt;strong>ë³´ì•ˆ&lt;/strong> ë“± ë”¥í•œ ì˜ì—­ì— ì¢€ ë” ê´€ì‹¬ì„ ê°–ê²Œ ëë‹¤.&lt;/li>
&lt;li>ğŸ¸ &lt;strong>ê¸°íƒ€&lt;/strong>ë¥¼ ê¾¸ì¤€íˆ ë‹¤ë‹ˆê³  ìˆë‹¤.&lt;/li>
&lt;/ul>
&lt;p>ê·¸ëŸ° ë³€í™”ë“¤ ì†ì—ì„œ ìì·¨ë°©ì— ì¸í„°ë„· ì„¤ì¹˜ë¥¼ í•˜ê²Œ ëëŠ”ë° &lt;strong>í´ë¡œë°” AI ìŠ¤í”¼ì»¤&lt;/strong>ë¥¼ ê³µì§œë¡œ ì£¼ë”ë¼.&lt;/p>
&lt;p>ë³¸ê°€ì— ìˆì„ ë•Œë„ ì“°ê¸´ í–ˆëŠ”ë° ë”±íˆ ê´€ì‹¬ ì—†ë‹¤ê°€ ì§ì ‘ í´ë¡œë°” ì•±ì„ ê¹”ì•„ì„œ ì´ê²ƒì €ê²ƒ ì¨ë³´ë‹ˆ &amp;lsquo;ì „ë³´ë‹¤ ì¬ë°Œë„¤..? ã…ã…&amp;rsquo; ì‹¶ì—ˆê³ , &amp;lsquo;ì•„ë‹ˆ ì´ê±° ì§ì ‘ ë§Œë“¤ì§€ëŠ” ëª»í•˜ë‚˜&amp;rsquo;í•˜ëŠ” ìƒê°ì´ ë“¤ë˜ ì°¸ì— &amp;ldquo;ìŠ¤í‚¬ ìŠ¤í† ì–´â€ë¼ëŠ” ê²Œ ëˆˆì— ë„ì—ˆë‹¤. ìŠ¤í‚¬ ìŠ¤í† ì–´ì—ëŠ” ê°œë³„ ê°œë°œì‚¬ë“¤ì´ ê°œë°œí•œ ìê¸°ë„¤ ê¸°ëŠ¥ë“¤ì´ ì†Œê°œë˜ì–´ìˆì—ˆë‹¤.&lt;/p>
&lt;p>ìš”ì¦˜ ì¬ë¯¸ìˆê²Œ ë”¥í•œ ì˜ì—­ì„ ê³µë¶€í•´ë‚˜ê°€ê³  ìˆê¸´ í•˜ì§€ë§Œ ë„ˆë¬´ ë”¥í•œ ê²ƒë§Œ í•˜ë‹¤ë³´ë‹ˆ ì‹¬ì‹¬í’€ì´ ì‘ì—… ì¢€ ì¦ê¸°ê³  ì‹¶ì€ ë§ˆìŒì— ë‚˜ë„ í•˜ë‚˜ ìŠ¤í‚¬ì„ ë§Œë“¤ì–´ë³´ê³ ì í–ˆë‹¤. ë§ˆì¹¨ ìš”ì¦˜ &lt;code>istio&lt;/code>ì—ë„ ê´€ì‹¬ì´ ë§ì´ ê°”ê³  ì ìš©í•´ë³´ê³  ì‹¶ì—ˆëŠ”ë° ê°–ê³  ìˆë˜ k8s í´ëŸ¬ìŠ¤í„°ì— istioëŠ” ë°°í¬í•´ë†“ì€ ìƒíƒœì˜€ê³ , &lt;code>Gateway&lt;/code>, &lt;code>VirtualService&lt;/code> ë“±ì˜ &lt;code>CRD&lt;/code>ì™€ &lt;code>ì¸ì¦ì„œ&lt;/code>ë§Œ ì˜ ë§Œì ¸ì£¼ë©´ ìŠ¤í‚¬ì„ ê³µê°œí•  ìˆ˜ ìˆì„ ê²ƒ ê°™ì•˜ë‹¤.&lt;/p>
&lt;p>ê·¸ë¦¬í•˜ì—¬ &amp;ldquo;&lt;strong>ìš°ë¯¸, ë¯¸ìŠ¤í„° ë””ë²„ê±°&lt;/strong>&amp;ldquo;ë¼ëŠ” ìŠ¤í‚¬ì„ ê°œë°œí•˜ê³ ì í–ˆê³  ì´ ë…€ì„ì˜ ê¸°ëŠ¥ì€ ì‚¬ìš©ìê°€ &amp;ldquo;ë””ë²„ê±°, ë””ë²„ê¹… íŒ ì¢€ ì•Œë ¤ì¤˜&amp;quot;ë¼ëŠ” ì‹ìœ¼ë¡œ ìš”ì²­í•˜ë©´ ë¯¸ë¦¬ ì •ì˜í•´ë†“ì€ ë””ë²„ê¹… íŒ(e.g. &amp;ldquo;í™˜ê²½ë³€ìˆ˜ê°€ ì˜ ì„¤ì •ë˜ì–´ìˆë‚˜ìš”?&amp;rdquo;) ì¤‘ì—ì„œ ëœë¤ìœ¼ë¡œ íŒì„ ì•Œë ¤ì£¼ëŠ” ê²ƒì´ë‹¤.&lt;/p>
&lt;blockquote>
&lt;p>&lt;em>ì´ë²ˆ ê¸€ì€ ê·¸ëƒ¥ ì¼ê¸°ì¥ ê°™ì€ ëŠë‚Œìœ¼ë¡œ CS ì§€ì‹ì€ ì¼ë¶€ ì œì™¸í•˜ê³  ì ì–´ë³´ë ¤í•©ë‹ˆë‹¤.&lt;/em>&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>&lt;em>ì´ë²ˆ ê¸€ì—ì„œ ì‚¬ìš©í•œ ì†ŒìŠ¤ì½”ë“œëŠ” Github &lt;a class="link" href="https://github.com/umi0410/umi-mrdebugger" target="_blank" rel="noopener"
>umi0410/umi-mrdebugger&lt;/a>ì—ì„œ ì°¾ì•„ë³´ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/em>&lt;/p>
&lt;/blockquote>
&lt;h2 id="í™˜ê²½-ë°-ë²„ì „-ì •ë³´">í™˜ê²½ ë° ë²„ì „ ì •ë³´&lt;/h2>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>ì´ë¦„&lt;/th>
&lt;th>ë²„ì „&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>k8s cluster&lt;/td>
&lt;td>1.22&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Istio&lt;/td>
&lt;td>1.11.8&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>cert-manager&lt;/td>
&lt;td>1.8.2&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>ì‹¤ì œë¡œ ì‹¤ë¬´ë¥¼ ë‹¤ë£¨ê³  ìµœì‹  ê¸°ìˆ ë“¤ì„ ì´ìš©í•˜ë‹¤ë³´ë‹ˆ &lt;strong>ìµœê·¼ ë²„ì „ìœ¼ë¡œ ì¸í•œ ì‚½ì§ˆì´ ì¦ì•˜ë‹¤&lt;/strong>. ë”°ë¼ì„œ í˜¹ì‹œ ì°¸ê³ í•˜ì‹¤ ë¶„ì´ ê³„ì‹¤ê¹Œ ì‹¶ì–´ ë‚´ í´ëŸ¬ìŠ¤í„°ì˜ í™˜ê²½ ë° ë²„ì „ ì •ë³´ë¥¼ ì •ë¦¬í•´ë´¤ë‹¤. &lt;strong>ë²„ì „ì€ ì°¸ ì¤‘ìš”í•˜ë‹¤&lt;/strong>. ê° ë„êµ¬ë“¤ì˜ í˜¸í™˜ì„±ì„ ì˜ í™•ì¸í•´ë´ì•¼í•œë‹¤.&lt;/p>
&lt;p>ë‚˜ëŠ” í´ëŸ¬ìŠ¤í„°ë¥¼ í•œë™ì•ˆ ì—…ê·¸ë ˆì´ë“œ í•´ì£¼ì§€ ì•Šì•„ 2022ë…„ 7ì›” ê¸°ì¤€ìœ¼ë¡œ ê·¸ëƒ¥ ì €ëƒ¥ ìµœì‹ ì€ ì•„ë‹Œ &lt;a class="link" href="https://kubernetes.io/releases/patch-releases/#1-22" target="_blank" rel="noopener"
>1.22 ë²„ì „&lt;/a>ì˜ k8s í´ëŸ¬ìŠ¤í„°ë¥¼ ê°–ê³  ìˆì—ˆê³  istioëŠ” k8s 1.22ì™€ í˜¸í™˜ë˜ëŠ” ë²„ì „ ì¤‘ ê°€ì¥ ì˜¤ë˜ëœ minor ë²„ì „ì˜ &lt;a class="link" href="https://istio.io/latest/docs/releases/supported-releases/" target="_blank" rel="noopener"
>1.11.8&lt;/a>ì„ ì‚¬ìš©í–ˆë‹¤. istioë¥¼ ìµœëŒ€í•œ êµ¬ë²„ì „ìœ¼ë¡œ ì´ìš©í•´ë³¸ ì´ìœ ëŠ” istioë¥¼ ì—…ê·¸ë ˆì´ë“œí•´ë‚˜ê°€ë©´ì„œ istioì˜ ë³€ê²½ì‚¬í•­, ì—­ì‚¬ë“±ì„ ê³µë¶€í•˜ë©´ ì¢‹ì„ ê²ƒ ê°™ê¸° ë•Œë¬¸ì´ì—ˆë‹¤. ë•Œë¡œëŠ” ì—…ê·¸ë ˆì´ë“œ ì‘ì—…ì„ ì‹¤ì œë¡œ ì§„í–‰í•´ì•¼í•  ìˆ˜ë„ ìˆê³  ë§ì´ë‹¤.&lt;/p>
&lt;p>&lt;code>cert-manager&lt;/code>ëŠ” ê°€ë” CRD api versionì´ ë³€ê²½ë˜ëŠ” ê²½ìš°ê°€ ìˆì–´ì„œ ê·¸ëƒ¥ ê¸°ë¡í•´ë†¨ë‹¤.&lt;/p>
&lt;p>&lt;code>k8s&lt;/code>ëŠ” &lt;code>GKE&lt;/code>ë¥¼ ì´ìš© ì¤‘ì´ê³  &lt;code>istio&lt;/code>ëŠ” &lt;code>istioct&lt;/code>lë¡œ, &lt;code>cert-manager&lt;/code>ëŠ” &lt;code>Helm3&lt;/code>ë¡œ ê´€ë¦¬ ì¤‘ì´ë‹¤.&lt;/p>
&lt;h2 id="ì„œë²„-ê°œë°œí•˜ê¸°">ì„œë²„ ê°œë°œí•˜ê¸°&lt;/h2>
&lt;p>ì„œë²„ ê°œë°œì€ ë³„ê±° ì—†ë‹¤. ê·¸ëƒ¥ HTTP Post ìš”ì²­ ë¶„ì„ í›„ ì‘ë‹µì„ ì£¼ë©´ ëœë‹¤. ì‹¤ì œë¡œ ì •ë§ ê·¸ ì •ë„ ìˆ˜ì¤€ì´ë¼ í‡´ê·¼ í›„ ëª‡ ì‹œê°„ ë§Œì— ê°œë°œ â†’ ë°°í¬ê¹Œì§€ ì™„ë£Œí•  ìˆ˜ ìˆì—ˆë‹¤. ìƒê°ë³´ë‹¤ ê¸ˆë°©ì´ì—ˆë‹¤.&lt;/p>
&lt;p>ì§ìƒëœ ì§€ ëª‡ ë…„ì€ ëœ ë“¯í•˜ë©´ì„œ &lt;a class="link" href="https://developers.naver.com/docs/clova/custom_ext/Develop/Guides/Build_Custom_Extension.md" target="_blank" rel="noopener"
>ê·¸ë‹¥ ì¹œì ˆí•˜ì§„ ì•Šì€ ê³µì‹ ë¬¸ì„œ&lt;/a>ì™€ &lt;a class="link" href="https://developers.naver.com/docs/clova/custom_ext/Develop/Examples/Extension_Examples.md#CoinHelper" target="_blank" rel="noopener"
>ì˜ˆì‹œ í”„ë¡œì íŠ¸(ì½”ì¸í—¬í¼)&lt;/a>ë¥¼ ì°¸ê³ í•˜ë©´ ì‰½ê²Œ ë§Œë“¤ì–´ë³¼ ìˆ˜ ìˆë‹¤. ë‚˜ëŠ” ì˜ˆì‹œ í”„ë¡œì íŠ¸ì¸ ì½”ì¸í—¬í¼ ë ˆí¬ì§€í† ë¦¬ë¥¼ í¬í¬ ë– ì„œ ê°œë°œí–ˆë‹¤.&lt;/p>
&lt;p>&amp;ldquo;ìš°ë¯¸, ë¯¸ìŠ¤í„° ë””ë²„ê±°&amp;rdquo; ë ˆí¬ì§€í† ë¦¬: &lt;a class="link" href="https://github.com/umi0410/umi-mrdebugger" target="_blank" rel="noopener"
>https://github.com/umi0410/umi-mrdebugger&lt;/a>&lt;/p>
&lt;p>(&lt;em>ì¼ê¸°ì¥ìŠ¤ëŸ¬ìš´ ê¸€ì´ë¯€ë¡œ ì½”ë“œë¥¼ í•´ì„í•˜ì§„ ì•Šê² ìŠµë‹ˆë‹¤.&lt;/em>)&lt;/p>
&lt;p>ë§ì€ ì˜ˆì‹œ í”„ë¡œì íŠ¸ ì¤‘ ì½”ì¸í—¬í¼ë¥¼ ê³¨ë¼ ê°œë°œí•´ë‚˜ê°„ ì´ìœ ëŠ” ìœ ì¼í•˜ê²Œ Goì–¸ì–´ë¡œ ê°œë°œëœ ì˜ˆì‹œ í”„ë¡œì íŠ¸ì˜€ê¸° ë•Œë¬¸ì¼ ë¿ì´ì—ˆë‹¤. ì‹¤ì œë¡œëŠ” ê·¸ëƒ¥ íƒ€ì… ì„ ì–¸ì´ë‘ ìœ í‹¸ í•¨ìˆ˜ ì •ë„ë§Œ ê°€ì ¸ì˜¤ê³  ë‚˜ë¨¸ì§„ ë‹¤ ì¬êµ¬í˜„í•˜ê²Œ ë˜ê¸´ í–ˆë‹¤. ê¸°ì¡´ì—” ë‚´ì¥ &lt;code>http&lt;/code> packageë¥¼ ì‚¬ìš©í–ˆëŠ”ë° &lt;code>fiber&lt;/code>ë¼ëŠ” ì›¹í”„ë ˆì„ì›Œí¬ ì´ìš©í•˜ë„ë¡ ë³€ê²½í•˜ëŠ” ë“±..&lt;/p>
&lt;h2 id="ì¿ ë²„ë„¤í‹°ìŠ¤ì—-ë°°í¬í•˜ê¸°">ì¿ ë²„ë„¤í‹°ìŠ¤ì— ë°°í¬í•˜ê¸°&lt;/h2>
&lt;p>ì¿ ë²„ë„¤í‹°ìŠ¤ì— ë°°í¬ëœ istioë¥¼ í†µí•´ ì™¸ë¶€ì—ì„œ ì„œë²„ Podë¡œ ì ‘ì† ê°€ëŠ¥í•˜ê²Œë” í•´ì¤„ ê²ƒì´ê³ , cert-managerë¥¼ í†µí•´ ì¸ì¦ì„œ ë°œê¸‰ í›„ í•´ë‹¹ ì¸ì¦ì„œì™€ ê´€ë ¨ëœ ì‹œí¬ë¦¿ì„ istioê°€ ê°€ì ¸ê°€ì„œ tlsë¥¼ ì œê³µí•œë‹¤.&lt;/p>
&lt;p>&lt;em>(k8s manifest file ë˜í•œ ì•ì„œ ì–¸ê¸‰í–ˆë“¯ &lt;a class="link" href="https://github.com/umi0410/umi-mrdebugger" target="_blank" rel="noopener"
>https://github.com/umi0410/umi-mrdebugger&lt;/a> ì—ì„œ ì°¾ì•„ë³´ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.)&lt;/em>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">umi-mrdebugger/k8s $ tree 4s 00:38:42
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”œâ”€â”€ certificate.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”œâ”€â”€ cluster-issuer.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”œâ”€â”€ deployment.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”œâ”€â”€ gateway.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”œâ”€â”€ svc.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â””â”€â”€ virtual-svc.yaml
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>í•„ìš”í•œ í•­ëª©ë“¤ì€ k8s ë¦¬ì†ŒìŠ¤ë“¤ì€ ìœ„ì™€ ê°™ë‹¤&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="c"># cluster-issuer.yaml&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">apiVersion&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">cert-manager.io/v1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">kind&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">ClusterIssuer&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">metadata&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">clova-issuer&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">namespace&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">cert-manager&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">spec&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">acme&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># The ACME server URL&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">server&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">https://acme-v02.api.letsencrypt.org/directory&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">email&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">dev.umijs@gmail.com&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># Name of a secret used to store the ACME account private key&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">privateKeySecretRef&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">clova-issuer-secret&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">solvers&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">http01&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ingress&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">class&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">istio&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>cert-managerê°€ Let&amp;rsquo;s Encryptë¡œ ì¸ì¦ì„œë¥¼ ë°œê¸‰ë°›ì„ ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” ClusterIssuerë¥¼ ì‘ì„±í•œë‹¤. ì•„ë§ˆ Certificateì™€ ë™ì¼ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ë¥¼ ì´ìš©í•œë‹¤ë©´ ClusterIssuerê°€ ì•„ë‹Œ Issuerì—¬ë„ ê´œì°®ì„ ê²ƒì´ë‹¤.&lt;/p>
&lt;p>ê·¸ë¦¬ê³  ê¸°ì¡´ì—ëŠ” Challenge ë°©ì‹ì„ DNS01ë¡œ í–ˆì—ˆëŠ”ë° DNS01 ë°©ì‹ì´ ì•½ê°„ ê°€ë¬¼ ê°€ë¬¼í•´ì ¸ì„œ ìš°ì„ ì€ HTTP01 ë°©ì‹ìœ¼ë¡œ ë„ë©”ì¸ì„ ì¸ì¦í•˜ê¸°ë¡œ í–ˆë‹¤.&lt;/p>
&lt;p>ì°¸ê³ ë¡œ HTTP01 ë°©ì‹ì„ ì´ìš©í•˜ëŠ” ê²½ìš° ì¸ì¦ì„œë¥¼ ë°œê¸‰ë°›ê¸° ì „ë¶€í„° ë¯¸ë¦¬ HTTP â†’ HTTPS ë¥¼ ì„¤ì •í•´ë‘ë©´ Challengeê°€ ì„±ê³µì ìœ¼ë¡œ ì´ë£¨ì–´ì§€ì§€ ì•ŠëŠ” ë“¯í•˜ë‹¤. ì•„ë§ˆ HTTPSë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸ ë˜ëŠ”ë° ì¸ì¦ì„œê°€ ì—†ë‹¤ë³´ë‹ˆ HTTPS í†µì‹ ì´ ì›í™œí•˜ì§€ ì•Šì•„ì„œê² ë‹¤.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="c"># certificate.yaml&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">apiVersion&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">cert-manager.io/v1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">kind&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Certificate&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">metadata&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">mrdebugger-cert&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">namespace&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">istio-system&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">spec&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">secretName&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">mrdebugger-cert-secret&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">commonName&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">mrdebugger.clova.jinsu.me&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">issuerRef&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">clova-issuer&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">kind&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">ClusterIssuer&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">group&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">cert-manager.io&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">dnsNames&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;mrdebugger.clova.jinsu.me&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>HTTP01 ë°©ì‹ìœ¼ë¡œ Challengeë¥¼ ì§„í–‰í•˜ê¸° ë•Œë¬¸ì— ì™€ì¼ë“œì¹´ë“œ(*, asterisk)ëŠ” ì‚¬ìš©í•˜ì§€ ëª»í•´ ê·¸ëƒ¥ ì‚¬ìš©í•  ë„ë©”ì¸ ë„¤ì„ì¸ &lt;a class="link" href="http://mrdebugger.clova.jinsu.me" target="_blank" rel="noopener"
>mrdebugger.clova.jinsu.me&lt;/a> ë¥¼ ì ì–´ì£¼ì—ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="c"># deployment.yaml&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">apiVersion&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">apps/v1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">kind&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Deployment&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">metadata&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">mrdebugger&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">labels&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">app&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">mrdebugger&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">spec&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">replicas&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">revisionHistoryLimit&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">3&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">selector&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">matchLabels&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">app&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">mrdebugger&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">template&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">metadata&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">labels&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">app&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">mrdebugger&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">spec&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">terminationGracePeriodSeconds&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">containers&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">mrdebugger&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">umi0410/mrdebugger&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">imagePullPolicy&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Always&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ports&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">http&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">containerPort&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">8080&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">readinessProbe&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">httpGet&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">port&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">8080&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">path&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">/health&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">initialDelaySeconds&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">5&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">timeoutSeconds&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">2&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">successThreshold&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">failureThreshold&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">3&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">periodSeconds&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">10&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="c"># svc.yaml&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">apiVersion&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">v1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">kind&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Service&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">metadata&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">namespace&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">mrdebugger&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">labels&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">app&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">mrdebugger&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">mrdebugger&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">spec&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">selector&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">app&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">mrdebugger&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ports&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">mrdebugger&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">port&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">80&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">protocol&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">TCP&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">targetPort&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">http&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">type&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">ClusterIP&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ì´ë²ˆì—” ê·¸ì € ê·¸ëŸ° í‰ë²”í•œ ì„œë²„ Podë¥¼ ë°°í¬í•´ì¤„ Deploymentì™€ ê·¸ê²ƒì„ ë…¸ì¶œì‹œì¼œì£¼ëŠ” Serviceë¥¼ ì‘ì„±í•´ì¤¬ë‹¤. ì´ê±´ ë­ ì„¤ëª…í•  ê±´ ì—†ë‹¤.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="c"># gateway.yaml&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">apiVersion&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">networking.istio.io/v1alpha3&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">kind&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Gateway&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">metadata&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">mrdebugger&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">spec&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">selector&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">istio&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">ingressgateway&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">servers&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">port&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">number&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">80&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">http&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">protocol&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">HTTP&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">hosts&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;mrdebugger.clova.jinsu.me&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c">#tls:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># httpsRedirect: true&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">port&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">number&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">443&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">https&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">protocol&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">HTTPS&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">hosts&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;mrdebugger.clova.jinsu.me&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">tls&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">mode&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">SIMPLE&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">credentialName&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">mrdebugger-cert-secret&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>istioì˜ Gateway CRDë¥¼ ì •ì˜í•˜ì. ë°°í¬ë˜ì–´ìˆëŠ” istio ingress gatewayë¥¼ selectorë¡œ ì„ íƒí•´ì£¼ê³  ì•„ê¹Œ ì •ì˜í•œ ì¸ì¦ì„œê°€ ë‹´ê¸¸ secretì„ TLSì—ì„œ ì‚¬ìš©í•˜ë„ë¡ í•œë‹¤.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="c"># virtual-svc.yaml&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">apiVersion&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">networking.istio.io/v1alpha3&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">kind&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">VirtualService&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">metadata&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">mrdebugger&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">namespace&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">mrdebugger&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">spec&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">hosts&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;*&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">gateways&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">mrdebugger&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">http&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">match&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">uri&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">prefix&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">/&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">route&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">destination&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">host&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">mrdebugger&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">port&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">number&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">80&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ë§ˆì§€ë§‰ìœ¼ë¡œ istioì˜ VirtualService CRDë¥¼ ì •ì˜í•´ì£¼ë©´ ëœë‹¤. ê·¸ëƒ¥ ëª¨ë“  ìš”ì²­ì„ mrdebugger ì„œë¹„ìŠ¤ë¡œ ë„˜ê²¨ì¤€ë‹¤ê³  ë³´ë©´ ëœë‹¤.&lt;/p>
&lt;p>ğŸ’¡ ëª‡ ê°€ì§€ istio CRDì— ëŒ€í•´ í—·ê°ˆë¦¬ëŠ” ë¶€ë¶„ë“¤ì„ ì •ì˜í•´ë³´ìë©´ ë‹¤ìŒê³¼ ê°™ë‹¤.&lt;/p>
&lt;ul>
&lt;li>GatewayëŠ” istio ingress gatewayì™€ ë‹¤ë¥´ë‹¤.
&lt;ul>
&lt;li>GatewayëŠ” CRDì´ê³ , ingress gatewayëŠ” ìì‹ ì„ selectorë¡œ ì„¤ì •í•œ Gatewayë¥¼ ë³´ê³  í•´ë‹¹ ì„¤ì •ì„ ì ìš©í•œë‹¤.&lt;/li>
&lt;li>ë§ˆì¹˜ Ingressì™€ Nginx Ingress Controller ê°™ì€ ëŠë‚Œì´ë„ê¹Œ&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>istio ingress gatewayëŠ” ë³´í†µ istio-system ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì— ì¡´ì¬í•œë‹¤.&lt;/li>
&lt;li>GatewayëŠ” ì•„ë¬´ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì— ë§Œë“¤ì–´ë„ ëœë‹¤.&lt;/li>
&lt;li>VirtualSevice ë˜í•œ ì•„ë¬´ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì— ë§Œë“¤ì–´ë„ ëœë‹¤.
&lt;ul>
&lt;li>ë‹¨, VirtualServiceì˜ destinationì€ ì ‘ê·¼ ê°€ëŠ¥í•œ mesh ë‚´ì˜ í˜¸ìŠ¤íŠ¸ì—¬ì•¼í•˜ê³  ë„¤ì„ìŠ¤í˜ì´ìŠ¤ê°€ ë‹¤ë¥¸ ê²½ìš° ì ì ˆí•œ ë„ë©”ì¸ ë„¤ì„ì„ ì¨ì•¼í•  ìˆ˜ ìˆë‹¤.&lt;/li>
&lt;li>ê°™ì€ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì˜ ê²½ìš° service nameë§Œìœ¼ë¡œ ì´ìš© ê°€ëŠ¥í•˜ë‹¤.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Service, Deployment, Pod, â€¦ ë˜í•œ ì•„ë¬´ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì— ë§Œë“¤ì–´ë„ ëœë‹¤.&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">umi-mrdebugger $ kubectl create ns mrdebugger
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">namespace/mrdebugger created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">umi-mrdebugger $ kubectl label namespace mrdebugger istio-injection&lt;span class="o">=&lt;/span>enabled
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">namespace/mrdebugger labeled
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">umi-mrdebugger $ kubectl apply -n mrdebugger -f k8s/!&lt;span class="o">[&lt;/span>clova-extension.png&lt;span class="o">](&lt;/span>clova-extension.png&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">certificate.cert-manager.io/mrdebugger-cert created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">clusterissuer.cert-manager.io/clova-issuer created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">deployment.apps/mrdebugger created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gateway.networking.istio.io/mrdebugger created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">service/mrdebugger created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">virtualservice.networking.istio.io/mrdebugger created
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>í•œ ë²ˆì— ë¦¬ì†ŒìŠ¤ê°€ ë¹µ ë– ì„œ ì˜ ì—°ê²°ë˜ë©´ ì¢‹ê² ì§€ë§Œ,,, ë‹¹ì—°íˆë„ í˜„ì‹¤ì‹¤ì€ ê·¸ë ‡ì§„ ì•Šë‹¤. ğŸ¥²&lt;/p>
&lt;p>ìì˜í•œ ì´ìŠˆë“¤ì„ í•´ê²°í•´ì£¼ê³  ë‚˜ë©´ ë‹¤ìŒê³¼ ê°™ì´ ì„œë²„ì—ê²Œ ì„±ê³µì ìœ¼ë¡œ ì‘ë‹µì„ ë°›ì„ ìˆ˜ ìˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ì¸ì¦ì„œê°€ READY ë˜ì—ˆë‹¤!&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ kubectl get cert -n istio-system mrdebugger-cert
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME READY SECRET AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mrdebugger-cert True mrdebugger-cert-secret 28m
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">$ curl https://mrdebugger.clova.jinsu.me/health
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">OK
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ğŸ‰ êµ¿. ì¢‹ë‹¹!&lt;/p>
&lt;h2 id="clova-ai-consoleì—ì„œ-custom-extension-ë“±ë¡í•˜ê¸°">Clova AI Consoleì—ì„œ Custom Extension ë“±ë¡í•˜ê¸°&lt;/h2>
&lt;p>&lt;img src="https://umi0410.github.io/blog/clova-ai-on-k8s/clova-extension.png"
width="2644"
height="1168"
srcset="https://umi0410.github.io/blog/clova-ai-on-k8s/clova-extension_hu30a22d310386de55f6d8e7b01bdb85ec_145585_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/clova-ai-on-k8s/clova-extension_hu30a22d310386de55f6d8e7b01bdb85ec_145585_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="Clova AI Console"
class="gallery-image"
data-flex-grow="226"
data-flex-basis="543px"
>&lt;/p>
&lt;p>&lt;a class="link" href="https://developers.naver.com/console/clova/cek/#/list" target="_blank" rel="noopener"
>Clova AI Console&lt;/a>ì— ê°€ì„œ ìì‹ ì˜ Extensionì„ ìƒì„±í•˜ë©´ ëœë‹¤. ë§Œë“œëŠ” ê³¼ì •ì€ ë³„ê±´ ì—†ë‹¤.&lt;/p>
&lt;p>&lt;img src="https://umi0410.github.io/blog/clova-ai-on-k8s/invoke-name.png"
width="988"
height="388"
srcset="https://umi0410.github.io/blog/clova-ai-on-k8s/invoke-name_huecd3aea919113a87c5572f6224b5da9d_24552_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/clova-ai-on-k8s/invoke-name_huecd3aea919113a87c5572f6224b5da9d_24552_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="í˜¸ì¶œ ì´ë¦„ ì„¤ì •"
class="gallery-image"
data-flex-grow="254"
data-flex-basis="611px"
>&lt;/p>
&lt;p>ì´ê²ƒë§Œ ì˜ ì„¤ì •í•´ì£¼ë©´ ë˜ëŠ”ë° ë³´í†µ &amp;ldquo;{{í˜¸ì¶œ ì´ë¦„}} ì‹œì‘í•´ì¤˜&amp;quot;ë¡œ ìŠ¤í‚¬ì´ ì‹œì‘ë˜ëŠ” ê²ƒ ê°™ë‹¤. ê·¸ ì´í›„ëŠ” ì„¸ì…˜ì´ ëŠì–´ì§€ì§€ ì•Šìœ¼ë©´ ì„¸ì…˜ì˜ ì»¨í…ìŠ¤íŠ¸ë¥¼ ì‚´ë ¤ ëŒ€í™”í•  ìˆ˜ëŠ” ìˆëŠ”ë“¯ í•˜ë‹¤.&lt;/p>
&lt;p>&lt;img src="https://umi0410.github.io/blog/clova-ai-on-k8s/build-interaction.png"
width="1822"
height="1292"
srcset="https://umi0410.github.io/blog/clova-ai-on-k8s/build-interaction_hu5f82ae87db59611aea885b4d853686af_141265_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/clova-ai-on-k8s/build-interaction_hu5f82ae87db59611aea885b4d853686af_141265_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="Interaction ëª¨ë¸ ë¹Œë“œ"
class="gallery-image"
data-flex-grow="141"
data-flex-basis="338px"
>&lt;/p>
&lt;p>ê·¸ë¦¬ê³  ë‚˜ì„  Interaction ëª¨ë¸ ì„¤ì •ì— ë“¤ì–´ê°€ ë¹Œë“œë¥¼ í•´ì¤˜ì•¼í•œë‹¤. ìì‹ ì´ Custom Intentë¥¼ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤í•´ë„ ë¬´ì¡°ê±´ í•œ ë²ˆì€ ë¹Œë“œë¥¼ í•´ì¤˜ì•¼í•œë‹¤. ë¬¸ì„œ ìƒìœ¼ë¡œëŠ” 3~5ë¶„ ì •ë„ ì†Œìš”ëœë‹¤ê³  í•˜ëŠ”ë° ì²´ê°ìƒ í•œ 10ë¶„ì€ ê±¸ë¦°ë“¯í•˜ë‹¤â€¦ ìµœì´ˆ 1ë²ˆì´ ì˜¤ë˜ ê±¸ë¦¬ëŠ” ê²ƒ ê°™ê³  ê·¸ ì´í›„ë¡œëŠ” ê¸ˆë°© ë˜ëŠ” ë“¯? (ì‚¬ì´íŠ¸ UIê°€ ê·¸ë‹¥ ì¹œì ˆí•˜ì§„ ì•Šë‹¤. ì•½ê°„ì€ ë²„ë ¤ì§„ ëŠë‚Œâ€¦?)&lt;/p>
&lt;p>ê·¸ëŸ¬ê³  ë‚˜ë©´ í…ŒìŠ¤í„° IDë¥¼ ë“±ë¡í•´ì¤˜ì•¼í•œë‹¤. ë³´í†µì€ ì‹¬ì‚¬, ì‹¤ì œ í¼ë¸”ë¦¬ì‹œê¹Œì§€ëŠ” ê·€ì°®ê¸° ë•Œë¬¸ì—â€¦ í˜¼ìë§Œ ì“¸ ê±°ë¼ë˜ê°€ ê·¸ëƒ¥ ì¬ë¯¸ì‚¼ì•„ ë§Œë“¤ì–´ë³¸ ê²½ìš°ì—ëŠ” ë­ í…ŒìŠ¤í„°ë§Œìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” ê²ƒë„ ì¶©ë¶„í•  ê²ƒ ê°™ë‹¤. ë„¤ì´ë²„ API ë“±ë“±ì€ ì£¼ë¡œ ì´ë ‡ê²Œ ì¶œì‹œ ì‹¬ì‚¬ ì „ê¹Œì§€ í…ŒìŠ¤íŠ¸ IDë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ í•´ì£¼ë”ë¼.&lt;/p>
&lt;p>&lt;img src="https://umi0410.github.io/blog/clova-ai-on-k8s/on-skill-store.png"
width="1080"
height="2280"
srcset="https://umi0410.github.io/blog/clova-ai-on-k8s/on-skill-store_huaaaec7118a99371c40755dcdb78fc351_364049_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/clova-ai-on-k8s/on-skill-store_huaaaec7118a99371c40755dcdb78fc351_364049_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="47"
data-flex-basis="113px"
>&lt;/p>
&lt;p>í…ŒìŠ¤í„° ì•„ì´ë””ë¥¼ ë“±ë¡í•œ ë’¤ ë„¤ì´ë²„ í´ë¡œë°” ì•±ì— ìì‹ ì˜ ë„¤ì´ë²„ ì•„ì´ë””ë¡œ ë¡œê·¸ì¸í•˜ë©´ ìŠ¤í‚¬ ìŠ¤í† ì–´ í˜ì´ì§€ì—ì„œ ìœ„ì™€ ê°™ì´ ìì‹ ì´ ë“±ë¡í•œ ìŠ¤í‚¬ì„ ë³¼ ìˆ˜ ìˆë‹¤. ë¬¸ì„œìƒìœ¼ë¡  ì‹œê°„ì´ ê½¤ ê±¸ë¦´ ìˆ˜ë„ ìˆë‹¤ê³  í–ˆëŠ”ë° ì•„ë§ˆ ë°”ë¡œ ë³´ì˜€ë˜ ê²ƒ ê°™ë‹¤.&lt;/p>
&lt;p>ê·¸ëŸ¼ ì•„ë§ˆ ì•„ê¹Œ ì½˜ì†”ì—ì„œ ì„¤ì •í•œ &amp;ldquo;{{í˜¸ì¶œ ì´ë¦„}} ì‹œì‘í•´ì¤˜&amp;quot;ë¡œ ìŠ¤í‚¬ì„ ì‹œì‘í•  ìˆ˜ ìˆì„ ê²ƒì´ë‹¤. ë‚˜ëŠ” ëì— &amp;ldquo;ì‹œì‘í•´ì¤˜&amp;quot;ë¥¼ ì•ˆ ë¶™ì—¬ë„ ë˜ëŠ” ì¤„ ì•Œê³  í˜¸ì¶œ ì´ë¦„ì„ &amp;ldquo;ë””ë²„ê¹… ë„ì™€ì¤˜&amp;quot;ë¡œ í–ˆëŠ”ë° ê³ ìƒì„ ì¢€ í–ˆë‹¤. í˜¸ì¶œ ì´ë¦„ì´ &amp;ldquo;ë””ë²„ê¹… ë„ì™€ì¤˜&amp;quot;ì¸ ê²½ìš° ì‹¤ì œë¡œëŠ” &amp;ldquo;ë””ë²„ê¹… ë„ì™€ì¤˜ ì‹œì‘í•´ì¤˜&amp;rdquo; ì´ëŸ° ì‹ìœ¼ë¡œ ë§í•´ì•¼ ì‹¤í–‰ì´ ë˜ê¸° ë•Œë¬¸ì´ë‹¤â€¦ ã…œã…œ&lt;/p>
&lt;p>ê·¸ëŸ¼ ê²°ê³¼ë¥¼ í™•ì¸í•´ë³´ì.&lt;/p>
&lt;div class="video-wrapper">
&lt;iframe loading="lazy"
src="https://www.youtube.com/embed/gfkeh1Si_no"
allowfullscreen
title="YouTube Video"
>
&lt;/iframe>
&lt;/div>
&lt;p>ğŸ‰ ê·€ì—½ê²Œ ë””ë²„ê¹…ì„ ë„ì™€ì¤˜ëŠ” &amp;ldquo;&lt;strong>ë¯¸ìŠ¤í„° ë””ë²„ê±° ìš°ë¯¸&lt;/strong>&amp;ldquo;ë¥¼ ë§Œë‚˜ë³¼ ìˆ˜ ìˆì—ˆë‹¤. ğŸ¥³&lt;/p>
&lt;h2 id="ë§ˆì¹˜ë©°">ë§ˆì¹˜ë©°&lt;/h2>
&lt;p>ì˜¤ëœë§Œì— ë”¥í•œ ê¸°ìˆ ì„ íƒêµ¬í•˜ëŠ” ê²ƒì—ì„œ ë²—ì–´ë‚˜ ìœ í¥ìŠ¤ëŸ¬ìš´ ê°œë°œì„ í•´ë³´ì•˜ë‹¤. ì‚¬ì´ë“œ í”„ë¡œì íŠ¸ë¥¼ ì‹œì‘ìœ¼ë¡œ ê°€ê¾¸ê²Œ ëë˜ GKE í´ëŸ¬ìŠ¤í„°ì— &lt;strong>istioë¥¼ êµ¬ì¶•ë§Œ í•´ë†“ê³  ì œëŒ€ë¡œ ë„ì…ì€ ëª»í•´ë³¸ ìƒíƒœì˜€ëŠ”ë° ì´ë²ˆ ì„œë²„ ë°°í¬ë¥¼ ì§„í–‰í•˜ë©´ì„œ í•œ ë²ˆ ë°ëª¨ì²˜ëŸ¼ istioë¥¼ ì‚¬ìš©í•´ë³¼ ìˆ˜ ìˆì—ˆì–´ì„œ ì¢‹ì•˜ë‹¤&lt;/strong>. istioë¥¼ ë„ì…í•´ë³¸ ê±¸ ìƒê°í•˜ë©´ ê·¸ë‹¥ ìœ í¥ìŠ¤ëŸ½ë‹¤ê¸° ë³´ë‹¨ ê¸°ìˆ  íƒêµ¬ìŠ¤ëŸ¬ì› ì„ì§€ë„..? ã…ã…&lt;/p>
&lt;p>ìƒˆë¡œ íšŒì‚¬ë¥¼ ë“¤ì–´ê°€ê³ ë‚˜ì„œëŠ” ê¶ê¸ˆí•œ ê²ƒ, ê³µë¶€í•˜ê³  ì‹¶ì€ ê²ƒì´ ë„˜ì³ë‚˜ê³  ì¬ë¯¸ìˆê²Œ ê³µë¶€í•´ë‚˜ê°€ê³  ìˆì§€ë§Œ ë‹¤ì†Œ ë¸”ë¡œê·¸ì— ì •ë¦¬í•˜ê¸´ ì–´ë ¤ìš´ ë‚´ìš©ë“¤ì´ ë§ì€ ê²ƒ ê°™ë‹¤. ì–´ë ¤ìš´ ë‚´ìš©ë“¤ì´ë‹¤ë³´ë‹ˆ ê³µë¶€ëŠ” í–ˆë”ë¼ë„ 1ë²ˆì˜ ê³µë¶€ë§Œìœ¼ë¡œ ì˜ë¯¸ìˆëŠ” ê¸€ì„ ë‹´ì•„ë‚´ê¸´ ì–´ë µê¸°ë„ í–ˆë‹¤.&lt;/p>
&lt;p>í•˜ì§€ë§Œ ë°”ì˜ê¸°ë„ í•œë°ë‹¤ê°€ ë­”ê°€ ê¹Šì´ ìˆëŠ” ê¸€ì„ ì“°ë ¤ë‹¤ë³´ë‹ˆ ìš”ì¦˜ ë¸”ë¡œê·¸ì— ê¸€ì„ ì˜¤íˆë ¤ ì•ˆ ì“°ê²Œ ë˜ê³  &amp;lsquo;ì•„ ì´ê²ƒë„ ì¨ë³´ê³  ì‹¶ì€ë° ì €ê²ƒë„ ì¨ë³´ê³  ì‹¶ì€ë°â€¦&amp;rsquo; ìƒê°ë§Œ í•˜ë‹¤ ë²Œì¨ ë§ˆì§€ë§‰ìœ¼ë¡œ ê¸€ì„ ì“´ì§€ë„ ì—„ì²­ ì˜¤ë˜ëœ ê²ƒ ê°™ë‹¤.&lt;/p>
&lt;p>ê·¸ë˜ì„œ ì•ìœ¼ë¡œëŠ” CS ì§€ì‹ì´ë‚˜ ì •í™•í•œ ì •ë³´ëŠ” ì•„ë‹ˆë”ë¼ë„ ê°€ë” ì´ë ‡ê²Œ ê°œë°œ ì¼ê¸°ìŠ¤ëŸ¬ìš´ ê¸€ë„ ì ì–´ë³¼ê¹Œí•œë‹¤. ê·¸ëŸ° ê¸€ì€ ë‚¨ì—ê²Œ ì •ë³´ë¥¼ ì „ë‹¬í•˜ë ¤ëŠ” ëª©ì ë³´ë‹¨ ë‚˜ë¥¼ ê¸°ë¡í•˜ëŠ” ìš©ë„ê¸° ë•Œë¬¸ì— &amp;lsquo;&lt;em>â€¦ì…ë‹ˆë‹¤.&lt;/em>&amp;rsquo; ì²´ë³´ë‹¤ëŠ” &amp;lsquo;&lt;em>â€¦ì´ë‹¤&lt;/em>&amp;rsquo; ì²´ë¡œ ê·¸ëƒ¥ ê°€ë³ê²Œ ì ì–´ë‚˜ê°€ë ¤í•œë‹¤.&lt;/p>
&lt;p>&lt;em>ê·¸ëŸ¼, ë‹¤ìŒì— ë˜ ë§Œë‚˜ìš©.&lt;/em>&lt;/p></description></item><item><title>ArgoCD ì„ ì–¸ì ìœ¼ë¡œ ì´ìš©í•´ë‚˜ê°€ê¸° - Githubì„ í†µí•œ SSO ë° RBAC</title><link>https://umi0410.github.io/blog/devops/declarative-argocd-helm-rbac/</link><pubDate>Sat, 07 May 2022 22:00:00 +0900</pubDate><guid>https://umi0410.github.io/blog/devops/declarative-argocd-helm-rbac/</guid><description>&lt;img src="https://umi0410.github.io/blog/devops/declarative-argocd-helm-rbac/logo.png" alt="Featured image of post ArgoCD ì„ ì–¸ì ìœ¼ë¡œ ì´ìš©í•´ë‚˜ê°€ê¸° - Githubì„ í†µí•œ SSO ë° RBAC" />&lt;h2 id="ì‹œì‘í•˜ë©°">ì‹œì‘í•˜ë©°&lt;/h2>
&lt;p>ì €ë²ˆ ê¸€(&lt;a class="link" href="https://umi0410.github.io/blog/devops/declarative-argocd-helm-app-of-app/" target="_blank" rel="noopener"
>&amp;ldquo;ArgoCD ì„ ì–¸ì ìœ¼ë¡œ ì´ìš©í•´ë‚˜ê°€ê¸° - Helm, App of App&amp;rdquo;&lt;/a>)ì—ì„œëŠ”
&lt;code>Helm&lt;/code>ê³¼ &lt;code>App of App&lt;/code> íŒ¨í„´ì„ ì´ìš©í•´ ArgoCDë¥¼ ì„ ì–¸ì ìœ¼ë¡œ ì´ìš©í•´ë‚˜ê°€ëŠ” ë°©ë²•ì„ ë‹¤ë¤˜ìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>ë°”~ë¡œ ArgoCDë¥¼ ì¢€ ë” ì„ ì–¸ì ìœ¼ë¡œ ì´ìš©í•´ë‚˜ê°€ëŠ” ê²ƒê³¼ ê´€ë ¨ëœ íŒë¶€í„° ê¸€ì„ ì ì–´ë‚˜ê°€ê¸°ëŠ” ì¢€ ë¬´ë¦¬ê°€ ìˆì„ ê²ƒ ê°™ì•„ í•´ë‹¹ ê¸€ì—ì„œëŠ”&lt;/p>
&lt;p>ë°°ê²½ì§€ì‹ë“¤ì— ëŒ€í•œ ê°„ëµí•œ ì •ë¦¬ì™€ í•¸ì¦ˆì˜¨ ê°™ì€ ëŠë‚Œì˜ ë‚´ìš©ë“¤ë„ ë§ì´ í¬í•¨í•˜ê²Œ ëë˜ ê²ƒ ê°™ì•„ìš”.&lt;/p>
&lt;p>ì´ë²ˆ ê¸€ì—ì„œëŠ” &lt;strong>ArgoCDë¥¼ ì‹¤ì œë¡œ ì´ìš©í•˜ê¸° ìœ„í•´ í•„ìš”í• ë§Œí•œ ì´ëŸ° ì €ëŸ° ì„¤ì •ë“¤ì„ ì–´ë–»ê²Œ ì„ ì–¸ì ìœ¼ë¡œ ì •ì˜í•´ë³¼ ìˆ˜ ìˆì„ì§€&lt;/strong>ë¥¼ ì†Œê°œí•´ë³´ë ¤í•´ìš”!&lt;/p>
&lt;p>ê·¸ë¦¬ê³  ê·¸ ì˜ˆì‹œë¡œ &lt;code>RBAC ì„¤ì •&lt;/code>ì„ í•´ë³´ê² ìŠµë‹ˆë‹¤. ì´ë²ˆ ê¸€ì—ì„œ ìˆ˜í–‰í•´ë³¼ ì‘ì—…ì€ &lt;strong>Github ê³„ì •ì„ ArgoCDì™€ ì—°ë™ì‹œì¼œ ì—­í• (Role) ê¸°ë°˜ìœ¼ë¡œ ArgoCDì˜ ê¶Œí•œì„ ì œì–´&lt;/strong>í•˜ëŠ” ê²ƒì´ì—ìš”.&lt;/p>
&lt;p>&amp;lsquo;&lt;em>ì™œ RBACì„ ArgoCD ì»¤ìŠ¤í„°ë§ˆì´ì§•ì˜ ì˜ˆì‹œë¡œ í–ˆëŠ”ê°€?&lt;/em>&amp;lsquo;ëŠ” ì œê°€ ì‚¬ì´ë“œ í”„ë¡œì íŠ¸ì—ì„œ ArgoCDë¥¼ ì´ìš©í•˜ë©´ì„œ Local user(ArgoCDì˜ ìì²´ ê³„ì •)ì„ ì´ìš©í•˜ëŠ” ë°ì— ë¶ˆí¸ì´ ìˆì—ˆê¸° ë•Œë¬¸ì´ì—ìš”.
ì €ëŠ” &lt;strong>ArgoCDì™€ Github ê³„ì •ì„ ì—°ë™í•´ RBACì„ ì´ìš©í•¨ìœ¼ë¡œì¨ í•´ê²°&lt;/strong>í–ˆìŠµë‹ˆë‹¤. ì´ì œëŠ” Admin ê³„ì •ì˜ íŒ¨ìŠ¤ì›Œë“œë¥¼ ì•”ê¸°í•  í•„ìš”ë„ ìƒˆë¡œìš´ íŒ€ì›ì—ê²Œ ìƒˆ ê³„ì •ì„ ìƒì„±í•´ ì „ë‹¬í•  ì¼ë„ í•„ìš”ê°€ ì—†ì–´ì¡ŒìŠµë‹ˆë‹¤! ë˜í•œ Github ê³„ì • ë³„ë¡œ ê¶Œí•œì„ ê°–ë„ë¡ (e.g. readonly) ì„¤ì •í•  ìˆ˜ë„ ìˆì–´ì¡ŒìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>ê·¸ë¦¬ê³  ê¸€ì˜ ë‚´ìš©ì€ &amp;lsquo;&lt;em>ì œ ê¸€ë§Œ ë¬´ì¡°ê±´ ë”°ë¼í•˜ë©´ ë©ë‹ˆë‹¤&lt;/em>&amp;lsquo;ë³´ë‹¤ëŠ” &amp;lsquo;&lt;em>ì €ëŠ” ì´ëŸ° ì‹ìœ¼ë¡œ ìë£Œë¥¼ ì°¾ì•˜ê³  ì´ë ‡ê²Œ ì ìš©í•´ë´¤ì–´ìš”.&lt;/em>&amp;lsquo;ì‹ì˜ ë‚´ìš©ë“¤ì„ ë‹¤ë¤„ë³´ê² ìŠµë‹ˆë‹¤.&lt;/p>
&lt;h3 id="ë³¸-ê¸€ì—ì„œ-ì‚¬ìš©í•˜ëŠ”-í™˜ê²½">ë³¸ ê¸€ì—ì„œ ì‚¬ìš©í•˜ëŠ” í™˜ê²½&lt;/h3>
&lt;ul>
&lt;li>í•¸ì¦ˆì˜¨ ê³¼ì • ì°¸ê³  ë ˆí¬ì§€í† ë¦¬ - &lt;a class="link" href="https://github.com/umi0410/declarative-argocd/tree/master/configuring-rbac" target="_blank" rel="noopener"
>https://github.com/umi0410/declarative-argocd/tree/master/configuring-rbac&lt;/a>&lt;/li>
&lt;li>Minikubeë¥¼ ì´ìš©í•œ K8s Cluster&lt;/li>
&lt;li>&lt;a class="link" href="https://github.com/argoproj/argo-helm/tree/main/charts/argo-cd" target="_blank" rel="noopener"
>ArgoCD Helm Chart&lt;/a>ë¥¼ ì´ìš©í•´ argocd namespaceì— ë°°í¬í•œ ArgoCD&lt;/li>
&lt;/ul>
&lt;h2 id="rbacì´ë€">RBACì´ë€?&lt;/h2>
&lt;p>&lt;code>RBAC&lt;/code>ì€ &lt;code>Role-Based Access Contol&lt;/code>ì˜ ì•½ìë¡œ ì‰½ê²Œ ë§í•˜ìë©´ ê·¸ëƒ¥ ì—­í•  ê¸°ë°˜ ê¶Œí•œ ì œì–´ì…ë‹ˆë‹¤.&lt;/p>
&lt;p>ì†ì„± ê¸°ë°˜ìœ¼ë¡œ ë‚˜ë¦„ ë³µì¡í•œ ë¡œì§ì— ì˜í•´ ì–´ë–¤ ìœ ì €ê°€ ì–´ë–¤ ë¦¬ì†ŒìŠ¤ì— ì–´ë–¤ ì‘ì—…ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆëŠ”ì§€ë¥¼ ì •ì˜í•˜ëŠ” &lt;code>ABAC(Attribute-Base Access Control)&lt;/code>ì— ë¹„í•´ ê·¸ì € ê°„ë‹¨íˆ ì—­í• ì— ê¶Œí•œë“¤ì„ ë¶€ì—¬í•˜ê³  ìœ ì €ë“¤ì€ ê·¸ ì—­í• ì„ ë¶€ì—¬ë°›ìŒìœ¼ë¡œì¨ ê¶Œí•œì„ ì²´í¬í•˜ê²Œ ë©ë‹ˆë‹¤.&lt;/p>
&lt;p>ê°œì¸ì ìœ¼ë¡œëŠ” ë§ì€ ê²½ìš°ì— ê°„ë‹¨íˆ RBACë§Œìœ¼ë¡œë„ ê¶Œí•œ ì œì–´ê°€ ì¶©ë¶„í•œ ê²½ìš°ê°€ ë§ì€ ê²ƒ ê°™ìŠµë‹ˆë‹¤. ê·¸ë¦¬ê³  ë§ì€ ì†”ë£¨ì…˜ë“¤ì´ RBAC ê¸°ëŠ¥ì„ ì§€ì›í•˜ëŠ” ê²ƒ ê°™ì•˜ì–´ìš”. ArgoCD ë˜í•œ ë§ˆì°¬ê°€ì§€ë¡œ RBACì„ ì§€ì›í•˜ê³  ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;h2 id="github-organization--teamìœ¼ë¡œ-argocd-rbac-ì´ìš©í•˜ê¸°">Github organization + teamìœ¼ë¡œ ArgoCD RBAC ì´ìš©í•˜ê¸°&lt;/h2>
&lt;p>ì, ê·¸ëŸ¼ Githubì˜ Organization, Teamì„ í†µí•´ ArgoCDì—ì„œ RBACì„ ì´ìš©í•´ë³´ëŠ” ê³¼ì •ì„ ì§„í–‰í•´ë´…ì‹œë‹¤!&lt;/p>
&lt;h3 id="1-argocdì—-rbac-ì„¤ì •í•˜ê¸°">1. ArgoCDì— RBAC ì„¤ì •í•˜ê¸°&lt;/h3>
&lt;p>ìš”ì¦˜ ì¸ê¸°ìˆëŠ” ì†”ë£¨ì…˜ë“¤ì€ &lt;code>RBAC&lt;/code> ë° ê¸°íƒ€ ê¶Œí•œ ì œì–´ ê¸°ëŠ¥ì´ ëŒ€ë¶€ë¶„ ì¡´ì¬í•©ë‹ˆë‹¤. ë³´ì•ˆê³¼ ê¶Œí•œ ê´€ë¦¬ëŠ” ì•„ì£¼ ì¤‘ìš”í•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. ê·¸ë¦¬ê³  ê·¸ëŸ° ê¶Œí•œ ì œì–´ì˜ ë°©ë²• ì¤‘ ê°€ì¥ ëŒ€ì¤‘ì ì¸ ë°©ë²•ì€ ë°”ë¡œ &lt;code>RBAC&lt;/code> ì…ë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://umi0410.github.io/blog/devops/declarative-argocd-helm-rbac/rbac.png"
width="1204"
height="883"
srcset="https://umi0410.github.io/blog/devops/declarative-argocd-helm-rbac/rbac_hu8a1d47df067db6e35deb191bf75329be_273516_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/devops/declarative-argocd-helm-rbac/rbac_hu8a1d47df067db6e35deb191bf75329be_273516_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="ê³µì‹ ë¬¸ì„œ ì† RBAC ì„¤ëª…"
class="gallery-image"
data-flex-grow="136"
data-flex-basis="327px"
>&lt;/p>
&lt;p>ê³µì‹ ë¬¸ì„œëŠ” ì–¸ì œë‚˜ ê°€ì¥ ì¢‹ì€ êµê³¼ì„œì…ë‹ˆë‹¤. ìì„¸í•œ ë°©ë²•ì€ &lt;a class="link" href="https://argo-cd.readthedocs.io/en/stable/operator-manual/rbac/" target="_blank" rel="noopener"
>ê³µì‹ ë¬¸ì„œ&lt;/a>ì—ì„œ ì°¾ì•„ë³´ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://umi0410.github.io/blog/devops/declarative-argocd-helm-rbac/helm-chart-rbac.png"
width="1262"
height="74"
srcset="https://umi0410.github.io/blog/devops/declarative-argocd-helm-rbac/helm-chart-rbac_hu21132895ae0aab5f81e1c0650669ee11_33874_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/devops/declarative-argocd-helm-rbac/helm-chart-rbac_hu21132895ae0aab5f81e1c0650669ee11_33874_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="ArgoCD Helm Chart ì† Configuration"
class="gallery-image"
data-flex-grow="1705"
data-flex-basis="4092px"
>&lt;/p>
&lt;p>&lt;img src="https://umi0410.github.io/blog/devops/declarative-argocd-helm-rbac/default-values.png"
width="1109"
height="573"
srcset="https://umi0410.github.io/blog/devops/declarative-argocd-helm-rbac/default-values_hu2c68e4165a00fec2142fab308f6a57c0_319110_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/devops/declarative-argocd-helm-rbac/default-values_hu2c68e4165a00fec2142fab308f6a57c0_319110_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="default values.yaml"
class="gallery-image"
data-flex-grow="193"
data-flex-basis="464px"
>&lt;/p>
&lt;p>ë˜í•œ ì œê°€ ì‚¬ìš©í•œ &lt;a class="link" href="https://github.com/argoproj/argo-helm/tree/main/charts/argo-cd" target="_blank" rel="noopener"
>ArgoCD Helm Chartì—ì„œ ì œê³µí•˜ëŠ” README.md&lt;/a> ì† Configuration ë¶€ë¶„ê³¼ &lt;a class="link" href="https://github.com/argoproj/argo-helm/blob/main/charts/argo-cd/values.yaml" target="_blank" rel="noopener"
>default values.yaml&lt;/a> ë³´ë©´&lt;/p>
&lt;p>Helm Chartë¥¼ í†µí•´ ë°°í¬í•œ ArgoCDì˜ ê²½ìš° ì–´ë–»ê²Œ values.yamlì„ í†µí•´ rbacì„ ì„¤ì •í•  ìˆ˜ ìˆëŠ”ì§€ ë‚˜ì™€ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>ê¸°ë³¸ ì›ë¦¬ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.&lt;/p>
&lt;ul>
&lt;li>&lt;code>p, &amp;lt;role/user/group&amp;gt;, &amp;lt;resource&amp;gt;, &amp;lt;action&amp;gt;, &amp;lt;appproject&amp;gt;/&amp;lt;object&amp;gt;&lt;/code> - AppProjectì— ì†í•œ Object(e.g. Application)ì— ëŒ€í•œ ê¶Œí•œì„ ì •ì˜í•œë‹¤.&lt;/li>
&lt;li>&lt;code>p, &amp;lt;role/user/group&amp;gt;, &amp;lt;resource&amp;gt;, &amp;lt;action&amp;gt;, &amp;lt;object&amp;gt;&lt;/code> - AppProjectì— ì†í•˜ì§€ ì•ŠëŠ” Object(e.g. Clusters, AppProject, Repositories, &amp;hellip;)ì— ëŒ€í•œ ê¶Œí•œì„ ì •ì˜í•œë‹¤.&lt;/li>
&lt;/ul>
&lt;p>ê·¸ë¦¬ê³  ìœ„ì—ì„œ ë§í•˜ëŠ” Resourceë‚˜ Actionì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.&lt;/p>
&lt;ul>
&lt;li>&lt;strong>Resources&lt;/strong>: &lt;code>clusters&lt;/code>, &lt;code>projects&lt;/code>, &lt;code>applications&lt;/code>, &lt;code>repositories&lt;/code>, &lt;code>certificates&lt;/code>, &lt;code>accounts&lt;/code>, &lt;code>gpgkeys&lt;/code>&lt;/li>
&lt;li>&lt;strong>Actions&lt;/strong>: &lt;code>get&lt;/code>, &lt;code>create&lt;/code>, &lt;code>update&lt;/code>, &lt;code>delete&lt;/code>, &lt;code>sync&lt;/code>, &lt;code>override&lt;/code>, &lt;code>action&lt;/code>&lt;/li>
&lt;/ul>
&lt;p>ê³µì‹ ë¬¸ì„œì˜ ì„¤ëª…ì´ ì¢€ ë¶€ì¡±í•˜ê¸´í•˜ì§€ë§Œ Github SSOë¥¼ ì´ìš©í•´ ì¸ì¦í•˜ëŠ” ê²½ìš° RBACì€ ë‹¤ìŒê³¼ ê°™ì´ ì„¤ì •í•  ìˆ˜ ìˆë‹¤ê³  í•©ë‹ˆë‹¤.&lt;/p>
&lt;pre tabindex="0">&lt;code class="language-csv" data-lang="csv">p, role:org-admin, applications, *, */*, allow
p, role:org-admin, clusters, get, *, allow
p, role:org-admin, repositories, get, *, allow
p, role:org-admin, repositories, create, *, allow
p, role:org-admin, repositories, update, *, allow
p, role:org-admin, repositories, delete, *, allow
g, your-github-org:your-team, role:org-admin
&lt;/code>&lt;/pre>&lt;ul>
&lt;li>ì˜ë¯¸: org-adminì´ë¼ëŠ” Roleì´ ê°–ëŠ” ê¶Œí•œë“¤ì„ ì •ì˜í•˜ê³  í•´ë‹¹ &lt;!-- raw HTML omitted -->:&lt;!-- raw HTML omitted -->ì— ì†í•˜ëŠ” Github userë¡œ ë¡œê·¸ì¸í•œ ê²½ìš° org-admin Roleì— í—ˆìš©ëœ ê¶Œí•œë“¤ì„ ê°–ëŠ”ë‹¤.&lt;/li>
&lt;/ul>
&lt;p>ê·¸ë¦¬ê³  ì €ëŠ” ë‹¤ìŒê³¼ ê°™ì€ ìš”êµ¬ì‚¬í•­ì„ ê°€ì •í•˜ë ¤í•©ë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;strong>RBAC ìš”êµ¬ì‚¬í•­&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>ë‚˜ì˜ Github Organization &lt;code>khu-dev&lt;/code>ì˜ &lt;code>khumu-devops&lt;/code> íŒ€ì˜ ìœ ì €ë“¤ì€ admin ê¶Œí•œì„ ê°–ëŠ”ë‹¤.&lt;/li>
&lt;li>ë‚˜ì˜ Github Organization &lt;code>khu-dev&lt;/code>ì˜ &lt;code>khumu-devops&lt;/code> íŒ€ì˜ ìœ ì €ë“¤ì€ readonly ê¶Œí•œì„ ê°–ëŠ”ë‹¤.&lt;/li>
&lt;/ul>
&lt;p>ê·¸ ê²½ìš° ì €ëŠ” ë‹¤ìŒê³¼ ê°™ì´ values.yamlì„ ì‘ì„±í•œ ë’¤ helm releaseë¥¼ update í•´ì£¼ë©´ ë©ë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="c"># values.yaml&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">server&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">rbacConfig&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">policy.csv&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">|&lt;/span>&lt;span class="sd">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> g, khu-dev:khumu-developer, role:readonly
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> g, khu-dev:khumu-devops, role:admin&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nn">...&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;code>readonly&lt;/code>ì™€ &lt;code>admin&lt;/code>ì´ë¼ëŠ” Roleì€ ê³µì‹ë¬¸ì„œì—ë„ ë‚˜ì™€ìˆë“¯ &lt;code>builtin-policy&lt;/code>ë¡œì„œ &lt;a class="link" href="https://github.com/argoproj/argo-cd/blob/master/assets/builtin-policy.csv" target="_blank" rel="noopener"
>ì´ê³³&lt;/a>ì— ì‘ì„±ë˜ì–´ ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-console" data-lang="console">&lt;span class="line">&lt;span class="cl">&lt;span class="gp">$&lt;/span> helm upgrade -n argocd argocd &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span>&lt;span class="go"> argo/argo-cd -f values.yaml
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ê·¸ëŸ¼ ìœ„ì˜ ì»¤ë§¨ë“œë¥¼ í†µí•´ RBAC ì„¤ì •ì„ ì ìš©ì‹œì¼œì£¼ê² ìŠµë‹ˆë‹¤.&lt;/p>
&lt;h3 id="2-argocdì—-githubì„-í†µí•œ-sso-ì„¤ì •í•˜ê¸°">2. ArgoCDì— Githubì„ í†µí•œ SSO ì„¤ì •í•˜ê¸°&lt;/h3>
&lt;p>ArgoCDëŠ” &lt;a class="link" href="https://github.com/dexidp/dex" target="_blank" rel="noopener"
>Dex&lt;/a>ë¼ëŠ” ì¸ì¦ ê´€ë ¨ ê°ì¢… ê¸°ëŠ¥ì„ ë‹´ë‹¹í•˜ëŠ” ì»´í¬ë„ŒíŠ¸ë¥¼ í•¨ê»˜ ì œê³µí•˜ê³  ìˆìŠµë‹ˆë‹¤. &lt;code>Github&lt;/code>ì˜ &lt;code>OAuth2&lt;/code>ë¥¼ ì´ìš©í•´ &lt;code>SSO(Single Sign On)&lt;/code>ì„ ì´ìš©í•˜ëŠ” ê³¼ì •ì€ &lt;a class="link" href="https://argo-cd.readthedocs.io/en/stable/operator-manual/user-management/#dex" target="_blank" rel="noopener"
>ê³µì‹ë¬¸ì„œ Dex ë¶€ë¶„&lt;/a>ì—ë„
ì†Œê°œë˜ì–´ìˆê³ , ì‚¬ì‹¤ ì´ëŒ€ë¡œ ë”°ë¼ë§Œí•˜ë©´ ë©ë‹ˆë‹¤. ã…ã…&lt;/p>
&lt;p>&lt;img src="https://umi0410.github.io/blog/devops/declarative-argocd-helm-rbac/github-oauth-app.png"
width="660"
height="777"
srcset="https://umi0410.github.io/blog/devops/declarative-argocd-helm-rbac/github-oauth-app_hu395b1c716fc41f43b835749ac9fe7844_64355_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/devops/declarative-argocd-helm-rbac/github-oauth-app_hu395b1c716fc41f43b835749ac9fe7844_64355_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="Github OAuth app ìƒì„±í•˜ê¸°"
class="gallery-image"
data-flex-grow="84"
data-flex-basis="203px"
>&lt;/p>
&lt;p>&lt;code>Organization&lt;/code> - &lt;code>Settings&lt;/code> - &lt;code>Developer Settings&lt;/code> - &lt;code>OAuth Apps&lt;/code> ì—ì„œ ìœ„ì™€ ê°™ì´ OAuth Appì„ ë§Œë“¤ì–´ì£¼ê³  ì´í›„ ìƒì„±ë˜ëŠ” &lt;code>Client ID&lt;/code>ì™€ &lt;code>Client Secret&lt;/code>ì„ ë‹¤ìŒê³¼ ê°™ì´ &lt;code>dex.config&lt;/code>ì— ì „ë‹¬í•˜ë©´ ë©ë‹ˆë‹¤.
(ì‚¬ì‹¤ Organizationì´ ì•„ë‹ˆë¼ ê°œì¸ ê³„ì •ì—ì„œ Appì„ ìƒì„±í•´ë„ ë™ì‘í•©ë‹ˆë‹¤.)&lt;/p>
&lt;p>ë‹¨, &lt;code>dex.config&lt;/code>ëŠ” &lt;code>argocd-cm&lt;/code>ì´ë¼ëŠ” Configmapì˜ &lt;code>.data&lt;/code>ì˜ í•„ë“œë¡œ ì¡´ì¬í•˜ê¸° ë•Œë¬¸ì— ìš°ë¦¬ëŠ” Helm chartì˜ values.yamlì— &lt;code>dex.config&lt;/code>ë¥¼ ì˜¬ë°”ë¥´ê²Œ ì „ë‹¬í•´ì•¼í•©ë‹ˆë‹¤.
ì´ë¥¼ ìœ„í•´ì„  &lt;code>server.config.dex.config&lt;/code>ë¥¼ ë‹¤ìŒê³¼ ê°™ì´ ì‘ì„±í•´ì£¼ë©´ ë©ë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">server&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">config&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">dex.config&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">|&lt;/span>&lt;span class="sd">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> connectors:
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> # Github OAuthë¥¼ í†µí•´ SSOí•˜ë ¤ëŠ” ê²½ìš°
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> - type: github
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> id: github # ìƒê´€ ì—†ì„ ë“¯ ë­˜ë¡œ í•˜ë“ 
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> name: GitHub # ìƒê´€ ì—†ì„ ë“¯ ë­˜ë¡œ í•˜ë“ 
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> config:
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> clientID: &amp;lt;your github oauth app client id&amp;gt;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> clientSecret: &amp;lt;your github oauth app client secret&amp;gt;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> orgs:
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> - name: &amp;lt;your github organization name&amp;gt; # e.g. khu-dev&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nn">...&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;strong>server.config.dex.configì— ì‘ì„±í•´ì•¼í•œë‹¤ëŠ” ê²ƒì€ ì–´ë–»ê²Œ ì•Œ ìˆ˜ ìˆëŠ”ê°€?&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>&lt;a class="link" href="https://argo-cd.readthedocs.io/en/stable/operator-manual/declarative-setup/#quick-reference" target="_blank" rel="noopener"
>ArgoCDì˜ ê³µì‹ ë¬¸ì„œ&lt;/a>ì—ì„œëŠ” &lt;code>argocd-cm.yaml&lt;/code>ì„ &amp;lsquo;General Argo CD configuration&amp;rsquo;ë¡œ ì†Œê°œí•˜ê³  ìˆìŠµë‹ˆë‹¤.&lt;/li>
&lt;li>&lt;a class="link" href="https://github.com/argoproj/argo-helm/tree/main/charts/argo-cd" target="_blank" rel="noopener"
>ArgoCD Helm Chart Github&lt;/a>ì—ì„œëŠ” &lt;code>values.yaml&lt;/code> ì† &lt;code>server.config&lt;/code>ë¥¼ ë™ì¼í•˜ê²Œ &amp;lsquo;General Argo CD configuration&amp;rsquo;ë¡œ ì†Œê°œí•˜ê³  ìˆìŠµë‹ˆë‹¤.&lt;/li>
&lt;li>ë”°ë¼ì„œ &lt;code>values.yaml&lt;/code> ì† &lt;code>server.config&lt;/code>ì— ì •ì˜í•˜ëŠ” ë‚´ìš©ì´ ê³§ &lt;code>argocd-cm.yaml&lt;/code>ì˜ &lt;code>.data&lt;/code>ê°€ ë¨ì„ ìœ ì¶”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-console" data-lang="console">&lt;span class="line">&lt;span class="cl">&lt;span class="gp">$&lt;/span> helm upgrade -n argocd argocd &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span>&lt;span class="go"> argo/argo-cd -f values.yaml
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>í•œ ë²ˆ ë” ìœ„ì˜ ì»¤ë§¨ë“œë¥¼ í†µí•´ RBAC ì„¤ì •ì„ ì ìš©ì‹œì¼œì£¼ê² ìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://umi0410.github.io/blog/devops/declarative-argocd-helm-rbac/login-via-github.png"
width="1534"
height="916"
srcset="https://umi0410.github.io/blog/devops/declarative-argocd-helm-rbac/login-via-github_hu9c113ddcd41c506471c69869b28b5ba9_827681_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/devops/declarative-argocd-helm-rbac/login-via-github_hu9c113ddcd41c506471c69869b28b5ba9_827681_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="LOG IN VIA GITHUB ë²„íŠ¼ì´ ì¶”ê°€ëœ ëª¨ìŠµ"
class="gallery-image"
data-flex-grow="167"
data-flex-basis="401px"
>&lt;/p>
&lt;p>ì„±ê³µì ìœ¼ë¡œ Githubì„ í†µí•œ SSOê°€ í™œì„±í™”ë˜ë©´ ArgoCDì— ì ‘ì†í•  ë•Œ ìœ„ì™€ ê°™ì´ &lt;code>LOG IN VIA GITHUB&lt;/code> ë²„íŠ¼ì´ ì¶”ê°€ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>ê·¸ëŸ¼ ìš”êµ¬ì‚¬í•­ëŒ€ë¡œ &lt;code>khu-dev&lt;/code>ë¼ëŠ” Github Organizationì˜ &lt;code>khumu-developer&lt;/code> Teamì— ì†í•œ ê³„ì •ìœ¼ë¡œ ArgoCDì— ë¡œê·¸ì¸í•´ë³´ê² ìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://umi0410.github.io/blog/devops/declarative-argocd-helm-rbac/user-info.png"
width="823"
height="469"
srcset="https://umi0410.github.io/blog/devops/declarative-argocd-helm-rbac/user-info_hucef4272cca453302126c4eebb9e78a82_85359_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/devops/declarative-argocd-helm-rbac/user-info_hucef4272cca453302126c4eebb9e78a82_85359_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="User info"
class="gallery-image"
data-flex-grow="175"
data-flex-basis="421px"
>&lt;/p>
&lt;p>ì„±ê³µì ìœ¼ë¡œ ë¡œê·¸ì¸í•œ ë’¤ &lt;code>&amp;lt;your argocd url&amp;gt;/user-info&lt;/code>ë¡œ ì´ë™í•˜ë©´ ìœ„ì™€ ê°™ì´ &lt;!-- raw HTML omitted -->:&lt;!-- raw HTML omitted --> ì´ë¼ëŠ” ì´ë¦„ì˜ ê·¸ë£¹ì— ì†í•œ ëª¨ìŠµì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://umi0410.github.io/blog/devops/declarative-argocd-helm-rbac/permission-denied.png"
width="730"
height="925"
srcset="https://umi0410.github.io/blog/devops/declarative-argocd-helm-rbac/permission-denied_hua5411c757f7472ef3825c63a839272be_139750_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/devops/declarative-argocd-helm-rbac/permission-denied_hua5411c757f7472ef3825c63a839272be_139750_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="Permission denied"
class="gallery-image"
data-flex-grow="78"
data-flex-basis="189px"
>&lt;/p>
&lt;p>ì´í›„ ë§Œì•½ ì–´ë–¤ Applicationì„ Syncí•˜ë ¤í•´ë„ í˜„ì¬ ì†í•œ ê·¸ë£¹ì¸ &lt;code>khu-dev:khumu-developer&lt;/code>ëŠ” &lt;code>readonly&lt;/code> Roleì„ ë¶€ì—¬ë°›ì•˜ê¸°ì— ì–´ë– í•œ Appë„ Syncí•  ê¶Œí•œì´ ì—†ì–´ ìœ„ì™€ ê°™ì´ Permission Denied ë¼ëŠ” ì—ëŸ¬ë¥¼
ë§ì´í•˜ê²Œ ë©ë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://umi0410.github.io/blog/devops/declarative-argocd-helm-rbac/user-info-2.png"
width="826"
height="471"
srcset="https://umi0410.github.io/blog/devops/declarative-argocd-helm-rbac/user-info-2_hu2b0412c75c988732975fb3f78c2d2f2f_85455_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/devops/declarative-argocd-helm-rbac/user-info-2_hu2b0412c75c988732975fb3f78c2d2f2f_85455_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="User info"
class="gallery-image"
data-flex-grow="175"
data-flex-basis="420px"
>&lt;/p>
&lt;p>ğŸ‰ğŸ‰ğŸ‰ í•˜ì§€ë§Œ ìœ„ì™€ ê°™ì´ &lt;code>khu-dev:khumu-devops&lt;/code>ì— ì†í•œ ê³„ì •ìœ¼ë¡œ ë¡œê·¸ì¸í•œ ë’¤ ë™ì¼í•˜ê²Œ ì–´ë–¤ Appì„ Syncí•´ë³´ë©´ ì´ë²ˆì—ëŠ” ì„±ê³µì ìœ¼ë¡œ Appì´ Syncë˜ëŠ” ëª¨ìŠµì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. &lt;code>khu-dev:khumu-devops&lt;/code> ê·¸ë£¹ì€ admin Roleì„ ë¶€ì—¬ë°›ì•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤!&lt;/p>
&lt;p>ì, ê·¸ëŸ¼ ì´ì œëŠ” admin ê³„ì •ì„ ë¹„ë¡¯í•œ username, password ê¸°ë°˜ì˜ ê³„ì •ì„ ì´ìš©í•  í•„ìš” ì—†ì´ Githubì„ ì´ìš©í•´ ArgoCDì˜ ì¸ì¦/ì¸ê°€ë¥¼ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤ ã…ã…&lt;/p>
&lt;h2 id="ë§ˆì¹˜ë©°">ë§ˆì¹˜ë©°&lt;/h2>
&lt;p>ìƒˆë¡œìš´ íšŒì‚¬ì— ì…ì‚¬í•˜ê³  í–‰ë³µí•˜ê²Œ ì ì‘í•´ë‚˜ê°€ë©´ì„œ ìš´ë™, ì·¨ë¯¸, ì—…ë¬´ê¹Œì§€ ì±™ê¸°ë‹¤ë³´ë‹ˆ ê¸€ì„ ì‘ì„±í•´ë†“ê³  ë§ˆë¬´ë¦¬ë¥¼ ì˜¤ëœ ì‹œê°„ ë™ì•ˆ ì§“ì§€ ëª»í•˜ë‹¤ê°€ ê¸‰íˆ ì§€ë°©ì„ ê±°ì¼ì„ ê¸°íšŒ ì‚¼ì•„ ê¸€ì„ ë§ˆë¬´ë¦¬ ì§€ì–´ë´¤ìŠµë‹ˆë‹¤.
ìš°ì„ ì€ ArgoCDë¥¼ Helm chartì™€ í•¨ê»˜ ì„ ì–¸ì ìœ¼ë¡œ ì´ìš©í•´ë‚˜ê°€ëŠ” ë‚´ìš©ì€ ì´ ê¸€ì„ ëìœ¼ë¡œ 2í¸ìœ¼ë¡œ ë§ˆë¬´ë¦¬ ì§€ì–´ë³´ë ¤í•©ë‹ˆë‹¤. ì‚¬ì´ë“œ í”„ë¡œì íŠ¸ì—ì„œ ArgoCDë¥¼ ì´ìš©í•˜ë©´ì„œ ArgoCDëŠ” ì„ ì–¸ì ìœ¼ë¡œ ê´€ë¦¬ê°€ ê°€ëŠ¥í•˜ë‹¤ëŠ” ì¥ì ì„ ë§ì´
ì¨ë¨¹ì§€ ëª»í•˜ê³  ì¢€ ë”ëŸ¬ìš´ í˜•íƒœë¡œ ì–µì§€ë¡œ ì‚¬ìš©í•˜ë‹¤ë³´ë‹ˆ ë²ˆê±°ë¡­ê²Œ ëŠê»´ì¡Œë˜ ê²½ìš°ê°€ ë§ì•˜ëŠ”ë° ì € ìŠ¤ìŠ¤ë¡œë„ ì´ë¥¼ ì„ ì–¸ì ì¸ í˜•íƒœë¡œ ê°œì„ í•˜ë©´ì„œ ë§ì´ í¸í•´ì¡Œê³ , ê·¸ ê³¼ì •ë“¤ì„ ì´ë ‡ê²Œ ê¸€ë¡œ ê¸°ë¡í•˜ê³ ë‚˜ë‹ˆ ë‚˜ë¦„ ë¿Œë“¯í•©ë‹ˆë‹¤.&lt;/p>
&lt;p>ArgoCD ê´€ë ¨í•œ ë˜ ë‹¤ë¥¸ ë‚´ìš©ìœ¼ë¡œëŠ” &lt;a class="link" href="https://argocd-applicationset.readthedocs.io/en/stable/" target="_blank" rel="noopener"
>Applpicaitonset&lt;/a>ì— ê´€í•´ ì¶”í›„ì— ê¸°íšŒê°€ ë˜ë©´ ë‹¤ë¤„ë³¼ê¹Œ ìƒê° ì¤‘ì…ë‹ˆë‹¤.&lt;/p>
&lt;p>ëª‡ ë…„ ì „ì— ì²˜ìŒ ë°ë¸Œì˜µìŠ¤ ì—”ì§€ë‹ˆì–´ ì¸í„´ìœ¼ë¡œì„œ ì´ìª½ ì¼ì„ ì‹œì‘í–ˆì„ ë•Œ ì œê°€ ì•Œë˜ ArgoCDëŠ” &amp;lsquo;ArgoCDë¼ê³  ìš”ì¦˜ ì¿ ë²„ë„¤í‹°ìŠ¤ í™˜ê²½ì—ì„œ ì“¸ë§Œí•œ CD íˆ´ì´ ìˆë‹¤ë”ë¼&amp;rsquo; ì •ë„ì˜ ë„êµ¬ì˜€ë˜ ê²ƒ ê°™ì€ë° ì´ì œëŠ” ìì²´ CDíˆ´ë§Œì„ ì‚¬ìš©í•˜ëŠ” ê¸°ì—…ì„ ì œì™¸í•˜ë©´
ì¿ ë²„ë„¤í‹°ìŠ¤ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ëŠ” ëŒ€ë¶€ë¶„ì´ ArgoCDë¥¼ ì´ìš©í•  ì •ë„ë¡œ ëŒ€ì¤‘ì ì¸ ê¸°ìˆ ì´ ëœ ê²ƒ ê°™ê³ , ê·¸ ì‹œì ˆë³´ë‹¤ ë§ì€ ê¸°ëŠ¥ë“¤ì„ í¸ë¦¬í•˜ê²Œ ì œê³µí•˜ëŠ” ê¸°ìˆ ì´ ëœ ê²ƒ ê°™ì•„ ìƒˆì‚¼ ê¸°íŠ¹í•˜ë‹¨ ìƒê°ì´ ë“¤ì—ˆìŠµë‹ˆë‹¤ ã…ã….&lt;/p>
&lt;p>ë°ë¸Œì˜µìŠ¤ë¡œ ì…ì‚¬í•˜ë©´ì„œ ê±°ëŒ€í•œ ê·œëª¨ì˜ í´ë¼ìš°ë“œ ì¸í”„ë¼ë¥¼ ë‹¤ë£¨ë‹¤ë³´ë‹ˆ ë„¤íŠ¸ì›Œí¬ ê´€ë ¨ëœ ë‚´ìš©ì„ ìì£¼ ì ‘í•˜ê²Œ ë˜ê³ , ì´ë¡ ì ìœ¼ë¡œëŠ” ì œê°€ ì•½í•œ ë¶€ë¶„ì´ë¼ê³  ìƒê°ì´ ë“¤ì–´ì„œ ì•ìœ¼ë¡œëŠ” DevOps ì„œë¹„ìŠ¤ë“¤ë³´ë‹¤ëŠ” ë„¤íŠ¸ì›Œí¬ ê³µë¶€ë¥¼ ìš°ì„ ì ìœ¼ë¡œ í•´ë³¼ê¹Œí•©ë‹ˆë‹¤!
ê³§ ìì·¨ë¥¼ ì‹œì‘í• í…ë° ë¼ì¦ˆë² ë¦¬ íŒŒì´ë¡œ ìì·¨ë°©ì—ì„œ ì¬ë°ŒëŠ” ë¬´ì–¸ê°€ë¥¼ í•´ë³¼ ìˆ˜ ìˆì„ê¹Œ ì‹¶ì€ ìƒê°ë„ ìˆêµ¬ìš” ã…ã….
ì‹œê°„ì´ ë˜ë©´ ê´€ë ¨ ë‚´ìš©ì„ í‹ˆí‹ˆì´ ê¸°ë¡í•´ë³´ê² ìŠµë‹ˆë‹¤! ê°ì‚¬í•©ë‹ˆë‹¤.&lt;/p>
&lt;h2 id="ì°¸ê³ ìë£Œ">ì°¸ê³ ìë£Œ&lt;/h2>
&lt;ul>
&lt;li>&lt;a class="link" href="https://www.okta.com/kr/identity-101/role-based-access-control-vs-attribute-based-access-control/" target="_blank" rel="noopener"
>RBAC vs ABAC - Okta&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://argo-cd.readthedocs.io/en/stable/" target="_blank" rel="noopener"
>ArgoCD ê³µì‹ ë¬¸ì„œ&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://github.com/argoproj/argo-helm/tree/main/charts/argo-cd" target="_blank" rel="noopener"
>ArgoCD Helm Chart&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>ArgoCD ì„ ì–¸ì ìœ¼ë¡œ ì´ìš©í•´ë‚˜ê°€ê¸° - Helm, App of App</title><link>https://umi0410.github.io/blog/devops/declarative-argocd-helm-app-of-app/</link><pubDate>Fri, 22 Apr 2022 14:11:07 +0900</pubDate><guid>https://umi0410.github.io/blog/devops/declarative-argocd-helm-app-of-app/</guid><description>&lt;img src="https://umi0410.github.io/blog/devops/declarative-argocd-helm-app-of-app/logo.png" alt="Featured image of post ArgoCD ì„ ì–¸ì ìœ¼ë¡œ ì´ìš©í•´ë‚˜ê°€ê¸° - Helm, App of App" />&lt;h2 id="ì‹œì‘í•˜ë©°">ì‹œì‘í•˜ë©°&lt;/h2>
&lt;p>&lt;strong>ì·¨ì¤€ìƒ ê¸°ê°„ì„ ë§ˆë¬´ë¦¬&lt;/strong>í•˜ê³  &lt;strong>ë°ë¸Œì˜µìŠ¤ ì—”ì§€ë‹ˆì–´ë¡œì„œ ì»¤ë¦¬ì–´ë¥¼ ì‹œì‘&lt;/strong>í•˜ê²Œ ëìŠµë‹ˆë‹¤! ğŸ‰&lt;/p>
&lt;p>ê·¼ë¬´ë¥¼ ì‹œì‘í•˜ê¸° ì „ê¹Œì§€ ê¸°ê°„ì´ ì¢€ ë‚¨ì•„ìˆì–´ì„œ ê·¸ ì „ê¹Œì§€ ë­˜ í•´ë³´ë©´ ì¬ë°Œì„ê¹Œ ê³ ë¯¼í•˜ë˜ ì¤‘ì—
ìƒˆë¡œ ìƒê¸´ í´ë¼ìš°ë“œ ë™ì•„ë¦¬ì¸ &lt;strong>Cloud Club&lt;/strong>ì—ì„œ í´ë¼ìš°ë“œì™€ ì¸í”„ë¼ì— ê´€í•œ ì£¼ì œë¡œ ë°œí‘œí•  ê¸°íšŒê°€ ì£¼ì–´ì ¸ ArgoCDë¥¼ í† í”½ìœ¼ë¡œ ë°œí‘œë¥¼ í•´ë³´ë ¤í•©ë‹ˆë‹¤.
ê·¸ë¦¬ê³  ê´€ë ¨ëœ ë‚´ìš©ì„ í•œ ë²ˆ ë” ë¸”ë¡œê·¸ì— ì •ë¦¬í•´ë³´ë ¤í•´ìš”!&lt;/p>
&lt;p>ì£¼ì œëŠ” &amp;ldquo;&lt;em>&lt;code>ArgoCD&lt;/code> ì„ ì–¸ì ìœ¼ë¡œ ì´ìš©í•´ë‚˜ê°€ê¸°&lt;/em>&amp;rdquo; ì´ê³  ì£¼ë¡œ ë‹¤ë£° ë‚´ìš©ì€ ì–´ë–»ê²Œ ArgoCDë¥¼ ì¢€ ë”
ì„ ì–¸ì ìœ¼ë¡œ ê´€ë¦¬í•˜ê³  ì´ìš©í•´ë‚˜ê°ˆ ìˆ˜ ìˆì„ì§€ì…ë‹ˆë‹¤.&lt;/p>
&lt;p>ArgoCDê°€ ë­”ì§€, ì–´ë–»ê²Œ Getting Startedí• ì§€, GitOpsê°€ ë­”ì§€ ë“±ì„ ë‹¤ë£¨ì§€ ì•Šìœ¼ë ¤ëŠ” ì´ìœ ëŠ” ì´ë¯¸ ê·¸ ë‚´ìš©ìœ¼ë¡œëŠ” ì¶©ë¶„í•œ ì–‘ì§ˆì˜ ìë£Œê°€
ì¡´ì¬í•œë‹¤ê³  ìƒê°í•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.
ArgoCDë‚˜ GitOpsì˜ ê°œë… ìì²´ ê°™ì€ ë‚´ìš©ë³´ë‹¤ëŠ” ìƒˆë¡œìš´ ê¸°ìˆ (ArgoCD)ì„ ì ‘í•  ë•Œ ì–´ë–»ê²Œ ì…ë§›ëŒ€ë¡œ ì»¤ìŠ¤í„°ë§ˆì´ì§•í•´ë‚˜ê°€ëŠ”ì§€
ê·¸ë¦¬ê³  ê·¸ ì‘ì—…ì„ &lt;strong>ì–´ë–»ê²Œ ì¢€ ë” ìœ ì§€ë³´ìˆ˜í•˜ê¸° ì‰½ë„ë¡ ì¦‰ ì„ ì–¸ì ìœ¼ë¡œ í•´ë‚˜ê°ˆ ìˆ˜ ìˆì„ì§€&lt;/strong>ì— ëŒ€í•œ ì €ì˜ ì‘ì—… ê³¼ì •ì„ ì†Œê°œí•´ë³´ë ¤í•©ë‹ˆë‹¤ â˜ºï¸&lt;/p>
&lt;p>ì´ë²ˆ ê¸€ì—ì„œëŠ” í¬ê²Œ ë‹¤ìŒê³¼ ê°™ì€ ì‘ì—…ì„ ë‹¤ë£¨ê²Œ ë  ê±°ì—ìš”.&lt;/p>
&lt;ol>
&lt;li>&lt;code>minikube&lt;/code>ë¥¼ í†µí•´ ë¡œì»¬ì— kubernetes í™˜ê²½ì„ êµ¬ì¶•í•©ë‹ˆë‹¤.&lt;/li>
&lt;li>&lt;code>helm&lt;/code>ì„ í†µí•´ ArgoCDë¥¼ install í•©ë‹ˆë‹¤.&lt;/li>
&lt;li>&lt;code>ArgoCD&lt;/code>ë¥¼ ì´ìš©í•´ë³´ê¸° ìœ„í•´ &lt;code>CRD&lt;/code>ì¸ &lt;code>AppProject&lt;/code>ì™€ &lt;code>Application&lt;/code>ì„ ìƒì„±í•©ë‹ˆë‹¤.&lt;/li>
&lt;li>ì‹¤ì œë¡œ GitOpsì˜ í˜•íƒœë¡œ CDê°€ ì˜ ë™ì‘í•˜ëŠ”ì§€ í™•ì¸~&lt;/li>
&lt;li>1~4ë²ˆ ê³¼ì •ì„ helmì„ í†µí•´ ì¢€ ë” ì„ ì–¸ì ìœ¼ë¡œ ìˆ˜í–‰í•  ìˆ˜ ìˆë„ë¡ ê°œì„ í•©ë‹ˆë‹¤.&lt;/li>
&lt;/ol>
&lt;p>í•´ë‹¹ ê³¼ì •ë“¤ì„ ì‹¤ìŠµí•´ë³´ê³  ì‹¶ìœ¼ì‹  ë¶„ë“¤ì€ ì œê°€ ì‘ì„±í•´ë‘” Repository(&lt;a class="link" href="https://github.com/umi0410/declarative-argocd" target="_blank" rel="noopener"
>https://github.com/umi0410/declarative-argocd&lt;/a>)ë¥¼ í¬í¬í•œ ë’¤ ì‘ì—…í•˜ì‹œë©´ í¸í•˜ì‹¤ ê²ƒ ê°™ìŠµë‹ˆë‹¤.&lt;/p>
&lt;h2 id="glossary-ìš©ì–´-ì‚¬ì „">Glossary (ìš©ì–´ ì‚¬ì „)&lt;/h2>
&lt;p>ê°„ë‹¨í•˜ê²Œ ì´ë²ˆ ê¸€ì—ì„œ ë‹¤ë£¨ê²Œ ë  ìš©ì–´ë“¤ì„ ì •ë¦¬í•´ë³´ê² ìŠµë‹ˆë‹¤. ìì„¸í•œ ë‚´ìš©ì´ ê¶ê¸ˆí•˜ì‹œë‹¤ë©´ ë”°ë¡œ ì°¾ì•„ë³´ì‹œëŠ” ê²ƒì„ ì¶”ì²œë“œë¦¬ê² ìŠµë‹ˆë‹¤.
ì´ë²ˆ ê¸€ì—ì„œ ì „ë¶€ë¥¼ ë‹¤ë£¨ê¸´ í˜ë“¤ê¸° ë•Œë¬¸ì´ì—ìš” ã…œã……ã…œ&lt;/p>
&lt;ul>
&lt;li>&lt;strong>Glossary&lt;/strong> - ìš©ì–´ ì‚¬ì „&lt;/li>
&lt;li>&lt;strong>minikube&lt;/strong> - &amp;ldquo;minikube is local Kubernetes, focusing on making it easy to learn and develop for Kubernetes.&amp;rdquo; from &lt;a class="link" href="https://minikube.sigs.k8s.io/docs/start/" target="_blank" rel="noopener"
>Minikube Docs&lt;/a>&lt;/li>
&lt;li>&lt;strong>ArgoCD&lt;/strong> - &amp;ldquo;Argo CD is a declarative, GitOps continuous delivery tool for Kubernetes.&amp;rdquo; - from &lt;a class="link" href="https://argo-cd.readthedocs.io/en/stable/" target="_blank" rel="noopener"
>ArgoCD Documents&lt;/a>&lt;/li>
&lt;li>&lt;strong>CRD&lt;/strong>(Custom Resource Definition) - K8sì˜ í‘œì¤€ ResourceëŠ” ì•„ë‹ˆì§€ë§Œ ê°œë³„ì ìœ¼ë¡œ ì •ì˜í•˜ì—¬ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ë¦¬ì†ŒìŠ¤ kindë“¤ì„ ë§í•¨.&lt;/li>
&lt;li>&lt;strong>Application&lt;/strong> - ArgoCDê°€ ì‚¬ìš©í•˜ëŠ” CRD ì¤‘ í•˜ë‚˜. ì–´ë–¤ K8s ë¦¬ì†ŒìŠ¤ë“¤ì„ ì–´ë–¤ Repositoryì—ì„œ ê°€ì ¸ì™€ì„œ ì–´ë–¤ ì‹ìœ¼ë¡œ ë°°í¬í•  ì§€ë¥¼ ì •ì˜í•¨.&lt;/li>
&lt;li>&lt;strong>AppProject&lt;/strong> í˜¹ì€ Project - Applicationì´ ì†í•˜ëŠ” ê·¸ë£¹.&lt;/li>
&lt;li>&lt;strong>GitOps&lt;/strong> - DevOpsì˜ ì‹¤í˜„ í˜•íƒœ ì¤‘ í•˜ë‚˜. ì¸í”„ë¼ë‚˜ ì• í”Œë¦¬ì¼€ì´ì…˜ ìš´ì˜ ì •ë³´ì— ëŒ€í•œ Single Source of Truthë¡œì„œ Git Repositoryë¥¼ í™œìš©í•˜ëŠ” í˜•íƒœ&lt;/li>
&lt;li>&lt;strong>Helm&lt;/strong> - K8s applicationì„ íŒ¨í‚¤ì§•í•˜ì—¬ í¸ë¦¬í•˜ê²Œ ê´€ë¦¬í•  ìˆ˜ ìˆë„ë¡ í•´ì£¼ëŠ” ë„êµ¬&lt;/li>
&lt;li>&lt;strong>Chart&lt;/strong> - Helmì„ í†µí•´ ë°°í¬ë˜ëŠ” ê²ƒ. ChartëŠ” ë‹¤ì–‘í•œ k8s ë¦¬ì†ŒìŠ¤ë“¤ì„ íŒ¨í‚¤ì§•í•œ í˜•íƒœì´ë‹¤.&lt;/li>
&lt;li>&lt;strong>ì„ ì–¸ì &lt;/strong>(Declarative) - ì ˆì°¨ì (Procedural) í˜¹ì€ ëª…ë ¹ì (Imperative) ë°©ì‹ê³¼ ë‹¬ë¦¬ ê³¼ì •ì„ ìƒëµí•˜ê³  ê°„ê²°í•˜ê²Œ Desired Stateë¥¼ ì„ ì–¸ì ìœ¼ë¡œ ì •ì˜í•˜ëŠ” ê²ƒ.&lt;/li>
&lt;/ul>
&lt;h2 id="requirements">Requirements&lt;/h2>
&lt;ul>
&lt;li>&lt;strong>minikube&lt;/strong>
&lt;ul>
&lt;li>&lt;code>brew install minikube &amp;amp;&amp;amp; minikube start&lt;/code>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;strong>kubectl&lt;/strong>
&lt;ul>
&lt;li>&lt;code>brew install kubectl &amp;amp;&amp;amp; kubectl version&lt;/code>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;strong>helm&lt;/strong>
&lt;ul>
&lt;li>&lt;code>brew install helm &amp;amp;&amp;amp; helm version&lt;/code>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;strong>Github account&lt;/strong>
&lt;ul>
&lt;li>ì˜ˆì‹œ ì½”ë“œ ë ˆí¬(&lt;a class="link" href="https://github.com/umi0410/declarative-argocd" target="_blank" rel="noopener"
>https://github.com/umi0410/declarative-argocd&lt;/a>)ë¥¼ í¬í¬ëœ¬ ë’¤ ìì‹ ì˜ ë ˆí¬ë¥¼ í†µí•´ Continuouse Deployí•˜ê¸° ìœ„í•¨&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="argocdë¥¼-êµ¬ì¶•í•˜ê³ -ê´€ë¦¬í•˜ëŠ”-ë°©ë²•">ArgoCDë¥¼ êµ¬ì¶•í•˜ê³  ê´€ë¦¬í•˜ëŠ” ë°©ë²•&lt;/h2>
&lt;p>ì¿ ë²„ë„¤í‹°ìŠ¤ì—ì„œëŠ” ì–´ë–¤ ì„œë¹„ìŠ¤ë¥¼ ë°°í¬í•˜ê³  ê´€ë¦¬í•´ë‚˜ê°€ëŠ” ë°ì—ëŠ” ë‹¤ìŒê³¼ ê°™ì€ ë°©ë²•ë“¤ì´ ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;ul>
&lt;li>Plain k8s manifest yaml&lt;/li>
&lt;li>Kustomize&lt;/li>
&lt;li>Helm Chart&lt;/li>
&lt;li>&amp;hellip;&lt;/li>
&lt;/ul>
&lt;p>ì´ì™¸ì—ë„ ë‹¤ì–‘í•œ ë°©ë²•ë“¤ì´ ìˆì„ ìˆ˜ ìˆì§€ë§Œ ì¼ë‹¨ ì œê°€ ì‚¬ìš©í•´ë³¸ ë°©ë²•ë“¤ì€ ìœ„ì˜ 3ê°œì™€ ê°™ì•„ìš”.&lt;/p>
&lt;p>ì €ëŠ” ë³µì¡í•œ í˜•íƒœë¥¼ ê°€ì§„ ì˜¤í”ˆì†ŒìŠ¤ë¥¼ ë°°í¬í•  ë•Œì—ëŠ” Helm Chartë¥¼, ìš°ë¦¬ íŒ€ì˜ ì„œë¹„ìŠ¤ë¥¼ ê°ê° ë°°í¬í•  ë•Œì—ëŠ” ê°€ë³ê²Œ
ì¸ìë¥¼ ìˆ˜ì •í•˜ëŠ” ë“±ì˜ ìš©ë„ë¡œ Kustomizeë¥¼ ì‚¬ìš©í•˜ê³  ìˆìŠµë‹ˆë‹¤.
Plain k8s manifest yamlì€ ì‹¤ì œ ì—…ë¬´ë‚˜ í”„ë¡œì íŠ¸ì—ì„œëŠ” ê±°ì˜ ì‚¬ìš©í•˜ì§€ ì•Šê³ , ì¿ ë²„ë„¤í‹°ìŠ¤ ê´€ë ¨ tutorial ë“±ì—ì„œ ì£¼ë¡œ ì‚¬ìš©í•˜ê³  ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>ë³µì¡í•œ í˜•íƒœì˜ ì˜¤í”ˆì†ŒìŠ¤ë¥¼ ë°°í¬í•  ë•Œì—ëŠ” Helm Chartë¥¼ ì‚¬ìš©í•˜ëŠ” ì´ìœ ëŠ” Helm ChartëŠ” &lt;code>values.yaml&lt;/code>ê³¼ ê°™ì€ ì„¤ì • íŒŒì¼ì„
í†µí•´ í•„ìš”í•œ ëŒ€ë¶€ë¶„ì˜ ê²ƒì„ í¸ë¦¬í•˜ê²Œ ì„¤ì •í•˜ê²Œ í•˜ê³  ê´€ë¦¬í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. ì˜¤í”ˆì†ŒìŠ¤ í”„ë¡œì íŠ¸ë¥¼ ì§ì ‘ Plain k8s manifest íŒŒì¼ë“¤ë¡œ ê´€ë¦¬í•˜ê¸°ì—ëŠ”
ë„ˆë¬´ë‚˜ë„ ë²…ì°¨ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. Deploymentë§Œ í•´ë„ í•œ ì†ê°€ë½ìœ¼ë¡œ ì„¸ê¸° í˜ë“  ê²½ìš°ë„ ìˆê³ , Configmapì— ì „ë‹¬í•´ì•¼í•˜ëŠ” ê°’ë„ ë³€ê²½ë  ìˆ˜ ìˆëŠ”ë°, ë˜ ìƒˆë¡œìš´ ë²„ì „ì´ ì¶œì‹œë˜ë©´
ê·¸ manifest íŒŒì¼ë“¤ì„ í•˜ë‚˜ í•˜ë‚˜ ë¹„êµí•˜ëŠ” ê²ƒë„ ë„ˆë¬´ í˜ë“¤ì£ . ê·¸ë˜ì„œ ì €ëŠ” ë³´í†µ &lt;code>Nginx Ingress Controller&lt;/code>, &lt;code>Cert manager&lt;/code>, &lt;code>ArgoCD&lt;/code> ì™€ ê°™ì€ ì˜¤í”ˆì†ŒìŠ¤ë“¤ì€ Helmìœ¼ë¡œ ê´€ë¦¬í•˜ëŠ” ê²ƒì„ ì„ í˜¸í•©ë‹ˆë‹¤.&lt;/p>
&lt;p>ë°˜ë©´ ìš°ë¦¬ íŒ€ ì„œë¹„ìŠ¤ë¥¼ ë°°í¬í•˜ëŠ” ê²½ìš° ëŒ€ë¶€ë¶„ Image tagë§Œ ë³€ê²½í•˜ë©´ ë˜ëŠ”ë° ì´ëŸ° ì¼€ì´ìŠ¤ì—ëŠ” ê°€ë³ê²Œ &lt;code>Kustomize&lt;/code>ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì ì ˆí•˜ë‹¤ê³  ìƒê°ë©ë‹ˆë‹¤.&lt;/p>
&lt;p>ê·¸ë˜ì„œ! &lt;strong>ì´ë²ˆ ê¸€ì—ì„œëŠ” &lt;code>ArgoCD&lt;/code>ë¥¼ &lt;code>Helm&lt;/code>ìœ¼ë¡œ ë°°í¬&lt;/strong>í•´ë³´ë ¤ í•©ë‹ˆë‹¤.&lt;/p>
&lt;h2 id="helmìœ¼ë¡œ-ê°„ë‹¨í•˜ê²Œ-êµ¬ì¶•í•´ë³´ê¸°">Helmìœ¼ë¡œ ê°„ë‹¨í•˜ê²Œ êµ¬ì¶•í•´ë³´ê¸°&lt;/h2>
&lt;h3 id="argocd-helm-chart-ì„¤ì¹˜">ArgoCD Helm Chart ì„¤ì¹˜&lt;/h3>
&lt;p>Helm ìœ¼ë¡œ ArgoCDë¥¼ ì„¤ì¹˜í•˜ëŠ” ë°©ë²•ì€ &lt;a class="link" href="https://github.com/argoproj/argo-helm/tree/master/charts/argo-cd" target="_blank" rel="noopener"
>ArgoCD Helm Chart Github&lt;/a>ì—ì„œ í™•ì¸í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
ì°¸ ê°„ë‹¨í•©ë‹ˆë‹¤.&lt;/p>
&lt;p>ëŒ€ì‹  ì €ëŠ” namespaceë¥¼ &lt;code>argocd&lt;/code>ë¡œ ê³ ì •í•˜ì—¬ ì„¤ì¹˜í• ê²Œìš”! ê·¸ë ‡ì§€ ì•Šìœ¼ë©´ &lt;code>default&lt;/code> namespaceì— ì„¤ì¹˜ë”ë¼êµ¬ìš”. Release nameì€ &lt;code>argocd-demo&lt;/code>ë¡œ í•˜ê² ìŠµë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-console" data-lang="console">&lt;span class="line">&lt;span class="cl">&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span>&lt;span class="gp">$&lt;/span> minikube start
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">ğŸ˜„ minikube v1.25.2 on Darwin 12.2 (arm64)
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">...
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span>&lt;span class="gp">$&lt;/span> kubectl create ns argocd
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span>&lt;span class="gp">$&lt;/span> helm repo add argo https://argoproj.github.io/argo-helm
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">&amp;#34;argo&amp;#34; has been added to your repositories
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span>&lt;span class="gp">$&lt;/span> helm install -n argocd argocd-demo argo/argo-cd
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">NAME: argocd-demo
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">LAST DEPLOYED: Sat Apr 23 05:37:32 2022
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">NAMESPACE: argocd
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">STATUS: deployed
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">REVISION: 1
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">TEST SUITE: None
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">NOTES:
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">In order to access the server UI you have the following options:
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span>&lt;span class="go">1. kubectl port-forward service/argocd-demo-server -n argocd 8080:443
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span>&lt;span class="go"> and then open the browser on http://localhost:8080 and accept the certificate
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span>&lt;span class="go">2. enable ingress in the values file `server.ingress.enabled` and either
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go"> - Add the annotation for ssl passthrough: https://github.com/argoproj/argo-cd/blob/master/docs/operator-manual/ingress.md#option-1-ssl-passthrough
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go"> - Add the `--insecure` flag to `server.extraArgs` in the values file and terminate SSL at your ingress: https://github.com/argoproj/argo-cd/blob/master/docs/operator-manual/ingress.md#option-2-multiple-ingress-objects-and-hosts
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span>&lt;span class="go">After reaching the UI the first time you can login with username: admin and the random password generated during the installation. You can find the password by running:
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span>&lt;span class="go">kubectl -n argocd get secret argocd-initial-admin-secret -o jsonpath=&amp;#34;{.data.password}&amp;#34; | base64 -d
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span>&lt;span class="go">(You should delete the initial secret afterwards as suggested by the Getting Started Guide: https://github.com/argoproj/argo-cd/blob/master/docs/getting_started.md#4-login-using-the-cli)
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ëŒ€ë¶€ë¶„ì˜ ê²½ìš° helm chartë¥¼ installí•œ ë’¤ í‘œì‹œë˜ëŠ” ì•ˆë‚´ë¬¸ì´ ë§ì€ ë„ì›€ì´ ë©ë‹ˆë‹¤.&lt;/p>
&lt;p>1ë²ˆ - ë¸Œë¼ìš°ì €ì—ì„œ ArgoCDë¥¼ ì—´ê¸° ìœ„í•œ Port forwarding ì„¤ëª…ì´ì—ìš”.&lt;/p>
&lt;p>2ë²ˆ - Ingressë‚˜ TLS Termination ê´€ë ¨ ì„¤ëª…ì´ì—ìš”.&lt;/p>
&lt;p>ë‚˜ë¨¸ì§€ - adminê³¼ ëœë¤ íŒ¨ìŠ¤ì›Œë“œì— ëŒ€í•œ ì„¤ëª…ì´ì—ìš”.&lt;/p>
&lt;h3 id="ë¸Œë¼ìš°ì €ë¡œ-ë¡œê·¸ì¸í•´ë³´ê¸°">ë¸Œë¼ìš°ì €ë¡œ ë¡œê·¸ì¸í•´ë³´ê¸°&lt;/h3>
&lt;p>ìë™ìœ¼ë¡œ ìƒì„±ëœ admin ë¹„ë°€ë²ˆí˜¸ë¥¼ ì–»ì€ ë’¤ ì½˜ì†”ì— ì ‘ì†í•˜ê¸° ìœ„í•´ Port forwardí•œ ë’¤ ì ‘ì†í•´ë³¼ê²Œìš”.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-console" data-lang="console">&lt;span class="line">&lt;span class="cl">&lt;span class="gp">$&lt;/span> kubectl -n argocd get secret argocd-initial-admin-secret -o &lt;span class="nv">jsonpath&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;{.data.password}&amp;#34;&lt;/span> &lt;span class="p">|&lt;/span> base64 -d
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">5VYjI5YcfOo6XMHx
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span>&lt;span class="gp">$&lt;/span> kubectl port-forward service/argocd-demo-server -n argocd 8080:443
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">Forwarding from 127.0.0.1:8080 -&amp;gt; 8080
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">Forwarding from [::1]:8080 -&amp;gt; 8080
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="https://umi0410.github.io/blog/devops/declarative-argocd-helm-app-of-app/login.png"
width="1573"
height="1049"
srcset="https://umi0410.github.io/blog/devops/declarative-argocd-helm-app-of-app/login_hu7e8078ba43c639b9075fb1b2acd2ff79_623918_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/devops/declarative-argocd-helm-app-of-app/login_hu7e8078ba43c639b9075fb1b2acd2ff79_623918_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="ë¡œê·¸ì¸ í™”ë©´"
class="gallery-image"
data-flex-grow="149"
data-flex-basis="359px"
>
TLS ì„¤ì •ì„ ì˜¬ë°”ë¥´ê²Œ í•´ì£¼ì§€ ì•Šì•˜ê¸° ë–„ë¬¸ì— ë¸Œë¼ìš°ì €ì—ì„œ ì¸ì¦ì„œë‚˜ HTTPS ë¬¸ì œê°€ ê²½ê³ ë  ìˆ˜ ìˆì–´ìš”. ì¼ë‹¨ì€ &amp;lsquo;&lt;em>ë¬´ì‹œí•˜ê³  í˜ì´ì§€ ì§„í–‰í•˜ê¸°&lt;/em>&amp;lsquo;ì™€ ê°™ì€ ë²„íŠ¼ë“¤ì„ í†µí•´ ì§„í–‰í•´ì¤ì‹œë‹¤. ë¡œì»¬ì—ì„œ ë°ëª¨í•´ë³´ëŠ” ê²ƒì´ë‹ˆê¹Œìš”.
ê·¸ëŸ¼ ë²Œì¨ ì†ì‰½ê²Œ ë¡œê·¸ì¸ ì°½ì´ ëœ¬ ê²ƒì„ ë³¼ ìˆ˜ ìˆê³ , ì•„ê¹Œ ì¡°íšŒí•œ adminì— ëŒ€í•œ íŒ¨ìŠ¤ì›Œë“œë¥¼ í†µí•´ &lt;code>admin&lt;/code> / &lt;code>{{YOUR_PASSWORD}}&lt;/code>ë¡œ ë¡œê·¸ì¸í•´ì¤ë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://umi0410.github.io/blog/devops/declarative-argocd-helm-app-of-app/console.png"
width="1379"
height="906"
srcset="https://umi0410.github.io/blog/devops/declarative-argocd-helm-app-of-app/console_hu0ae6017bda3c97e28afa119368517377_147411_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/devops/declarative-argocd-helm-app-of-app/console_hu0ae6017bda3c97e28afa119368517377_147411_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="ì½˜ì†” í™”ë©´"
class="gallery-image"
data-flex-grow="152"
data-flex-basis="365px"
>&lt;/p>
&lt;p>ğŸ‰ ì§œì”~! &lt;strong>ArgoCD ì½˜ì†” í™”ë©´ì´ ë“±ì¥&lt;/strong>í–ˆì–´ìš”!!!&lt;/p>
&lt;h3 id="applicationì„-í†µí•´-cd-ë™ì‘ì„-í…ŒìŠ¤íŠ¸í•´ë³´ê¸°">Applicationì„ í†µí•´ CD ë™ì‘ì„ í…ŒìŠ¤íŠ¸í•´ë³´ê¸°&lt;/h3>
&lt;p>ArgoCDì—ëŠ” &lt;code>Repository&lt;/code>, &lt;code>AppProject&lt;/code>, &lt;code>Application&lt;/code> ê³¼ ê°™ì€ ê°œë…ë“¤ì´ ì¡´ì¬í•©ë‹ˆë‹¤.&lt;/p>
&lt;ul>
&lt;li>&lt;strong>Repository&lt;/strong> - Private Repository ë° ë‹¤ì–‘í•œ Repositoryì— ëŒ€í•œ ì„¤ì •ë“¤ì„ ë‹´ë‹¹í•´ìš”.&lt;/li>
&lt;li>&lt;strong>AppProject&lt;/strong> - Applicationì´ ì†í•  ìˆ˜ ìˆëŠ” ê·¸ë£¹ìœ¼ë¡œ í•´ë‹¹ Projectë‚´ì˜ Applicationë“¤ì´ ìˆ˜í–‰í•  ìˆ˜ ìˆëŠ”, í˜¹ì€ Project Tokenì´ ìˆ˜í–‰í•  ìˆ˜ ìˆëŠ” ë™ì‘ì„ ì œí•œí•  ìˆ˜ ìˆì–´ìš”.&lt;/li>
&lt;li>&lt;strong>Application&lt;/strong> - ì›í•˜ëŠ” k8s ë¦¬ì†ŒìŠ¤ë“¤ì„ ì–´ë–¤ ì‹ìœ¼ë¡œ CDí•  ì§€ì— ëŒ€í•œ ì„¤ì •ì´ì—ìš”.&lt;/li>
&lt;/ul>
&lt;p>Applicationì´ ê°€ì¥ ì¤‘ìš”í•´ìš”~! Private repositoryë¥¼ ì´ìš©í•˜ê¸° ì „ê¹Œì§€ëŠ” ì•„ë§ˆ Repositoryê°€ í•„ìš”í•˜ì§„ ì•Šì„ ê±°ê³ , default project ì™¸ì˜ í”„ë¡œì íŠ¸ë¥¼
ìƒì„±í•´ì„œ ì‚¬ìš©í•  ê²Œ ì•„ë‹ˆë©´ AppProjectë„ í•„ìš”í•˜ì§„ ì•Šì„ ê±°ì—ìš”.&lt;/p>
&lt;p>ë‹¤ë§Œ Applicationì€ í•„ìˆ˜ë¡œ ìƒˆë¡œ ìƒì„±í•´ì•¼ CD ë™ì‘ì„ í™•ì¸í•´ë³¼ ìˆ˜ ìˆì–´ìš”!&lt;/p>
&lt;p>ArgoCDì—ì„œ ì“°ì´ëŠ” ëŒ€ë¶€ë¶„ì˜ ë¦¬ì†ŒìŠ¤ëŠ” ì¿ ë²„ë„¤í‹°ìŠ¤ CRD(e.g. Repository, AppProject, Application)ë¡œ ê´€ë¦¬ë˜ê³  ê·¸ ì™¸ì˜ ê²ƒë“¤ë„ configmapì— ì„¤ì •ì„ ê¸°ì…í•¨ìœ¼ë¡œì¨ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤!&lt;/p>
&lt;p>ë”°ë¼ì„œ ìš°ë¦¬ëŠ” ArgoCD CRD ì¤‘ í•˜ë‚˜ì¸ Applicationì„ ë§Œë“¤ì–´ë³¼ ê±°ì—ìš”. ê³µì‹ ë¬¸ì„œì˜ Getting Startedì—ì„œëŠ” ì§ì ‘ ArgoCD CLIë¡œ Applicationì„ ë§Œë“¤ì§€ë§Œ
ArgoCD CLIë‚˜ ì½˜ì†” í™”ë©´ì„ í†µí•´ Applicationì„ ë§Œë“¤ê²Œ ë˜ë©´ ì¶”í›„ì— Applicationì„ yaml ì½”ë“œë¡œ ë‚˜íƒ€ë‚´ì–´ ì„ ì–¸ì ìœ¼ë¡œ ì´ìš©í•˜ë ¤ëŠ” ê²½ìš° ê¸°ì¡´ì˜ Applicationì„ ì½”ë“œë¡œ ë‚˜íƒ€ë‚´ë ¤ë©´ ì–´ë–»ê²Œ í•´ì•¼í•˜ëŠ”ì§€ í˜¼ë€ìŠ¤ëŸ¬ìš°ì‹¤ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.
ë”°ë¼ì„œ ì €ëŠ” &lt;strong>ì§ì ‘ Applicationì„ yamlë¡œ ì‘ì„±í•´ì„œ ì ìš©&lt;/strong>í•´ì£¼ê² ìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>í•˜ì§€ë§Œ ë§Œì•½ ì•„ì§ ArgoCDê°€ ë‚¯ì„œì‹œë‹¤ë©´ ë‹¨ìˆœíˆ ì½˜ì†”ì—ì„œ ì§ì ‘ Applicationì„ ìƒì„±í•˜ëŠ” ë°©ë²•ë„ ì¶”ì²œë“œë¦½ë‹ˆë‹¤. ì´í›„ ì–´ë–¤ ì„¤ì •ë“¤ì´ ìˆëŠ”ì§€ ê°ì„ ì¡ì•„ë³´ì‹œê³  ê·¸ëŸ° ì„¤ì •ë“¤ì„ ì–´ë–»ê²Œ CRD(yaml)ë¡œ ë‚˜íƒ€ë‚´ëŠ”ì§€ë¥¼
ì°¾ì•„ë‚˜ê°€ë©° IaCë¡œ ê´€ë¦¬í•˜ëŠ” ê²ƒë„ í•˜ë‚˜ì˜ ë°©ë²•ì´ë¼ê³  ìƒê°í•©ë‹ˆë‹¤.&lt;/p>
&lt;p>ì œê°€ ë³¸ ê²Œì‹œê¸€ì„ ìœ„í•´ ë§Œë“¤ì–´ë†“ì€ Repository(&lt;a class="link" href="https://github.com/umi0410/declarative-argocd" target="_blank" rel="noopener"
>https://github.com/umi0410/declarative-argocd&lt;/a>)ë¥¼ &lt;strong>Forkí•˜ì…”ì„œ&lt;/strong> ì‚¬ìš©í•˜ì‹œë©´ ë˜ê² ìŠµë‹ˆë‹¤. ê·¸ë¦¬ê³  &lt;strong>ì•„ë˜ í•­ëª©ë“¤ì„ ì˜ ìˆ˜í–‰í•´ì£¼ì„¸ìš”.&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>âš ï¸ ì•„ë˜ì˜ kubectl apply ìˆ˜í–‰ ì‹œ URLì„ ë³¸ì¸ì˜ Github username í˜¹ì€ Organization nameìœ¼ë¡œ ë³€ê²½í•˜ê¸°&lt;/li>
&lt;li>âš ï¸ fork ëœ¬ Repositoryì˜ &lt;code>getting-started/argocd/application.yml&lt;/code> íŒŒì¼ì—ì„œ &lt;code>spec.source.repoURL&lt;/code> ê°’ì„ ìì‹ ì˜ fork ëœ¬ Repository URLë¡œ ì˜¬ë°”ë¥´ê²Œ ìˆ˜ì •í•˜ê¸°&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>forkë¥¼ ëœ¨ëŠ” ì´ìœ &lt;/strong>ëŠ” ì´í›„ì— &lt;strong>GitOps ë°©ì‹ìœ¼ë¡œ CDí•˜ê¸° ìœ„í•´ image tagë¥¼ ë³€ê²½í•´ì„œ í‘¸ì‹œ&lt;/strong>í•œ ë’¤ ì—…ë°ì´íŠ¸ ë˜ëŠ” ëª¨ìŠµì„ ë³´ê¸° ìœ„í•¨ì´ì—ìš”!&lt;/p>
&lt;p>ì €í¬ëŠ” &lt;strong>ìƒ˜í”Œ í”„ë¡œì íŠ¸ë¡œ Guestbook(ë°©ëª…ë¡) í”„ë¡œì íŠ¸ë¥¼ ë°°í¬í•˜ê³  í™•ì¸&lt;/strong>í•´ë³¼ê±°ì—ìš”.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-console" data-lang="console">&lt;span class="line">&lt;span class="cl">&lt;span class="gp">$&lt;/span> kubectl apply -n argocd -f https://raw.githubusercontent.com/umi0410/declarative-argocd/master/getting-started/argocd/application.yml
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="https://umi0410.github.io/blog/devops/declarative-argocd-helm-app-of-app/guestbook-created.png"
width="790"
height="580"
srcset="https://umi0410.github.io/blog/devops/declarative-argocd-helm-app-of-app/guestbook-created_hubfe9081d55e0da841eb34d3069f41f17_117409_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/devops/declarative-argocd-helm-app-of-app/guestbook-created_hubfe9081d55e0da841eb34d3069f41f17_117409_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="guestbook ì•±ì´ ì˜ ë“±ë¡ëœ ëª¨ìŠµ"
class="gallery-image"
data-flex-grow="136"
data-flex-basis="326px"
>&lt;/p>
&lt;p>ê·¸ëŸ¼ ìœ„ì™€ ê°™ì´ guestbook ì•±ì´ ë“±ë¡ë˜ì–´ syncëœ ëª¨ìŠµì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-console" data-lang="console">&lt;span class="line">&lt;span class="cl">&lt;span class="gp">$&lt;/span> kubectl port-forward service/guestbook-ui -n default 8888:80
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">Forwarding from 127.0.0.1:8888 -&amp;gt; 80
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">Forwarding from [::1]:8888 -&amp;gt; 80
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ë§ˆì°¬ê°€ì§€ë¡œ ë°©ê¸ˆ ë°°í¬í•œ guestbookì´ ì˜ ë™ì‘í•˜ëŠ”ì§€ í™•ì¸í•´ë³´ê¸° ìœ„í•´ guestbook-ui ì„œë¹„ìŠ¤ë¥¼ port forwardí•´ì£¼ê² ìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://umi0410.github.io/blog/devops/declarative-argocd-helm-app-of-app/guestbook:0.1.png"
width="866"
height="276"
srcset="https://umi0410.github.io/blog/devops/declarative-argocd-helm-app-of-app/guestbook:0.1_hue167aac1c39dc47c9109555cba7e0443_28723_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/devops/declarative-argocd-helm-app-of-app/guestbook:0.1_hue167aac1c39dc47c9109555cba7e0443_28723_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="ks-guestbook-demo:0,1"
class="gallery-image"
data-flex-grow="313"
data-flex-basis="753px"
>&lt;/p>
&lt;p>&lt;code>0.1&lt;/code> ë²„ì „ìœ¼ë¡œ ì„¤ì¹˜í–ˆë‹¤ë©´ ìœ„ì™€ ê°™ì´ &lt;strong>ê²€ì€ íƒ€ì´í‹€ì˜ Guestbook&lt;/strong> UIë¥¼ í™•ì¸í•˜ì‹¤ ìˆ˜ ìˆì„ ê²ƒì…ë‹ˆë‹¤!&lt;/p>
&lt;p>ê·¸ëŸ¼ ê³¼ì—° ë‹¤ë¥¸ ë²„ì „ì˜ ì´ë¯¸ì§€ë¡œ ì—…ë°ì´íŠ¸í•˜ë ¤ë©´ ì–´ë–»ê²Œ í•´ë³¼ ìˆ˜ ìˆì„ê¹Œìš”?!&lt;/p>
&lt;p>&lt;img src="https://umi0410.github.io/blog/devops/declarative-argocd-helm-app-of-app/supported-image-tags.png"
width="914"
height="363"
srcset="https://umi0410.github.io/blog/devops/declarative-argocd-helm-app-of-app/supported-image-tags_hu33d7f97eadfa03b4c5afdfa040d65e6b_62565_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/devops/declarative-argocd-helm-app-of-app/supported-image-tags_hu33d7f97eadfa03b4c5afdfa040d65e6b_62565_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="ì§€ì›ë˜ëŠ” ì´ë¯¸ì§€ íƒœê·¸ ëª©ë¡.png"
class="gallery-image"
data-flex-grow="251"
data-flex-basis="604px"
>&lt;/p>
&lt;p>ì§€ì›ë˜ëŠ” ì´ë¯¸ì§€ íƒœê·¸ ëª©ë¡ì€ &lt;a class="link" href="https://console.cloud.google.com/gcr/images/heptio-images/global/ks-guestbook-demo" target="_blank" rel="noopener"
>ì´ê³³&lt;/a>ì—ì„œ í™•ì¸í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>ìš°ë¦¬ëŠ” GitOpsë¥¼ ìœ„í•œ ë„êµ¬ì¸ ArgoCDë¥¼ ì´ìš©í•˜ê³  ìˆê³  guestbook applicationì€ Auto Sync ì„¤ì •ì„ í•´ë†“ì•˜ê¸° ë•Œë¬¸ì—
ë‹¨ìˆœíˆ image tagë¥¼ &lt;code>0.2&lt;/code>ë¡œ ë³€ê²½í•œ ë’¤ í‘¸ì‹œí•´ì£¼ê¸°ë§Œ í•˜ë©´ ë©ë‹ˆë‹¤!&lt;/p>
&lt;p>ê·¸ëŸ¼ fork ëœ¨ì‹  ë ˆí¬ì§€í† ë¦¬ì—ì„œ &lt;code>getting-started/k8s/deployment.yml&lt;/code>ì˜ &lt;code>spec.template.spec.containers[0].image&lt;/code> tag ê°’ì„ &lt;code>0.1&lt;/code> -&amp;gt; &lt;code>0.2&lt;/code> ë¡œ ë³€ê²½í•´ì£¼ì‹œê³  í‘¸ì‹œí•´ì£¼ì„¸ìš”.&lt;/p>
&lt;p>&lt;img src="https://umi0410.github.io/blog/devops/declarative-argocd-helm-app-of-app/guestbook:0.2-pod.png"
width="1036"
height="624"
srcset="https://umi0410.github.io/blog/devops/declarative-argocd-helm-app-of-app/guestbook:0.2-pod_hud3e3fc0dda262da7b041e8cd14e9271e_139239_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/devops/declarative-argocd-helm-app-of-app/guestbook:0.2-pod_hud3e3fc0dda262da7b041e8cd14e9271e_139239_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="ks-guestbook-demo:0.2ë¡œ ë°°í¬ëœ Pod"
class="gallery-image"
data-flex-grow="166"
data-flex-basis="398px"
>&lt;/p>
&lt;p>ìœ„ì™€ ê°™ì´ Podì˜ ì»¨í…Œì´ë„ˆì˜ ì´ë¯¸ì§€ íƒœê·¸ê°€ &lt;code>0.2&lt;/code>ë¡œ ë³€ê²½ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆê³ &lt;/p>
&lt;p>&lt;img src="https://umi0410.github.io/blog/devops/declarative-argocd-helm-app-of-app/guestbook:0.2.png"
width="865"
height="278"
srcset="https://umi0410.github.io/blog/devops/declarative-argocd-helm-app-of-app/guestbook:0.2_huf37d3e4e0787326a08405c425180883f_38731_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/devops/declarative-argocd-helm-app-of-app/guestbook:0.2_huf37d3e4e0787326a08405c425180883f_38731_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="ks-guestbook-demo:0.2"
class="gallery-image"
data-flex-grow="311"
data-flex-basis="746px"
>&lt;/p>
&lt;p>ê¸°ì¡´ì—ëŠ” &lt;strong>ê²€ì •ìƒ‰ íƒ€ì´í‹€ì˜ &amp;ldquo;Guestbook&amp;rdquo;&lt;/strong> ì´ì—ˆì§€ë§Œ ì´ì œëŠ” &lt;strong>ì•Œë¡ë‹¬ë¡í•œ &amp;ldquo;Fancy Guestbook&amp;rdquo;&lt;/strong> ì´ ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆì–´ìš”~!&lt;/p>
&lt;h3 id="ì´ëŸ°-ì‹ì˜-ì‘ì—…-ë°©ì‹ì—ì„œ-ë¶ˆí¸í•œ-ì ë“¤">ì´ëŸ° ì‹ì˜ ì‘ì—… ë°©ì‹ì—ì„œ ë¶ˆí¸í•œ ì ë“¤&lt;/h3>
&lt;p>ì„±ê³µì ìœ¼ë¡œ CD ì‘ì—…ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ì‹¤ì œë¡œ ArgoCDë¥¼ ë„ì…í•˜ê³  ê¾¸ì¤€íˆ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” ë°©ê¸ˆê³¼ ê°™ì€ ë°©ì‹ìœ¼ë¡œ
ì‘ì—…í•˜ê²Œ ë˜ë©´ ëª‡ ê°€ì§€ ë¶ˆí¸ ì‚¬í•­ë“¤ì´ ì¡´ì¬í•  ìˆ˜ ìˆì–´ìš”.&lt;/p>
&lt;ol>
&lt;li>&lt;strong>helmìœ¼ë¡œ ArgoCDë¥¼ ì„¤ì¹˜í•œ ë’¤ ì¶”ê°€ì ìœ¼ë¡œ ìˆ˜ë™ìœ¼ë¡œ Applicationì„ ë“±ë¡&lt;/strong>í•´ì¤˜ì•¼ í•©ë‹ˆë‹¤.
&lt;ul>
&lt;li>ì´ë ‡ê²Œ ë˜ë©´ ë˜ ë‹¤ë¥¸ í´ëŸ¬ìŠ¤í„°ì— ë™ì¼í•œ ì„¤ì •ìœ¼ë¡œ ArgoCDë¥¼ ì„¤ì¹˜í•˜ê±°ë‚˜ ì¬êµ¬ì¶•í•  ë•Œ ë§ì´ ë²ˆê±°ë¡œìš¸ ìˆ˜ ìˆì–´ìš”.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>ì´í›„ì—ë„ &lt;strong>Applicationì„ ìƒˆë¡œ ìƒì„±í•  ë•Œë‚˜ ë³€ê²½í•  ë•Œë§ˆë‹¤ kubectlì„ ì§ì ‘ ìˆ˜í–‰&lt;/strong>í•´ì•¼í•©ë‹ˆë‹¤.
&lt;ul>
&lt;li>ìš°ë¦¬ëŠ” GitOpsì˜ í˜•íƒœë¡œ ArgoCDë¥¼ í†µí•´ &lt;code>Deployment&lt;/code>, &lt;code>Service&lt;/code>, &lt;code>Configmap&lt;/code> ë“±ì„ ê´€ë¦¬í•˜ê³  ìˆì§€ë§Œ
&lt;code>Application&lt;/code>ì€ ì§ì ‘ &lt;code>kubectl&lt;/code>ë¡œ ê´€ë¦¬í•˜ê³  ìˆì–´ìš”.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;h2 id="app-of-app-íŒ¨í„´ì„-í†µí•´-ì¢€-ë”-ì„ ì–¸ì ìœ¼ë¡œ-ê´€ë¦¬í•˜ê¸°">App of App íŒ¨í„´ì„ í†µí•´ ì¢€ ë” ì„ ì–¸ì ìœ¼ë¡œ ê´€ë¦¬í•˜ê¸°&lt;/h2>
&lt;p>ë”°ë¼ì„œ ìœ„ì™€ ê°™ì€ ë¶ˆí¸ ì‚¬í•­ë“¤ì„ í•´ì†Œí•˜ê¸° ìœ„í•´ì„œ ArgoCDì—ëŠ” &lt;code>App of App&lt;/code>ì´ë¼ëŠ” íŒ¨í„´ì´ ì¡´ì¬í•©ë‹ˆë‹¤.
&lt;code>App of App íŒ¨í„´&lt;/code>ì´ë€ &lt;strong>ArgoCDë¡œ ê´€ë¦¬í•  Applicationë“¤ì„ ê´€ë¦¬í•˜ëŠ” ìš°ë‘ë¨¸ë¦¬ Applicationì„ ë‘ëŠ” íŒ¨í„´&lt;/strong>ì„ ë§í•´ìš”.&lt;/p>
&lt;p>&lt;img src="https://umi0410.github.io/blog/devops/declarative-argocd-helm-app-of-app/app-of-app.png"
width="1148"
height="286"
srcset="https://umi0410.github.io/blog/devops/declarative-argocd-helm-app-of-app/app-of-app_hu0da6b93538f9bdd5fb228fadd6643369_67514_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/devops/declarative-argocd-helm-app-of-app/app-of-app_hu0da6b93538f9bdd5fb228fadd6643369_67514_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="ê³µì‹ë¬¸ì„œì—ì„œë„ ê´€ë ¨ ë‚´ìš©ì„ ì°¾ì•„ë³¼ ìˆ˜ ìˆì–´ìš”."
class="gallery-image"
data-flex-grow="401"
data-flex-basis="963px"
>&lt;/p>
&lt;p>&lt;img src="https://umi0410.github.io/blog/devops/declarative-argocd-helm-app-of-app/app-of-app-example.png"
width="1322"
height="903"
srcset="https://umi0410.github.io/blog/devops/declarative-argocd-helm-app-of-app/app-of-app-example_hu4e77d9db36c888cbfc316420e8661632_239899_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/devops/declarative-argocd-helm-app-of-app/app-of-app-example_hu4e77d9db36c888cbfc316420e8661632_239899_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="ì˜ˆë¥¼ ë“¤ì–´ App of App íŒ¨í„´ì„ ì´ìš©í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì´ ë‹¤ë¥¸ ì•±ë“¤ì„ ê´€ë¦¬í•  ìˆ˜ ìˆê²Œ ë¼ìš”."
class="gallery-image"
data-flex-grow="146"
data-flex-basis="351px"
>
ê·¸ëŸ¼ ìœ„ì—ì„œ 2ë²ˆìœ¼ë¡œ ì–¸ê¸‰í•œ ë¬¸ì œëŠ” ì–´ëŠ ì •ë„ í•´ê²°í•  ìˆ˜ ìˆì§€ë§Œ, ê·¸ëŸ¼ ê·¸ ìš°ë‘ë¨¸ë¦¬ Appì€ ì–´ë–»ê²Œ ìƒì„±/ê´€ë¦¬í•  ê²ƒì¸ê°€(1ë²ˆ ë¬¸ì œ)ê°€ ì—¬ì „íˆ ë¬¸ì œì—ìš”.&lt;/p>
&lt;p>ì €ëŠ” ì´ ë¬¸ì œë¥¼ ìš°ë¦¬ê°€ ì§ì ‘ Appì„ ìƒì„±/ê´€ë¦¬í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ArgoCD helm chartì˜ ì¶”ê°€ì ì¸ ì„¤ì •ì„ í†µí•´ ì„ ì–¸ì ìœ¼ë¡œ ê´€ë¦¬í•¨ìœ¼ë¡œì¨ í•´ê²°í•˜ë ¤í•©ë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://umi0410.github.io/blog/devops/declarative-argocd-helm-app-of-app/additional-applications.png"
width="1230"
height="220"
srcset="https://umi0410.github.io/blog/devops/declarative-argocd-helm-app-of-app/additional-applications_hu850b8bb10c85e0c5221cd6515a150d15_59547_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/devops/declarative-argocd-helm-app-of-app/additional-applications_hu850b8bb10c85e0c5221cd6515a150d15_59547_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="ArgoCD Helm Chart README.mdì— ì†Œê°œëœ ë¶€ë¶„"
class="gallery-image"
data-flex-grow="559"
data-flex-basis="1341px"
>&lt;/p>
&lt;p>ì„¤ì •ê°’ ì˜ˆì‹œëŠ” &lt;a class="link" href="https://github.com/argoproj/argo-helm/blob/master/charts/argo-cd/values.yaml" target="_blank" rel="noopener"
>ì´ê³³&lt;/a>ì—ì„œ í™•ì¸í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>ì¦‰, ArgoCD Helm Chartë¥¼ í†µí•´ ê´€ë¦¬í•  Applicationì„ &lt;code>values.yaml&lt;/code>ì— ì‘ì„±í•  ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤.&lt;/p>
&lt;p>ê·¸ëŸ¼ &lt;code>getting-started/values.yaml&lt;/code>ì˜ &lt;code>server.additionalApplications[0].source.repoURL&lt;/code>ì„ ë§ˆì°¬ê°€ì§€ë¡œ ë³¸ì¸ì´ fork ëœ¨ì‹  ë ˆí¬ì§€í† ë¦¬ì˜ URLë¡œ ë³€ê²½í•´ì£¼ì‹œê³  ì•„ë˜ì˜ ëª…ë ¹ì–´ë¡œ helm chartë¥¼ ì—…ê·¸ë ˆì´ë“œí•´ì£¼ì„¸ìš”.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-console" data-lang="console">&lt;span class="line">&lt;span class="cl">&lt;span class="gp">$&lt;/span> helm upgrade -n argocd argocd-demo argo/argo-cd -f getting-started/values.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">...
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ì´í›„ì—ëŠ” ì•„ë˜ì™€ ê°™ì´ &lt;code>app-of-app&lt;/code>ì´ë¼ëŠ” &lt;code>guestbook&lt;/code> Applicaitonì„ ê´€ë¦¬í•˜ëŠ” Applicationì´ ìƒì„±ëœ ê²ƒì„ ë³´ì‹¤ ìˆ˜ ìˆì„ ê±°ì—ìš” :)&lt;/p>
&lt;p>&lt;img src="https://umi0410.github.io/blog/devops/declarative-argocd-helm-app-of-app/app-of-app-2.png"
width="1273"
height="793"
srcset="https://umi0410.github.io/blog/devops/declarative-argocd-helm-app-of-app/app-of-app-2_hu6c80cf78a2d14fbf6c7e90b1ee9bab49_215714_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/devops/declarative-argocd-helm-app-of-app/app-of-app-2_hu6c80cf78a2d14fbf6c7e90b1ee9bab49_215714_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="app-of-app íŒ¨í„´ì´ ì ìš©ëœ ëª¨ìŠµ"
class="gallery-image"
data-flex-grow="160"
data-flex-basis="385px"
>&lt;/p>
&lt;p>app-of-appì€ guestbook applicationì„ ê´€ë¦¬í•˜ê³  ìˆìŠµë‹ˆë‹¤. ë§Œì•½ &lt;strong>ì¶”ê°€ì ìœ¼ë¡œ Applicationì„ ìƒì„±í•˜ê±°ë‚˜ ì‚­ì œí•˜ê³  ì‹¶ë‹¤ë©´ ì§ì ‘ kubectlì„ í†µí•´ ê´€ë¦¬í•  ê²ƒì´ ì•„ë‹ˆë¼
ë³€ê²½í•˜ê³ ì‹¶ì€ ì‚¬í•­ì„ &lt;code>getting-started/argocd&lt;/code>ì— ì‘ì„±í•œ ë’¤ Git pushí•˜ë©´ ArgoCDê°€ ì•Œì•„ì„œ ì ìš©&lt;/strong>í•´ì£¼ê²Œ ë©ë‹ˆë‹¤! ëŒ€ë‹¨í•˜ì£ ?!&lt;/p>
&lt;p>ê·¸ëŸ¼ ìœ„ì˜ ì‘ì—…ì„ í†µí•´ ìš°ë¦¬ê°€ ì•ì„œ ì–¸ê¸‰í–ˆë˜ ë¶ˆí¸ë“¤ì´ í•´ì†Œë˜ì—ˆëŠ”ì§€ í™•ì¸í•´ë³¼ê²Œìš”.
ì œê°€ ë°”ë¼ëŠ” ê±´ &lt;strong>ë°±ì§€ ìƒíƒœì˜ í´ëŸ¬ìŠ¤í„°ì—ì„œë„ ì œê°€ ì„ ì–¸í•´ë†“ì€ ì„¤ì • íŒŒì¼ë“¤ë§Œì„ í†µí•´ &lt;code>helm install&lt;/code> ëª…ë ¹ì–´ í•œ ì¤„ë§Œìœ¼ë¡œ
í˜„ì¬ì™€ ë™ì¼í•œ ArgoCD ìƒíƒœ, guestbook ìƒíƒœë¥¼ ê°–ëŠ” ê²ƒ&lt;/strong>ì´ì—ìš”! ì•„ì£¼ ì„ ì–¸ì ì´ì£ ?!&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-console" data-lang="console">&lt;span class="line">&lt;span class="cl">&lt;span class="gp">$&lt;/span> minikube delete
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">Deleting &amp;#34;minikube&amp;#34; in docker ...
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">ğŸ”¥ Deleting container &amp;#34;minikube&amp;#34; ...
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">...
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span>&lt;span class="gp">$&lt;/span> minikube start
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">ğŸ˜„ minikube v1.25.2 on Darwin 12.2 (arm64)
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">âœ¨ Automatically selected the docker driver
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">...
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span>&lt;span class="gp">#&lt;/span> ArgoCDë‚˜ guestbook ê´€ë ¨ Podë‚˜ ë¦¬ì†ŒìŠ¤ê°€ ì—†ìŒì„ í™•ì¸í•´ë³¼ê²Œìš”
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span>&lt;span class="gp">$&lt;/span> kubectl get pod --all-namespaces
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">NAMESPACE NAME READY STATUS RESTARTS AGE
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">kube-system coredns-64897985d-pd57n 1/1 Running 0 36s
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">...
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span>&lt;span class="gp">$&lt;/span> kubectl create ns argocd
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">namespace/argocd created
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span>&lt;span class="gp">$&lt;/span> helm install -n argocd argocd-demo argo/argo-cd -f getting-started/values.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">NAME: argocd-demo
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">LAST DEPLOYED: Sat Apr 23 07:27:22 2022
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">NAMESPACE: argocd
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">...
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ê·¸ëŸ¼ ì‹œì›í•˜ê²Œ minikubeë¥¼ í†µí•´ êµ¬ì¶•í•œ ì¿ ë²„ë„¤í‹°ìŠ¤ í™˜ê²½ì„ ë‚ ë ¤ë²„ë¦¬ê³  ë‹¤ì‹œ ìƒì„±í•œ ë’¤ ArgoCDë¥¼ helm chartë¡œ ê¹”ì•„ë³¼ê²Œìš”.
ì´ë²ˆì—ëŠ” helm chart ì„¤ì¹˜ ì‹œ &lt;code>getting-started/values.yaml&lt;/code>ì„ ì„¤ì •íŒŒì¼ë¡œ ì´ìš©í•´ì•¼í•©ë‹ˆë‹¤.&lt;/p>
&lt;p>helm installì´ ì™„ë£Œë˜ë©´ ë™ì¼í•œ ë°©ë²•ìœ¼ë¡œ ìƒˆë¡œìš´ Admin íŒ¨ìŠ¤ì›Œë“œë¥¼ ì¡°íšŒí•œ ë’¤ ë‹¤ì‹œ port forwardí•´ì£¼ì‹œê³  ì½˜ì†”ì— ë¡œê·¸ì¸í•´ì£¼ì„¸ìš”.&lt;/p>
&lt;p>&lt;img src="https://umi0410.github.io/blog/devops/declarative-argocd-helm-app-of-app/declarative-result.png"
width="1273"
height="786"
srcset="https://umi0410.github.io/blog/devops/declarative-argocd-helm-app-of-app/declarative-result_hu069aa837df522d39bd59ebc72e1dc62b_218299_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/devops/declarative-argocd-helm-app-of-app/declarative-result_hu069aa837df522d39bd59ebc72e1dc62b_218299_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="ì„ ì–¸ì ìœ¼ë¡œ ê´€ë¦¬ëœ ArgoCD. guestbookì€ Sync ì¤‘ì´ì—ìš” :)"
class="gallery-image"
data-flex-grow="161"
data-flex-basis="388px"
>&lt;/p>
&lt;p>&lt;img src="https://umi0410.github.io/blog/devops/declarative-argocd-helm-app-of-app/guestbook:0.2.png"
width="865"
height="278"
srcset="https://umi0410.github.io/blog/devops/declarative-argocd-helm-app-of-app/guestbook:0.2_huf37d3e4e0787326a08405c425180883f_38731_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/devops/declarative-argocd-helm-app-of-app/guestbook:0.2_huf37d3e4e0787326a08405c425180883f_38731_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="ì„ ì–¸ì ìœ¼ë¡œ ê´€ë¦¬ëœ guestbook"
class="gallery-image"
data-flex-grow="311"
data-flex-basis="746px"
>&lt;/p>
&lt;p>ğŸ‰ ì™€ìš°.. ìƒˆë¡œìš´ í´ëŸ¬ìŠ¤í„°ì—ì„œë„ &lt;strong>ìš°ë¦¬ê°€ ì„ ì–¸ì ìœ¼ë¡œ ì‘ì„±í•œ ì½”ë“œë“¤ë§Œ ìˆë‹¤ë©´ ìœ„ì™€ ê°™ì´ ê¸°ì¡´ê³¼ ë™ì¼í•œ ìƒíƒœë¡œ êµ¬ì¶•ì´ ê°€ëŠ¥&lt;/strong>í•˜ë„¤ìš”! ì¢‹ìŠµë‹ˆë‹¤ ì¢‹ì•„ìš”~&lt;/p>
&lt;h2 id="ë§ˆì¹˜ë©°">ë§ˆì¹˜ë©°&lt;/h2>
&lt;ol>
&lt;li>ArgoCDë¥¼ Helmìœ¼ë¡œ install í•´ë³´ê¸°&lt;/li>
&lt;li>Applicationì„ ìƒì„±í•˜ê³  guestbook í”„ë¡œì íŠ¸ë¥¼ í†µí•´ CD í…ŒìŠ¤íŠ¸í•´ë³´ê¸°&lt;/li>
&lt;li>ê·¸ ê³¼ì •ì—ì„œì˜ ë¶ˆí¸ì´ë‚˜ ë¬¸ì œì‚¬í•­ì„ ë°œê²¬í•´ë‚´ê³  ì„ ì–¸ì ìœ¼ë¡œ í•´ê²°í•´ë‚˜ê°€ê¸°
&lt;ul>
&lt;li>&lt;code>App of App&lt;/code> íŒ¨í„´ ì´ìš©í•˜ê¸°&lt;/li>
&lt;li>ArgoCD Helm Chartê°€ ì§€ì›í•˜ëŠ” &lt;code>additionalApplications&lt;/code> ì„¤ì •ì„ ì´ìš©í•˜ê¸°&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;p>ì´ë²ˆ ê¸€ì—ì„œ ìœ„ì˜ ê³¼ì •ë“¤ì„ í†µí•´ ArgoCDë¥¼ ì–´ë–»ê²Œ ì¢€ ë” ì„ ì–¸ì ìœ¼ë¡œ ê´€ë¦¬í•  ìˆ˜ ìˆì„ì§€ ë˜ ê·¸ëŸ° ì‘ì—…ì„ ìˆ˜í–‰í•  ë•Œ
ìë£Œë“¤ì„ ì–´ë””ì„œ ì°¾ì•„ë³¼ ìˆ˜ ìˆëŠ”ì§€ì— ëŒ€í•´ ì•Œì•„ë´¤ìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>ì¢€ ë” ì œê°€ ì–´ë–»ê²Œ ìë£Œë¥¼ ì°¾ì•„ë‚˜ê°€ëŠ” ì§€ ê·¸ëŸ° ìš”ë ¹ì´ë‚˜ ê³¼ì •ë“¤ì„ ì ì–´ë³´ë ¤í–ˆëŠ”ë° ê¸€ì´ ê¸¸ì–´ì§€ë©´ì„œ ê¸°ëŠ¥ ìì²´ì˜ ë‚´ìš©ì— ì§‘ì¤‘í•˜ê²Œ ëœ ê°ì´ ìˆë„¤ìš” ğŸ¥²..&lt;/p>
&lt;p>ë‹¤ìŒ í¸ì—ì„œëŠ” ArgoCDì—ì„œ RBAC ì„¤ì •ì„ í•´ë³´ë©´ì„œ &amp;lsquo;&lt;em>ì–´ë–»ê²Œ ìƒˆë¡œìš´ ê¸°ëŠ¥ë“¤ì„ ì°¾ê³  ì ìš©í•´ë‚˜ê°€ëŠ”ì§€&lt;/em>&amp;lsquo;ì— ì¢€ ë” í¬ì»¤ìŠ¤ë¥¼ ë§ì¶°ë³´ë ¤í•´ìš”. ë˜í•œ ì´ëŸ° ê³¼ì •ë“¤ì€ &lt;code>ArgoCD&lt;/code> ë¿ë§Œ ì•„ë‹ˆë¼
&lt;code>Kafka&lt;/code>, &lt;code>ELK&lt;/code>, &lt;code>Jenkins&lt;/code> ë“±ì˜ ì˜¤í”ˆì†ŒìŠ¤ë“¤ì„ ì‚¬ìš©í•  ë•Œì—ë„ ë„ì›€ì´ ë  ìˆ˜ ìˆì„ ê²ƒì´ë¼ ìƒê°í•©ë‹ˆë‹¤. &amp;lsquo;&lt;em>ì•„~ ì´ëŸ° ì‹ìœ¼ë¡œ ìë£Œë¥¼ ì°¾ì•„ë³¼ ìˆ˜ ìˆêµ¬ë‚˜&lt;/em>&amp;rsquo; í•˜ê³  ë§ì´ì£  ã…ã…&lt;/p>
&lt;p>ì´ë²ˆ ê¸€ì´ &lt;strong>ArgoCDë¥¼ ì²˜ìŒ ì´ìš©í•´ë³´ì‹œëŠ” ë¶„ë“¤&lt;/strong>, &lt;strong>ì´ìš©í•´ì˜¤ë©´ì„œ ì¡°ê¸ˆ ë¶ˆí¸í•˜ì…¨ë˜ ë¶„ë“¤&lt;/strong>, &lt;strong>ìƒˆë¡œìš´ ì˜¤í”ˆì†ŒìŠ¤ë¥¼ ì–´ë–»ê²Œ í•™ìŠµí•˜ê³  ì ìš©í•´ë‚˜ê°ˆì§€ ì˜ ëª¨ë¥´ê² ëŠ” ë¶„ë“¤&lt;/strong>ê»˜
ë„ì›€ì´ ë  ìˆ˜ ìˆëŠ” ê¸€ì´ì—ˆê¸°ë¥¼ ë°”ëë‹ˆë‹¤! ê°ì‚¬í•©ë‹ˆë‹¤~ ğŸ˜†&lt;/p></description></item></channel></rss>