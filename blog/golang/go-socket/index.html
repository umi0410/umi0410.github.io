<!doctype html><html lang=en class="js csstransforms3d"><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.83.1"><meta name=description content="ìì„¸í•œ ì˜ë¯¸ëŠ” ëª¨ë¥¸ ì±„ ë“¤ì–´ë³´ê¸°ë§Œ í–ˆë˜ ì†Œì¼“ì´ë€ ë…€ì„! ì–´ë–¤ ì¢…ë¥˜ì˜ ì†Œì¼“ì´ ì¡´ì¬í•˜ëŠ”ì§€, ì–´ë–¤ ì°¨ì´ê°€ ìˆëŠ”ì§€
ì„±ëŠ¥ì€ ì–´ë– í•œì§€ ì‹¤ì œ Go í”„ë¡œê·¸ë¨ì„ í†µí•´ í™•ì¸í•´ë³´ê³  ë²¤ì¹˜ë§ˆí¬í•´ë³´ë©° ë¹„êµí•´ë´¤ìŠµë‹ˆë‹¤.
"><meta name=author content="umi0410"><link rel=icon href=https://emojipedia-us.s3.dualstack.us-west-1.amazonaws.com/thumbs/120/google/241/whale_1f40b.png type=image/png><title>Go ì–¸ì–´ë¡œ ì ìš©í•´ë³´ëŠ” Computer Science - Socket (Unix Domain Socket, Network/TCP/UDP Socket) :: Jinsu Playground</title><link href=/css/nucleus.css?1620471811 rel=stylesheet><link href=/css/fontawesome-all.min.css?1620471811 rel=stylesheet><link href=/css/hybrid.css?1620471811 rel=stylesheet><link href=/css/featherlight.min.css?1620471811 rel=stylesheet><link href=/css/perfect-scrollbar.min.css?1620471811 rel=stylesheet><link href=/css/auto-complete.css?1620471811 rel=stylesheet><link href=/css/atom-one-dark-reasonable.css?1620471811 rel=stylesheet><link href=/css/theme.css?1620471811 rel=stylesheet><link href=/css/hugo-theme.css?1620471811 rel=stylesheet><link href=/css/theme-umi0410-blue.css?1620471811 rel=stylesheet><link href=/css/custom-umi0410.css?1620471811 rel=stylesheet><script src=/js/jquery-3.3.1.min.js?1620471811></script><style>:root #header+#content>#left>#rlblock_left{display:none!important}:not(pre)>code+span.copy-to-clipboard{display:none}</style></head><body data-url=/blog/golang/go-socket/><nav id=sidebar><div id=header-wrapper><div id=header><a id=logo href=https://umi0410.github.io><span>Jinsu Playground</span></a></div><div id=profile-wrapper><style>#sidebar-profile-message{text-align:left;word-break:keep-all}#sidebar-profile-message>p{margin-top:0;margin-bottom:0;margin-left:10px;font-size:16px}</style><a href=/><img src=/media/profile.png style=width:170px;margin-top:15px></a><div id=sidebar-profile-message><b>ë°•ì§„ìˆ˜ (umi0410)</b></br><p>Golang, Cloud services, MSA, ì»¨í…Œì´ë„ˆì™€ ìë™í™”, ê¹”ë”í•œ ì•„í‚¤í…ì³ì— ê´€ì‹¬ì´ ë§ìŠµë‹ˆë‹¤.</p></div></div></div><div class=highlightable><ul class=topics><li data-nav-id=/portfolio/ title="About Jinsu Park (umi0410)" class=dd-item><a href=/portfolio/>About me</a></li><li data-nav-id=/experiences/ title=Experiences class=dd-item><a href=/experiences/>Experiences</a><ul><li data-nav-id=/experiences/megazone-cloud/ title="ë©”ê°€ì¡´ í´ë¼ìš°ë“œ ë°ë¸Œì˜µìŠ¤ ì¸í„´ í›„ê¸°" class=dd-item><a href=/experiences/megazone-cloud/><b></b>Megazone Cloud DevOps</a><ul><li data-nav-id=/experiences/megazone-cloud/stargate-infra/ title="Stargateë¼ëŠ” ì¸í”„ë¼ êµ¬ì¶•ê¸°" class=dd-item><a href=/experiences/megazone-cloud/stargate-infra/><b></b>ì¸í”„ë¼ êµ¬ì¶•ê¸°</a></li><li data-nav-id=/experiences/megazone-cloud/ci-cd-pipeline/ title="Github Action, Spinnakerì„ ì´ìš©í•œ CI/CD íŒŒì´í”„ë¼ì¸ êµ¬ì¶•ê¸°" class=dd-item><a href=/experiences/megazone-cloud/ci-cd-pipeline/><b></b>CI/CD íŒŒì´í”„ë¼ì¸</a></li><li data-nav-id=/experiences/megazone-cloud/argo-poc/ title="Argo Projectë“¤ì— ëŒ€í•œ PoC(ê°œë… ì¦ëª…) ì§„í–‰" class=dd-item><a href=/experiences/megazone-cloud/argo-poc/><b></b>Argo Project PoC</a></li><li data-nav-id=/experiences/megazone-cloud/spaceone-helm/ title="SpaceONE Helm Chart ê°œë°œ" class=dd-item><a href=/experiences/megazone-cloud/spaceone-helm/><b></b>Helm Chart ê°œë°œ</a></li><li data-nav-id=/experiences/megazone-cloud/spacectl/ title="SpaceONE CLI Clientì¸ spacectl ì„¤ê³„ ë° ê°œë°œ" class=dd-item><a href=/experiences/megazone-cloud/spacectl/><b></b>CLI Client ì„¤ê³„.ê°œë°œ</a></li></ul></li></ul></li><li data-nav-id=/blog/ title=Blog class="dd-item
parent"><a href=/blog/>Blog</a><ul><li data-nav-id=/blog/golang/ title="Go ì–¸ì–´" class="dd-item
parent"><a href=/blog/golang/>Go ì–¸ì–´</a><ul><li data-nav-id=/blog/golang/go-vs-java-oop/ title="Go vs Java - Goì—ì„œì˜ ê°ì²´ ì§€í–¥" class=dd-item><a href=/blog/golang/go-vs-java-oop/><b></b>Go vs Java - Goì—ì„œì˜ ê°ì²´ ì§€í–¥</a></li><li data-nav-id=/blog/golang/go-concurrency-pattern-use-case-view-count/ title="Go concurrency pattern - channelì„ í†µí•´ ê°„ë‹¨íˆ ì„¸ë§ˆí¬ì–´ì²˜ëŸ¼ ë™ì‹œ ì‘ì—… ì†ë„ ì¡°ì ˆí•˜ê¸° (feat. ì¡°íšŒìˆ˜ ì¦ê°€ ê¸°ëŠ¥)" class=dd-item><a href=/blog/golang/go-concurrency-pattern-use-case-view-count/><b></b>channelì„ í†µí•´ ë™ì‹œì„±ì„ ì œì–´í•˜ë©° ê²Œì‹œë¬¼ ì¡°íšŒìˆ˜ ì¦ê°€ì‹œí‚¤ê¸°</a></li><li data-nav-id=/blog/golang/go-mutex-semaphore/ title="Go ì–¸ì–´ë¡œ ì ìš©í•´ë³´ëŠ” Computer Science - Mutexì™€ Semaphore" class=dd-item><a href=/blog/golang/go-mutex-semaphore/><b></b>Mutexì™€ Semaphore</a></li><li data-nav-id=/blog/golang/go-deadlock/ title="Go ì–¸ì–´ë¡œ ì ìš©í•´ë³´ëŠ” Computer Science - Deadlock" class=dd-item><a href=/blog/golang/go-deadlock/><b></b>Deadlock</a></li><li data-nav-id=/blog/golang/go-cpu-cache/ title="Go ì–¸ì–´ë¡œ ì ìš©í•´ë³´ëŠ” Computer Science - Cache" class=dd-item><a href=/blog/golang/go-cpu-cache/><b></b>Cache</a></li><li data-nav-id=/blog/golang/go-concurrency-vs-parallelism/ title="Go ì–¸ì–´ë¡œ ì ìš©í•´ë³´ëŠ” Computer Science - Concurrency vs Parallelism" class=dd-item><a href=/blog/golang/go-concurrency-vs-parallelism/><b></b>Concurrency vs Parallelism</a></li><li data-nav-id=/blog/golang/go-socket/ title="Go ì–¸ì–´ë¡œ ì ìš©í•´ë³´ëŠ” Computer Science - Socket (Unix Domain Socket, Network/TCP/UDP Socket)" class="dd-item active"><a href=/blog/golang/go-socket/><b></b>Socket</a></li><li data-nav-id=/blog/golang/go-memory-leak-issue/ title="ê°œë°œ ì° - Go Memory Leak(ë©”ëª¨ë¦¬ ëˆ„ìˆ˜) ê´€ë ¨ ì´ìŠˆ" class=dd-item><a href=/blog/golang/go-memory-leak-issue/><b></b>ê°œë°œ ì° - Go Memory Leak(ë©”ëª¨ë¦¬ ëˆ„ìˆ˜) ê´€ë ¨ ì´ìŠˆ</a></li><li data-nav-id=/blog/golang/go-concurrent-pattern-pipeline/ title="Goì˜ Pipeline pattern. ì–¸ì œ ì‚¬ìš©í•´ì•¼í• ê¹Œ? - Golang concurrent patterns" class=dd-item><a href=/blog/golang/go-concurrent-pattern-pipeline/><b></b>Goì˜ Pipeline pattern. ì–¸ì œ ì‚¬ìš©í•´ì•¼í• ê¹Œ?</a></li></ul></li><li data-nav-id=/blog/aws/ title=AWS class=dd-item><a href=/blog/aws/>AWS</a><ul><li data-nav-id=/blog/aws/aws_eks_elb/ title="EKS K8sì—ì„œ ELB(ALB, NLB) ì œëŒ€ë¡œ ì„¤ì •í•˜ë©° ì‚¬ìš©í•˜ê¸°" class=dd-item><a href=/blog/aws/aws_eks_elb/>EKS K8sì—ì„œ ELB(ALB, NLB) ì œëŒ€ë¡œ ì„¤ì •í•˜ë©° ì‚¬ìš©í•˜ê¸°</a></li></ul></li></ul></li></ul><section id=shortcuts><h3>More</h3><ul><li><a class=padding href=https://github.com/umi0410><i class="fab fa-github"></i> Github</a></li></ul></section><section id=footer><p>Built with <a href=https://github.com/matcornic/hugo-theme-learn><i class="fas fa-heart"></i></a> from <a href=https://getgrav.org>Grav</a> and <a href=https://gohugo.io/>Hugo</a></p></section></div></nav><section id=body><div id=overlay></div><div class="padding highlightable"><div><div id=top-bar><div id=top-github-link><a class=github-link title="Edit this page" href=https://github.com/umi0410/umi0410.github.io/edit/master/content/blog/golang/go-socket.md target=blank><i class="fas fa-code-branch"></i>
<span id=top-github-link-text>Edit this page</span></a></div><div id=breadcrumbs itemscope itemtype=http://data-vocabulary.org/Breadcrumb><span id=sidebar-toggle-span><a href=# id=sidebar-toggle data-sidebar-toggle><i class="fas fa-bars"></i></a></span>
<span id=toc-menu><i class="fas fa-list-alt"></i></span>
<span class=links><a href=/>About Jinsu Park (umi0410)</a> > <a href=/blog/>Blog</a> > <a href=/blog/golang/>Go ì–¸ì–´</a> > Go ì–¸ì–´ë¡œ ì ìš©í•´ë³´ëŠ” Computer Science - Socket (Unix Domain Socket, Network/TCP/UDP Socket)</span></div><div class=progress><div class=wrapper><nav id=TableOfContents><ul><li><a href=#ì‹œì‘í•˜ë©°>ì‹œì‘í•˜ë©°</a></li><li><a href=#socket-ì´ë€>Socket ì´ë€</a><ul><li><a href=#ì„œë²„-ì†Œì¼“ê³¼-í´ë¼ì´ì–¸íŠ¸-ì†Œì¼“>ì„œë²„ ì†Œì¼“ê³¼ í´ë¼ì´ì–¸íŠ¸ ì†Œì¼“</a></li><li><a href=#network-socket>Network Socket</a></li><li><a href=#unix-domain-socket>Unix Domain Socket</a></li></ul></li><li><a href=#ë²¤ì¹˜ë§ˆí‚¹-unix-domain-socket-vs-network-socket>ë²¤ì¹˜ë§ˆí‚¹ Unix domain socket vs Network socket</a></li><li><a href=#ë§ˆì¹˜ë©°>ë§ˆì¹˜ë©°</a></li><li><a href=#ì°¸ê³ >ì°¸ê³ </a></li></ul></nav></div></div></div></div><div id=head-tags></div><div id=body-inner><h1>Go ì–¸ì–´ë¡œ ì ìš©í•´ë³´ëŠ” Computer Science - Socket (Unix Domain Socket, Network/TCP/UDP Socket)</h1><h2 id=ì‹œì‘í•˜ë©°>ì‹œì‘í•˜ë©°</h2><p>ê°œë°œ ê³µë¶€ë¥¼ ì²˜ìŒ ì‹œì‘í•œ ì§€ ì–¸ì œ ì•ˆ ëì„ ë¬´ë µ, ì˜ê²½ ë³µë¬´ë¥¼ í•˜ë©° ìë°”ë¡œ TCP Socketì„ ì´ìš©í•´ ì˜† ì»´í“¨í„°ì™€ ì±„íŒ…ì„ í•˜ëŠ” í”„ë¡œê·¸ë¨ì„ ë§Œë“¤ì–´ ë³´ëŠ” ê²ƒì„ ì‹œì‘ìœ¼ë¡œ dockerë‚˜ mysqlê³¼ ê°™ì€ ë‹¤ì–‘í•œ ì˜¤í”ˆì†ŒìŠ¤ë“¤ì„ ì´ìš©í•´ë³´ë©´ì„œë‚˜ ë„¤íŠ¸ì›Œí¬ë¥¼ ê³µë¶€í•˜ë©´ì„œ ë‹¤ì–‘í•˜ê²Œ ë“¤ì–´ì™”ë˜ <code>ì†Œì¼“</code>ì´ì§€ë§Œ ì •í™•íˆ ì–´ë–¤ ì—­í• ì„ í•˜ëŠ”ì§€ ì–´ë–¤ ì¢…ë¥˜ê°€ ìˆëŠ”ì§€ ì–´ë–»ê²Œ ë™ì‘í•˜ëŠ”ì§€ ì•Œì§€ ëª»í–ˆë‹¤.</p><p>ì˜¤ëŠ˜ì€ ê·¸ë ‡ê²Œ ì•Œì­ë‹¬ì­í•œ ì¡´ì¬ì˜€ë˜ ì†Œì¼“ì„ í¬ê²Œ <strong><code>Unix Domain Socket</code>ì™€ <code>Network Socket</code> ë‘ ê°€ì§€ë¡œ ë‚˜ëˆ  ì •ë¦¬í•´ë³´ê³  Unix Domain Socketê³¼ TCPë¥¼ ì‚¬ìš©í•˜ëŠ” Network Socketì„ ë²¤ì¹˜ë§ˆí¬í•´ë³´ê³  ì–´ë–¤ ì°¨ì´ê°€ ìˆëŠ”ì§€ í™•ì¸</strong>í•´ë³´ë„ë¡ í•˜ê² ë‹¤. ì£¼ë¡œ ë‚´ê°€ ì†Œì¼“ì„ ì ‘í–ˆë˜ ìë£Œë‚˜ ì´ìŠˆ ìƒí™©ì—ì„œëŠ” UDPë³´ë‹¤ëŠ” TCPê°€ ë§ì´ ë“±ì¥í–ˆì—ˆê¸° ë•Œë¬¸ì— <strong>UDPì— ëŒ€í•œ ë‚´ìš©ì€ ê±°ì˜ ì œì™¸í•  ê²ƒì´ë¯€ë¡œ ëŒ€ë¶€ë¶„ì´ Network socketê³¼ Unix domain socket ê°ê°ì˜ stream(network socketì—ì„  tcpë¥¼ ì´ìš©í•˜ëŠ” ê²½ìš°ì— í•´ë‹¹) type socket</strong>ì— ê´€ë ¨í•œ ë‚´ìš©ì¼ ê²ƒì´ë‹¤.</p><h2 id=socket-ì´ë€>Socket ì´ë€</h2><p>ì†Œì¼“ì€ ì–´ë– í•œ í†µì‹ ì—ì„œì˜ Endpoint(ëì ) ì—­í• ì„ í•œë‹¤. ëì ì´ ì—†ìœ¼ë©´ ì–´ë””ì™€ ì–´ë””ê°€ í†µì‹ í•˜ëŠ”ì§€ ì–´ë””ì— ë°ì´í„°ë¥¼ ì¨ì•¼í•˜ëŠ”ì§€ ì•Œ ìˆ˜ ì—†ë‹¤.</p><p>ì†Œì¼“ì„ ë§ˆì¹˜ ì „êµ¬ ì†Œì¼“ê³¼ ê°™ì´ ì†Œì¼“ì´ë¼ê³  ë¶€ë¥´ëŠ” ì´ìœ ëŠ” ì†Œì¼“ì— ì˜¬ë°”ë¥´ê²Œ ë°ì´í„°ë¥¼ ì ê¸°ë§Œ í•˜ë©´ í†µì‹ ì„ ìœ„í•œ ì„¸ë¶€ì ì¸ ë™ì‘ì€ ì†Œì¼“ì´ ì•Œì•„ì„œ ìˆ˜í–‰í•˜ê¸° ë•Œë¬¸ì´ë‹¤. ë”°ë¼ì„œ ìš°ë¦¬ëŠ” í†µì‹ ì„ í•˜ê¸° ìœ„í•œ Socketì„ ì˜¬ë°”ë¥´ê²Œ ìƒì„±í•˜ê³ , ê·¸ ê³³ì— ë°ì´í„°ë¥¼ ì˜¬ë°”ë¥´ê²Œ ì ê±°ë‚˜ ê·¸ê³³ì˜ ë°ì´í„°ë¥¼ ì˜¬ë°”ë¥´ê²Œ ì½ê¸°ë§Œ í•˜ë©´ ëœë‹¤. ì‹¤ì œ ë°ì´í„° ì „ì†¡ì€ ì†Œì¼“ì´ ì•Œì•„ì„œ ìˆ˜í–‰í•´ì¤€ë‹¤.</p><p>ì†Œì¼“ì€ ê°™ì€ í˜¸ìŠ¤íŠ¸ ë‚´ì—ì„œ IPCë¥¼ ìœ„í•´ ì‚¬ìš©ë˜ëŠ” <code>Unix domain socket</code>ê³¼ ë„¤íŠ¸ì›Œí¬ í†µì‹ ì„ í•˜ê¸° ìœ„í•´ ì‚¬ìš©ë˜ëŠ” <code>Network socket</code>ìœ¼ë¡œ ë¶„ë¥˜í•  ìˆ˜ ìˆë‹¤. ê°„í˜¹ unix domain socketê³¼ TCPë¥¼ ì´ìš©í•˜ëŠ” Network socket, UDPë¥¼ ì´ìš©í•˜ëŠ” Network socket ì´ë ‡ê²Œ ì„¸ ê°€ì§€ë¡œ ë¶„ë¥˜í•˜ëŠ” ê²½ìš°ë¥¼ ë³¸ ê²ƒ ê°™ì€ë° ì´ëŠ” ì˜ëª»ëœ ë¶„ë¥˜ë¼ê³  ìƒê°í•œë‹¤. Network socket ë¿ë§Œ ì•„ë‹ˆë¼ Unix domain socket ë˜í•œ stream(Network socketì˜ ê²½ìš° TCPë¥¼ ì´ìš©í•˜ëŠ” ê²½ìš°ì— í•´ë‹¹) íƒ€ì…ê³¼ datagram íƒ€ì…(Network socketì˜ ê²½ìš° UDPë¥¼ ì´ìš©í•˜ëŠ” ê²½ìš°ì— í•´ë‹¹)ìœ¼ë¡œ ì‚¬ìš©ë  ìˆ˜ ìˆê¸° ë•Œë¬¸ì´ë‹¤.</p><h3 id=ì„œë²„-ì†Œì¼“ê³¼-í´ë¼ì´ì–¸íŠ¸-ì†Œì¼“>ì„œë²„ ì†Œì¼“ê³¼ í´ë¼ì´ì–¸íŠ¸ ì†Œì¼“</h3><p><img src=server-client-socket.jpeg alt=server-client-socket.jpeg></p><p>ì†Œì¼“ì„ ì—­í• ì˜ ì¸¡ë©´ì—ì„œ ë¶„ë¥˜í•œë‹¤ë©´ ì„œë²„ ì†Œì¼“ê³¼ í´ë¼ì´ì–¸íŠ¸ ì†Œì¼“ìœ¼ë¡œ ë‚˜ëˆŒ ìˆ˜ ìˆë‹¤. ë™ì¼í•œ êµ¬ì¡°ì˜ ì†Œì¼“ì´ì§€ë§Œ ìƒì„±ë˜ëŠ” ì‹œê¸°ë‚˜ ì—­í• ì´ ë‹¤ë¥¼ ë¿ì´ë‹¤.</p><ul><li><strong>ì„œë²„ ì†Œì¼“</strong> - í´ë¼ì´ì–¸íŠ¸ ì†Œì¼“ì˜ ì—°ê²° ìš”ì²­ì„ ë°›ì•„ë“¤ì´ê¸°ë§Œ í•  ë¿. ì‹¤ì œ ì„œë²„ ì¸¡ì—ì„œì˜ ë°ì´í„°ì˜ ì†¡ìˆ˜ì‹ ì€ ì„œë²„ ì†Œì¼“ì´ í´ë¼ì´ì–¸íŠ¸ ì†Œì¼“ì˜ ì—°ê²° ìš”ì²­ì„ ìˆ˜ë½í•˜ë©´ì„œ ìƒˆë¡œ ë§Œë“¤ì–´ì§€ëŠ” ì†Œì¼“ì„ í†µí•´ ìˆ˜í–‰.</li><li><strong>í´ë¼ì´ì–¸íŠ¸ ì†Œì¼“</strong> - í´ë¼ì´ì–¸íŠ¸ê°€ ì„œë²„ì™€ í†µì‹ í•˜ê³ ì í•  ë•Œ ìƒì„±í•˜ëŠ” ì†Œì¼“. í´ë¼ì´ì–¸íŠ¸ëŠ” ì‹¤ì œ ë°ì´í„° ì†¡ìˆ˜ì‹ ë„ ì´ ì†Œì¼“ì„ í†µí•´ ìˆ˜í–‰.</li></ul><p>ì„œë²„ ì†Œì¼“ê³¼ í´ë¼ì´ì–¸íŠ¸ ì†Œì¼“ì´ ë‹¨ìˆœí•œê²Œ 1:Nìœ¼ë¡œë§Œ í†µì‹ í•˜ë©´ ì´ë ‡ê²Œ ì„œë²„ ì†Œì¼“ì´ í´ë¼ì´ì–¸íŠ¸ ì†Œì¼“ì˜ ìš”ì²­ì„ ìˆ˜ë½í•œ ë’¤ ìƒˆë¡œ ì†Œì¼“ì„ ë§Œë“¤ í•„ìš” ì—†ì§€ ì•Šì„ê¹Œì‹¶ì§€ë§Œ ê·¸ë ‡ê²Œ ë˜ë©´ ì„œë²„ê°€ ê° í´ë¼ì´ì–¸íŠ¸ì™€ í†µì‹ í•  ë•Œ í•˜ë‚˜ì˜ ì†Œì¼“ì„ ì´ìš©í•˜ë¯€ë¡œ ì˜¬ë°”ë¥´ê²Œ ì›í•˜ëŠ” í´ë¼ì´ì–¸íŠ¸ì™€ í†µì‹ í•  ìˆ˜ ì—†ì„í…Œë‹ˆ ì¢‹ì€ ë°©ì‹ì´ ì•„ë‹ ê²ƒì´ë‹¤.</p><p>ê·¸ë ‡ë‹¤ë©´ ê³¼ì—° <strong>ì •ë§ ì„œë²„ì—ì„œëŠ” ì—°ê²°ì„ accept í•œ ë’¤ ì†Œì¼“ì„ ìƒˆë¡œ ìƒì„±í• ê¹Œ?</strong> í™•ì¸í•´ë³´ì.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#f92672>package</span> <span style=color:#a6e22e>main</span>

<span style=color:#f92672>import</span> (
    <span style=color:#e6db74>&#34;log&#34;</span>
    <span style=color:#e6db74>&#34;net&#34;</span>
    <span style=color:#e6db74>&#34;os&#34;</span>
    <span style=color:#e6db74>&#34;time&#34;</span>
)

<span style=color:#66d9ef>var</span> (
    <span style=color:#a6e22e>network</span> = <span style=color:#e6db74>&#34;tcp&#34;</span>
    <span style=color:#a6e22e>address</span> = <span style=color:#e6db74>&#34;0.0.0.0:8080&#34;</span>
)
<span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
    <span style=color:#a6e22e>os</span>.<span style=color:#a6e22e>Remove</span>(<span style=color:#a6e22e>address</span>)
    <span style=color:#a6e22e>socket</span>, <span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>net</span>.<span style=color:#a6e22e>Listen</span>(<span style=color:#a6e22e>network</span>, <span style=color:#a6e22e>address</span>)
    <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
        <span style=color:#a6e22e>log</span>.<span style=color:#a6e22e>Fatal</span>(<span style=color:#a6e22e>err</span>)
    }

    <span style=color:#66d9ef>for</span> {
        <span style=color:#a6e22e>connectedSocket</span>, <span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>socket</span>.<span style=color:#a6e22e>Accept</span>()
        <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span>{
            <span style=color:#a6e22e>log</span>.<span style=color:#a6e22e>Fatal</span>(<span style=color:#a6e22e>err</span>)
        }
        <span style=color:#66d9ef>go</span> <span style=color:#66d9ef>func</span>() {
            <span style=color:#66d9ef>for</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>:=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>i</span> <span style=color:#f92672>&lt;=</span> <span style=color:#ae81ff>10</span>; <span style=color:#a6e22e>i</span><span style=color:#f92672>++</span>{
                <span style=color:#a6e22e>connectedSocket</span>.<span style=color:#a6e22e>Write</span>([]byte(<span style=color:#e6db74>&#34;pong\n&#34;</span>))
                <span style=color:#a6e22e>time</span>.<span style=color:#a6e22e>Sleep</span>(<span style=color:#a6e22e>time</span>.<span style=color:#a6e22e>Second</span>)
            }
            <span style=color:#a6e22e>connectedSocket</span>.<span style=color:#a6e22e>Close</span>()
        }()
    }
}
</code></pre></div><p>ê°„ë‹¨í•˜ê²Œ TCP í†µì‹ í”„ë¡œê·¸ë¨ì„ í•˜ë‚˜ ë§Œë“¤ì–´ë´¤ë‹¤. ë‹¨ìˆœíˆ 1ì´ˆ ê°„ê²©ìœ¼ë¡œ pongì„ 5ë²ˆ ì¶œë ¥í•œ ë’¤ ì—°ê²°ì„ ëŠëŠ” í”„ë¡œê·¸ë¨ì´ë‹¤.</p><p><strong>ìš”ì²­ ì „</strong></p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ netstat --tcp
Active Internet connections <span style=color:#f92672>(</span>w/o servers<span style=color:#f92672>)</span>
Proto Recv-Q Send-Q Local Address           Foreign Address         State
tcp        <span style=color:#ae81ff>0</span>      <span style=color:#ae81ff>0</span> ip-172-31-34-13.ap-:ssh 124.50.93.166:60082     ESTABLISHED
tcp        <span style=color:#ae81ff>0</span>      <span style=color:#ae81ff>0</span> ip-172-31-34-13.ap-:ssh 124.50.93.166:60084     ESTABLISHED
tcp        <span style=color:#ae81ff>0</span>      <span style=color:#ae81ff>0</span> ip-172-31-34-13.ap-:ssh 124.50.93.166:60078     ESTABLISHED
</code></pre></div><p><strong>ìš”ì²­ ìˆ˜ë½ í›„ í†µì‹  ì¤‘</strong> - ì†Œì¼“ì´ í•˜ë‚˜ ìƒì„±ë˜ì–´ ESTABLISHED ìƒíƒœ</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ netstat --tcp
Active Internet connections <span style=color:#f92672>(</span>w/o servers<span style=color:#f92672>)</span>
Proto Recv-Q Send-Q Local Address           Foreign Address         State
tcp        <span style=color:#ae81ff>0</span>      <span style=color:#ae81ff>0</span> ip-172-31-34-13.ap-:ssh 124.50.93.166:60082     ESTABLISHED
tcp        <span style=color:#ae81ff>0</span>      <span style=color:#ae81ff>0</span> ip-172-31-34-13.ap-:ssh 124.50.93.166:60084     ESTABLISHED
tcp        <span style=color:#ae81ff>0</span>      <span style=color:#ae81ff>0</span> ip-172-31-34-13.ap-:ssh 124.50.93.166:60078     ESTABLISHED
tcp6       <span style=color:#ae81ff>0</span>      <span style=color:#ae81ff>0</span> ip-172-31-34-1:http-alt 124.50.93.166:42434     ESTABLISHED
</code></pre></div><p><strong>í†µì‹  ì¢…ë£Œ</strong> - ìƒì„±ë˜ì—ˆë˜ ì†Œì¼“ì´ TIME_WAIT ìƒíƒœ. ì ì‹œ í›„ ì‚¬ë¼ì§„ë‹¤.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ netstat --tcp
Active Internet connections <span style=color:#f92672>(</span>w/o servers<span style=color:#f92672>)</span>
Proto Recv-Q Send-Q Local Address           Foreign Address         State
tcp        <span style=color:#ae81ff>0</span>      <span style=color:#ae81ff>0</span> ip-172-31-34-13.ap-:ssh 124.50.93.166:60082     ESTABLISHED
tcp        <span style=color:#ae81ff>0</span>      <span style=color:#ae81ff>0</span> ip-172-31-34-13.ap-:ssh 124.50.93.166:60084     ESTABLISHED
tcp        <span style=color:#ae81ff>0</span>      <span style=color:#ae81ff>0</span> ip-172-31-34-13.ap-:ssh 124.50.93.166:60078     ESTABLISHED
tcp6       <span style=color:#ae81ff>0</span>      <span style=color:#ae81ff>0</span> ip-172-31-34-1:http-alt 124.50.93.166:42434     TIME_WAIT
</code></pre></div><blockquote><p>ê¹”ë”í•œ ë„¤íŠ¸ì›Œí¬ ì •ë³´ë¥¼ ë³´ê¸° ìœ„í•´ ìˆœìˆ˜í•œ AWS EC2 t2.micro ì¸ìŠ¤í„´ìŠ¤ì—ì„œ ì‘ì—…í•´ë³´ì•˜ë‹¤. ë§¨ ìœ„ 3ì¤„ì— ë‚˜ì˜¨ ì†Œì¼“ ì •ë³´ëŠ” ssh ì ‘ì†ìœ¼ë¡œ ì¸í•œ ì†Œì¼“ ì •ë³´ì´ë‹¤.</p><p>ë˜í•œ ì„œë²„ ì†Œì¼“ì€ ì¶œë ¥ë˜ì§€ ì•Šì•˜ëŠ”ë° ì´ëŠ” ìš°ë¦¬ëŠ” í‰ì†Œì— listen ì¤‘ì¸ í¬íŠ¸ë‚˜ ì„œë²„ ì†Œì¼“ì„ ë³´ê¸° ìœ„í•´ netstatì— -l ì˜µì…˜ì„ ì „ë‹¬í•œ ë°˜ë©´ ì´ë²ˆì—” &ndash;tcp ì˜µì…˜ì„ í†µí•´ listen ì¤‘ì¸ ì„œë²„ ì†Œì¼“ì´ ì•„ë‹Œ í´ë¼ì´ì–¸íŠ¸ì˜ ìš”ì²­ì„ ìˆ˜ë½í•œ ë’¤ ìƒì„±ë˜ëŠ” ì†Œì¼“ì„ ë³´ë ¤í•˜ê³ ìˆê¸° ë•Œë¬¸ì´ë‹¤.</p></blockquote><p>4ë²ˆ ì§¸ ì¤„ì˜ ì†Œì¼“ ì •ë³´ê°€ ë°”ë¡œ ìš°ë¦¬ê°€ ìƒê°í•˜ëŠ” ì„œë²„ ì†Œì¼“ì´ clientì˜ ì—°ê²° ìš”ì²­ì„ accept í›„ ìƒì„±í•˜ëŠ” socketì´ë‹¤. í´ë¼ì´ì–¸íŠ¸ì˜ ìš”ì²­ì„ accept í›„ì— ìƒˆë¡œìš´ ì†Œì¼“ì´ ìƒì„±ë˜ë©° í†µì‹  ì¢…ë£Œ í›„ ì ì‹œ ê¸°ë‹¤ë¦° ë’¤ ì‚¬ë¼ì§„ë‹¤.</p><h3 id=network-socket>Network Socket</h3><p><code>Network socket</code>ì€ ë„¤íŠ¸ì›Œí¬ í†µì‹ ì´ í•„ìš”í•œ ì‘ì—…ì„ ìˆ˜í–‰í•  ë•Œ ì´ìš©í•˜ëŠ” ì†Œì¼“ì˜ í•œ ì¢…ë¥˜ë¡œ ë‹¤ì‹œ ë™ì‘ ë°©ì‹ì— ë”°ë¼ TCP í”„ë¡œí† ì½œì„ ì´ìš©í•˜ëŠ” stream socketê³¼ UDP í”„ë¡œí† ì½œì„ ì´ìš©í•˜ëŠ” datagram socketìœ¼ë¡œ êµ¬ë¶„í•  ìˆ˜ ìˆë‹¤. ì‚¬ìš©ìëŠ” socketì— ë°ì´í„°ë¥¼ ì ê¸°ë§Œ í•˜ë©´ ë„¤íŠ¸ì›Œí¬ì™€ ê´€ë ¨ëœ ì‘ì—…ì€ socketì´ ì•Œì•„ì„œ ìˆ˜í–‰í•´ì¤€ë‹¤. ì½ì„ ë•Œì—ë„ ë§ˆì°¬ê°€ì§€ì´ë‹¤.</p><p>TCP socketì´ë¼ê³  ë¶€ë¥´ëŠ” ì‚¬ëŒë„ ìˆê³  stream socket, TCP/IP socketì´ë¼ ë¶€ë¥´ëŠ” ì‚¬ëŒë„ ìˆëŠ” ê²ƒ ê°™ë‹¤. ì •í™•í•œ ëª…ì¹­ì€ ëª¨ë¥´ê² ì§€ë§Œ ì‚¬ìš©í•˜ê±°ë‚˜ ì´í•´í•˜ëŠ” ë°ì—ëŠ” ë¬´ë¦¬ê°€ ì—†ì„ ê²ƒ ê°™ë‹¤.
TCPë¥¼ ì´ìš©í•˜ëŠ” stream typeì˜ Network socketê³¼ stream typeì˜ Unix domain socketì€ ì‚¬ìš© ë°©ë²•ì´ ë§¤ìš° ìœ ì‚¬í•˜ë‹¤. ë‘˜ ë‹¤ stream typeì´ê³ , ì†Œì¼“ì— ë°ì´í„°ë¥¼ ì ì€ ë’¤ì˜ ì‘ì—…ì€ ì†Œì¼“ì´ ì•Œì•„ì„œ ìˆ˜í–‰í•´ì£¼ê¸° ë•Œë¬¸ì´ë‹¤. ê°ê°ì˜ ì†Œì¼“ì„ ì´ìš©í•´ ì„œë²„ë¥¼ ë„ìš°ëŠ” ì‘ì—…ì€ ì¸ìì˜ ê°’ë§Œ ì¡°ê¸ˆ ë‹¬ë¼ì§ˆ ë¿ì´ë‹¤. ì´ëŠ” ê¸€ì˜ í•˜ë¶€ì˜ ì½”ë“œì—ì„œ í™•ì¸í•´ë³¼ ìˆ˜ ìˆë‹¤.</p><h4 id=socketê³¼-port>Socketê³¼ Port</h4><p>Network socketì— ëŒ€í•´ì„œëŠ” socketê³¼ portì˜ êµ¬ë¶„ì´ë‚˜ ì—­í• ì´ ì• ë§¤í•˜ê²Œ ëŠê»´ì§ˆ ìˆ˜ ìˆë‹¤. í†µì‹ ì„ í•  ë•Œ IP ì£¼ì†Œë¥¼ ì´ìš©í•´ ëª©ì ì§€ì¸ Hostë¥¼ ì°¾ì„ ìˆ˜ëŠ” ìˆì§€ë§Œ ê·¸ Hostì˜ ì–´ë–¤ í”„ë¡œì„¸ìŠ¤ê³¼ í†µì‹ í•˜ë ¤ëŠ” ê²ƒì¸ì§€ëŠ” ì•Œ ìˆ˜ ì—†ë‹¤. ì˜¬ë°”ë¥¸ í”„ë¡œì„¸ìŠ¤ë¥¼ ì°¾ì„ ìˆ˜ ìˆë„ë¡ í”„ë¡œì„¸ìŠ¤ì™€ ì–´ë– í•œ ìˆ«ìë¥¼ ë§¤í•‘ì‹œí‚¤ëŠ”ë° ì´ ìˆ«ìë¥¼ Port ë²ˆí˜¸ë¼ê³  í•œë‹¤. ì˜ˆë¥¼ ë“¤ì–´ 123.123.123.123:8080ìœ¼ë¡œ ìš”ì²­ì„ ë³´ë‚´ëŠ” ê²ƒì€ 123.123.123.123ì˜ IP ì£¼ì†Œë¥¼ ê°–ëŠ” Hostì˜ 8080ë²ˆ í¬íŠ¸ì— ë§µí•‘ëœ í”„ë¡œì„¸ìŠ¤ì— ìš”ì²­ì„ ë³´ë‚´ëŠ” ê²ƒì´ë‹¤.</p><p>ì´ ë•Œ Portì™€ í”„ë¡œì„¸ìŠ¤ë¥¼ ê·¸ëƒ¥ ì—°ê²°í•  ìˆ˜ëŠ” ì—†ê³  Socketì´ë¼ëŠ” ë…€ì„ì´ í•„ìš”í•˜ë‹¤. Socketì€ ì‹¤ì§ˆì ìœ¼ë¡œ ì–´ë–¤ í”„ë¡œì„¸ìŠ¤ë¥¼ ì–´ë–¤ í¬íŠ¸ì— ë§µí•‘ì‹œí‚¬ì§€ì— ëŒ€í•œ ì •ë³´ê°€ í•„ìš”í•˜ê³  ë„¤íŠ¸ì›Œí¬ ì‘ì—…ì„ ì•Œì•„ì„œ ìˆ˜í–‰í•œë‹¤.</p><p>ì¡°ê¸ˆ ë¹„ìœ ë¥¼ í•´ë³´ìë©´ íšŒì‚¬ë‚´ì— ì–´ë–¤ ë¶€ì„œê°€ ìˆê³  ì™¸ë¶€ì—ì„œ í•´ë‹¹ ë¶€ì„œì™€ ì‘ì—…í•˜ê¸° ìœ„í•´ì„  ì–´ë– í•œ ê³ ìœ í•œ ë¶€ì„œ ë²ˆí˜¸ê°€ í•„ìš”í•˜ê³ , ì´ë•Œ ì™¸ë¶€ì™€ í•´ë‹¹ ë¶€ì„œê°„ì— ì˜¤ê°€ëŠ” í†µì‹ ì„ ë‹´ë‹¹í•˜ëŠ” ë‹´ë‹¹ìê°€ ìˆì–´ì•¼í•˜ëŠ” ê²½ìš°ì— ë¹„ìœ í•´ ë³¼ ìˆ˜ ìˆë‹¤. &ldquo;ì–´ë–¤ ë¶€ì„œ"ëŠ” í”„ë¡œì„¸ìŠ¤ì´ê³  &ldquo;ê³ ìœ í•œ ë¶€ì„œ ë²ˆí˜¸"ëŠ” í¬íŠ¸ ë²ˆí˜¸, í†µì‹ ì„ ë‹´ë‹¹í•˜ëŠ” ë‹´ë‹¹ìëŠ” ì†Œì¼“ì— í•´ë‹¹í•œë‹¤.</p><h3 id=unix-domain-socket>Unix Domain Socket</h3><p>Unix Domain Socketì€ IPC(Inter-Process Communication, í”„ë¡œì„¸ìŠ¤ ê°„ í†µì‹ )ì˜ ì—¬ëŸ¬ ë°©ë²• ì¤‘ ê°€ì¥ ììœ ë¡œìš°ë©´ì„œ ì‚¬ìš©í•˜ëŠ” ë°ì— ìˆì–´ ì œí•œì´ ë³„ë¡œ ì—†ëŠ” ë°©ë²•ì´ë‹¤. ë„¤íŠ¸ì›Œí¬ ì†Œì¼“ê³¼ ë‹¬ë¦¬ ê°™ì€ í˜¸ìŠ¤íŠ¸ ë‚´ì˜ í”„ë¡œì„¸ìŠ¤ ê°„ í†µì‹ ì„ ë‹´ë‹¹í•˜ê¸° ë•Œë¬¸ì— ì•„ë¬´ëŸ° ë„¤íŠ¸ì›Œí¬ ì‘ì—…ì´ í•„ìš” ì—†ë‹¤. í•˜ì§€ë§Œ TCPë‚˜ UDPë¥¼ ì´ìš©í•˜ëŠ” Network socketì„ ì´ìš©í•  ë•Œì™€ ì¸ì ê°’ë§Œ ì¡°ê¸ˆ ë°”ê¾¸ì–´ ë™ì¼í•œ ë°©ì‹ìœ¼ë¡œ ì‚¬ìš©ì´ ê°€ëŠ¥í•˜ë‹¤.</p><h4 id=-ìƒìƒì˜-ë‚˜ë˜---ìš°ë¦¬ê°€-ì•Œê²Œ-ëª¨ë¥´ê²Œ-ê²ªì—ˆë˜-unix-domain-socketì˜-permissionì˜¤ë¥˜ì—-ëŒ€í•´>ğŸŒˆ ìƒìƒì˜ ë‚˜ë˜ - ìš°ë¦¬ê°€ ì•Œê²Œ ëª¨ë¥´ê²Œ ê²ªì—ˆë˜ Unix domain socketì˜ Permissionì˜¤ë¥˜ì— ëŒ€í•´</h4><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ mysql
stat /var/lib/mysql/mysql.sock
stat: cannot stat <span style=color:#e6db74>&#39;/var/lib/mysql/mysql.sock&#39;</span>: Permission denied
</code></pre></div><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ docker
docker: Got permission denied <span style=color:#66d9ef>while</span> trying to connect to the Docker daemon socket at unix:///var/run/docker.sock
</code></pre></div><p>ì£¼ë¡œ ìš°ë¦¬ê°€ <code>MySQL</code>ì´ë‚˜ <code>Docker</code>ë¥¼ <code>localhost</code>ì—ì„œ ì‚¬ìš©í•  ë•Œ <strong>unix socketì— ëŒ€í•œ permission ì—ëŸ¬</strong>ë¥¼ ê²ªì€ ì ì´ ìˆì„ ê²ƒì´ë‹¤. MySQLì´ë‚˜ Dockerë¥¼ ë¹„ë¡¯í•œ ë§ì€ ì˜¤í”ˆì†ŒìŠ¤ë“¤ì´ ì•„ë§ˆ ì„±ëŠ¥ìƒì˜ ì´ì ì„ ìœ„í•´ localhostì—ì„œ ì„œë¹„ìŠ¤ë¥¼ ì´ìš©í•  ê²½ìš° Network socketì´ ì•„ë‹Œ Unix domain socketì„ ë§ì´ë“¤ ì´ìš©í•˜ëŠ” ê²ƒìœ¼ë¡œ ì•Œê³ ìˆë‹¤. ê·¸ë ‡ê¸° ë•Œë¬¸ì— ì£¼ë¡œ MySQL ì„¤ì¹˜ ì´í›„ Remoteì—ì„œëŠ” ì ‘ì†ì´ ë˜ëŠ”ë° <strong>localhostì—ì„œëŠ” ê¶Œí•œ ë¬¸ì œë¡œ ì ‘ì†ì´ ì•ˆëœë‹¤ê±°ë‚˜ Docker ì„¤ì¹˜ ì´í›„ ì‚¬ìš©ìë¥¼ docker groupì— ë„£ì–´ì£¼ëŠ” ê²½ìš°</strong>ê°€ ë§ì´ ìˆë‹¤.</p><p>ì•„ë§ˆë„ ë„¤íŠ¸ì›Œí¬ í†µì‹ ì„ í†µí•´ ì„œë²„ ì†Œì¼“ì— ì ‘ê·¼í•˜ëŠ” ë„¤íŠ¸ì›Œí¬ ì†Œì¼“ê³¼ ë‹¬ë¦¬ unix domain socketì€ client processê°€ ì§ì ‘ serverì˜ socket fileì— ì ‘ê·¼í•˜ê¸° ë•Œë¬¸ì— ì´ë•Œ ì“°ê¸° ê¶Œí•œ ë•Œë¬¸ì— ê·¸ëŸ° ê¶Œí•œ ì˜¤ë¥˜ê°€ ìƒê¸°ëŠ” ê²ƒì´ ì•„ë‹ê¹Œë¼ëŠ” ìƒìƒì˜ ë‚˜ë˜ë¥¼ í¼ì³ë³¸ë‹¤.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#75715e># ubuntu ì‚¬ìš©ìë¡œ unix domain socket server í”„ë¡œì„¸ìŠ¤ë¥¼ ë„ìš´ ê²½ìš°</span>
<span style=color:#75715e># ubuntu ì‚¬ìš©ìë¡œëŠ” ì˜ ì ‘ì†ì´ ëœë‹¤.</span>
ubuntu@ec2 $ go test -v
<span style=color:#f92672>===</span> RUN   TestSocket
<span style=color:#f92672>===</span> RUN   TestSocket/tcp
2021/02/13 12:59:06 pong
<span style=color:#f92672>===</span> RUN   TestSocket/unix
2021/02/13 12:59:06 pong
--- PASS: TestSocket <span style=color:#f92672>(</span>0.00s<span style=color:#f92672>)</span>
    --- PASS: TestSocket/tcp <span style=color:#f92672>(</span>0.00s<span style=color:#f92672>)</span>
    --- PASS: TestSocket/unix <span style=color:#f92672>(</span>0.00s<span style=color:#f92672>)</span>
PASS
ok  	uds	0.004s
</code></pre></div><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#75715e># serverê°€ ìƒì„±í•œ unix domain socketì— write ê¶Œí•œì´ ì—†ëŠ”</span>
<span style=color:#75715e># guest1ì´ë¼ëŠ” ì‚¬ìš©ìë¡œëŠ” serverì™€ unix domain socketìœ¼ë¡œëŠ” í†µì‹ í•  ìˆ˜ ì—†ê³ ,</span>
<span style=color:#75715e># ì•ì„œ ì˜¤í”ˆì†ŒìŠ¤ë¥¼ ì´ìš©í•˜ë©° ê²ªì—ˆë˜ ì—ëŸ¬ì™€ ë§ˆì°¬ê°€ì§€ë¡œ ê¶Œí•œ ì´ìŠˆê°€ ë°œìƒí•œë‹¤.</span>
<span style=color:#75715e># í•˜ì§€ë§Œ TCP ì†Œì¼“ì„ ì´ìš©í•œ ê²½ìš°ëŠ” ì›í™œíˆ ping-pong testê°€ ì„±ê³µí•œ ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤.</span>
guest1@ec2 $ go test -v
<span style=color:#f92672>===</span> RUN   TestSocket
<span style=color:#f92672>===</span> RUN   TestSocket/tcp
2021/02/13 12:59:01 pong
<span style=color:#f92672>===</span> RUN   TestSocket/unix
    main_test.go:21: 
        	Error Trace:	main_test.go:21
        	Error:      	Received unexpected error:
        	            	dial unix jinsu.sock: connect: permission denied
        	Test:       	TestSocket/unix
--- FAIL: TestSocket <span style=color:#f92672>(</span>0.00s<span style=color:#f92672>)</span>
    --- PASS: TestSocket/tcp <span style=color:#f92672>(</span>0.00s<span style=color:#f92672>)</span>
    --- FAIL: TestSocket/unix <span style=color:#f92672>(</span>0.00s<span style=color:#f92672>)</span>

<span style=color:#75715e># í•˜ì§€ë§Œ ì¬ë¯¸ìˆê²Œë„ guest1ë„ socketì— writeí•  ìˆ˜ ìˆë„ë¡ ê¶Œí•œì„ ìˆ˜ì •í•´ì£¼ë‹ˆ</span>
<span style=color:#75715e># guest1ë„ unix domain socketìœ¼ë¡œ ë¬´ë¦¬ ì—†ì´ í†µì‹ ì´ ê°€ëŠ¥í–ˆë‹¤!</span>
guest1@ec2 $ sudo chmod <span style=color:#ae81ff>777</span> jinsu.sock
guest1@ec2 $ go test -v
<span style=color:#f92672>===</span> RUN   TestSocket
<span style=color:#f92672>===</span> RUN   TestSocket/tcp
2021/02/13 12:59:06 pong
<span style=color:#f92672>===</span> RUN   TestSocket/unix
2021/02/13 12:59:06 pong
--- PASS: TestSocket <span style=color:#f92672>(</span>0.00s<span style=color:#f92672>)</span>
    --- PASS: TestSocket/tcp <span style=color:#f92672>(</span>0.00s<span style=color:#f92672>)</span>
    --- PASS: TestSocket/unix <span style=color:#f92672>(</span>0.00s<span style=color:#f92672>)</span>
PASS
ok  	uds	0.004s
</code></pre></div><p>ë”°ë¼ì„œ ubuntu ì‚¬ìš©ìë¡œ TCP socketê³¼ Unix domain socket ë‘ ê°€ì§€ ë°©ë²•ìœ¼ë¡œ ì„œë²„ ì—­í• ì„ í•  ìˆ˜ ìˆëŠ” í”„ë¡œì„¸ìŠ¤ë¥¼ ë„ìš´ ë’¤ ubuntu ì‚¬ìš©ìì™€ guest1 ì‚¬ìš©ìë¡œ í†µì‹  í…ŒìŠ¤íŠ¸ë¥¼ ì§„í–‰í•´ë³´ì•˜ë‹¤.</p><p>ì„œë²„ê°€ ìƒì„±í•œ unix domain socketì€ <code>srwxrwxr-x</code> ì˜ í˜•ì‹ê³¼ ê¶Œí•œì„ ê°–ê³  ìˆê¸° ë•Œë¬¸ì— guest1ì€ ì´ ì†Œì¼“ì— ëŒ€í•´ readì™€ execute ê¶Œí•œ ë¿ì´ê³ , writeëŠ” ë¶ˆê°€ëŠ¥í•˜ê¸°ì— unix domain socketì„ ì´ìš©í•´ì„œëŠ” í†µì‹ í•  ìˆ˜ ì—†ë‹¤. ë”°ë¼ì„œ ìš°ë¦¬ê°€ í‰ì†Œì— ì˜¤í”ˆì†ŒìŠ¤ë¥¼ localhostì—ì„œ ì´ìš©í•˜ë©´ì„œ ì¢…ì¢… ë§ì´í–ˆë˜ ì†Œì¼“ì— ëŒ€í•œ permission errorì„ ë§Œë‚˜ë³¼ ìˆ˜ ìˆì—ˆë‹¤! ë°˜ë©´ socketì— ëŒ€í•œ ì ‘ê·¼ ê¶Œí•œì´ í•„ìš” ì—†ëŠ” TCPë¡œëŠ” í†µì‹ ì´ ê°€ëŠ¥í–ˆê³ , ë†€ëê²Œë„ guest1ì—ê²Œ ì†Œì¼“ íŒŒì¼ì— ëŒ€í•œ write ê¶Œí•œì„ ë¶€ì—¬í•´ì£¼ì Unix domain socketìœ¼ë¡œë„ í†µì‹ ì´ ê°€ëŠ¥í•´ì§„ ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤.</p><p><strong>ìƒìƒì˜ ë‚˜ë˜ ì •ë¦¬: unix domain socketì„ í†µí•´ ì ‘ì†ì„ ì‹œë„í•  ë•Œì—ëŠ” unix domain socket fileì— ëŒ€í•œ ì ‘ê·¼ì„ í•˜ëŠ” í”„ë¡œì„¸ìŠ¤ê°€ í•´ë‹¹ socket fileì— ëŒ€í•œ ì ì ˆí•œ permissionì„ ê°–ê³  ìˆì–´ì•¼í•œë‹¤.</strong></p><blockquote><p>ë˜í•œ êµ¬ê¸€ë§ ë„ì¤‘ ë³´ì•˜ë˜ ì¬ë¯¸ìˆëŠ” ì˜ˆì‹œëŠ” databaseë¥¼ í†µí•´ authentication/authorizationì„ ìˆ˜í–‰í•˜ëŠ” ì¼ë°˜ì ì¸ ì„œë¹„ìŠ¤ì™€ ë‹¬ë¦¬ Unix domain socketì„ ì´ìš©í•˜ëŠ” ê²½ìš°ì—ëŠ” linux user ì‹œìŠ¤í…œì„ ì´ìš©í•´ì„œë„ ê¶Œí•œ/ì¸ì¦ ê´€ë¦¬ë¥¼ ìˆ˜í–‰í•˜ëŠ” ê²½ìš°ë„ ì¡´ì¬í•  ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì´ì—ˆë‹¤.</p></blockquote><h2 id=ë²¤ì¹˜ë§ˆí‚¹-unix-domain-socket-vs-network-socket>ë²¤ì¹˜ë§ˆí‚¹ Unix domain socket vs Network socket</h2><p>Unix domain socketê³¼ Network socketì˜ ì„±ëŠ¥ì„ ë¹„êµí•˜ëŠ” ë²¤ì¹˜ë§ˆí¬ë¥¼ ì‘ì„±í–ˆë‹¤.
ë‘ ê²½ìš° ëª¨ë‘ Stream typeì˜ socketì„ ì´ìš©í•˜ë„ë¡ í–ˆê³ , Network socketì˜ ê²½ìš°ëŠ” íŠ¹íˆë‚˜ ì´ ê²½ìš° TCP í”„ë¡œí† ì½œì„ ì´ìš©í•˜ê²Œ ëœë‹¤.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#75715e>// main.go
</span><span style=color:#75715e>// í•œ í”„ë¡œì„¸ìŠ¤ ë‚´ì—ì„œ TCP Socketê³¼ Unix Domain Socket ë‘ ê°€ì§€ë¥¼ ì´ìš©í•´
</span><span style=color:#75715e>// í†µì‹ í•  ìˆ˜ ìˆëŠ” í”„ë¡œê·¸ë¨
</span><span style=color:#75715e></span><span style=color:#f92672>package</span> <span style=color:#a6e22e>main</span>

<span style=color:#f92672>import</span> (
    <span style=color:#e6db74>&#34;errors&#34;</span>
    <span style=color:#e6db74>&#34;io&#34;</span>
    <span style=color:#e6db74>&#34;log&#34;</span>
    <span style=color:#e6db74>&#34;net&#34;</span>
    <span style=color:#e6db74>&#34;os&#34;</span>
    <span style=color:#e6db74>&#34;time&#34;</span>
)

<span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
    <span style=color:#66d9ef>go</span> <span style=color:#a6e22e>RunTCPSocketServer</span>()
    <span style=color:#66d9ef>go</span> <span style=color:#a6e22e>RunUnixDomainSocketServer</span>()

    <span style=color:#66d9ef>for</span> {
        <span style=color:#a6e22e>log</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;Dummy waiting...&#34;</span>)
        <span style=color:#a6e22e>time</span>.<span style=color:#a6e22e>Sleep</span>(<span style=color:#a6e22e>time</span>.<span style=color:#a6e22e>Minute</span>)
    }
}

<span style=color:#66d9ef>func</span> <span style=color:#a6e22e>RunTCPSocketServer</span>(){
    <span style=color:#a6e22e>log</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;Run TCPSocketServer...&#34;</span>)
    <span style=color:#a6e22e>run</span>(<span style=color:#e6db74>&#34;tcp&#34;</span>, <span style=color:#e6db74>&#34;0.0.0.0:8080&#34;</span>)
}

<span style=color:#66d9ef>func</span> <span style=color:#a6e22e>RunUnixDomainSocketServer</span>(){
    <span style=color:#a6e22e>log</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;Run UnixDomainSocketServer...&#34;</span>)
    <span style=color:#a6e22e>serverSocketName</span> <span style=color:#f92672>:=</span> <span style=color:#e6db74>&#34;jinsu.sock&#34;</span>
    <span style=color:#a6e22e>os</span>.<span style=color:#a6e22e>Remove</span>(<span style=color:#a6e22e>serverSocketName</span>)
    <span style=color:#a6e22e>run</span>(<span style=color:#e6db74>&#34;unix&#34;</span>, <span style=color:#a6e22e>serverSocketName</span>)
}

<span style=color:#75715e>// TCP socketì„ ì´ìš©í•´ ì„œë²„ë¥¼ ë„ìš°ë“  Unix Domain Socketì„ ì´ìš©í•´ ì„œë²„ë¥¼ ë„ìš°ë“ 
</span><span style=color:#75715e>// ê°„ë‹¨íˆ ì¸ì ê°’ë§Œ ë³€ê²½í•´ì„œ ì´ìš©í•  ìˆ˜ ìˆë‹¤!
</span><span style=color:#75715e></span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>run</span>(<span style=color:#a6e22e>network</span>, <span style=color:#a6e22e>address</span> <span style=color:#66d9ef>string</span>){
    <span style=color:#a6e22e>buf</span> <span style=color:#f92672>:=</span> make([]<span style=color:#66d9ef>byte</span>, <span style=color:#ae81ff>1024</span>)
    <span style=color:#a6e22e>socket</span>, <span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>net</span>.<span style=color:#a6e22e>Listen</span>(<span style=color:#a6e22e>network</span>, <span style=color:#a6e22e>address</span>)
    <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
        <span style=color:#a6e22e>log</span>.<span style=color:#a6e22e>Fatal</span>(<span style=color:#a6e22e>err</span>)
    }

    <span style=color:#66d9ef>for</span> {
        <span style=color:#a6e22e>connectedSocket</span>, <span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>socket</span>.<span style=color:#a6e22e>Accept</span>()
        <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span>{
            <span style=color:#a6e22e>log</span>.<span style=color:#a6e22e>Fatal</span>(<span style=color:#a6e22e>err</span>)
        }
        <span style=color:#66d9ef>go</span> <span style=color:#66d9ef>func</span>() {
            <span style=color:#66d9ef>for</span>{
                <span style=color:#a6e22e>n</span>, <span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>connectedSocket</span>.<span style=color:#a6e22e>Read</span>(<span style=color:#a6e22e>buf</span>)
                <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span>{
                    <span style=color:#66d9ef>if</span> !<span style=color:#a6e22e>errors</span>.<span style=color:#a6e22e>Is</span>(<span style=color:#a6e22e>io</span>.<span style=color:#a6e22e>EOF</span>, <span style=color:#a6e22e>err</span>){
                        <span style=color:#a6e22e>log</span>.<span style=color:#a6e22e>Fatal</span>(<span style=color:#a6e22e>err</span>)
                    } <span style=color:#66d9ef>else</span>{
                        <span style=color:#a6e22e>log</span>.<span style=color:#a6e22e>Print</span>(<span style=color:#e6db74>&#34;[Error]&#34;</span>, <span style=color:#a6e22e>err</span>)
                        <span style=color:#66d9ef>break</span>
                    }
                }
                <span style=color:#a6e22e>log</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>network</span>, <span style=color:#e6db74>&#34;Client sent:&#34;</span>, <span style=color:#a6e22e>n</span>)
                <span style=color:#a6e22e>connectedSocket</span>.<span style=color:#a6e22e>Write</span>([]byte(<span style=color:#e6db74>&#34;pong&#34;</span>))
            }
            <span style=color:#a6e22e>connectedSocket</span>.<span style=color:#a6e22e>Close</span>()
        }()
    }
}
</code></pre></div><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#75715e>// main_test.go
</span><span style=color:#75715e>// tcp socketê³¼ unix domain socketì„ ì´ìš©í•´ ì„±ê³µì ìœ¼ë¡œ ì„œë²„ì™€ í†µì‹ ì´
</span><span style=color:#75715e>// ì´ë£¨ì–´ì§€ëŠ”ì§€ í…ŒìŠ¤íŠ¸í•˜ëŠ” í…ŒìŠ¤íŠ¸ ì½”ë“œ
</span><span style=color:#75715e>// tcpì™€ unix domain socketì˜ ì„±ëŠ¥ì„ ë¹„êµí•˜ëŠ” ë²¤ì¹˜ë§ˆí¬ ì½”ë“œ
</span><span style=color:#75715e></span><span style=color:#f92672>package</span> <span style=color:#a6e22e>main</span>

<span style=color:#f92672>import</span> (
    <span style=color:#e6db74>&#34;errors&#34;</span>
    <span style=color:#e6db74>&#34;github.com/stretchr/testify/assert&#34;</span>
    <span style=color:#e6db74>&#34;io&#34;</span>
    <span style=color:#e6db74>&#34;log&#34;</span>
    <span style=color:#e6db74>&#34;net&#34;</span>
    <span style=color:#e6db74>&#34;testing&#34;</span>
)

<span style=color:#66d9ef>func</span> <span style=color:#a6e22e>TestSocket</span>(<span style=color:#a6e22e>t</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>testing</span>.<span style=color:#a6e22e>T</span>){
    <span style=color:#a6e22e>args</span> <span style=color:#f92672>:=</span> [][]<span style=color:#66d9ef>string</span>{
        []<span style=color:#66d9ef>string</span>{<span style=color:#e6db74>&#34;tcp&#34;</span>, <span style=color:#e6db74>&#34;0.0.0.0:8080&#34;</span>},
        []<span style=color:#66d9ef>string</span>{<span style=color:#e6db74>&#34;unix&#34;</span>, <span style=color:#e6db74>&#34;jinsu.sock&#34;</span>},
    }

    <span style=color:#66d9ef>for</span> <span style=color:#a6e22e>_</span>, <span style=color:#a6e22e>arg</span> <span style=color:#f92672>:=</span> <span style=color:#66d9ef>range</span> <span style=color:#a6e22e>args</span>{
        <span style=color:#a6e22e>t</span>.<span style=color:#a6e22e>Run</span>(<span style=color:#a6e22e>arg</span>[<span style=color:#ae81ff>0</span>], <span style=color:#66d9ef>func</span>(<span style=color:#a6e22e>t</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>testing</span>.<span style=color:#a6e22e>T</span>) {
            <span style=color:#a6e22e>conn</span>, <span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>net</span>.<span style=color:#a6e22e>Dial</span>(<span style=color:#a6e22e>arg</span>[<span style=color:#ae81ff>0</span>], <span style=color:#a6e22e>arg</span>[<span style=color:#ae81ff>1</span>])
            <span style=color:#a6e22e>assert</span>.<span style=color:#a6e22e>NoError</span>(<span style=color:#a6e22e>t</span>, <span style=color:#a6e22e>err</span>)
            <span style=color:#a6e22e>buf</span> <span style=color:#f92672>:=</span> make([]<span style=color:#66d9ef>byte</span>, <span style=color:#ae81ff>1024</span>)
            <span style=color:#a6e22e>_</span>, <span style=color:#a6e22e>err</span> = <span style=color:#a6e22e>conn</span>.<span style=color:#a6e22e>Write</span>([]byte(<span style=color:#e6db74>&#34;ping&#34;</span>))
            <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span>{
                <span style=color:#a6e22e>log</span>.<span style=color:#a6e22e>Fatal</span>(<span style=color:#a6e22e>err</span>)
            }
            <span style=color:#a6e22e>n</span>, <span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>conn</span>.<span style=color:#a6e22e>Read</span>(<span style=color:#a6e22e>buf</span>)
            <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span>{
                <span style=color:#66d9ef>if</span> ! <span style=color:#a6e22e>errors</span>.<span style=color:#a6e22e>Is</span>(<span style=color:#a6e22e>io</span>.<span style=color:#a6e22e>EOF</span>, <span style=color:#a6e22e>err</span>){
                    <span style=color:#a6e22e>log</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>err</span>)
                }
            }
            <span style=color:#a6e22e>log</span>.<span style=color:#a6e22e>Println</span>(string(<span style=color:#a6e22e>buf</span>[:<span style=color:#a6e22e>n</span>]))
        })
    }
}

<span style=color:#66d9ef>func</span> <span style=color:#a6e22e>BenchmarkSocket</span>(<span style=color:#a6e22e>b</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>testing</span>.<span style=color:#a6e22e>B</span>) {
    <span style=color:#a6e22e>args</span> <span style=color:#f92672>:=</span> [][]<span style=color:#66d9ef>string</span>{
        []<span style=color:#66d9ef>string</span>{<span style=color:#e6db74>&#34;tcp&#34;</span>, <span style=color:#e6db74>&#34;0.0.0.0:8080&#34;</span>},
        []<span style=color:#66d9ef>string</span>{<span style=color:#e6db74>&#34;unix&#34;</span>, <span style=color:#e6db74>&#34;jinsu.sock&#34;</span>},
    }
    <span style=color:#66d9ef>for</span> <span style=color:#a6e22e>_</span>, <span style=color:#a6e22e>arg</span> <span style=color:#f92672>:=</span> <span style=color:#66d9ef>range</span> <span style=color:#a6e22e>args</span>{
        <span style=color:#a6e22e>b</span>.<span style=color:#a6e22e>Run</span>(<span style=color:#a6e22e>arg</span>[<span style=color:#ae81ff>0</span>], <span style=color:#66d9ef>func</span>(<span style=color:#a6e22e>b</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>testing</span>.<span style=color:#a6e22e>B</span>) {
            <span style=color:#75715e>//log.Println(&#34;Out&#34;) // b.Nê³¼ ìƒê´€ ì—†ì´ argsì˜ ê¸¸ì´ì— ë”°ë¼ ì¶œë ¥ë¨.
</span><span style=color:#75715e></span>            <span style=color:#a6e22e>conn</span>, <span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>net</span>.<span style=color:#a6e22e>Dial</span>(<span style=color:#a6e22e>arg</span>[<span style=color:#ae81ff>0</span>], <span style=color:#a6e22e>arg</span>[<span style=color:#ae81ff>1</span>])
            <span style=color:#a6e22e>assert</span>.<span style=color:#a6e22e>NoError</span>(<span style=color:#a6e22e>b</span>, <span style=color:#a6e22e>err</span>)
            <span style=color:#a6e22e>buf</span> <span style=color:#f92672>:=</span> make([]<span style=color:#66d9ef>byte</span>, <span style=color:#ae81ff>1024</span>)
            <span style=color:#66d9ef>for</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>:=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>i</span> &lt; <span style=color:#a6e22e>b</span>.<span style=color:#a6e22e>N</span>; <span style=color:#a6e22e>i</span><span style=color:#f92672>++</span>{
                <span style=color:#75715e>//log.Println(&#34;In&#34;) // b.Në§Œí¼ ìˆ˜í–‰ë¨
</span><span style=color:#75715e></span>                <span style=color:#a6e22e>_</span>, <span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>conn</span>.<span style=color:#a6e22e>Write</span>([]byte(<span style=color:#e6db74>&#34;ping&#34;</span>))
                <span style=color:#a6e22e>assert</span>.<span style=color:#a6e22e>NoError</span>(<span style=color:#a6e22e>b</span>, <span style=color:#a6e22e>err</span>)
                <span style=color:#a6e22e>_</span>, <span style=color:#a6e22e>err</span> = <span style=color:#a6e22e>conn</span>.<span style=color:#a6e22e>Read</span>(<span style=color:#a6e22e>buf</span>)
                <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span>{
                    <span style=color:#66d9ef>if</span> !<span style=color:#a6e22e>errors</span>.<span style=color:#a6e22e>Is</span>(<span style=color:#a6e22e>io</span>.<span style=color:#a6e22e>EOF</span>, <span style=color:#a6e22e>err</span>){
                        <span style=color:#a6e22e>b</span>.<span style=color:#a6e22e>Fail</span>()
                    }
                }
            }
        })
    }
}
</code></pre></div><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ go test -bench<span style=color:#f92672>=</span>. -benchtime<span style=color:#f92672>=</span>100000x
goos: linux
goarch: amd64
pkg: uds
BenchmarkSocket/tcp         	  100000	    <span style=color:#ae81ff>104537</span> ns/op
BenchmarkSocket/unix        	  100000	     <span style=color:#ae81ff>83456</span> ns/op
PASS
ok  	uds	18.808s
</code></pre></div><p>10000ë²ˆì˜ ping-pongì„ ìˆ˜í–‰í•˜ëŠ” ë²¤ì¹˜ë§ˆí¬ë¥¼ ìˆ˜í–‰í–ˆë‹¤.
ê·¸ ê²°ê³¼ <strong>TCP socketì„ ì´ìš©í•  ê²½ìš°ëŠ” í•œ ë²ˆì˜ ping-pongì— ì•½ 104537ns, unix domain socketì„ ì´ìš©í•  ê²½ìš°ëŠ” í•œ ë²ˆì˜ ping-pongì— ì•½ 83456ns</strong>ê°€ ì†Œìš”ëœ ê²ƒì„ ë³´ì•„ <strong>ì˜ˆìƒëŒ€ë¡œ ë„¤íŠ¸ì›Œí¬ í†µì‹ ì´ ì¼ì ˆ í•„ìš”í•˜ì§€ ì•Šì€ unix domain socketì´ ì¢€ ë” ì„±ëŠ¥ì´ ì¢‹ì€ ê²ƒìœ¼ë¡œ ë³´ì—¬ì¡Œë‹¤</strong>. ì‚¬ì „ì— ìë£Œ ì¡°ì‚¬ë¥¼ í•  ë•Œì—ëŠ” unix domain socketì´ tcp socketì„ ì´ìš©í•  ë•Œë³´ë‹¤ ì•½ 2ë°°ê°€ëŸ‰ ì„±ëŠ¥ì´ ìš°ì›”í•  ê²ƒì´ë¼ê³  ë“¤ì—ˆëŠ”ë°, ê·¸ë ‡ê²Œ ë§ì€ ì°¨ì´ê°€ ë‚˜ëŠ” ê²ƒ ê°™ì§€ëŠ” ì•Šë‹¤. í•˜ì§€ë§Œ ì–´ëŠ ì •ë„ ë°ì´í„°ì˜ í¬ê¸°ë‚˜ ë²„í¼ì˜ í¬ê¸°ì— ë”°ë¼ ë‹¬ë¼ì§ˆ ìˆ˜ë„ ìˆì„ ê²ƒ ê°™ê³  ë” ê¹Šì€ ì›ë¦¬ë“¤ì´ ì¡´ì¬í•  ê²ƒ ê°™ì•„ ë” ìì„¸íˆëŠ” ì¸¡ì •í•´ë³´ì§€ ëª»í–ˆë‹¤.</p><h2 id=ë§ˆì¹˜ë©°>ë§ˆì¹˜ë©°</h2><p>ì‚¬ì‹¤ ì´ë²ˆì— ë‹¤ë£¬ ì†Œì¼“ì´ë¼ëŠ” ì£¼ì œëŠ” Goë¡œ ì ìš©í•´ë³´ëŠ” Computer Scienceë¼ëŠ” ì´ ì‹œë¦¬ì¦ˆë¥¼ ì •ë¦¬í•´ë‚˜ê°€ë˜ ì´ˆê¸°ì— 2ë²ˆ ì§¸ ê¸€ë¡œ ì‹œë„í–ˆë˜ ì£¼ì œì˜€ëŠ”ë° ë‹¹ì‹œì—” Go benchmarkë„ ì²˜ìŒ ì‚¬ìš©í•´ë´¤ì—ˆê³  ë‚´ìš©ì´ ì–´ë ¤ì› ë˜ í„°ë¼ ë²¤ì¹˜ë§ˆí¬ë„ ì œëŒ€ë¡œ ë˜ì§€ ì•Šê³  ì •ë¦¬ë„ í•˜ê¸° í˜ë“¤ì–´ì„œ ì¤‘ë‹¨í–ˆë˜ ì£¼ì œì´ë‹¤. í•˜ì§€ë§Œ ì´ë²ˆì—” ê°™ì€ ë‚´ìš©ì— ëŒ€í•´ ë‘ ë²ˆì§¸ ì •ë¦¬í•´ì„œì¸ì§€ ì „ë³´ë‹¤ ë‚´ìš©ë„ ì˜ ì´í•´ëê³ , ë²¤ì¹˜ë§ˆí‚¹ ì½”ë“œì™€ ê²°ê³¼ë„ ê¹”ë”í•˜ê²Œ ë‚˜ì™”ë˜ ê²ƒ ê°™ì•„ ë¿Œë“¯í•˜ë‹¤.</p><p>ê·¸ë¦¬ê³  ê·¸ ë™ì•ˆ ë„ì»¤ë‚˜ MySQL ê°™ì€ ì˜¤í”ˆì†ŒìŠ¤ë“¤ì„ ì‚¬ìš©í•˜ë©´ì„œ ê°„í˜¹ ì†Œì¼“ì— ëŒ€í•œ ì˜¤ë¥˜ë¥¼ ì ‘í•  ë•Œë‚˜ ì´ëŸ° ì €ëŸ° ê¸€ì—ì„œ ì†Œì¼“ ê´€ë ¨í•œ ë‚´ìš©ì´ ë“±ì¥í•  ë•Œ ì •í™•íˆ ì–´ë–¤ ì—­í• ì¸ì§€ ì´ìœ ê°€ ë­”ì§€ ìì„¸íˆ ì•Œì§€ ëª»í–ˆëŠ”ë° ì´ë²ˆ ê¸°íšŒë•ì— ì•ìœ¼ë¡œëŠ” ì¢€ ë” ì˜ ì´í•´í•´ë³¼ ìˆ˜ ìˆì„ ê²ƒ ê°™ë‹¤.</p><h2 id=ì°¸ê³ >ì°¸ê³ </h2><ul><li><p>ì†Œì¼“ <a href="http://www.ktword.co.kr/abbr_view.php?nav=&m_temp1=280&id=742">http://www.ktword.co.kr/abbr_view.php?nav=&m_temp1=280&id=742</a></p></li><li><p>ë„¤íŠ¸ì›Œí¬ ì†Œì¼“ <a href=https://ko.wikipedia.org/wiki/%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC_%EC%86%8C%EC%BC%93>https://ko.wikipedia.org/wiki/%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC_%EC%86%8C%EC%BC%93</a></p></li><li><p>ì†Œì¼“ í”„ë¡œê·¸ë˜ë° <a href=https://recipes4dev.tistory.com/153>https://recipes4dev.tistory.com/153</a></p></li><li><p>UDS (Unix Domain Socket) <a href=http://www.dreamy.pe.kr/zbxe/CodeClip/119393>http://www.dreamy.pe.kr/zbxe/CodeClip/119393</a></p></li><li><p>[Linux/UDS/Unix Domain Socket] UDS <a href=https://yaaam.tistory.com/entry/LinuxUDSUnix-Domain-Socket-UDS>https://yaaam.tistory.com/entry/LinuxUDSUnix-Domain-Socket-UDS</a></p></li><li><p>Unix file type <a href=https://en.wikipedia.org/wiki/Unix_file_types>https://en.wikipedia.org/wiki/Unix_file_types</a></p></li><li><p>C# - .NET Core Unix Domain Socket ì‚¬ìš© ì˜ˆì œ <a href=https://www.sysnet.pe.kr/2/0/11963>https://www.sysnet.pe.kr/2/0/11963</a></p></li><li><p>Unix Domain Socket <a href=https://www.joinc.co.kr/w/Site/system_programing/IPC/Unix_Domain_Socket>https://www.joinc.co.kr/w/Site/system_programing/IPC/Unix_Domain_Socket</a></p></li><li><p>Unix Domain Socket - UDP <a href=https://www.joinc.co.kr/w/Site/system_programing/IPC/Unix_Domain_Socket_UDP>https://www.joinc.co.kr/w/Site/system_programing/IPC/Unix_Domain_Socket_UDP</a></p></li><li><p>What is the difference between Unix sockets and TCP/IP sockets? <a href=https://serverfault.com/questions/124517/what-is-the-difference-between-unix-sockets-and-tcp-ip-sockets>https://serverfault.com/questions/124517/what-is-the-difference-between-unix-sockets-and-tcp-ip-sockets</a></p></li></ul><footer class=footline></footer></div><div id=disqus_thread></div><script type=application/javascript>var disqus_config=function(){};(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById('disqus_thread').innerHTML='Disqus comments not available by default when the website is previewed locally.';return}var b=document,a=b.createElement('script');a.async=!0,a.src='//umi0410.disqus.com/embed.js',a.setAttribute('data-timestamp',+new Date),(b.head||b.body).appendChild(a)})()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div><div id=navigation><a class="nav nav-prev" href=/blog/golang/go-concurrency-vs-parallelism/ title="Go ì–¸ì–´ë¡œ ì ìš©í•´ë³´ëŠ” Computer Science - Concurrency vs Parallelism"><i class="fa fa-chevron-left"></i></a>
<a class="nav nav-next" href=/blog/golang/go-memory-leak-issue/ title="ê°œë°œ ì° - Go Memory Leak(ë©”ëª¨ë¦¬ ëˆ„ìˆ˜) ê´€ë ¨ ì´ìŠˆ" style=margin-right:0><i class="fa fa-chevron-right"></i></a></div></section><div style=left:-1000px;overflow:scroll;position:absolute;top:-1000px;border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px><div style=border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px></div></div><script src=/js/clipboard.min.js?1620471811></script><script src=/js/perfect-scrollbar.min.js?1620471811></script><script src=/js/perfect-scrollbar.jquery.min.js?1620471811></script><script src=/js/jquery.sticky.js?1620471811></script><script src=/js/featherlight.min.js?1620471811></script><script src=/js/highlight.pack.js?1620471811></script><script>hljs.initHighlightingOnLoad()</script><script src=/js/modernizr.custom-3.6.0.js?1620471811></script><script src=/js/learn.js?1620471811></script><script src=/js/hugo-learn.js?1620471811></script><script src=/mermaid/mermaid.js?1620471811></script><script>mermaid.initialize({startOnLoad:!0})</script><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(a,e,f,g,b,c,d){a.GoogleAnalyticsObject=b,a[b]=a[b]||function(){(a[b].q=a[b].q||[]).push(arguments)},a[b].l=1*new Date,c=e.createElement(f),d=e.getElementsByTagName(f)[0],c.async=1,c.src=g,d.parentNode.insertBefore(c,d)}(window,document,'script','https://www.google-analytics.com/analytics.js','ga'),ga('create','UA-177403492-1','auto'),ga('send','pageview'))</script></body></html>