<!doctype html><html lang=ko-kr>
<head><meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Golangì˜ Concurrent pattern ì¤‘ í•˜ë‚˜ë¡œì„œ Channelì„ ë°”íƒ•ìœ¼ë¡œ ì»¤ë®¤ë‹ˆì¼€ì´ì…˜í•˜ë©° ì‘ì—…ì„ ì§„í–‰í•˜ëŠ” íŒ¨í„´ì¸
Pipeline patternì— ëŒ€í•´ ê°„ëµí•´ ì†Œê°œí•´ë´¤ê³ , ì–¸ì œ ì‚¬ìš©í•´ì•¼í• ì§€ ê·¸ use caseì— ëŒ€í•´ ì•Œì•„ë³´ì•˜ìŠµë‹ˆë‹¤. 
"><title>Goì˜ Pipeline pattern. ì–¸ì œ ì‚¬ìš©í•´ì•¼í• ê¹Œ? - Golang concurrent patterns</title>
<link rel=canonical href=https://umi0410.github.io/blog/golang/go-concurrent-pattern-pipeline/>
<link rel=stylesheet href=/scss/style.min.css><meta property="og:title" content="Goì˜ Pipeline pattern. ì–¸ì œ ì‚¬ìš©í•´ì•¼í• ê¹Œ? - Golang concurrent patterns">
<meta property="og:description" content="Golangì˜ Concurrent pattern ì¤‘ í•˜ë‚˜ë¡œì„œ Channelì„ ë°”íƒ•ìœ¼ë¡œ ì»¤ë®¤ë‹ˆì¼€ì´ì…˜í•˜ë©° ì‘ì—…ì„ ì§„í–‰í•˜ëŠ” íŒ¨í„´ì¸
Pipeline patternì— ëŒ€í•´ ê°„ëµí•´ ì†Œê°œí•´ë´¤ê³ , ì–¸ì œ ì‚¬ìš©í•´ì•¼í• ì§€ ê·¸ use caseì— ëŒ€í•´ ì•Œì•„ë³´ì•˜ìŠµë‹ˆë‹¤. 
">
<meta property="og:url" content="https://umi0410.github.io/blog/golang/go-concurrent-pattern-pipeline/">
<meta property="og:site_name" content="Jinsu Playground">
<meta property="og:type" content="article"><meta property="article:section" content="Blog"><meta property="article:published_time" content="2021-01-11T12:46:54+09:00"><meta property="article:modified_time" content="2021-01-11T12:46:54+09:00"><meta property="og:image" content="https://umi0410.github.io/blog/golang/go-concurrent-pattern-pipeline/illustration.png">
<meta name=twitter:title content="Goì˜ Pipeline pattern. ì–¸ì œ ì‚¬ìš©í•´ì•¼í• ê¹Œ? - Golang concurrent patterns">
<meta name=twitter:description content="Golangì˜ Concurrent pattern ì¤‘ í•˜ë‚˜ë¡œì„œ Channelì„ ë°”íƒ•ìœ¼ë¡œ ì»¤ë®¤ë‹ˆì¼€ì´ì…˜í•˜ë©° ì‘ì—…ì„ ì§„í–‰í•˜ëŠ” íŒ¨í„´ì¸
Pipeline patternì— ëŒ€í•´ ê°„ëµí•´ ì†Œê°œí•´ë´¤ê³ , ì–¸ì œ ì‚¬ìš©í•´ì•¼í• ì§€ ê·¸ use caseì— ëŒ€í•´ ì•Œì•„ë³´ì•˜ìŠµë‹ˆë‹¤. 
"><meta name=twitter:card content="summary_large_image">
<meta name=twitter:image content="https://umi0410.github.io/blog/golang/go-concurrent-pattern-pipeline/illustration.png">
<link rel="shortcut icon" href=https://emojipedia-us.s3.dualstack.us-west-1.amazonaws.com/thumbs/120/google/241/whale_1f40b.png>
<script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(a,e,f,g,b,c,d){a.GoogleAnalyticsObject=b,a[b]=a[b]||function(){(a[b].q=a[b].q||[]).push(arguments)},a[b].l=1*new Date,c=e.createElement(f),d=e.getElementsByTagName(f)[0],c.async=1,c.src=g,d.parentNode.insertBefore(c,d)}(window,document,'script','https://www.google-analytics.com/analytics.js','ga'),ga('create','UA-177403492-1','auto'),ga('send','pageview'))</script>
<link rel=preconnect href=https://fonts.googleapis.com>
<link rel=preconnect href=https://fonts.gstatic.com crossorigin>
<link href="https://fonts.googleapis.com/css2?family=East+Sea+Dokdo&family=Noto+Sans+KR:wght@400&display=swap" rel=stylesheet>
<style>:root{--body-background:#fafeff;--base-font-family:'Noto Sans KR', sans-serif}.site-name{--site-name-font-family:'East Sea Dokdo', cursive;font-family:var(--site-name-font-family);font-size:3.2rem!important}.left-sidebar{--sidebar-avatar-size:200px}figure.site-avatar{margin-left:auto!important;margin-right:auto!important}</style>
</head>
<body class="article-page has-toc">
<script>(function(){const a='StackColorScheme';localStorage.getItem(a)||localStorage.setItem(a,"auto")})()</script><script>(function(){const b='StackColorScheme',a=localStorage.getItem(b),c=window.matchMedia('(prefers-color-scheme: dark)').matches===!0;a=='dark'||a==='auto'&&c?document.documentElement.dataset.scheme='dark':document.documentElement.dataset.scheme='light'})()</script>
<div class="container main-container flex
extended">
<div id=article-toolbar>
<a href=https://umi0410.github.io class=back-home><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-chevron-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="15 6 9 12 15 18"/></svg>
<span>Back</span>
</a>
</div>
<main class="main full-width">
<article class="has-image main-article">
<header class=article-header>
<div class=article-image>
<a href=/blog/golang/go-concurrent-pattern-pipeline/>
<img src=/blog/golang/go-concurrent-pattern-pipeline/illustration_hu58467cd983dc70e6751a1d8a840dc2b9_64082_800x0_resize_box_3.png srcset="/blog/golang/go-concurrent-pattern-pipeline/illustration_hu58467cd983dc70e6751a1d8a840dc2b9_64082_800x0_resize_box_3.png 800w, /blog/golang/go-concurrent-pattern-pipeline/illustration_hu58467cd983dc70e6751a1d8a840dc2b9_64082_1600x0_resize_box_3.png 1600w" width=800 height=272 loading=lazy alt="Featured image of post Goì˜ Pipeline pattern. ì–¸ì œ ì‚¬ìš©í•´ì•¼í• ê¹Œ? - Golang concurrent patterns">
</a>
</div>
<div class=article-details>
<header class=article-category>
<a href=/categories/golang/>
Golang (Go ì–¸ì–´)
</a>
</header>
<h2 class=article-title>
<a href=/blog/golang/go-concurrent-pattern-pipeline/>Goì˜ Pipeline pattern. ì–¸ì œ ì‚¬ìš©í•´ì•¼í• ê¹Œ? - Golang concurrent patterns</a>
</h2>
<h3 class=article-subtitle>
Golangì˜ Concurrent pattern ì¤‘ í•˜ë‚˜ë¡œì„œ Channelì„ ë°”íƒ•ìœ¼ë¡œ ì»¤ë®¤ë‹ˆì¼€ì´ì…˜í•˜ë©° ì‘ì—…ì„ ì§„í–‰í•˜ëŠ” íŒ¨í„´ì¸
Pipeline patternì— ëŒ€í•´ ê°„ëµí•´ ì†Œê°œí•´ë´¤ê³ , ì–¸ì œ ì‚¬ìš©í•´ì•¼í• ì§€ ê·¸ use caseì— ëŒ€í•´ ì•Œì•„ë³´ì•˜ìŠµë‹ˆë‹¤.
</h3>
<footer class=article-time><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--published>Jan 11, 2021</time>
</footer></div>
</header>
<section class=article-content>
<h2 id=-ì‹œì‘í•˜ë©°>âœ‹ ì‹œì‘í•˜ë©°</h2>
<p><code>Go</code>ë¥¼ ê³µë¶€í•˜ê¸° ì‹œì‘í•œ ì§€ë„ ë²Œì¨ ëª‡ ë‹¬ì´ ì§€ë‚œ ê²ƒ ê°™ë‹¤. ë°ë¸Œì˜µìŠ¤ ì¸í„´ì„ ë§ˆì¹˜ë©´ì„œ íŠ¹íˆë‚˜ ê´€ì‹¬ìˆì—ˆë˜ Goë¥¼ ê³µë¶€í•˜ê¸° ì‹œì‘í–ˆì—ˆê³ , ì§€ë‚œ ëª‡ ë‹¬ê°„ AWS KRUGë‚´ì˜ ì†Œëª¨ì„ì¸ AUSGì˜ ìŠ¤í„°ë”” í™œë™ìœ¼ë¡œ Goë¥¼ ì£¼ì œë¡œ ê³µë¶€í•´ì™”ë‹¤. Golangì˜ ê½ƒì´ë¼ê³  í•  ìˆ˜ ìˆëŠ” ìš”ì†Œë“¤ì´ ëª‡ ê°œ ìˆì—ˆëŠ”ë° ë‚˜ëŠ” ê·¸ ì¤‘ <code>goroutine</code>ê³¼ <code>channel</code>ì—ì„œ ë§¤ë ¥ì„ ëŠê¼ˆê³  ê·¸ë¥¼ ë°”íƒ•ìœ¼ë¡œí•œ <code>concurrency pattern</code>ë“¤ì— ëŒ€í•´ ì´ë˜ ì €ë˜ ë§ì´ ì•Œì•„ë´ì™”ë‹¤.</p>
<p>í•˜ì§€ë§Œ concurrency patternì´ ë­ê³ , ì–´ë–»ê²Œ ì‚¬ìš©í•˜ëŠ”ì§€ì— ëŒ€í•´ì„œëŠ” ì—¬ëŸ¬ ê¸€ì„ ì°¾ì•„ë³¼ ìˆ˜ ìˆì—ˆì§€ë§Œ ì´ê²Œ ì™œ ì¢‹ê³  ì–¸ì œ ì“°ë©´ ì¢‹ì„ì§€ì— ëŒ€í•œ ë‚´ìš©ì€ ì°¾ì•„ë³´ê¸° í˜ë“¤ì—ˆë‹¤. í•­ìƒ ì–´ë–¤ ê¸°ìˆ ì„ ì ‘í•  ë•Œ &ldquo;<em>ì™œ ì¢‹ì€ë°?</em>&ldquo;ì™€ &ldquo;<em>ì–¸ì œ ì“°ë©´ ì¢‹ì€ë°?</em>&ldquo;ë¥¼ ë§ì´ ë”°ì§€ëŠ” í¸ì´ë¼ì„œ ëŠ˜ ê¶ê¸ˆì¦ì— ë‚¨ì•„ìˆì—ˆë‹¤.</p>
<p>ê·¸ëŸ¬ë˜ ì¤‘ ì–¼ë§ˆ ì „ ë‚˜ì˜ ê¶ê¸ˆì¦ì„ í•´ì†Œì‹œì¼œì£¼ëŠ” ê°„ë‹¨í•œ ëŒ“ê¸€ì„ ë³´ê²Œ ë˜ì—ˆê³ , ê·¸ë¥¼ ë°”íƒ•ìœ¼ë¡œ ëª‡ ê°€ì§€ ì„œì¹˜ë¥¼ í•´ë³¸ ê²°ê³¼ concurrency pattern ì¤‘ í•˜ë‚˜ì¸ <code>pipeline pattern</code>ì„ ì–¸ì œ ì“°ë©´ ì¢‹ì„ì§€ ì•Œì•„ë³´ì•˜ë‹¤.</p>
<h2 id=-pipeline-patternì´ë€>â“ Pipeline patternì´ë€?</h2>
<p><figure style=flex-grow:294;flex-basis:706px>
<a href=/blog/golang/go-concurrent-pattern-pipeline/illustration.png data-size=866x294><img src=/blog/golang/go-concurrent-pattern-pipeline/illustration.png srcset="/blog/golang/go-concurrent-pattern-pipeline/illustration_hu58467cd983dc70e6751a1d8a840dc2b9_64082_480x0_resize_box_3.png 480w, /blog/golang/go-concurrent-pattern-pipeline/illustration_hu58467cd983dc70e6751a1d8a840dc2b9_64082_1024x0_resize_box_3.png 1024w" width=866 height=294 loading=lazy alt=illustration.png>
</a>
<figcaption>illustration.png</figcaption>
</figure></p>
<p>Pipeline patternì€ golangì˜ Concurrency pattern ì¤‘ í•˜ë‚˜ì´ë‹¤. ì‰½ê²Œ ë§í•˜ìë©´ í•¨ìˆ˜ì˜ ì¸ìì— ê°’ì„ ì „ë‹¬í•´ ì‘ì—…í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ <code>channel</code> ì„ í†µí•´ ì‹¤ì‹œê°„ìœ¼ë¡œ <strong>í•¨ìˆ˜(í˜¹ì€ goroutine)ë“¤ë¼ë¦¬ ì»¤ë®¤ë‹ˆì¼€ì´ì…˜ì„ í•˜ë©° ì‘ì—…ì„ ì§„í–‰</strong>í•˜ëŠ” ê²ƒì´ë‹¤. ì‹¤ì‹œê°„ìœ¼ë¡œ í•¨ìˆ˜ë“¤ë¼ë¦¬ ì»¤ë®¤ë‹ˆì¼€ì´ì…˜í•˜ë©° dataë¥¼ ì „ì†¡í•˜ê¸° ë•Œë¬¸ì— data streaming ê°™ì€ ëŠë‚Œì´ë¼ê³  ë³¼ ìˆ˜ ìˆê² ë‹¤.</p>
<p>ì¼ë°˜ì ìœ¼ë¡œëŠ” í•œ í•¨ìˆ˜ì—ì„œ ì‘ì—…ì´ ëª¨ë‘ ëë‚œ ë’¤ ê·¸ ê²°ê³¼ê°’ì„ ë¦¬í„´í•˜ê³ , ë˜ ë‹¤ì‹œ ê·¸ ê²°ê³¼ ê°’ì„ ì¸í’‹ìœ¼ë¡œ ì–´ë–¤ í•¨ìˆ˜ê°€ ì‘ì—…ì„ í•˜ê³  í•´ë‹¹ ì‘ì—…ì´ ëª¨ë‘ ëë‚œ ë’¤ ë˜ ë‹¤ë¥¸ ê²°ê³¼ê°’ì„ ë¦¬í„´í•˜ëŠ” í˜•íƒœë¡œ ì§„í–‰ì´ ëœë‹¤. í•˜ì§€ë§Œ Pipeline patternì—ì„œëŠ” í•œ ì‘ì—…ì´ ëª¨ë‘ ì™„ë£Œë˜ì§€ ì•Šì•˜ë‹¤í•˜ë”ë¼ë„ í•´ë‹¹ ì‘ì—…ì˜ ë¶€ë¶„ ë¶€ë¶„ì˜ ë°ì´í„°ë¥¼ ë‹´ëŠ” channelì„ ë¦¬í„´í•˜ê³ , ë‹¤ë¥¸ ì‘ì—…ì€ í•´ë‹¹ channelì„ ì¸í’‹ìœ¼ë¡œ í•˜ì—¬ ë¶€ë¶„ ë¶€ë¶„ì˜ ë°ì´í„°ë¥¼ channelì—ì„œ êº¼ë‚´ ë°”ë¡œ ë°”ë¡œ ì‘ì—…í•œë‹¤.</p>
<p><figure style=flex-grow:337;flex-basis:810px>
<a href=/blog/golang/go-concurrent-pattern-pipeline/python-generator.png data-size=1081x320><img src=/blog/golang/go-concurrent-pattern-pipeline/python-generator.png srcset="/blog/golang/go-concurrent-pattern-pipeline/python-generator_hu23ac500000a895e8df8d33d9e9dcd7af_62761_480x0_resize_box_3.png 480w, /blog/golang/go-concurrent-pattern-pipeline/python-generator_hu23ac500000a895e8df8d33d9e9dcd7af_62761_1024x0_resize_box_3.png 1024w" width=1081 height=320 loading=lazy alt=python-generator.png>
</a>
<figcaption>python-generator.png</figcaption>
</figure></p>
<p><em>generatorì„ ì´ìš©í•œ lazy evaluation. 0, 1, 2ë¥¼ ëª¨ë‘ Insertí•œ ë’¤ square and print í•˜ëŠ” ê²ƒì´ ì•„ë‹Œ í•˜ë‚˜ì”© ì‹¤ì‹œê°„ìœ¼ë¡œ ì§„í–‰</em></p>
<p>ì´ëŠ” ë§ˆì¹˜ <strong>Pythonì˜ <code>Generator</code>ì„ í†µí•œ <code>Lazy evaluation</code>ì„ ì´ìš©í•  ë•Œì™€ ìœ ì‚¬</strong>í•˜ê²Œ ë³¼ ìˆ˜ëŠ” ìˆê² ë‹¤. í•˜ì§€ë§Œ ë§ì€ ì°¨ì´ì ì´ ì¡´ì¬í•˜ê¸´ í• í…ë° ìš°ì„  generatorëŠ” thread-safeí•˜ì§€ ì•Šì€(<a class=link href=https://stackoverflow.com/questions/1131430/are-generators-threadsafe target=_blank rel=noopener>stackoverflow ì°¸ê³ </a>) ë°˜ë©´ channelì€ ì—¬ëŸ¬ goroutineì—ì„œ í•œ channelì— ì ‘ê·¼í•´ë„ thread-safeí•˜ë‹¤. &lsquo;thread-safeí•œê°€&rsquo;ê°€ ì¤‘ìš”í•œ ì´ìœ ëŠ” í›„ì— ì ê¹ ì†Œê°œí•  <code>fan-in fan-out pattern</code>ì´ ë°”ë¡œ pipeline patternì´ ì—¬ëŸ¬ goroutineì—ì„œ ì´ë£¨ì–´ì§€ëŠ” ê²½ìš°ì´ê¸° ë•Œë¬¸ì´ë‹¤.</p>
<p>(<em>ì‚¬ì‹¤ ë‚´ê°€ Pipeline patternì„ ì–´ë””ì— ì‚¬ìš©í•  ì§€ ëª°ëë˜ ì´ìœ ëŠ” Lazy evaluationê³¼ ê°™ì€ ê°œë…ì´ ì—†ì—ˆê¸° ë•Œë¬¸ì´ ì•„ë‹ê¹Œì‹¶ê¸°ë„ í•˜ë‹¤.</em>)</p>
<h3 id=pipeline-patternì˜-í”í•œ-ì˜ˆì‹œë¡œ-square-í•˜ëŠ”-ì˜ˆì œë¥¼-ì„¤ëª…í•˜ëŠ”-ê¸€ë“¤>Pipeline patternì˜ í”í•œ ì˜ˆì‹œë¡œ square í•˜ëŠ” ì˜ˆì œë¥¼ ì„¤ëª…í•˜ëŠ” ê¸€ë“¤</h3>
<p>ì¢…ì¢… Pipeline patternì˜ ì˜ˆì‹œë¥¼ ì•Œì•„ë³´ë©´ì„œ square ì‘ì—…ì„ í•˜ëŠ” ì˜ˆì œë“¤ì„ ëª‡ ê°œ ë´¤ë˜ ê²ƒ ê°™ì€ë°, ê·¸ ì¤‘ ì°¸ê³ í•  ìˆ˜ ìˆëŠ” ì˜ˆì‹œë“¤ì„ ì œì‹œí•´ë³¸ë‹¤. square ì‘ì—…ì´ pipeline patternì— íš¨ìœ¨ì ì´ë¼ê¸°ë³´ë‹¤ëŠ” ê·¸ëƒ¥ ì„ì˜ì˜ ì˜ˆì‹œë¼ê³  ìƒê°í•œë‹¤.</p>
<p>ì´ ê¸€ì€ Pipeline patternì„ ì–¸ì œ ì‚¬ìš©í•˜ë©´ ì¢‹ì„ì§€ì— ì´ˆì ì„ ë§ì¶”ì—ˆê¸°ì— Pipeline patternì´ ë­”ì§€, ê·¸ ì‚¬ìš©ë²•ì€ ì–´ë–»ê²Œ ë˜ëŠ”ì§€ ë“±ì˜ ë‚´ìš©ì„ ëª¨ë¥´ëŠ” ìƒíƒœë¼ë©´ ì•„ë˜ ê¸€ë“¤ì„ ì¶”ì²œí•œë‹¤. (íŠ¹íˆ Aidan Baeë‹˜ì˜ ë¸”ë¡œê·¸ì—ëŠ” pipeline pattern ì™¸ì—ë„ ë‹¤ì–‘í•œ Go ê´€ë ¨ ë‚´ìš©ì„ ì˜ ì í˜€ìˆë‹¤.)</p>
<ul>
<li>Aidan Baeë‹˜ì˜ ì•„ì£¼ ê°„ë‹¨í•œ Pipeline pattern ì˜ˆì‹œ - <a class=link href=https://aidanbae.github.io/code/golang-design/pipeline/ target=_blank rel=noopener>https://aidanbae.github.io/code/golang-design/pipeline/</a></li>
<li>GoBlogì˜ ê°„ë‹¨í•œ ë‚´ìš©ë¶€í„° ê½¤ë‚˜ ì–´ë ¤ìš´ ë‚´ìš©ê¹Œì§€ ë“¤ì–´ê°€ëŠ” ê²ƒ ê°™ì€ë°, ë‚´ìš©ë„ ê¸¸ê³  ì§§ì€ ì½”ë“œì— ì–µì§€ë¡œ ë§ì€ ë‚´ìš©ì„ ë¼ì›Œë„£ì€ ëŠë‚Œ.. <a class=link href=https://blog.golang.org/pipelines target=_blank rel=noopener>https://blog.golang.org/pipelines</a></li>
</ul>
<h2 id=-ì–¸ì œ-ì“°ëŠ”-ê²Œ-ì¢‹ì„ê¹Œ>ğŸ¤” ì–¸ì œ ì“°ëŠ” ê²Œ ì¢‹ì„ê¹Œ?</h2>
<p>ì•ì„  lazy evaluation ê´€ë ¨ëœ ë‚´ìš©ê³¼ <a class=link href=https://www.reddit.com/r/golang/comments/7rjdw6/go_go_go_stream_processing_for_go/ target=_blank rel=noopener>ì´ ê¸€ì˜ ëŒ“ê¸€</a>(goë¡œ ì‘ì—…ì„ streamí•˜ë¼ëŠ” ê¸€ì— &ldquo;<em>ë„ˆ ì •ë§ ì €ë ‡ê²Œ streamí•˜ëŠ” ê²Œ ì¢‹ë‹¤ê³  ìƒê°í•´? ì´ ê²½ìš° ì•„ë‹ˆë©´ ê·¸ë‹¥ ì˜ ëª¨ë¥´ê² ëŠ”ë°?</em>&ldquo;ë¼ëŠ” ëŒ“ê¸€)ì´ ë‚˜ì˜ ì´í•´ë¥¼ ë„ì™€ì£¼ì—ˆë‹¤. <a class=link href=https://labs.bawi.io/7-reasons-to-use-pipeline-architecture-93346f604b87 target=_blank rel=noopener>Pipeline architectureë¥¼ ì‚¬ìš©í•´ì•¼í•˜ëŠ” 7ê°€ì§€ ì´ìœ ë¼ëŠ” ê¸€</a>ì„ ì½ì–´ë³´ê¸°ë„ í–ˆì§€ë§Œ ì—¬ê¸°ì˜ ë‚´ìš©ì€ ì‹¤ì§ˆì ìœ¼ë¡œ ì™œ ê·¸ ì¥ì ì„ ê°–ëŠ”ì§€ì— ëŒ€í•œ ì„¤ëª…ì´ë‚˜ ë…¼ë¦¬ê°€ ë¶€ì¡±í–ˆë‹¤. (<em><del>ë‹¤ì†Œ Goì™€ Pipeline patternì— ëŒ€í•œ ë¬´ì¡°ê±´ì  ì‚¬ë‘ìœ¼ë¡œ ëŠê»´ì§..ã…ã…&mldr;</del></em>)</p>
<p>ë‚´ ìƒê°ì—ëŠ” ì•„ë˜ ë‘ ê°€ì§€ ê²½ìš°ì— Pipeline patternì„ ì´ìš©í•˜ëŠ” ê²ƒì´ ì¢‹ì„ ê²ƒ ê°™ë‹¤.</p>
<ul>
<li><strong>Input ì‘ì—…ì„ ëª¨ë‘ ìˆ˜í–‰í•˜ëŠ” ë°ì— ì˜¤ëœ ì‹œê°„ì´ ê±¸ë¦¬ëŠ” ê²½ìš°</strong></li>
<li><strong>ì‘ì—…í•˜ëŠ” ë°ì´í„°ì˜ ì–‘ì´ ë„ˆë¬´ ì»¤ì„œ Memoryë¥¼ ë§ì´ ì ìœ í•˜ë¯€ë¡œ ìª¼ê°œì„œ ë°”ë¡œ ë°”ë¡œ ì²˜ë¦¬í•˜ê³  ì‹¶ì€ ê²½ìš°</strong></li>
</ul>
<p>&lsquo;<em>ë””ë²„ê¹…í•˜ê¸° ì‰½ë‹¤</em>&lsquo;ê±°ë‚˜ &lsquo;<em>ì½”ë“œë¥¼ ì•Œì•„ë³´ê¸° ì‰½ë‹¤</em>&rsquo; ë“±ë“±ì˜ ê¸€ì„ ë³´ê¸´í–ˆë˜ ê²ƒ ê°™ì€ë° ê°œì¸ì ìœ¼ë¡œëŠ” ê·¸ëƒ¥ pipelineê³¼ channelì„ ì•ˆ ì“°ê³  ê·¸ëƒ¥ ë°˜ë³µë¬¸ì„ ëŒë¦¬ë©´ì„œ ë°ì´í„°ë¥¼ í†µì§¸ë¡œ ì‘ì—…í•˜ëŠ” ê²Œ ë””ë²„ê¹…ì´ë‚˜ ê°€ë…ì„±ë©´ìœ¼ë¡œ í›¨ì”¬ ìœ ë¦¬í•˜ë‹¤ê³  ìƒê°í•œë‹¤. ì¦‰ Concurrent patternì˜ ì¥ì ì€ íŠ¹ì • use caseì—ì„œì˜ ì„±ëŠ¥ì ì¸ ì¸¡ë©´ì´ë¼ê³  ìƒê°í•œë‹¤.</p>
<p>ê·¸ë¦¬ê³  ì´ê±´ ì—¬ë‹´ì¸ë° <strong>goì˜ channelì„ í†µí•œ data ì „ë‹¬ì´ ì¼ë°˜ì ìœ¼ë¡œ ë¹ ë¥¸ ê±´ ì ˆëŒ€ ì•„ë‹ˆë‹¤.</strong> channelì€ ìš°ì„  <code>thread safe</code>í•˜ê¸°ë•Œë¬¸ì— ì¼ë°˜ì ì¸ ì‘ì—…ì—ì„œëŠ” <strong>thread-unsafeí•œ ë°©ì‹ë³´ë‹¤ ëŠë¦° ê²ƒì´ ë‹¹ì—°</strong>í•˜ë‹¤. ë˜í•œ channelì€ ë‹¨ìˆœí•œ lock ê¸°ëŠ¥ ì™¸ì—ë„ ë‹¤ë¥¸ goroutine(í˜¹ì€ thread í˜¹ì€ function) ê°„ì˜ ë°ì´í„° ì „ì†¡, channelì— ëŒ€í•œ ë°˜ë³µ, ì—´ì—ˆëŠ”ì§€ ë‹«ì•˜ëŠ”ì§€ì— ëŒ€í•œ ì²´í¬ ë“±ë“± ë‹¤ì–‘í•œ ê¸°ëŠ¥ë„ ê°–ê³ ìˆê¸°ë•Œë¬¸ì— <strong>mutexì— ë¹„í•´ì„œë„ í›¨ì”¬ ëŠë¦° ë“¯í•˜ë‹¤</strong>. ê·¸ë ‡ê¸° ë•Œë¬¸ì— ìœ„ì—ì„œ ë‚˜ì—´í–ˆë“¯ Input ì‘ì—…ì´ ì˜¤ë˜ ê±¸ë¦¬ê±°ë‚˜ Memory ì ìœ ëŸ‰ì„ ì¤„ì´ê¸° ìœ„í•œ ê²½ìš°ì—ëŠ” channelì„ ì´ìš©í•œ Pipeline patternìœ¼ë¡œ ì‹¤ì‹œê°„ìœ¼ë¡œ ì‘ì—…í•˜ë©´ ìœ ë¦¬í•  ê²ƒì´ë¼ê³  ìƒê°í•œ ê²ƒì´ë‹¤.</p>
<p>ê·¸ë¦¬ê³  ì¶”ê°€ì ìœ¼ë¡œ ì•ì—ì„œ <code>Fan-in Fan-out</code> patternì—ì„œëŠ” ì—¬ëŸ¬ Goroutineì— ëŒ€í•œ Pipeline patternì´ ì ìš©ëœë‹¤ê³ í–ˆëŠ”ë°, Fan-in Fan-outì´ë€ ì—¬ëŸ¬ goroutineì´ í•˜ë‚˜ì˜ channelì— ê°’ì„ ë„£ê±°ë‚˜ ë¹¼ëŠ” êµ¬ì¡°ë¥¼ ë§í•œë‹¤. ì´ êµ¬ì¡°ì˜ ì¥ì ì€ ì¼ë°˜ì ì¸ Pipeline Patternì—ì„œ ê° ë‹¨ê³„ê°€ í•˜ë‚˜ì˜ goroutineë§Œì„ ì´ìš©í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ì—¬ëŸ¬ goroutineì„ ì´ìš©í•  ìˆ˜ ìˆë‹¤ëŠ” ì ì´ë‹¤. CPU boundí•œ ì‘ì—…ì´ ì•„ë‹Œ IO Blockì´ ì£¼ìš” latencyë¥¼ ì°¨ì§€í•˜ëŠ” ê²½ìš°ëŠ” Goroutineì„ ëŠ˜ë ¤ì£¼ë©´ concurrentí•˜ê²Œ ì‘ì—…í•  ìˆ˜ ìˆê¸°ë•Œë¬¸ì— ì„±ëŠ¥ì´ ì¢‹ì•„ì§€ë”ë¼. Fan-in Fan-out patternì— ëŒ€í•´ì„œëŠ” ê¸°íšŒê°€ ëœë‹¤ë©´ ë” ìì„¸íˆ ë‹¤ë¤„ë³´ê² ë‹¤.</p>
<p><strong>ì°¸ê³ </strong></p>
<ul>
<li>Mutexë³´ë‹¤ channelì´ ëŠë¦¬ë‹¤ëŠ” ë²¤ì¹˜ë§ˆí¬ ê¸€ - <a class=link href=http://www.dogfootlife.com/archives/452 target=_blank rel=noopener>http://www.dogfootlife.com/archives/452</a></li>
<li>Mutexë¥¼ ì“¸ ìˆ˜ ìˆëŠ” ìƒí™©ì´ë©´ Mutexë¥¼ ì“°ëŠ” ê²ƒì´ ì¢‹ì„ ìˆ˜ë„ ìˆë‹¤ - <a class=link href=https://github.com/golang/go/wiki/MutexOrChannel target=_blank rel=noopener>https://github.com/golang/go/wiki/MutexOrChannel</a></li>
</ul>
<h2 id=ì˜ˆì‹œ-í”„ë¡œê·¸ë¨>ì˜ˆì‹œ í”„ë¡œê·¸ë¨</h2>
<h3 id=í”„ë¡œê·¸ë¨-ì„¤ëª…>í”„ë¡œê·¸ë¨ ì„¤ëª…</h3>
<p>Input ì‘ì—…ì„ ìˆ˜í–‰í•˜ëŠ” ë°ì— ì˜¤ëœ ì‹œê°„ì´ ê±¸ë¦¬ëŠ” ê²½ìš°ë¥¼ ì˜ˆì‹œë¡œ ë“¤ê¸° ìœ„í•´ MySQLì—ì„œ Gopherì— ëŒ€í•œ ë°ì´í„°ë¥¼ ì¡°íšŒí•œ ë’¤ Gopherë“¤ì˜ ì—°ë ¹ì„ +10 ì¦ê°€ì‹œí‚¤ëŠ” ì˜ˆì‹œë¥¼ ë§Œë“¤ì–´ë´¤ë‹¤.</p>
<p>Input ì‘ì—…ì„ ëª¨ë‘ ìˆ˜í–‰í•˜ëŠ” ë°ì— ì˜¤ë˜ ê±¸ë¦¬ê³ , ì‘ì—… ë‚´ìš©ì„ ì¡°ê¸ˆì”© ìª¼ê°¤ ìˆ˜ ìˆë‹¤ëŠ” ì „ì œì¡°ê±´ì„ ìœ„í•´ DB Queryë¥¼ í•  ë•Œ ì „ì²´ë¥¼ í•œ ë²ˆì— Select í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ 1ê°œì”© Selectí•˜ëŠ” ë‹¤ì†Œ ë¹„íš¨ìœ¨ì ì´ê³  ë¹„í˜„ì‹¤ì ì¸ ìƒí™©ì„ ì´ìš©í•˜ê¸´í•˜ì§€ë§Œ ê°„ë‹¨í•˜ê²Œ Pipeline patternì˜ íš¨ìœ¨ì„ ê·¹ëŒ€í™”ì‹œì¼œë³´ê³ ìí–ˆë˜ ì´ìœ ì´ë¯€ë¡œ ì–‘í•´ë¥¼ ë¶€íƒë“œë¦°ë‹¤.</p>
<p>ì˜ˆë¥¼ ë“¤ì–´ Pipeline patternì„ í†µí•´ <strong>1000ê°œì˜ Rowë¥¼ Queryí•˜ê³  ë‚œ ë’¤ 1000ê°œë¥¼ Updateí•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ 1000ê°œì˜ Rowë¥¼ Queryí•˜ë©´ì„œ 1ê°œ 1ê°œì˜ Rowë¥¼ ì–»ì–´ì˜¬ ë•Œ ë§ˆë‹¤ ë°”ë¡œë°”ë¡œ Update ì‘ì—…ì— Rowë¥¼ ë„˜ê²¨ì¤˜ ì‹¤ì‹œê°„ìœ¼ë¡œ ì‘ì—…</strong>í•  ìˆ˜ ìˆê²Œí•´ì£¼ëŠ” ê²ƒì´ë‹¤.</p>
<ul>
<li>Pipeline pattern: í•œ item ì”© ì‹¤ì‹œê°„ìœ¼ë¡œ ì „ë‹¬í•˜ë©° ì§„í–‰</li>
<li>Sequential pattern: ë”±íˆ Patternì´ë¼ê¸°ì—” ì¢€ ê·¸ë ‡ì§€ë§Œ ê·¸ëƒ¥ ì¼ë°˜ì ìœ¼ë¡œ Sequentialí•˜ê²Œ ì§„í–‰í•˜ëŠ” ê²½ìš°ë¥¼ ì˜ë¯¸. ì´ ì˜ˆì‹œì—ì„  ì „ì²´ Query ì™„ë£Œ í›„ ì „ì²´ Updateí•˜ëŠ” ë°©ì‹.</li>
</ul>
<p>Dockerë¥¼ ì´ìš©í•´ ê°„ë‹¨í•˜ê²Œ MySQL ì„œë²„ë¥¼ ë„ì› ê³ , Gormì„ ì´ìš©í•´ DB Queryì™€ updateë¥¼ ìˆ˜í–‰í–ˆë‹¤.</p>
<p><strong>ì˜ˆì‹œ í”„ë¡œê·¸ë¨ ì½”ë“œ</strong></p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=kn>package</span> <span class=nx>main</span>

<span class=kn>import</span> <span class=p>(</span>
	<span class=s>&#34;fmt&#34;</span>
	<span class=s>&#34;github.com/brianvoe/gofakeit/v6&#34;</span>
	<span class=s>&#34;gorm.io/driver/mysql&#34;</span>
	<span class=c1>//&#34;gorm.io/driver/sqlite&#34;
</span><span class=c1></span>	<span class=s>&#34;gorm.io/gorm&#34;</span>
	<span class=s>&#34;gorm.io/gorm/logger&#34;</span>
	<span class=s>&#34;math/rand&#34;</span>
	<span class=s>&#34;time&#34;</span>
<span class=p>)</span>

<span class=kd>var</span> <span class=p>(</span>
	<span class=nx>NumTotalData</span>      <span class=kt>int</span> <span class=p>=</span> <span class=mi>100</span> <span class=c1>// ì´ˆê¸°í™”í•  ë°ì´í„°
</span><span class=c1></span>	<span class=nx>NumManipulateData</span> <span class=kt>int</span> <span class=p>=</span> <span class=mi>100</span> <span class=c1>// fetch í›„ mapì„ ì ìš©í•  ë°ì´í„° ìˆ˜
</span><span class=c1></span><span class=p>)</span>

<span class=kd>type</span> <span class=nx>Gopher</span> <span class=kd>struct</span> <span class=p>{</span>
	<span class=nx>gorm</span><span class=p>.</span><span class=nx>Model</span>
	<span class=nx>Name</span> <span class=kt>string</span>
	<span class=nx>Age</span>  <span class=kt>int</span>
<span class=p>}</span>

<span class=kd>func</span> <span class=nf>initializeDB</span><span class=p>(</span><span class=nx>db</span> <span class=o>*</span><span class=nx>gorm</span><span class=p>.</span><span class=nx>DB</span><span class=p>)</span> <span class=p>{</span>
	<span class=c1>// Migrate the schema
</span><span class=c1></span>	<span class=nx>db</span><span class=p>.</span><span class=nf>AutoMigrate</span><span class=p>(</span><span class=o>&amp;</span><span class=nx>Gopher</span><span class=p>{})</span>

	<span class=c1>// Create initial data
</span><span class=c1></span>	<span class=k>for</span> <span class=nx>i</span> <span class=o>:=</span> <span class=mi>0</span><span class=p>;</span> <span class=nx>i</span> <span class=p>&lt;</span> <span class=nx>NumTotalData</span><span class=p>;</span> <span class=nx>i</span><span class=o>++</span> <span class=p>{</span>
		<span class=nx>gopher</span> <span class=o>:=</span> <span class=o>&amp;</span><span class=nx>Gopher</span><span class=p>{</span><span class=nx>Name</span><span class=p>:</span> <span class=nx>gofakeit</span><span class=p>.</span><span class=nf>Name</span><span class=p>(),</span> <span class=nx>Age</span><span class=p>:</span> <span class=nx>rand</span><span class=p>.</span><span class=nf>Intn</span><span class=p>(</span><span class=mi>60</span><span class=p>)</span> <span class=o>+</span> <span class=mi>1</span><span class=p>}</span>
		<span class=nx>gopher</span><span class=p>.</span><span class=nx>ID</span> <span class=p>=</span> <span class=nb>uint</span><span class=p>(</span><span class=nx>i</span> <span class=o>+</span> <span class=mi>1</span><span class=p>)</span>
		<span class=nx>db</span><span class=p>.</span><span class=nf>Save</span><span class=p>(</span><span class=nx>gopher</span><span class=p>)</span>
	<span class=p>}</span>
	<span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;Initialized DB&#34;</span><span class=p>)</span>
<span class=p>}</span>

<span class=kd>type</span> <span class=nx>SequentialPattern</span> <span class=kd>struct</span> <span class=p>{</span>
	<span class=nx>DB</span> <span class=o>*</span><span class=nx>gorm</span><span class=p>.</span><span class=nx>DB</span>
<span class=p>}</span>
<span class=kd>type</span> <span class=nx>PipelinePattern</span> <span class=kd>struct</span> <span class=p>{</span>
	<span class=nx>DB</span> <span class=o>*</span><span class=nx>gorm</span><span class=p>.</span><span class=nx>DB</span>
<span class=p>}</span>

<span class=kd>func</span> <span class=p>(</span><span class=nx>sp</span> <span class=o>*</span><span class=nx>SequentialPattern</span><span class=p>)</span> <span class=nf>Execute</span><span class=p>()</span> <span class=p>{</span>
	<span class=nx>start</span> <span class=o>:=</span> <span class=nx>time</span><span class=p>.</span><span class=nf>Now</span><span class=p>()</span>
	<span class=nx>sp</span><span class=p>.</span><span class=nf>Map</span><span class=p>(</span><span class=nx>sp</span><span class=p>.</span><span class=nf>FetchData</span><span class=p>())</span>
	<span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;sequential&#34;</span><span class=p>,</span> <span class=nx>sp</span><span class=p>)</span>
	<span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;Elapsed:&#34;</span><span class=p>,</span> <span class=nx>time</span><span class=p>.</span><span class=nf>Now</span><span class=p>().</span><span class=nf>Sub</span><span class=p>(</span><span class=nx>start</span><span class=p>))</span>
	<span class=nx>fmt</span><span class=p>.</span><span class=nf>Print</span><span class=p>(</span><span class=nx>time</span><span class=p>.</span><span class=nf>Now</span><span class=p>().</span><span class=nf>Sub</span><span class=p>(</span><span class=nx>start</span><span class=p>))</span>
	<span class=nx>gophers</span> <span class=o>:=</span> <span class=nb>make</span><span class=p>([]</span><span class=nx>Gopher</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span>
	<span class=nx>sp</span><span class=p>.</span><span class=nx>DB</span><span class=p>.</span><span class=nf>Limit</span><span class=p>(</span><span class=nx>NumTotalData</span><span class=p>).</span><span class=nf>Find</span><span class=p>(</span><span class=o>&amp;</span><span class=nx>gophers</span><span class=p>)</span>
	<span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;Average age(Num: %d): %d\n&#34;</span><span class=p>,</span> <span class=nb>len</span><span class=p>(</span><span class=nx>gophers</span><span class=p>),</span> <span class=kd>func</span><span class=p>()</span> <span class=kt>int</span><span class=p>{</span>
	  <span class=nx>totalAge</span> <span class=o>:=</span> <span class=mi>0</span>
	  <span class=k>for</span> <span class=nx>_</span><span class=p>,</span> <span class=nx>gopher</span> <span class=o>:=</span> <span class=k>range</span> <span class=nx>gophers</span><span class=p>{</span>
	      <span class=nx>totalAge</span> <span class=o>+=</span> <span class=nx>gopher</span><span class=p>.</span><span class=nx>Age</span>
	  <span class=p>}</span>
	  <span class=k>return</span> <span class=nx>totalAge</span><span class=o>/</span><span class=nb>len</span><span class=p>(</span><span class=nx>gophers</span><span class=p>)</span>
	<span class=p>}())</span>
<span class=p>}</span>

<span class=kd>func</span> <span class=p>(</span><span class=nx>sp</span> <span class=o>*</span><span class=nx>SequentialPattern</span><span class=p>)</span> <span class=nf>FetchData</span><span class=p>()</span> <span class=p>[]</span><span class=o>*</span><span class=nx>Gopher</span> <span class=p>{</span>
	<span class=nx>gophers</span> <span class=o>:=</span> <span class=nb>make</span><span class=p>([]</span><span class=o>*</span><span class=nx>Gopher</span><span class=p>,</span> <span class=nx>NumManipulateData</span><span class=p>)</span>
	<span class=k>for</span> <span class=nx>id</span> <span class=o>:=</span> <span class=k>range</span> <span class=nx>gophers</span> <span class=p>{</span>
		<span class=nx>gophers</span><span class=p>[</span><span class=nx>id</span><span class=p>]</span> <span class=p>=</span> <span class=o>&amp;</span><span class=nx>Gopher</span><span class=p>{}</span>
		<span class=nx>sp</span><span class=p>.</span><span class=nx>DB</span><span class=p>.</span><span class=nf>Where</span><span class=p>(</span><span class=s>&#34;id &gt; ?&#34;</span><span class=p>,</span> <span class=nx>id</span><span class=p>).</span><span class=nf>Limit</span><span class=p>(</span><span class=mi>1</span><span class=p>).</span><span class=nf>Find</span><span class=p>(</span><span class=o>&amp;</span><span class=nx>gophers</span><span class=p>[</span><span class=nx>id</span><span class=p>])</span>
	<span class=p>}</span>

	<span class=k>return</span> <span class=nx>gophers</span>
<span class=p>}</span>

<span class=kd>func</span> <span class=p>(</span><span class=nx>sp</span> <span class=o>*</span><span class=nx>SequentialPattern</span><span class=p>)</span> <span class=nf>Map</span><span class=p>(</span><span class=nx>gophers</span> <span class=p>[]</span><span class=o>*</span><span class=nx>Gopher</span><span class=p>)</span> <span class=p>{</span>
	<span class=k>for</span> <span class=nx>_</span><span class=p>,</span> <span class=nx>gopher</span> <span class=o>:=</span> <span class=k>range</span> <span class=nx>gophers</span> <span class=p>{</span>
		<span class=nx>gopher</span><span class=p>.</span><span class=nx>Age</span> <span class=o>+=</span> <span class=mi>10</span>
		<span class=nx>sp</span><span class=p>.</span><span class=nx>DB</span><span class=p>.</span><span class=nf>Save</span><span class=p>(</span><span class=nx>gopher</span><span class=p>)</span>
	<span class=p>}</span>
<span class=p>}</span>

<span class=kd>func</span> <span class=p>(</span><span class=nx>pp</span> <span class=o>*</span><span class=nx>PipelinePattern</span><span class=p>)</span> <span class=nf>Execute</span><span class=p>()</span> <span class=p>{</span>
	<span class=nx>start</span> <span class=o>:=</span> <span class=nx>time</span><span class=p>.</span><span class=nf>Now</span><span class=p>()</span>

	<span class=nx>pp</span><span class=p>.</span><span class=nf>Map</span><span class=p>(</span><span class=nx>pp</span><span class=p>.</span><span class=nf>FetchData</span><span class=p>())</span>
	<span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;pipeline&#34;</span><span class=p>,</span> <span class=nx>pp</span><span class=p>)</span>
	<span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;Elapsed:&#34;</span><span class=p>,</span> <span class=nx>time</span><span class=p>.</span><span class=nf>Now</span><span class=p>().</span><span class=nf>Sub</span><span class=p>(</span><span class=nx>start</span><span class=p>))</span>
	<span class=nx>gophers</span> <span class=o>:=</span> <span class=nb>make</span><span class=p>([]</span><span class=nx>Gopher</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span>
	<span class=nx>pp</span><span class=p>.</span><span class=nx>DB</span><span class=p>.</span><span class=nf>Limit</span><span class=p>(</span><span class=nx>NumTotalData</span><span class=p>).</span><span class=nf>Find</span><span class=p>(</span><span class=o>&amp;</span><span class=nx>gophers</span><span class=p>)</span>
	<span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;Average age(Num: %d): %d\n&#34;</span><span class=p>,</span> <span class=nb>len</span><span class=p>(</span><span class=nx>gophers</span><span class=p>),</span> <span class=kd>func</span><span class=p>()</span> <span class=kt>int</span><span class=p>{</span>
	   <span class=nx>totalAge</span> <span class=o>:=</span> <span class=mi>0</span>
	   <span class=k>for</span> <span class=nx>_</span><span class=p>,</span> <span class=nx>gopher</span> <span class=o>:=</span> <span class=k>range</span> <span class=nx>gophers</span><span class=p>{</span>
	       <span class=nx>totalAge</span> <span class=o>+=</span> <span class=nx>gopher</span><span class=p>.</span><span class=nx>Age</span>
	   <span class=p>}</span>
	   <span class=k>return</span> <span class=nx>totalAge</span><span class=o>/</span><span class=nb>len</span><span class=p>(</span><span class=nx>gophers</span><span class=p>)</span>
	<span class=p>}())</span>
<span class=p>}</span>
<span class=kd>func</span> <span class=p>(</span><span class=nx>pp</span> <span class=o>*</span><span class=nx>PipelinePattern</span><span class=p>)</span> <span class=nf>FetchData</span><span class=p>()</span> <span class=o>&lt;-</span><span class=kd>chan</span> <span class=o>*</span><span class=nx>Gopher</span> <span class=p>{</span>
	<span class=nx>ch</span> <span class=o>:=</span> <span class=nb>make</span><span class=p>(</span><span class=kd>chan</span> <span class=o>*</span><span class=nx>Gopher</span><span class=p>)</span>
	<span class=k>go</span> <span class=kd>func</span><span class=p>()</span> <span class=p>{</span>
		<span class=k>for</span> <span class=nx>id</span> <span class=o>:=</span> <span class=mi>0</span><span class=p>;</span> <span class=nx>id</span> <span class=p>&lt;</span> <span class=nx>NumManipulateData</span><span class=p>;</span> <span class=nx>id</span><span class=o>++</span> <span class=p>{</span>
			<span class=kd>var</span> <span class=nx>gopher</span> <span class=nx>Gopher</span>
			<span class=nx>pp</span><span class=p>.</span><span class=nx>DB</span><span class=p>.</span><span class=nf>Table</span><span class=p>(</span><span class=s>&#34;gophers&#34;</span><span class=p>).</span><span class=nf>Where</span><span class=p>(</span><span class=s>&#34;id &gt; ?&#34;</span><span class=p>,</span> <span class=nx>id</span><span class=p>).</span><span class=nf>Limit</span><span class=p>(</span><span class=mi>1</span><span class=p>).</span><span class=nf>Find</span><span class=p>(</span><span class=o>&amp;</span><span class=nx>gopher</span><span class=p>)</span>
			<span class=nx>ch</span> <span class=o>&lt;-</span> <span class=o>&amp;</span><span class=nx>gopher</span>
		<span class=p>}</span>
		<span class=nb>close</span><span class=p>(</span><span class=nx>ch</span><span class=p>)</span>
	<span class=p>}()</span>

	<span class=k>return</span> <span class=nx>ch</span>
<span class=p>}</span>

<span class=c1>// ê³ í¼ë“¤ì„ ëª¨ë‘ 10ì‚´ ë” ë¨¹ê²Œ í•¨.
</span><span class=c1></span><span class=kd>func</span> <span class=p>(</span><span class=nx>pp</span> <span class=o>*</span><span class=nx>PipelinePattern</span><span class=p>)</span> <span class=nf>Map</span><span class=p>(</span><span class=nx>gophers</span> <span class=o>&lt;-</span><span class=kd>chan</span> <span class=o>*</span><span class=nx>Gopher</span><span class=p>)</span> <span class=p>{</span>
	<span class=k>for</span> <span class=nx>gopher</span> <span class=o>:=</span> <span class=k>range</span> <span class=nx>gophers</span> <span class=p>{</span>
		<span class=nx>gopher</span><span class=p>.</span><span class=nx>Age</span> <span class=o>+=</span> <span class=mi>10</span>
		<span class=nx>pp</span><span class=p>.</span><span class=nx>DB</span><span class=p>.</span><span class=nf>Save</span><span class=p>(</span><span class=nx>gopher</span><span class=p>)</span>
	<span class=p>}</span>
<span class=p>}</span>

<span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
	<span class=c1>// $ docker run -it --name mysql --rm -e MYSQL_ROOT_PASSWORD=root -e MYSQL_DATABASE=concurrency -p 3306:3306 mysql
</span><span class=c1></span>	<span class=c1>// ë¡œ mysql ì„œë²„ë¥¼ ë„ìš¸ ìˆ˜ ìˆë‹¤.
</span><span class=c1></span>	<span class=nx>db</span><span class=p>,</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nx>gorm</span><span class=p>.</span><span class=nf>Open</span><span class=p>(</span><span class=nx>mysql</span><span class=p>.</span><span class=nf>Open</span><span class=p>(</span><span class=s>&#34;root:root@tcp(127.0.0.1:3306)/concurrency?charset=utf8mb4&amp;parseTime=True&amp;loc=Local&#34;</span><span class=p>),</span>
		<span class=o>&amp;</span><span class=nx>gorm</span><span class=p>.</span><span class=nx>Config</span><span class=p>{</span><span class=nx>Logger</span><span class=p>:</span> <span class=nx>logger</span><span class=p>.</span><span class=nx>Default</span><span class=p>.</span><span class=nf>LogMode</span><span class=p>(</span><span class=nx>logger</span><span class=p>.</span><span class=nx>Silent</span><span class=p>)})</span>
	<span class=k>if</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
		<span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>err</span><span class=p>)</span>
		<span class=nb>panic</span><span class=p>(</span><span class=s>&#34;failed to connect database&#34;</span><span class=p>)</span>
	<span class=p>}</span>
	<span class=nf>initializeDB</span><span class=p>(</span><span class=nx>db</span><span class=p>)</span>

	<span class=c1>// Execute with PipelinePattern
</span><span class=c1></span>	<span class=kd>func</span><span class=p>()</span> <span class=p>{</span>
    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;==============================&#34;</span><span class=p>)</span>
		<span class=k>for</span> <span class=nx>rep</span> <span class=o>:=</span> <span class=mi>0</span><span class=p>;</span> <span class=nx>rep</span> <span class=p>&lt;</span> <span class=mi>10</span><span class=p>;</span> <span class=nx>rep</span><span class=o>++</span> <span class=p>{</span>
			<span class=nx>pattern</span> <span class=o>:=</span> <span class=o>&amp;</span><span class=nx>SequentialPattern</span><span class=p>{</span><span class=nx>DB</span><span class=p>:</span> <span class=nx>db</span><span class=p>}</span>
			<span class=nx>pattern</span><span class=p>.</span><span class=nf>Execute</span><span class=p>()</span>
		<span class=p>}</span>
    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;==============================&#34;</span><span class=p>)</span>
	<span class=p>}()</span>

	<span class=nx>fmt</span><span class=p>.</span><span class=nf>Print</span><span class=p>(</span><span class=s>&#34;DB ë¶€í•˜ë¥¼ ê°€ë¼ì•‰íˆê¸° ìœ„í•´ 5ì´ˆê°„ íœ´ì‹&#34;</span><span class=p>)</span>
	<span class=nx>time</span><span class=p>.</span><span class=nf>Sleep</span><span class=p>(</span><span class=mi>5</span> <span class=o>*</span> <span class=nx>time</span><span class=p>.</span><span class=nx>Second</span><span class=p>)</span>
	<span class=c1>// Execute with PipelinePattern
</span><span class=c1></span>	<span class=kd>func</span><span class=p>()</span> <span class=p>{</span>
    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;==============================&#34;</span><span class=p>)</span>
		<span class=k>for</span> <span class=nx>rep</span> <span class=o>:=</span> <span class=mi>0</span><span class=p>;</span> <span class=nx>rep</span> <span class=p>&lt;</span> <span class=mi>10</span><span class=p>;</span> <span class=nx>rep</span><span class=o>++</span> <span class=p>{</span>
			<span class=nx>pattern</span> <span class=o>:=</span> <span class=o>&amp;</span><span class=nx>PipelinePattern</span><span class=p>{</span><span class=nx>DB</span><span class=p>:</span> <span class=nx>db</span><span class=p>}</span>
			<span class=nx>pattern</span><span class=p>.</span><span class=nf>Execute</span><span class=p>()</span>
		<span class=p>}</span>
    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;==============================&#34;</span><span class=p>)</span>
	<span class=p>}()</span>
<span class=p>}</span>
</code></pre></div><h3 id=-ë²¤ì¹˜ë§ˆí¬-ê²°ê³¼-ë¹„êµ>ğŸ“‰ ë²¤ì¹˜ë§ˆí¬ ê²°ê³¼ ë¹„êµ</h3>
<p><figure style=flex-grow:150;flex-basis:361px>
<a href=/blog/golang/go-concurrent-pattern-pipeline/line-chart-1.png data-size=690x458><img src=/blog/golang/go-concurrent-pattern-pipeline/line-chart-1.png srcset="/blog/golang/go-concurrent-pattern-pipeline/line-chart-1_hu33251dd256e214e8cf3a54828b73b849_33941_480x0_resize_box_3.png 480w, /blog/golang/go-concurrent-pattern-pipeline/line-chart-1_hu33251dd256e214e8cf3a54828b73b849_33941_1024x0_resize_box_3.png 1024w" width=690 height=458 loading=lazy alt=line-chart-1.png>
</a>
<figcaption>line-chart-1.png</figcaption>
</figure></p>
<p>Sequentialí•˜ê²Œ ì§„í–‰í•  ê²½ìš° ëª¨ë“  Itemì— ëŒ€í•œ Queryê°€ ì™„ë£Œë  ë•Œ ê¹Œì§€ Update ì‘ì—…ì€ <strong>ì§€ì—°</strong>ë˜ê²Œ ëœë‹¤. ê·¸ë¦¬ê³  Queryê°€ ëª¨ë‘ ì™„ë£Œë˜ì–´ì•¼ ë¹„ë¡œì†Œ Update ì‘ì—…ì„ ì‹œì‘í•  ìˆ˜ ìˆê²Œë˜ë¯€ë¡œ ì¢€ ë” ì‘ì—… ì‹œê°„ì´ ì˜¤ë˜ê±¸ë¦¬ëŠ” í¸ì´ë‹¤.</p>
<p>ë°˜ë©´ <strong>Pipeline</strong>ìœ¼ë¡œ ì§„í–‰í•  ê²½ìš° í•œ Itemì„ Query í•˜ìë§ˆì <strong>ë°”ë¡œ ë°”ë¡œ</strong> Upadte ì‘ì—…ì´ ì´ë£¨ì–´ì§ˆ ìˆ˜ ìˆê¸°ë•Œë¬¸ì— ì‘ì—… ì‹œê°„ì´ ë” ì§§ì€ ê²½í–¥ì´ ìˆë‹¤.</p>
<p>í•˜ì§€ë§Œ ì´ ì •ë„ ì°¨ì´ëŠ” ëšœë ·í•œ ì„±ëŠ¥ ì°¨ì´ë¡œ ë³´ê¸°ì—” ë‹¤ì†Œ ë¯¸ë¯¸í•œ ê²ƒ ê°™ì•˜ë‹¤. ê·¸ë˜ì„œ ì¢€ ë” IO latencyê°€ ê¸´ ìƒí™©ì„ ì´ìš©í•´ë´¤ë‹¤. DBë¡œ localhostì—ì„œ docker mysql serverë¥¼ ì´ìš©í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ìš´ì˜ ì¤‘ì´ë˜ k8s clusterì˜ mysql podë¥¼ kubectl port forwardí•˜ì—¬ ì´ìš©í•´ë³´ì•˜ë‹¤. (<em>ì •í™•íˆëŠ” ëª¨ë¥´ì§€ë§Œ remote db + kubectl port forawrd ë¥¼ ì´ìš©í•˜ëŠ” ê²½ìš° network latencyê°€ ì•„ì£¼ ì»¤ì ¸ ê·¹ë‹¨ì ìœ¼ë¡œ ì¢‹ì€ ì˜ˆì‹œ ìƒí™©ì´ ë  ìˆ˜ ìˆì„ ê²ƒ ê°™ì•˜ë‹¤.</em>)</p>
<p><figure style=flex-grow:154;flex-basis:369px>
<a href=/blog/golang/go-concurrent-pattern-pipeline/line-chart-2.png data-size=823x534><img src=/blog/golang/go-concurrent-pattern-pipeline/line-chart-2.png srcset="/blog/golang/go-concurrent-pattern-pipeline/line-chart-2_hufd4be17bd74bd8a4b342cf46da06154a_43201_480x0_resize_box_3.png 480w, /blog/golang/go-concurrent-pattern-pipeline/line-chart-2_hufd4be17bd74bd8a4b342cf46da06154a_43201_1024x0_resize_box_3.png 1024w" width=823 height=534 loading=lazy alt=line-chart-2.png>
</a>
<figcaption>line-chart-2.png</figcaption>
</figure></p>
<p>ìœ„ì—ì„œ ê°€ì •í•œ remote db + port forwardì˜ ê·¹ë‹¨ì  ìƒí™©ì€ ì‘ì—… ì§„í–‰ patternì— ë”°ë¼ latencyë¥¼ 2ë°° ê°€ëŸ‰ ì°¨ì´ë‚˜ê²Œ í–ˆë‹¤.</p>
<p>ì¦‰ <strong>í•œ ë‹¨ê³„ì—ì„œ ì˜¤ëœ ì‹œê°„ì´ ì†Œëª¨ë˜ì–´ ë‹¤ìŒ ë‹¨ê³„ê°€ ì§€ì—°ë˜ëŠ” ê²½ìš° Pipelineì„ ì´ìš©í•˜ë©´ ì¢‹ì€ ê²ƒ ê°™ë‹¤</strong>. <em>ì´ëŠ” ë§ˆì¹˜ ì»´í“¨í„° êµ¬ì¡°ì—ì„œ MIPS Processorì˜ Pipelineì„ ê³µë¶€í•  ë•Œì™€ ìœ ì‚¬í•œ ë“¯í•œ ëŠë‚Œì„ ì¤¬ë‹¤.</em></p>
<h2 id=ë§ˆë¬´ë¦¬>ë§ˆë¬´ë¦¬</h2>
<blockquote>
<p>ì´ ê¸€ì´ ì •í™•í•œ ë‚´ìš©ì€ ì•„ë‹ ìˆ˜ ìˆì§€ë§Œ ì¡°ì‚¬í•´ë³¸ ì„ ì—ì„œ ë²¤ì¹˜ë§ˆí¬ í•´ë³´ë©° ì‘ì„±í•´ë´¤ìŠµë‹ˆë‹¤. í˜¹ì‹œ ê¸€ì˜ ë‚´ìš© ì¤‘ ì˜ëª»ëœ ë‚´ìš©ì— ëŒ€í•œ í”¼ë“œë°±ì„ ì œì‹œí•´ì£¼ì‹ ë‹¤ë©´ ê¸°íšŒê°€ ë‹¿ëŠ” í•œ ì—´ì‹¬íˆ ë‹¤ì‹œ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤~!</p>
</blockquote>
<p>í‰ì†Œ ê¶ê¸ˆí–ˆë˜ &ldquo;<em>Goì˜ <code>concurrent pattern</code>ì€ ì–´ë–¨ ë•Œ ì“°ë©´ ì¢‹ì„ê¹Œ?</em>&rdquo; ë¼ëŠ” ì˜ë¬¸ ì¤‘ <code>pipeline pattern</code> ì— ëŒ€í•´ ì´ë ‡ê²Œ ì•Œì•„ë´¤ë‹¤.</p>
<p>Pipeline patternì´ CPU Boundí•œ ì‘ì—…ë³´ë‹¤ëŠ” IO latencyë¡œ ì¸í•´ ì˜¤ëœ ì‹œê°„ì´ ì†Œëª¨ë˜ëŠ” ì‘ì—…ì— ë” íš¨ìœ¨ì ì´ë¼ê³  ìƒê°í•œ ì´ìœ ëŠ” CPU Boundí•œ ì‘ì—…ì—ì„œëŠ” CPUê°€ ì´ë¯¸ í˜¹ì‚¬ë‹¹í•˜ê³  ìˆê¸° ë•Œë¬¸ì— êµ³ì´ ì—¬ëŸ¬ goroutineì„ schedule, switchí•˜ê±°ë‚˜ channelì„ í†µí•œ ë™ê¸°ì²˜ë¦¬ë¥¼ í•˜ë©´ì„œ ì‘ì—…ì„ ì§„í–‰í•˜ê¸°ë³´ë‹¤ëŠ” ê·¸ëƒ¥ ì¼ë°˜ì ì¸ ë°©ì‹ìœ¼ë¡œ ìˆœì°¨ì ìœ¼ë¡œ ì‘ì—…ì„ ì§„í–‰í•˜ëŠ” ê²Œ ì¢‹ì„ ìˆ˜ ìˆê¸° ë•Œë¬¸ì´ë‹¤. ì›Œë‚™ì— ì–¼ë§ˆë‚˜ CPU boundí•œ ì‘ì—…ì¸ì§€, ì–¼ë§ˆë‚˜ ë§ì€ goroutineì„ ì´ìš©í•˜ëŠ”ì§€ ë“±ë“± ë‹¤ì–‘í•œ ê²½ìš°ì— ë”°ë¼ ë‹¬ë¼ì§€ê¸° ë•Œë¬¸ì— ë”± ì˜ë¼ë§í•  ìˆ˜ë„ ì—†ê³ , ë‚˜ë„ ë§ì´ ë¶€ì¡±í•˜ê¸° ë•Œë¬¸ì— ì •í™•íˆëŠ” ëª¨ë¥´ê² ë‹¤. í•˜ì§€ë§Œ ì¶”ì¸¡ì»¨ëŒ€ ì ì–´ë„ io latencyë¡œ ì¸í•´ ì‘ì—…ë“¤ì´ ì§€ì—°ë˜ëŠ” ê²½ìš°ì—ëŠ” pipeline patternì´ ì¢‹ì€ ë“¯í•˜ë‹¤.</p>
<p>ì¶”ê°€ì ìœ¼ë¡œ <code>Fan-in Fan-out</code> pattern ë˜í•œ channelì„ ë°”íƒ•ìœ¼ë¡œ dataë¥¼ ì „ë‹¬í•˜ë©´ì„œ ì‘ì—…í•˜ê¸° ë•Œë¬¸ì— ì¼ì¢…ì˜ <code>Pipeline</code> patternì´ ì ìš©ëœ íŒ¨í„´ì¸ë“¯í•˜ì—¬ ê¸°íšŒê°€ ëœë‹¤ë©´ <strong>ì–´ë–¤ ê²½ìš°ì— ë‹¨ìˆœíˆ Pipeline íŒ¨í„´ì„ ì´ìš©í•˜ëŠ” ê²ƒë³´ë‹¤ ì—¬ëŸ¬ Goroutineì„ ì´ìš©í•´ ì‘ì—…í•˜ëŠ” Fan-in fan out patternì´ ì¢‹ì„ì§€ ë¹„êµ</strong>í•´ë³´ëŠ” ê¸€ì„ ì ì–´ë³´ê³ ì‹¶ë‹¤.</p>
<h2 id=ì°¸ê³ >ì°¸ê³ </h2>
<ul>
<li>Aidan Baeë‹˜ì˜ Pipeline patternì— ëŒ€í•œ ì†Œê°œ - <a class=link href=https://aidanbae.github.io/code/golang-design/pipeline/ target=_blank rel=noopener>https://aidanbae.github.io/code/golang-design/pipeline/</a></li>
<li>Go Blogì˜ Pipeline patternì— ëŒ€í•œ ì†Œê°œ - <a class=link href=https://blog.golang.org/pipelines target=_blank rel=noopener>https://blog.golang.org/pipelines</a></li>
<li>Pipelineì€ ~~~ ì´ëŸ° ìƒí™©ì— ë„ì›€ì´ ë  ê»„?í•˜ëŠ” ëŒ“ê¸€ - <a class=link href=https://www.reddit.com/r/golang/comments/7rjdw6/go_go_go_stream_processing_for_go/ target=_blank rel=noopener>https://www.reddit.com/r/golang/comments/7rjdw6/go_go_go_stream_processing_for_go/</a></li>
<li>Mutexì™€ Channel ë¹„êµ - <a class=link href=https://github.com/golang/go/wiki/MutexOrChannel target=_blank rel=noopener>https://github.com/golang/go/wiki/MutexOrChannel</a></li>
<li>Mutexì™€ Channelì˜ ì†ë„ ì°¨ì´ - <a class=link href=http://www.dogfootlife.com/archives/452 target=_blank rel=noopener>http://www.dogfootlife.com/archives/452</a></li>
<li>Pipeline architectureë¥¼ ì‚¬ìš©í•˜ëŠ” 7ê°€ì§€ ì´ìœ (<del>ê°œì¸ì ìœ¼ë¡  ê³µê° ì•ˆ ê°</del>) - <a class=link href=https://labs.bawi.io/7-reasons-to-use-pipeline-architecture-93346f604b87 target=_blank rel=noopener>https://labs.bawi.io/7-reasons-to-use-pipeline-architecture-93346f604b87</a></li>
<li>python generator ì†Œê°œ, ì‚¬ìš©ë²•- <a class=link href=https://wikidocs.net/16069 target=_blank rel=noopener>https://wikidocs.net/16069</a></li>
<li>python generatorëŠ” thread-safeí•˜ì§€ ì•Šë‹¤. - <a class=link href=https://stackoverflow.com/questions/1131430/are-generators-threadsafe target=_blank rel=noopener>https://stackoverflow.com/questions/1131430/are-generators-threadsafe</a></li>
</ul>
</section>
<footer class=article-footer>
<section class=article-copyright><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg>
<span>Licensed under CC BY-NC-SA 4.0</span>
</section>
</footer>
</article>
<aside class=related-contents--wrapper>
<h2 class=section-title>ê´€ë ¨ ê¸€</h2>
<div class=related-contents>
<div class="flex article-list--tile">
<article class=has-image>
<a href=/blog/golang/how-to-backend-in-go-middleware/>
<div class=article-image>
<img src=/blog/golang/how-to-backend-in-go-middleware/log.a24b8a94710056cf81eeda03f1c3deee_hu6da6c55463c6a62988b186d685cd2c7c_23812_250x150_fill_box_smart1_3.png width=250 height=150 loading=lazy data-key data-hash="md5-okuKlHEAVs+B7toD8cPe7g==">
</div>
<div class=article-details>
<h2 class=article-title>Golangìœ¼ë¡œ ë°±ì—”ë“œ ê°œë°œí•˜ê¸° - 4. Custom Middleware(ë¯¸ë“¤ì›¨ì–´) ì‘ì„±í•´ë³´ê¸° (feat. fiber)</h2>
</div>
</a>
</article>
<article class=has-image>
<a href=/blog/golang/how-to-backend-in-go-webapp/>
<div class=article-image>
<img src=/blog/golang/how-to-backend-in-go-webapp/output.8af8bebb21fe028ac92f562189cb643b_hu537a11d34916ac1c2def7909b69ddbc5_22456_250x150_fill_box_smart1_3.png width=250 height=150 loading=lazy data-key data-hash="md5-ivi+uyH+AorJL1YhictkOw==">
</div>
<div class=article-details>
<h2 class=article-title>Golangìœ¼ë¡œ ë°±ì—”ë“œ ê°œë°œí•˜ê¸° - 3. ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ ê°œë°œí•´ë³´ê¸° (feat. fiber)</h2>
</div>
</a>
</article>
<article class=has-image>
<a href=/blog/golang/how-to-backend-in-go-testcode/>
<div class=article-image>
<img src=/blog/golang/how-to-backend-in-go-testcode/test-with-ide.e83038fd0ad61ce8e85069ab96d89062_hu7b61495424919d2e1c8d663236a41b57_159980_250x150_fill_box_smart1_3.png width=250 height=150 loading=lazy data-key data-hash="md5-6DA4/QrWHOjoUGmrltiQYg==">
</div>
<div class=article-details>
<h2 class=article-title>Golangìœ¼ë¡œ ë°±ì—”ë“œ ê°œë°œí•˜ê¸° - 2. í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„± ë° Goì—ì„œ Mocking ì´ìš©í•˜ê¸° (gomock, testify ì´ìš©)</h2>
</div>
</a>
</article>
<article class=has-image>
<a href=/blog/golang/how-to-backend-in-go-db/>
<div class=article-image>
<img src=/blog/golang/how-to-backend-in-go-db/o2m-relation.73e7e39c70cfc03dd37c4e76a3c340b4_huda98d5d877ff5063fa9c786910881686_21160_250x150_fill_box_smart1_3.png width=250 height=150 loading=lazy data-key data-hash="md5-c+fjnHDPwD3TfE52o8NAtA==">
</div>
<div class=article-details>
<h2 class=article-title>Golangìœ¼ë¡œ ë°±ì—”ë“œ ê°œë°œí•˜ê¸° - 1. ë°ì´í„°ë² ì´ìŠ¤ ì‘ì—…í•˜ê¸° (Ent í”„ë ˆì„ì›Œí¬ ì´ìš©)</h2>
</div>
</a>
</article>
<article class=has-image>
<a href=/blog/golang/go-socket/>
<div class=article-image>
<img src=/blog/golang/go-socket/server-client-socket.25567a9a8e35e4878b3820141329b6da_huc5be35f5857cc34672b838b13057c03e_282874_250x150_fill_q75_box_smart1.jpeg width=250 height=150 loading=lazy data-key data-hash="md5-JVZ6mo415IeLOCAUEym22g==">
</div>
<div class=article-details>
<h2 class=article-title>Go ì–¸ì–´ë¡œ ì ìš©í•´ë³´ëŠ” Computer Science - Socket (Unix Domain Socket, Network/TCP/UDP Socket)</h2>
</div>
</a>
</article>
</div>
</div>
</aside>
<div class=disqus-container>
<div id=disqus_thread></div>
<script type=application/javascript>var disqus_config=function(){};(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById('disqus_thread').innerHTML='Disqus comments not available by default when the website is previewed locally.';return}var b=document,a=b.createElement('script');a.async=!0,a.src='//umi0410.disqus.com/embed.js',a.setAttribute('data-timestamp',+new Date),(b.head||b.body).appendChild(a)})()</script>
<noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript>
<a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a>
</div>
<style>.disqus-container{background-color:var(--card-background);border-radius:var(--card-border-radius);box-shadow:var(--shadow-l1);padding:var(--card-padding)}</style>
<script>window.addEventListener('onColorSchemeChange',a=>{DISQUS&&DISQUS.reset({reload:!0})})</script>
<footer class=site-footer>
<section class=copyright>
&copy;
2020 -
2021 Jinsu Playground
</section>
<section class=powerby>
<a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a>ë¡œ ë§Œë“¦ <br>
<a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a>ì˜ <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=2.4.0>Stack</a></b> í…Œë§ˆ ì‚¬ìš© ì¤‘
</section>
</footer>
<div class=pswp tabindex=-1 role=dialog aria-hidden=true>
<div class=pswp__bg></div>
<div class=pswp__scroll-wrap>
<div class=pswp__container>
<div class=pswp__item></div>
<div class=pswp__item></div>
<div class=pswp__item></div>
</div>
<div class="pswp__ui pswp__ui--hidden">
<div class=pswp__top-bar>
<div class=pswp__counter></div>
<button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
<div class=pswp__preloader>
<div class=pswp__preloader__icn>
<div class=pswp__preloader__cut>
<div class=pswp__preloader__donut></div>
</div>
</div>
</div>
</div>
<div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
<div class=pswp__share-tooltip></div>
</div>
<button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
</button>
<div class=pswp__caption>
<div class=pswp__caption__center></div>
</div>
</div>
</div>
</div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.css integrity="sha256-c0uckgykQ9v5k+IqViZOZKc47Jn7KQil4/MP3ySA3F8=" crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.css integrity="sha256-SBLU4vv6CA6lHsZ1XyTdhyjJxCjPif/TRkjnsyGAGnE=" crossorigin=anonymous>
</main>
<aside class="sidebar right-sidebar sticky">
<section class="widget archives">
<div class=widget-icon><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg>
</div>
<h2 class="widget-title section-title">Table of contents</h2>
<div class=widget--toc>
<nav id=TableOfContents>
<ol>
<li><a href=#-ì‹œì‘í•˜ë©°>âœ‹ ì‹œì‘í•˜ë©°</a></li>
<li><a href=#-pipeline-patternì´ë€>â“ Pipeline patternì´ë€?</a>
<ol>
<li><a href=#pipeline-patternì˜-í”í•œ-ì˜ˆì‹œë¡œ-square-í•˜ëŠ”-ì˜ˆì œë¥¼-ì„¤ëª…í•˜ëŠ”-ê¸€ë“¤>Pipeline patternì˜ í”í•œ ì˜ˆì‹œë¡œ square í•˜ëŠ” ì˜ˆì œë¥¼ ì„¤ëª…í•˜ëŠ” ê¸€ë“¤</a></li>
</ol>
</li>
<li><a href=#-ì–¸ì œ-ì“°ëŠ”-ê²Œ-ì¢‹ì„ê¹Œ>ğŸ¤” ì–¸ì œ ì“°ëŠ” ê²Œ ì¢‹ì„ê¹Œ?</a></li>
<li><a href=#ì˜ˆì‹œ-í”„ë¡œê·¸ë¨>ì˜ˆì‹œ í”„ë¡œê·¸ë¨</a>
<ol>
<li><a href=#í”„ë¡œê·¸ë¨-ì„¤ëª…>í”„ë¡œê·¸ë¨ ì„¤ëª…</a></li>
<li><a href=#-ë²¤ì¹˜ë§ˆí¬-ê²°ê³¼-ë¹„êµ>ğŸ“‰ ë²¤ì¹˜ë§ˆí¬ ê²°ê³¼ ë¹„êµ</a></li>
</ol>
</li>
<li><a href=#ë§ˆë¬´ë¦¬>ë§ˆë¬´ë¦¬</a></li>
<li><a href=#ì°¸ê³ >ì°¸ê³ </a></li>
</ol>
</nav>
</div>
</section>
</aside>
</div>
<script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.5/dist/vibrant.min.js integrity="sha256-5NovOZc4iwiAWTYIFiIM7DxKUXKWvpVEuMEPLzcm5/g=" crossorigin=anonymous defer></script><script type=text/javascript src=/ts/main.js defer></script>
<script>(function(){const a=document.createElement('link');a.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",a.type="text/css",a.rel="stylesheet",document.head.appendChild(a)})()</script>
</body>
</html>