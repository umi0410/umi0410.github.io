<!doctype html><html lang=ko-kr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="시작하며 드디어 에러를 다뤄볼 차례가 됐네요. 작년까지만 해도 Error나 Exception 처리의 중요성을 잘 몰랐던 것 같습니다. 하지만 API 클라이언트랑 작업을 하면 할수록 에러 처리의 중요성을 느끼게 되는 것 같아요. 왜냐하면 백엔드에서 각각의 에러 케이스에 대한 status_code나 error_type등을 명확히 정의하지 않으면 클라이언트는 에러를 해석할 방법이 없기 때문입니다.
또한 에러를 잘 처리한 뒤 올바르게 응답하거나 로그를 남기는 것은 유지/보수 시에 백엔드 개발자 스스로 에게도 정말 중요할 수 있습니다. 우리는 실제 운영 환경의 로그를 마치 우리가 로컬에서 개발할 때 처럼 항상 보고있을 수는 없기 때문이죠."><title>Golang으로 백엔드 개발하기 - 5. Error Handling. 에러 잘 처리하기 (feat. fiber)</title><link rel=canonical href=https://umi0410.github.io/blog/golang/how-to-backend-in-go-errorhandle/><link rel=stylesheet href=/scss/style.min.css><meta property="og:title" content="Golang으로 백엔드 개발하기 - 5. Error Handling. 에러 잘 처리하기 (feat. fiber)"><meta property="og:description" content="시작하며 드디어 에러를 다뤄볼 차례가 됐네요. 작년까지만 해도 Error나 Exception 처리의 중요성을 잘 몰랐던 것 같습니다. 하지만 API 클라이언트랑 작업을 하면 할수록 에러 처리의 중요성을 느끼게 되는 것 같아요. 왜냐하면 백엔드에서 각각의 에러 케이스에 대한 status_code나 error_type등을 명확히 정의하지 않으면 클라이언트는 에러를 해석할 방법이 없기 때문입니다.
또한 에러를 잘 처리한 뒤 올바르게 응답하거나 로그를 남기는 것은 유지/보수 시에 백엔드 개발자 스스로 에게도 정말 중요할 수 있습니다. 우리는 실제 운영 환경의 로그를 마치 우리가 로컬에서 개발할 때 처럼 항상 보고있을 수는 없기 때문이죠."><meta property="og:url" content="https://umi0410.github.io/blog/golang/how-to-backend-in-go-errorhandle/"><meta property="og:site_name" content="Jinsu Playground"><meta property="og:type" content="article"><meta property="article:section" content="Blog"><meta property="article:published_time" content="2021-09-05T01:46:54+09:00"><meta property="article:modified_time" content="2021-09-05T01:46:54+09:00"><meta property="og:image" content="https://umi0410.github.io/blog/golang/how-to-backend-in-go-errorhandle/chain.png"><meta name=twitter:title content="Golang으로 백엔드 개발하기 - 5. Error Handling. 에러 잘 처리하기 (feat. fiber)"><meta name=twitter:description content="시작하며 드디어 에러를 다뤄볼 차례가 됐네요. 작년까지만 해도 Error나 Exception 처리의 중요성을 잘 몰랐던 것 같습니다. 하지만 API 클라이언트랑 작업을 하면 할수록 에러 처리의 중요성을 느끼게 되는 것 같아요. 왜냐하면 백엔드에서 각각의 에러 케이스에 대한 status_code나 error_type등을 명확히 정의하지 않으면 클라이언트는 에러를 해석할 방법이 없기 때문입니다.
또한 에러를 잘 처리한 뒤 올바르게 응답하거나 로그를 남기는 것은 유지/보수 시에 백엔드 개발자 스스로 에게도 정말 중요할 수 있습니다. 우리는 실제 운영 환경의 로그를 마치 우리가 로컬에서 개발할 때 처럼 항상 보고있을 수는 없기 때문이죠."><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://umi0410.github.io/blog/golang/how-to-backend-in-go-errorhandle/chain.png"><link rel="shortcut icon" href=https://emojipedia-us.s3.dualstack.us-west-1.amazonaws.com/thumbs/120/google/241/whale_1f40b.png><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src=s,a.parentNode.insertBefore(i,a)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-177403492-1","auto"),ga("send","pageview"))</script><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link href="https://fonts.googleapis.com/css2?family=East+Sea+Dokdo&family=Noto+Sans+KR:wght@400&display=swap" rel=stylesheet><style>@import 'https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css';:root{--body-background:#fafeff;--base-font-family:Pretendard, 'Noto Sans KR', sans-serif}.site-name{--site-name-font-family:'East Sea Dokdo', cursive;font-family:var(--site-name-font-family);font-size:3.2rem!important}.left-sidebar{--sidebar-avatar-size:200px}figure.site-avatar{margin-left:auto!important;margin-right:auto!important}</style></head><body class="article-page has-toc"><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex
extended"><div id=article-toolbar><a href=https://umi0410.github.io class=back-home><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-chevron-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="15 6 9 12 15 18"/></svg><span>Back</span></a></div><main class="main full-width"><article class="has-image main-article"><header class=article-header><div class=article-image><a href=/blog/golang/how-to-backend-in-go-errorhandle/><img src=/blog/golang/how-to-backend-in-go-errorhandle/chain_hua96618047d845851ee10ee4de25bc827_61443_800x0_resize_box_3.png srcset="/blog/golang/how-to-backend-in-go-errorhandle/chain_hua96618047d845851ee10ee4de25bc827_61443_800x0_resize_box_3.png 800w, /blog/golang/how-to-backend-in-go-errorhandle/chain_hua96618047d845851ee10ee4de25bc827_61443_1600x0_resize_box_3.png 1600w" width=800 height=610 loading=lazy alt="Featured image of post Golang으로 백엔드 개발하기 - 5. Error Handling. 에러 잘 처리하기 (feat. fiber)"></a></div><div class=article-details><header class=article-category><a href=/categories/golang/>Golang (Go 언어)</a></header><h2 class=article-title><a href=/blog/golang/how-to-backend-in-go-errorhandle/>Golang으로 백엔드 개발하기 - 5. Error Handling. 에러 잘 처리하기 (feat. fiber)</a></h2><footer class=article-time><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg><time class=article-time--published>Sep 05, 2021</time></footer></div></header><section class=article-content><h2 id=시작하며>시작하며</h2><p>드디어 에러를 다뤄볼 차례가 됐네요. 작년까지만 해도 <code>Error</code>나 <code>Exception</code> 처리의 중요성을 잘 몰랐던 것 같습니다. 하지만 API <strong>클라이언트랑 작업을 하면 할수록 에러 처리의 중요성을 느끼게 되는 것 같아요</strong>. 왜냐하면 백엔드에서 각각의 에러 케이스에 대한 <code>status_code</code>나 <code>error_type</code>등을 명확히 정의하지 않으면 클라이언트는 에러를 해석할 방법이 없기 때문입니다.</p><p>또한 <strong>에러를 잘 처리한 뒤 올바르게 응답하거나 로그를 남기는 것은 유지/보수 시에 백엔드 개발자 스스로 에게도 정말 중요</strong>할 수 있습니다. 우리는 실제 운영 환경의 로그를 마치 우리가 로컬에서 개발할 때 처럼 항상 보고있을 수는 없기 때문이죠. 즉 에러 로그만 따로 &ldquo;편리하게&rdquo; 볼 수 있거나 에러 로그로 인한 Notification System이 있으면 훨씬 에러를 추적(Tracing)하기 쉽겠죠!</p><p>그리고 <strong><code>Golang</code>은 다른 언어들과 달리 Try Catch의 형태로 에러를 처리하지 않는다</strong>는 점을 모두들 알고 계실 겁니다. 하지만 이 에러를 그럼 어떻게 처리하지에 대한 방안은 뚜렷이 인지하지 못한 경우가 많을 수 있습니다.(제가 그랬습니다. ㅎㅎ..) 그래서 대충 에러 로그를 출력하게만 하고 통일성 없는 방식으로 그때 그때 떠오르는 대로 에러처리를 해왔던 것 같아요.</p><p>그럼 이번 글에서는 에러를 왜 우아하게, 잘 처리해야하는지 살펴보고 그를 위한 방법도 소개해보겠습니다.</p><h2 id=-에러를-wrapping-하자>📦 에러를 Wrapping 하자</h2><p>다른 언어들은 에러를 상속해 정의하는 방식을 이용하지만 <strong><code>Golang</code>은 에러를 <code>Wrapping</code>하는 방식을 이용</strong>합니다. 좀 낯설어서 그렇지 익숙해지면 훨씬 간결한 것 같습니다.</p><p>예를 들어 Redis 관련 에러는 모두 추상적인 에러인 <code>RedisError</code>에 속하고 조회 도중 발생한 에러는 <code>RedisGetError</code>라고 정의하는 경우가 있다고 해보겠습니다. 자바의 경우는 다음과 같이 정의하겠죠.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>RedisError</span> <span class=kd>extends</span> <span class=n>Exception</span><span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=nf>RedisError</span><span class=o>(</span><span class=n>String</span> <span class=n>msg</span><span class=o>){</span>
</span></span><span class=line><span class=cl>        <span class=kd>super</span><span class=o>(</span><span class=n>msg</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>RedisGetError</span> <span class=kd>extends</span> <span class=n>RedisError</span><span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=nf>RedisError</span><span class=o>(){</span>
</span></span><span class=line><span class=cl>        <span class=kd>super</span><span class=o>(</span><span class=s>&#34;레디스 조회 관련 에러&#34;</span><span class=o>)</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>Something</span><span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>somethingWithRedis</span><span class=o>(){</span>
</span></span><span class=line><span class=cl>        <span class=k>try</span><span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=n>redis</span><span class=o>.</span><span class=na>get</span><span class=o>(</span><span class=s>&#34;X&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span> <span class=k>catch</span> <span class=o>(</span><span class=n>RedisGetError</span> <span class=n>e</span><span class=o>){</span>
</span></span><span class=line><span class=cl>            <span class=o>...</span> <span class=c1>// 레디스 조회 관련 에러 케이스에 대한 대응
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=o>}</span> <span class=k>catch</span> <span class=o>(</span><span class=n>RedisError</span> <span class=n>e</span><span class=o>){</span>
</span></span><span class=line><span class=cl>            <span class=o>...</span> <span class=c1>// 레디스 조회를 제외한 레디스 관련 에러 케이스에 대한 대응
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=o>}</span> <span class=k>catch</span> <span class=o>(</span><span class=n>Exception</span> <span class=n>e</span><span class=o>){</span>
</span></span><span class=line><span class=cl>            <span class=o>...</span> <span class=c1>// 그 외의 모든 에러 케이스에 대한 대응
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div><p>이렇게 Java의 경우는 <code>상속</code>을 통해 각 에러 케이스에 대해 대응합니다. 하지만 Golang에서는 주로 다음과 같은 방법으로 에러를 처리합니다.</p><ol><li><p><code>error.New(msg string)</code> 으로 sentinel error(더 이상 쪼갤 수 없는 최상위 에러 같은 느낌)를 정의</p></li><li><p><code>fmt.Errorf("%s: %w", msg, sentinelErr)</code> 으로 sentinel error를 감싼(wrap) 자식 에러를 정의</p><p>에러를 Wrapping 하면 sentinel error에 좀 더 정보를 추가할 수 있어 친절한 에러가 되죠!</p></li><li><p><code>errors.Is(err, parentErr)</code> 으로 err의 wrapping chain에 parentErr이 존재하는지 판단</p></li></ol><p>에러를 Wrapping한다는 개념이 잘 이해되지 않는 분들은 <a class=link href=https://golangbyexample.com/wrapping-and-unwrapping-error-golang/ target=_blank rel=noopener>Wrapping and Un-wrapping of error in Go (Golang)</a>을 참고해주시면 좋을 것 같습니다.</p><p>그럼 Go에선 위와 같은 케이스가 어떻게 구현될 수 있는지 적어보겠습니다.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kd>var</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=nx>ErrRedis</span> <span class=p>=</span> <span class=nx>errors</span><span class=p>.</span><span class=nf>New</span><span class=p>(</span><span class=s>&#34;레디스 관련 에러&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>ErrRedisGet</span> <span class=p>=</span> <span class=nx>fmt</span><span class=p>.</span><span class=nf>Errorf</span><span class=p>(</span><span class=s>&#34;조회 도중 에러: %w&#34;</span><span class=p>,</span> <span class=nx>ErrRedis</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>type</span> <span class=nx>Something</span> <span class=kd>struct</span><span class=p>{}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=p>(</span><span class=nx>s</span> <span class=o>*</span><span class=nx>Something</span><span class=p>)</span> <span class=nf>somethingWithRedis</span><span class=p>(){</span>
</span></span><span class=line><span class=cl>    <span class=nx>_</span><span class=p>,</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nx>redis</span><span class=p>.</span><span class=nf>Get</span><span class=p>(</span><span class=s>&#34;X&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span><span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=nx>errors</span><span class=p>.</span><span class=nf>Is</span><span class=p>(</span><span class=nx>err</span><span class=p>,</span> <span class=nx>ErrRedisGet</span><span class=p>){</span>
</span></span><span class=line><span class=cl>            <span class=o>...</span> <span class=c1>// 레디스 조회 관련 에러 케이스에 대한 대응
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=p>}</span> <span class=k>else</span> <span class=k>if</span> <span class=nx>errors</span><span class=p>.</span><span class=nf>Is</span><span class=p>(</span><span class=nx>err</span><span class=p>,</span> <span class=nx>ErrRedis</span><span class=p>){</span>
</span></span><span class=line><span class=cl>            <span class=o>...</span> <span class=c1>// 레디스 조회를 제외한 레디스 관련 에러 케이스에 대한 대응
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=p>}</span> <span class=k>else</span><span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=o>...</span> <span class=c1>// 그 외의 모든 에러 케이스에 대한 대응
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>Go에서 error는 <code>interface</code>이기 때문에 간혹 <code>type assertion</code>을 이용해 에러의 타입을 비교하거나 직접 error variable와 비교하는 경우도 있긴합니다만 바람직하지는 않습니다. type assertion은 애초에 다소 불안하거나 번거로운 면이 있고 직접 error value와 비교하는 경우는 해당 error value를 제공하던 package가 추후에는 어떤 error value를 재정의할 지 모르기 때문입니다. <strong>예를 들어 <code>ErrRedisGet</code> 를 리턴하던 패키지가 <code>ErrRedisGet</code> 를 Wrapping한 <code>ErrRedisHashGet</code> 를 리턴하는 형태로 변경됐다고 가정</strong>합시다.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kd>var</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=nx>ErrRedis</span> <span class=p>=</span> <span class=nx>errors</span><span class=p>.</span><span class=nf>New</span><span class=p>(</span><span class=s>&#34;레디스 관련 에러&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>ErrRedisGet</span> <span class=p>=</span> <span class=nx>fmt</span><span class=p>.</span><span class=nf>Errorf</span><span class=p>(</span><span class=s>&#34;조회 도중 에러: %w&#34;</span><span class=p>,</span> <span class=nx>ErrRedis</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=p>(</span><span class=nx>r</span> <span class=o>*</span><span class=nx>redis</span><span class=p>)</span> <span class=nf>HashGet</span><span class=p>(</span><span class=nx>key</span> <span class=kt>string</span><span class=p>)</span> <span class=kt>string</span><span class=p>,</span> <span class=kt>error</span><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=nx>Hash</span> <span class=nx>Get</span> <span class=err>도중</span> <span class=err>에러가</span> <span class=err>발생한</span> <span class=err>경우</span><span class=p>){</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=s>&#34;&#34;</span><span class=p>,</span> <span class=nx>ErrRedisGet</span> <span class=c1>// 이 버전에서는 ErrRedisGet을 리턴함.
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=o>...</span> <span class=c1>// 에러가 발생하지 않은 경우
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=p>(</span><span class=nx>s</span> <span class=o>*</span><span class=nx>Something</span><span class=p>)</span> <span class=nf>somethingWithRedis</span><span class=p>(){</span>
</span></span><span class=line><span class=cl>    <span class=nx>_</span><span class=p>,</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nx>redis</span><span class=p>.</span><span class=nf>HashGet</span><span class=p>(</span><span class=s>&#34;X&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span><span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=nx>err</span> <span class=o>==</span> <span class=nx>ErrRedisGet</span><span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=c1>// Redis 조회 도중 에러가 발생한 경우에 대한 대응
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=o>...</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>기존 버전에선 <code>ErrRedisGet</code> 을 리턴하고, 그 결과를 확인하는 메소드에서도 <code>ErrRedisGet</code> 과 직접 <code>==</code>으로 비교를 하니 올바르게 동작합니다.</p><p><figure style=flex-grow:131;flex-basis:314px><a href=/blog/golang/how-to-backend-in-go-errorhandle/chain.png data-size=929x708><img src=/blog/golang/how-to-backend-in-go-errorhandle/chain.png srcset="/blog/golang/how-to-backend-in-go-errorhandle/chain_hua96618047d845851ee10ee4de25bc827_61443_480x0_resize_box_3.png 480w, /blog/golang/how-to-backend-in-go-errorhandle/chain_hua96618047d845851ee10ee4de25bc827_61443_1024x0_resize_box_3.png 1024w" width=929 height=708 loading=lazy alt=chain.png></a><figcaption>chain.png</figcaption></figure></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kd>var</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=nx>ErrRedis</span> <span class=p>=</span> <span class=nx>errors</span><span class=p>.</span><span class=nf>New</span><span class=p>(</span><span class=s>&#34;레디스 관련 에러&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>ErrRedisGet</span> <span class=p>=</span> <span class=nx>fmt</span><span class=p>.</span><span class=nf>Errorf</span><span class=p>(</span><span class=s>&#34;조회 도중 에러: %w&#34;</span><span class=p>,</span> <span class=nx>ErrRedis</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>ErrRedisHashGet</span> <span class=p>=</span> <span class=nx>fmt</span><span class=p>.</span><span class=nf>Errorf</span><span class=p>(</span><span class=s>&#34;해쉬 조회 도중 에러: %w&#34;</span><span class=p>,</span> <span class=nx>ErrRedisGet</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=p>(</span><span class=nx>r</span> <span class=o>*</span><span class=nx>redis</span><span class=p>)</span> <span class=nf>HashGet</span><span class=p>(</span><span class=nx>key</span> <span class=kt>string</span><span class=p>)</span> <span class=kt>string</span><span class=p>,</span> <span class=kt>error</span><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=nx>Hash</span> <span class=nx>Get</span> <span class=err>도중</span> <span class=err>에러가</span> <span class=err>발생한</span> <span class=err>경우</span><span class=p>){</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=s>&#34;&#34;</span><span class=p>,</span> <span class=nx>ErrRedisHashGet</span> <span class=c1>// 이 버전에서는 ErrRedisGet을 리턴함.
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=o>...</span> <span class=c1>// 에러가 발생하지 않은 경우
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=p>(</span><span class=nx>s</span> <span class=o>*</span><span class=nx>Something</span><span class=p>)</span> <span class=nf>somethingWithRedis</span><span class=p>(){</span>
</span></span><span class=line><span class=cl>    <span class=nx>_</span><span class=p>,</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nx>redis</span><span class=p>.</span><span class=nf>HashGet</span><span class=p>(</span><span class=s>&#34;X&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span><span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// 만약 아래처럼 errors.Is를 이용하면 ErrRedisGet은 실제로 리턴된
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=c1>// ErrRedisHashGet의 wrapping chain에 존재하므로 기존과 동일하게
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=c1>// 올바르게 동작할 수 있음.
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=c1>// if errors.Is(err, ErrRedisGet){}
</span></span></span><span class=line><span class=cl><span class=c1></span>        
</span></span><span class=line><span class=cl>        <span class=c1>// 하지만 이제는 ==을 통한 직접 비교는 예상한대로 동작하지 못함 ㅜㅜ
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>if</span> <span class=nx>err</span> <span class=o>==</span> <span class=nx>ErrRedisGet</span><span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=o>...</span> <span class=c1>// ㅜㅜ
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=o>...</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>하지만 다음 버전에선 <code>redis.HashGet()</code> 이 Hash에 대한 조회 도중 에러가 발생했을 땐 <code>ErrRedisGet</code>이 아닌 그것을 Wrap한 <code>ErrRedisHashGet</code>을 리턴한다면 기존의 <code>==</code>을 이용한 직접 비교는 올바른 결과를 가져다주지 못할 것입니다.</p><p>다소 어렵거나 낯설 수 있는 내용이라 간단한 내용을 위주로 예시를 들어봤습니다. 관심이 있으신 분들은 기본으로 제공되는 <code>errors</code> 패키지 외에 <a class=link href=https://github.com/pkg/errors target=_blank rel=noopener>https://github.com/pkg/errors</a> 라는 패키지를 이용하는 경우도 있으니 한 번 살펴보시면 좋을 것 같습니다.</p><p>자, 그럼 에러를 Wrap하라는 내용 하나 갖고 얘기를 주절 주절 길게 했으니 이제 실제로 웹 백엔드 개발에서의 에러 처리에 대해 알아봅시다~!</p><h2 id=-웹서버가-에러를-제대로-처리하지-않으면>🤔 웹서버가 에러를 제대로 처리하지 않으면?</h2><p>에러를 제대로 처리하지 않으면 일반적으로 웹 프레임워크들은 <code>500 Internal Error</code>로 응답하기 때문에 Client는 <code>500 Internal Error</code> 응답 밖에 받을 수 없습니다&mldr; 경우에 따라서는 Body는 올바르게 받을 수도 있긴하지만 매우 불안하죠. 에러의 원인을 모르니 클라이언트 측에서도 유저에게 <strong>&ldquo;알 수 없는 이유로 요청에 실패했습니다.&rdquo; 같은 메시지를 띄운다면 유저 경험도 당연히 좋지 않아지겠죠</strong>.</p><p>각 에러 케이스에 적절히 대응해서 응답하면 클라이언트와 유저가 모두 잘 반응할 수 있을 것입니다.</p><ul><li><strong>로그인하지 않은 유저의 요청이라 에러가 난 경우</strong> => 401 Unauthorized 응답 => 클라이언트는 유저를 로그인 창으로 안내함.</li><li>권한이 없는 유저의 요청이라 에러가 난 경우 => 403 Forbidden 응답 => 클라이언트는 유저에게 권한이 없어서 불가능하다는 친절한 오류 메시지를 띄움.</li><li><strong>존재하지 않는 리소스에 접근해 에러가 난 경우</strong> => 404 Not Found 응답 => 클라이언트는 유저에게 해당 리소스가 존재하지 않는다는 친절한 오류 메시지를 띄움.</li></ul><h2 id=fiber에서-에러-처리하는-법><code>Fiber</code>에서 에러 처리하는 법</h2><p><code>fiber</code>는 golang 웹 프레임워크들 중에서 문서가 참 잘 되어있는 편이라고 생각합니다. <a class=link href=https://docs.gofiber.io/guide/error-handling target=_blank rel=noopener>Error Handling</a> 파트를 보면 웹 프레임워크단에서는 어떻게 에러를 처리할 지 간단히 살펴볼 수 있습니다. Default Error Handler는 기본적으로 사용되는 것이고, Custom Error Handler을 따로 정의해 이용을 할 수도 있습니다. 하지만 저는 저번 시간에 다뤘던 <code>Middleware</code> 방식을 이용해 에러를 잘 처리해보겠습니다.</p><p><figure style=flex-grow:160;flex-basis:386px><a href=/blog/golang/how-to-backend-in-go-errorhandle/errorhandler.png data-size=1142x710><img src=/blog/golang/how-to-backend-in-go-errorhandle/errorhandler.png srcset="/blog/golang/how-to-backend-in-go-errorhandle/errorhandler_hucfef4304ecce075cbbc083aa9e1131cf_67229_480x0_resize_box_3.png 480w, /blog/golang/how-to-backend-in-go-errorhandle/errorhandler_hucfef4304ecce075cbbc083aa9e1131cf_67229_1024x0_resize_box_3.png 1024w" width=1142 height=710 loading=lazy alt=errorhandler.png></a><figcaption>errorhandler.png</figcaption></figure></p><p>간단히 조금 설명을 드리자면 Fiber에서 제공하는 Error Handler는 <code>fiber.Handler</code>들이 리턴한 error 타입을 실제 HTTP Response로 어떻게 변환을 할까에 대한 내용을 포함하고 있는 것이고, 제가 정의하는 미들웨어 방식의 Error Handler는 하나의 middleware로서 다른 <code>fiber.Handler</code>(미들웨어 혹은 요청 핸들러)가 리턴한 error을 fiber의 Default Error Handler가 이해할 수 있는 fiber의 error type으로 변환시키는 것이라고 보시면 됩니다.</p><h3 id=예시---username으로-user-조회>예시 - username으로 User 조회</h3><p>전체 코드는 이전 글들과 마찬가지로 제 깃헙 <a class=link href=https://github.com/umi0410/how-to-backend-in-go/tree/master/errorhandle target=_blank rel=noopener>umi0410/how-to-backend-in-go</a>에 올려두겠습니다. 글에서는 간단한 코드 비교와 HTTP 응답만 설명드릴게요.</p><p>에러를 잘 Wrapping한 정도에 따라 다르게 응답하는 세 가지 경우가 있습니다.</p><ul><li><strong>Worst</strong> - 에러를 어딘가에 정의하지도 Wrap하지도 않은 익명 에러 리턴 => 적절히 에러를 판단할 수 없어 500 Error</li><li><strong>Ungraceful</strong> - 어딘가에 정의된 Error을 리턴 => 에러를 적절히 판단해 올바른 Status code로 응답은 가능하지만 에러에 대한 자세한 문맥이나 설명이 없음.</li><li><strong>Graceful</strong> - 에러를 잘 Wrap해서 리턴 => 에러를 적절히 판단해 올바른 Status code로 응답할 수 있고 에러에 대한 자세한 문맥이나 설명도 클라이언트에게 제시됨.</li></ul><p>코드로 보면 다음과 같습니다.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kd>var</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>	<span class=nx>ErrResourceNotFound</span> <span class=p>=</span> <span class=nx>errors</span><span class=p>.</span><span class=nf>New</span><span class=p>(</span><span class=s>&#34;존재하지 않는 리소스&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=nx>users</span> <span class=p>=</span> <span class=p>[]</span><span class=o>*</span><span class=nx>User</span><span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=o>&amp;</span><span class=nx>User</span><span class=p>{</span><span class=nx>Name</span><span class=p>:</span> <span class=s>&#34;우미잉&#34;</span><span class=p>,</span> <span class=nx>Age</span><span class=p>:</span> <span class=mi>25</span><span class=p>,</span> <span class=nx>Username</span><span class=p>:</span> <span class=s>&#34;umi0410&#34;</span><span class=p>},</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>...</span> <span class=err>생략</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=p>(</span><span class=nx>svc</span> <span class=o>*</span><span class=nx>UserService</span><span class=p>)</span> <span class=nf>GetUserWorst</span><span class=p>(</span><span class=nx>username</span> <span class=kt>string</span><span class=p>)</span> <span class=p>(</span><span class=o>*</span><span class=nx>User</span><span class=p>,</span> <span class=kt>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=k>for</span> <span class=nx>_</span><span class=p>,</span> <span class=nx>user</span> <span class=o>:=</span> <span class=k>range</span> <span class=nx>users</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=k>if</span> <span class=nx>user</span><span class=p>.</span><span class=nx>Username</span> <span class=o>==</span> <span class=nx>username</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>			<span class=k>return</span> <span class=nx>user</span><span class=p>,</span> <span class=kc>nil</span>
</span></span><span class=line><span class=cl>		<span class=p>}</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=k>return</span> <span class=kc>nil</span><span class=p>,</span> <span class=nx>errors</span><span class=p>.</span><span class=nf>New</span><span class=p>(</span><span class=s>&#34;유저가 존재하지 않는 유저(username=&#34;</span> <span class=o>+</span> <span class=nx>username</span> <span class=o>+</span> <span class=s>&#34;)&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=p>(</span><span class=nx>svc</span> <span class=o>*</span><span class=nx>UserService</span><span class=p>)</span> <span class=nf>GetUserUngracefully</span><span class=p>(</span><span class=nx>username</span> <span class=kt>string</span><span class=p>)</span> <span class=p>(</span><span class=o>*</span><span class=nx>User</span><span class=p>,</span> <span class=kt>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=k>for</span> <span class=nx>_</span><span class=p>,</span> <span class=nx>user</span> <span class=o>:=</span> <span class=k>range</span> <span class=nx>users</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=k>if</span> <span class=nx>user</span><span class=p>.</span><span class=nx>Username</span> <span class=o>==</span> <span class=nx>username</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>			<span class=k>return</span> <span class=nx>user</span><span class=p>,</span> <span class=kc>nil</span>
</span></span><span class=line><span class=cl>		<span class=p>}</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=k>return</span> <span class=kc>nil</span><span class=p>,</span> <span class=nx>ErrResourceNotFound</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=p>(</span><span class=nx>svc</span> <span class=o>*</span><span class=nx>UserService</span><span class=p>)</span> <span class=nf>GetUserGracefully</span><span class=p>(</span><span class=nx>username</span> <span class=kt>string</span><span class=p>)</span> <span class=p>(</span><span class=o>*</span><span class=nx>User</span><span class=p>,</span> <span class=kt>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=k>for</span> <span class=nx>_</span><span class=p>,</span> <span class=nx>user</span> <span class=o>:=</span> <span class=k>range</span> <span class=nx>users</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=k>if</span> <span class=nx>user</span><span class=p>.</span><span class=nx>Username</span> <span class=o>==</span> <span class=nx>username</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>			<span class=k>return</span> <span class=nx>user</span><span class=p>,</span> <span class=kc>nil</span>
</span></span><span class=line><span class=cl>		<span class=p>}</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=k>return</span> <span class=kc>nil</span><span class=p>,</span> <span class=nx>fmt</span><span class=p>.</span><span class=nf>Errorf</span><span class=p>(</span><span class=s>&#34;입력된 username=%s: %w&#34;</span><span class=p>,</span> <span class=nx>username</span><span class=p>,</span> <span class=nx>ErrResourceNotFound</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>위와 같이 에러와 에러를 리턴하는 서비스 메소드들을 정의하고 커스텀 에러 핸들러로서의 미들웨어는 아래와 같이 작성했습니다.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kd>func</span> <span class=nf>customErrorHandler</span><span class=p>(</span><span class=nx>ctx</span> <span class=o>*</span><span class=nx>fiber</span><span class=p>.</span><span class=nx>Ctx</span><span class=p>)</span> <span class=kt>error</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=c1>// 다음 핸들러를 호출한 뒤
</span></span></span><span class=line><span class=cl><span class=c1></span>	<span class=c1>// 본 미들웨어의 작업은 사후처리!
</span></span></span><span class=line><span class=cl><span class=c1></span>	<span class=nx>err</span> <span class=o>:=</span> <span class=nx>ctx</span><span class=p>.</span><span class=nf>Next</span><span class=p>()</span>
</span></span><span class=line><span class=cl>	<span class=k>if</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=nx>log</span><span class=p>.</span><span class=nf>Error</span><span class=p>(</span><span class=nx>err</span><span class=p>)</span>
</span></span><span class=line><span class=cl>		<span class=k>if</span> <span class=nx>errors</span><span class=p>.</span><span class=nf>Is</span><span class=p>(</span><span class=nx>err</span><span class=p>,</span> <span class=nx>ErrResourceNotFound</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>			<span class=c1>// fiber의 Default Error Handler가 알아들을 수 있는 형태의 fiber Error을 리턴
</span></span></span><span class=line><span class=cl><span class=c1></span>			<span class=k>return</span> <span class=nx>fiber</span><span class=p>.</span><span class=nf>NewError</span><span class=p>(</span><span class=mi>404</span><span class=p>,</span> <span class=nx>err</span><span class=p>.</span><span class=nf>Error</span><span class=p>())</span>
</span></span><span class=line><span class=cl>		<span class=p>}</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=k>return</span> <span class=nx>err</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>이 미들웨어는 다른 일반적인 미들웨어들과는 약간은 다르게 동작한다고 볼 수 있는데요. <strong>대부분의 미들웨어들은 요청을 실제로 처리하기 전에 자신의 작업을 수행하는 사전처리 방식을 이용</strong>하는데요. 예를 들어 저번 글에서 살펴본 basic auth 미들웨어는 요청을 처리하는 핸들러 이전에 미들웨어로서 요청자의 인증 정보를 기입(사전처리)하는 역할을 했죠. 하지만 <strong>이 미들웨어는 요청을 처리하는 핸들러의 결과 에러를 이용하기 때문에 미들웨어가 시작하자마자 다음 핸들러를 호출하고 그 결과 에러를 이용합니다. 사후처리 방식이죠!</strong></p><p>그럼 이제 customErrorHandler가 리턴한 에러를 fiber의 Default Error Handler가 잘 처리해줄 것입니다.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>$ curl  http://localhost:8000/worst/jinsu -w &#34;\t%{http_code}\n&#34;
</span></span><span class=line><span class=cl>유저가 존재하지 않는 유저(username=jinsu)	500
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>$ curl  http://localhost:8000/ungraceful/jinsu -w &#34;\t%{http_code}\n&#34;
</span></span><span class=line><span class=cl>존재하지 않는 리소스	404
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>$ curl  http://localhost:8000/graceful/jinsu -w &#34;\t%{http_code}\n&#34; 
</span></span><span class=line><span class=cl>입력된 username=jinsu: 존재하지 않는 리소스	404
</span></span></code></pre></div><p>응답을 보시면 worst case의 경우 status code가 500이기 때문에 클라이언트가 해당 에러 케이스에 대해 올바른 처리를 할 수 있는 방법이 없습니다.. 응답을 정규표현식을 이용해 판단해야할까요..? ㅎㅎ&mldr;</p><p>그리고 ungraceful case의 경우 status code는 404로 잘 정의되었지만 응답 바디가 다소 불친절해 클라이언트측에서 디버깅하기가 힘들겠죠.</p><p>반면 graceful한 경우에는 status code도 잘 정의되었고 에러 바디도 자세합니다 굿굿이에요!</p><h2 id=마치며>마치며</h2><p>정말 작년까지는 에러를 핸들링하는 것에 대해 별 생각이 없었던 것 같습니다. 하지만 사이드 프로젝트를 하면서 에러를 제대로 처리하지 않아 <code>Index Out Of Range 런타임 에러</code> 하나에도 서버가 종료되어버린다거나 모든 에러를 <code>500 Internal Error</code>로 리턴해버리는 케이스를 겪으면서 &lsquo;<em>아&mldr; 에러를 잘 처리해야 하는구나</em>&lsquo;를 느껴볼 수 있었고, 실제 프로덕트를 개발하면서 &lsquo;<em>클라이언트 측에서 에러에 대한 적절한 액션을 취하기 위해선 status code나 error_type등을 잘 전달해야겠구나</em>&rsquo; 라는 생각도 해볼 수 있었던 것 같습니다.</p><p>게다가 Go에서 에러를 처리하는 방법에 대해 깊게 생각을 못해봤었는데 <a class=link href=https://github.com/yorkie-team/yorkie target=_blank rel=noopener>yorkie</a> 라는 오픈소스에 기여(<a class=link href=https://github.com/yorkie-team/yorkie/pull/222 target=_blank rel=noopener>PR #222</a> )하게 되면서 멘토님께서 잘 이끌어주셔서 에러를 Wrapping한다는 개념에 대해 자세히 알아볼 수 있었던 기회가 된 것 같습니다.</p><p>이번에 <a class=link href=https://www.depromeet.com/ target=_blank rel=noopener>디프만</a> 10기로 활동하게 되었는데 10기 인터뷰 당시에도 클라이언트와 협업하면서 어려웠던 점과 해결해나간 방식과 관련된 질문을 받았을 때에도 에러 핸들링과 관련지어 답변을 했을만큼 에러 핸들링은 &lsquo;<em>그래도 내가 한편으로는 아직 성장하고 있나보다.. ㅎㅎ</em>&lsquo;를 느낄 수 있었던 새로운 경험이었던 것 같습니다! 이 글을 읽으시는 <strong>여러분들도 이제 에러 잘 처리하고 저와 함께 클라이언트에게 칭찬받는 백엔드 개발자가 되어봅시다</strong>~!</p><h2 id=참고>참고</h2><ul><li>Working with Errors in Go 1.13 - <a class=link href=https://go.dev/blog/go1.13-errors target=_blank rel=noopener>https://go.dev/blog/go1.13-errors</a></li><li>Wrapping and Un-wrapping of error in Go (Golang) - <a class=link href=https://golangbyexample.com/wrapping-and-unwrapping-error-golang/ target=_blank rel=noopener>https://golangbyexample.com/wrapping-and-unwrapping-error-golang/</a></li><li>Add RPC Config validation and handle the errors (<a class=link href=https://github.com/yorkie-team/yorkie target=_blank rel=noopener>yorkie</a> PR #222) - <a class=link href=https://github.com/yorkie-team/yorkie/pull/222 target=_blank rel=noopener>https://github.com/yorkie-team/yorkie/pull/222</a></li><li>fiber docs Error Handling - <a class=link href=https://docs.gofiber.io/guide/error-handling target=_blank rel=noopener>https://docs.gofiber.io/guide/error-handling</a></li><li>Error는 검사만 하지말고, 우아하게 처리하세요. - <a class=link href=http://cloudrain21.com/golang-graceful-error-handling target=_blank rel=noopener>http://cloudrain21.com/golang-graceful-error-handling</a></li></ul></section><footer class=article-footer><section class=article-copyright><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg><span>Licensed under CC BY-NC-SA 4.0</span></section></footer></article><aside class=related-contents--wrapper><h2 class=section-title>관련 글</h2><div class=related-contents><div class="flex article-list--tile"><article class=has-image><a href=/blog/golang/how-to-backend-in-go-middleware/><div class=article-image><img src=/blog/golang/how-to-backend-in-go-middleware/log.a24b8a94710056cf81eeda03f1c3deee_hu6da6c55463c6a62988b186d685cd2c7c_23812_250x150_fill_box_smart1_3.png width=250 height=150 loading=lazy data-key data-hash="md5-okuKlHEAVs+B7toD8cPe7g=="></div><div class=article-details><h2 class=article-title>Golang으로 백엔드 개발하기 - 4. Custom Middleware(미들웨어) 작성해보기 (feat. fiber)</h2></div></a></article><article class=has-image><a href=/blog/golang/how-to-backend-in-go-webapp/><div class=article-image><img src=/blog/golang/how-to-backend-in-go-webapp/output.8af8bebb21fe028ac92f562189cb643b_hu537a11d34916ac1c2def7909b69ddbc5_22456_250x150_fill_box_smart1_3.png width=250 height=150 loading=lazy data-key data-hash="md5-ivi+uyH+AorJL1YhictkOw=="></div><div class=article-details><h2 class=article-title>Golang으로 백엔드 개발하기 - 3. 웹 애플리케이션 개발해보기 (feat. fiber)</h2></div></a></article><article class=has-image><a href=/blog/golang/how-to-backend-in-go-testcode/><div class=article-image><img src=/blog/golang/how-to-backend-in-go-testcode/test-with-ide.e83038fd0ad61ce8e85069ab96d89062_hu7b61495424919d2e1c8d663236a41b57_159980_250x150_fill_box_smart1_3.png width=250 height=150 loading=lazy data-key data-hash="md5-6DA4/QrWHOjoUGmrltiQYg=="></div><div class=article-details><h2 class=article-title>Golang으로 백엔드 개발하기 - 2. 테스트 코드 작성 및 Go에서 Mocking 이용하기 (gomock, testify 이용)</h2></div></a></article><article class=has-image><a href=/blog/golang/how-to-backend-in-go-db/><div class=article-image><img src=/blog/golang/how-to-backend-in-go-db/o2m-relation.73e7e39c70cfc03dd37c4e76a3c340b4_huda98d5d877ff5063fa9c786910881686_21160_250x150_fill_box_smart1_3.png width=250 height=150 loading=lazy data-key data-hash="md5-c+fjnHDPwD3TfE52o8NAtA=="></div><div class=article-details><h2 class=article-title>Golang으로 백엔드 개발하기 - 1. 데이터베이스 작업하기 (Ent 프레임워크 이용)</h2></div></a></article><article class=has-image><a href=/blog/golang/go-socket/><div class=article-image><img src=/blog/golang/go-socket/server-client-socket.25567a9a8e35e4878b3820141329b6da_huc5be35f5857cc34672b838b13057c03e_282874_250x150_fill_q75_box_smart1.jpeg width=250 height=150 loading=lazy data-key data-hash="md5-JVZ6mo415IeLOCAUEym22g=="></div><div class=article-details><h2 class=article-title>Go 언어로 적용해보는 Computer Science - Socket (Unix Domain Socket, Network/TCP/UDP Socket)</h2></div></a></article></div></div></aside><div class=disqus-container><div id=disqus_thread></div><script type=application/javascript>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//umi0410.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div><style>.disqus-container{background-color:var(--card-background);border-radius:var(--card-border-radius);box-shadow:var(--shadow-l1);padding:var(--card-padding)}</style><script>window.addEventListener("onColorSchemeChange",e=>{DISQUS&&DISQUS.reset({reload:!0})})</script><footer class=site-footer><section class=copyright>&copy;
2020 -
2022 Jinsu Playground</section><section class=powerby><a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a>로 만듦<br><a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a>의 <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=2.4.0>Stack</a></b> 테마 사용 중</section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.css integrity="sha256-c0uckgykQ9v5k+IqViZOZKc47Jn7KQil4/MP3ySA3F8=" crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.css integrity="sha256-SBLU4vv6CA6lHsZ1XyTdhyjJxCjPif/TRkjnsyGAGnE=" crossorigin=anonymous></main><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">Table of contents</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#시작하며>시작하며</a></li><li><a href=#-에러를-wrapping-하자>📦 에러를 Wrapping 하자</a></li><li><a href=#-웹서버가-에러를-제대로-처리하지-않으면>🤔 웹서버가 에러를 제대로 처리하지 않으면?</a></li><li><a href=#fiber에서-에러-처리하는-법><code>Fiber</code>에서 에러 처리하는 법</a><ol><li><a href=#예시---username으로-user-조회>예시 - username으로 User 조회</a></li></ol></li><li><a href=#마치며>마치며</a></li><li><a href=#참고>참고</a></li></ol></nav></div></section></aside></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.5/dist/vibrant.min.js integrity="sha256-5NovOZc4iwiAWTYIFiIM7DxKUXKWvpVEuMEPLzcm5/g=" crossorigin=anonymous defer></script><script type=text/javascript src=/ts/main.js defer></script>
<script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>