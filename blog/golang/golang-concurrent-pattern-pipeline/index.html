<!doctype html><html lang=en class="js csstransforms3d"><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.80.0"><meta name=description content="Golangì˜ Concurrent pattern ì¤‘ í•˜ë‚˜ë¡œì„œ Channelì„ ë°”íƒ•ìœ¼ë¡œ ì»¤ë®¤ë‹ˆì¼€ì´ì…˜í•˜ë©° ì‘ì—…ì„ ì§„í–‰í•˜ëŠ” íŒ¨í„´ì¸
Pipeline patternì— ëŒ€í•´ ê°„ëµí•´ ì†Œê°œí•´ë´¤ê³ , ì–¸ì œ ì‚¬ìš©í•´ì•¼í• ì§€ ê·¸ use caseì— ëŒ€í•´ ì•Œì•„ë³´ì•˜ìŠµë‹ˆë‹¤."><meta name=author content="umi0410"><link rel=icon href=https://emojipedia-us.s3.dualstack.us-west-1.amazonaws.com/thumbs/120/google/241/whale_1f40b.png type=image/png><title>Goì˜ Pipeline pattern. ì–¸ì œ ì‚¬ìš©í•´ì•¼í• ê¹Œ? - Golang concurrent patterns :: Jinsu Playground</title><link href=/css/nucleus.css?1610376579 rel=stylesheet><link href=/css/fontawesome-all.min.css?1610376579 rel=stylesheet><link href=/css/hybrid.css?1610376579 rel=stylesheet><link href=/css/featherlight.min.css?1610376579 rel=stylesheet><link href=/css/perfect-scrollbar.min.css?1610376579 rel=stylesheet><link href=/css/auto-complete.css?1610376579 rel=stylesheet><link href=/css/atom-one-dark-reasonable.css?1610376579 rel=stylesheet><link href=/css/theme.css?1610376579 rel=stylesheet><link href=/css/hugo-theme.css?1610376579 rel=stylesheet><link href=/css/theme-umi0410-blue.css?1610376579 rel=stylesheet><link href=/css/custom-umi0410.css?1610376579 rel=stylesheet><script src=/js/jquery-3.3.1.min.js?1610376579></script><style>:root #header+#content>#left>#rlblock_left{display:none!important}:not(pre)>code+span.copy-to-clipboard{display:none}</style></head><body data-url=/blog/golang/golang-concurrent-pattern-pipeline/><nav id=sidebar><div id=header-wrapper><div id=header><a id=logo href=https://umi0410.github.io><span style=font-weight:700;font-size:20px>Jinsu Playground</span></a></div><div id=profile-wrapper><style>#sidebar-profile-message{text-align:left;word-break:keep-all}p{margin-top:0;margin-bottom:0;margin-left:10px;font-size:16px}</style><a href=/><img src=/media/profile.png style=width:170px;margin-top:15px></a><div id=sidebar-profile-message><b>ë°•ì§„ìˆ˜ (umi0410)</b></br><p>Golang, Cloud services, MSA, ì»¨í…Œì´ë„ˆì™€ ìë™í™”, ê¹”ë”í•œ ì•„í‚¤í…ì³ì— ê´€ì‹¬ì´ ë§ìŠµë‹ˆë‹¤.</p></div></div></div><div class=highlightable><ul class=topics><li data-nav-id=/portfolio/ title="About Jinsu Park (umi0410)" class=dd-item><a href=/portfolio/>Portfolio</a></li><li data-nav-id=/experiences/ title=Experiences class=dd-item><a href=/experiences/>Experiences</a><ul><li data-nav-id=/experiences/megazone-cloud/ title="ë©”ê°€ì¡´ í´ë¼ìš°ë“œ ë°ë¸Œì˜µìŠ¤ ì¸í„´ í›„ê¸°" class=dd-item><a href=/experiences/megazone-cloud/><b></b>Megazone Cloud DevOps</a><ul><li data-nav-id=/experiences/megazone-cloud/stargate-infra/ title="Stargateë¼ëŠ” ì¸í”„ë¼ êµ¬ì¶•ê¸°" class=dd-item><a href=/experiences/megazone-cloud/stargate-infra/><b></b>ì¸í”„ë¼ êµ¬ì¶•ê¸°</a></li><li data-nav-id=/experiences/megazone-cloud/ci-cd-pipeline/ title="Github Action, Spinnakerì„ ì´ìš©í•œ CI/CD íŒŒì´í”„ë¼ì¸ êµ¬ì¶•ê¸°" class=dd-item><a href=/experiences/megazone-cloud/ci-cd-pipeline/><b></b>CI/CD íŒŒì´í”„ë¼ì¸</a></li><li data-nav-id=/experiences/megazone-cloud/argo-poc/ title="Argo Projectë“¤ì— ëŒ€í•œ PoC(ê°œë… ì¦ëª…) ì§„í–‰" class=dd-item><a href=/experiences/megazone-cloud/argo-poc/><b></b>Argo Project PoC</a></li><li data-nav-id=/experiences/megazone-cloud/spaceone-helm/ title="SpaceONE Helm Chart ê°œë°œ" class=dd-item><a href=/experiences/megazone-cloud/spaceone-helm/><b></b>Helm Chart ê°œë°œ</a></li><li data-nav-id=/experiences/megazone-cloud/spacectl/ title="SpaceONE CLI Clientì¸ spacectl ì„¤ê³„ ë° ê°œë°œ" class=dd-item><a href=/experiences/megazone-cloud/spacectl/><b></b>CLI Client ì„¤ê³„.ê°œë°œ</a></li></ul></li></ul></li><li data-nav-id=/blog/ title=Blog class="dd-item
parent"><a href=/blog/>Blog</a><ul><li data-nav-id=/blog/aws/ title="Category: AWS" class=dd-item><a href=/blog/aws/>AWS</a><ul><li data-nav-id=/blog/aws/aws_eks_elb/ title="EKS K8sì—ì„œ ELB(ALB, NLB) ì œëŒ€ë¡œ ì„¤ì •í•˜ë©° ì‚¬ìš©í•˜ê¸°" class=dd-item><a href=/blog/aws/aws_eks_elb/>EKS K8sì—ì„œ ELB(ALB, NLB) ì œëŒ€ë¡œ ì„¤ì •í•˜ë©° ì‚¬ìš©í•˜ê¸°</a></li></ul></li><li data-nav-id=/blog/golang/ title=Golang class="dd-item
parent"><a href=/blog/golang/>Golang</a><ul><li data-nav-id=/blog/golang/go-vs-java-oop/ title="Go vs Java - Goì—ì„œì˜ ê°ì²´ ì§€í–¥" class=dd-item><a href=/blog/golang/go-vs-java-oop/><b></b>Go vs Java - Goì—ì„œì˜ ê°ì²´ ì§€í–¥</a></li><li data-nav-id=/blog/golang/golang-concurrent-pattern-pipeline/ title="Goì˜ Pipeline pattern. ì–¸ì œ ì‚¬ìš©í•´ì•¼í• ê¹Œ? - Golang concurrent patterns" class="dd-item active"><a href=/blog/golang/golang-concurrent-pattern-pipeline/><b></b>Goì˜ Pipeline pattern. ì–¸ì œ ì‚¬ìš©í•´ì•¼í• ê¹Œ?</a></li></ul></li></ul></li></ul><section id=shortcuts><h3>More</h3><ul><li><a class=padding href=https://github.com/umi0410><i class="fab fa-github"></i>Github</a></li></ul></section><section id=footer><p>Built with <a href=https://github.com/matcornic/hugo-theme-learn><i class="fas fa-heart"></i></a>from <a href=https://getgrav.org>Grav</a> and <a href=https://gohugo.io/>Hugo</a></p></section></div></nav><section id=body><div id=overlay></div><div class="padding highlightable"><div><div id=top-bar><div id=top-github-link><a class=github-link title="Edit this page" href=https://github.com/umi0410/umi0410.github.io/edit/master/content/blog/golang/golang-concurrent-pattern-pipeline.md target=blank><i class="fas fa-code-branch"></i><span id=top-github-link-text>Edit this page</span></a></div><div id=breadcrumbs itemscope itemtype=http://data-vocabulary.org/Breadcrumb><span id=sidebar-toggle-span><a href=# id=sidebar-toggle data-sidebar-toggle><i class="fas fa-bars"></i></a></span><span id=toc-menu><i class="fas fa-list-alt"></i></span><span class=links><a href=/>About Jinsu Park (umi0410)</a> > <a href=/blog/>Blog</a> > <a href=/blog/golang/>Golang</a> > Goì˜ Pipeline pattern. ì–¸ì œ ì‚¬ìš©í•´ì•¼í• ê¹Œ? - Golang concurrent patterns</span></div><div class=progress><div class=wrapper><nav id=TableOfContents><ul><li><a href=#-ì‹œì‘í•˜ë©°>âœ‹ ì‹œì‘í•˜ë©°</a></li><li><a href=#-pipeline-patternì´ë€>â“ Pipeline patternì´ë€?</a><ul><li><a href=#pipeline-patternì˜-í”í•œ-ì˜ˆì‹œë¡œ-square-í•˜ëŠ”-ì˜ˆì œë¥¼-ì„¤ëª…í•˜ëŠ”-ê¸€ë“¤>Pipeline patternì˜ í”í•œ ì˜ˆì‹œë¡œ square í•˜ëŠ” ì˜ˆì œë¥¼ ì„¤ëª…í•˜ëŠ” ê¸€ë“¤</a></li></ul></li><li><a href=#-ì–¸ì œ-ì“°ëŠ”-ê²Œ-ì¢‹ì„ê¹Œ>ğŸ¤” ì–¸ì œ ì“°ëŠ” ê²Œ ì¢‹ì„ê¹Œ?</a></li><li><a href=#ì˜ˆì‹œ-í”„ë¡œê·¸ë¨>ì˜ˆì‹œ í”„ë¡œê·¸ë¨</a><ul><li><a href=#í”„ë¡œê·¸ë¨-ì„¤ëª…>í”„ë¡œê·¸ë¨ ì„¤ëª…</a></li><li><a href=#-ë²¤ì¹˜ë§ˆí¬-ê²°ê³¼-ë¹„êµ>ğŸ“‰ ë²¤ì¹˜ë§ˆí¬ ê²°ê³¼ ë¹„êµ</a></li></ul></li><li><a href=#ë§ˆë¬´ë¦¬>ë§ˆë¬´ë¦¬</a></li><li><a href=#ì°¸ê³ >ì°¸ê³ </a></li></ul></nav></div></div></div></div><div id=head-tags></div><div id=body-inner><h1>Goì˜ Pipeline pattern. ì–¸ì œ ì‚¬ìš©í•´ì•¼í• ê¹Œ? - Golang concurrent patterns</h1><div class=wrapper><hr style=margin-top:20px;margin-bottom:20px></hr><b>Table of Contents</b><nav id=TableOfContents><ul><li><a href=#-ì‹œì‘í•˜ë©°>âœ‹ ì‹œì‘í•˜ë©°</a></li><li><a href=#-pipeline-patternì´ë€>â“ Pipeline patternì´ë€?</a><ul><li><a href=#pipeline-patternì˜-í”í•œ-ì˜ˆì‹œë¡œ-square-í•˜ëŠ”-ì˜ˆì œë¥¼-ì„¤ëª…í•˜ëŠ”-ê¸€ë“¤>Pipeline patternì˜ í”í•œ ì˜ˆì‹œë¡œ square í•˜ëŠ” ì˜ˆì œë¥¼ ì„¤ëª…í•˜ëŠ” ê¸€ë“¤</a></li></ul></li><li><a href=#-ì–¸ì œ-ì“°ëŠ”-ê²Œ-ì¢‹ì„ê¹Œ>ğŸ¤” ì–¸ì œ ì“°ëŠ” ê²Œ ì¢‹ì„ê¹Œ?</a></li><li><a href=#ì˜ˆì‹œ-í”„ë¡œê·¸ë¨>ì˜ˆì‹œ í”„ë¡œê·¸ë¨</a><ul><li><a href=#í”„ë¡œê·¸ë¨-ì„¤ëª…>í”„ë¡œê·¸ë¨ ì„¤ëª…</a></li><li><a href=#-ë²¤ì¹˜ë§ˆí¬-ê²°ê³¼-ë¹„êµ>ğŸ“‰ ë²¤ì¹˜ë§ˆí¬ ê²°ê³¼ ë¹„êµ</a></li></ul></li><li><a href=#ë§ˆë¬´ë¦¬>ë§ˆë¬´ë¦¬</a></li><li><a href=#ì°¸ê³ >ì°¸ê³ </a></li></ul></nav><hr style=margin-top:0;margin-bottom:0></hr></div><h2 id=-ì‹œì‘í•˜ë©°>âœ‹ ì‹œì‘í•˜ë©°</h2><p><code>Go</code>ë¥¼ ê³µë¶€í•˜ê¸° ì‹œì‘í•œ ì§€ë„ ë²Œì¨ ëª‡ ë‹¬ì´ ì§€ë‚œ ê²ƒ ê°™ë‹¤. ë°ë¸Œì˜µìŠ¤ ì¸í„´ì„ ë§ˆì¹˜ë©´ì„œ íŠ¹íˆë‚˜ ê´€ì‹¬ìˆì—ˆë˜ Goë¥¼ ê³µë¶€í•˜ê¸° ì‹œì‘í–ˆì—ˆê³ , ì§€ë‚œ ëª‡ ë‹¬ê°„ AWS KRUGë‚´ì˜ ì†Œëª¨ì„ì¸ AUSGì˜ ìŠ¤í„°ë”” í™œë™ìœ¼ë¡œ Goë¥¼ ì£¼ì œë¡œ ê³µë¶€í•´ì™”ë‹¤. Golangì˜ ê½ƒì´ë¼ê³  í•  ìˆ˜ ìˆëŠ” ìš”ì†Œë“¤ì´ ëª‡ ê°œ ìˆì—ˆëŠ”ë° ë‚˜ëŠ” ê·¸ ì¤‘ <code>goroutine</code>ê³¼ <code>channel</code>ì—ì„œ ë§¤ë ¥ì„ ëŠê¼ˆê³  ê·¸ë¥¼ ë°”íƒ•ìœ¼ë¡œí•œ <code>concurrency pattern</code>ë“¤ì— ëŒ€í•´ ì´ë˜ ì €ë˜ ë§ì´ ì•Œì•„ë´ì™”ë‹¤.</p><p>í•˜ì§€ë§Œ concurrency patternì´ ë­ê³ , ì–´ë–»ê²Œ ì‚¬ìš©í•˜ëŠ”ì§€ì— ëŒ€í•´ì„œëŠ” ì—¬ëŸ¬ ê¸€ì„ ì°¾ì•„ë³¼ ìˆ˜ ìˆì—ˆì§€ë§Œ ì´ê²Œ ì™œ ì¢‹ê³  ì–¸ì œ ì“°ë©´ ì¢‹ì„ì§€ì— ëŒ€í•œ ë‚´ìš©ì€ ì°¾ì•„ë³´ê¸° í˜ë“¤ì—ˆë‹¤. í•­ìƒ ì–´ë–¤ ê¸°ìˆ ì„ ì ‘í•  ë•Œ &ldquo;<em>ì™œ ì¢‹ì€ë°?</em>&ldquo;ì™€ &ldquo;<em>ì–¸ì œ ì“°ë©´ ì¢‹ì€ë°?</em>&ldquo;ë¥¼ ë§ì´ ë”°ì§€ëŠ” í¸ì´ë¼ì„œ ëŠ˜ ê¶ê¸ˆì¦ì— ë‚¨ì•„ìˆì—ˆë‹¤.</p><p>ê·¸ëŸ¬ë˜ ì¤‘ ì–¼ë§ˆ ì „ ë‚˜ì˜ ê¶ê¸ˆì¦ì„ í•´ì†Œì‹œì¼œì£¼ëŠ” ê°„ë‹¨í•œ ëŒ“ê¸€ì„ ë³´ê²Œ ë˜ì—ˆê³ , ê·¸ë¥¼ ë°”íƒ•ìœ¼ë¡œ ëª‡ ê°€ì§€ ì„œì¹˜ë¥¼ í•´ë³¸ ê²°ê³¼ concurrency pattern ì¤‘ í•˜ë‚˜ì¸ <code>pipeline pattern</code>ì„ ì–¸ì œ ì“°ë©´ ì¢‹ì„ì§€ ì•Œì•„ë³´ì•˜ë‹¤.</p><h2 id=-pipeline-patternì´ë€>â“ Pipeline patternì´ë€?</h2><p><img src=illustration.png alt=illustration.png></p><p>Pipeline patternì€ golangì˜ Concurrency pattern ì¤‘ í•˜ë‚˜ì´ë‹¤. ì‰½ê²Œ ë§í•˜ìë©´ í•¨ìˆ˜ì˜ ì¸ìì— ê°’ì„ ì „ë‹¬í•´ ì‘ì—…í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ <code>channel</code> ì„ í†µí•´ ì‹¤ì‹œê°„ìœ¼ë¡œ <strong>í•¨ìˆ˜(í˜¹ì€ goroutine)ë“¤ë¼ë¦¬ ì»¤ë®¤ë‹ˆì¼€ì´ì…˜ì„ í•˜ë©° ì‘ì—…ì„ ì§„í–‰</strong>í•˜ëŠ” ê²ƒì´ë‹¤. ì‹¤ì‹œê°„ìœ¼ë¡œ í•¨ìˆ˜ë“¤ë¼ë¦¬ ì»¤ë®¤ë‹ˆì¼€ì´ì…˜í•˜ë©° dataë¥¼ ì „ì†¡í•˜ê¸° ë•Œë¬¸ì— data streaming ê°™ì€ ëŠë‚Œì´ë¼ê³  ë³¼ ìˆ˜ ìˆê² ë‹¤.</p><p>ì¼ë°˜ì ìœ¼ë¡œëŠ” í•œ í•¨ìˆ˜ì—ì„œ ì‘ì—…ì´ ëª¨ë‘ ëë‚œ ë’¤ ê·¸ ê²°ê³¼ê°’ì„ ë¦¬í„´í•˜ê³ , ë˜ ë‹¤ì‹œ ê·¸ ê²°ê³¼ ê°’ì„ ì¸í’‹ìœ¼ë¡œ ì–´ë–¤ í•¨ìˆ˜ê°€ ì‘ì—…ì„ í•˜ê³  í•´ë‹¹ ì‘ì—…ì´ ëª¨ë‘ ëë‚œ ë’¤ ë˜ ë‹¤ë¥¸ ê²°ê³¼ê°’ì„ ë¦¬í„´í•˜ëŠ” í˜•íƒœë¡œ ì§„í–‰ì´ ëœë‹¤. í•˜ì§€ë§Œ Pipeline patternì—ì„œëŠ” í•œ ì‘ì—…ì´ ëª¨ë‘ ì™„ë£Œë˜ì§€ ì•Šì•˜ë‹¤í•˜ë”ë¼ë„ í•´ë‹¹ ì‘ì—…ì˜ ë¶€ë¶„ ë¶€ë¶„ì˜ ë°ì´í„°ë¥¼ ë‹´ëŠ” channelì„ ë¦¬í„´í•˜ê³ , ë‹¤ë¥¸ ì‘ì—…ì€ í•´ë‹¹ channelì„ ì¸í’‹ìœ¼ë¡œ í•˜ì—¬ ë¶€ë¶„ ë¶€ë¶„ì˜ ë°ì´í„°ë¥¼ channelì—ì„œ êº¼ë‚´ ë°”ë¡œ ë°”ë¡œ ì‘ì—…í•œë‹¤.</p><p><img src=python-generator.png alt=python-generator.png></p><p><em><center>generatorì„ ì´ìš©í•œ lazy evaluation. 0, 1, 2ë¥¼ ëª¨ë‘ Insertí•œ ë’¤ square and print í•˜ëŠ” ê²ƒì´ ì•„ë‹Œ í•˜ë‚˜ì”© ì‹¤ì‹œê°„ìœ¼ë¡œ ì§„í–‰</center></em></p><p>ì´ëŠ” ë§ˆì¹˜ <strong>Pythonì˜ <code>Generator</code>ì„ í†µí•œ <code>Lazy evaluation</code>ì„ ì´ìš©í•  ë•Œì™€ ìœ ì‚¬</strong>í•˜ê²Œ ë³¼ ìˆ˜ëŠ” ìˆê² ë‹¤. í•˜ì§€ë§Œ ë§ì€ ì°¨ì´ì ì´ ì¡´ì¬í•˜ê¸´ í• í…ë° ìš°ì„  generatorëŠ” thread-safeí•˜ì§€ ì•Šì€(<a href=https://stackoverflow.com/questions/1131430/are-generators-threadsafe>stackoverflow ì°¸ê³ </a>) ë°˜ë©´ channelì€ ì—¬ëŸ¬ goroutineì—ì„œ í•œ channelì— ì ‘ê·¼í•´ë„ thread-safeí•˜ë‹¤. &lsquo;thread-safeí•œê°€&rsquo;ê°€ ì¤‘ìš”í•œ ì´ìœ ëŠ” í›„ì— ì ê¹ ì†Œê°œí•  <code>fan-in fan-out pattern</code>ì´ ë°”ë¡œ pipeline patternì´ ì—¬ëŸ¬ goroutineì—ì„œ ì´ë£¨ì–´ì§€ëŠ” ê²½ìš°ì´ê¸° ë•Œë¬¸ì´ë‹¤.</p><p>(<em>ì‚¬ì‹¤ ë‚´ê°€ Pipeline patternì„ ì–´ë””ì— ì‚¬ìš©í•  ì§€ ëª°ëë˜ ì´ìœ ëŠ” Lazy evaluationê³¼ ê°™ì€ ê°œë…ì´ ì—†ì—ˆê¸° ë•Œë¬¸ì´ ì•„ë‹ê¹Œì‹¶ê¸°ë„ í•˜ë‹¤.</em>)</p><h3 id=pipeline-patternì˜-í”í•œ-ì˜ˆì‹œë¡œ-square-í•˜ëŠ”-ì˜ˆì œë¥¼-ì„¤ëª…í•˜ëŠ”-ê¸€ë“¤>Pipeline patternì˜ í”í•œ ì˜ˆì‹œë¡œ square í•˜ëŠ” ì˜ˆì œë¥¼ ì„¤ëª…í•˜ëŠ” ê¸€ë“¤</h3><p>ì¢…ì¢… Pipeline patternì˜ ì˜ˆì‹œë¥¼ ì•Œì•„ë³´ë©´ì„œ square ì‘ì—…ì„ í•˜ëŠ” ì˜ˆì œë“¤ì„ ëª‡ ê°œ ë´¤ë˜ ê²ƒ ê°™ì€ë°, ê·¸ ì¤‘ ì°¸ê³ í•  ìˆ˜ ìˆëŠ” ì˜ˆì‹œë“¤ì„ ì œì‹œí•´ë³¸ë‹¤. square ì‘ì—…ì´ pipeline patternì— íš¨ìœ¨ì ì´ë¼ê¸°ë³´ë‹¤ëŠ” ê·¸ëƒ¥ ì„ì˜ì˜ ì˜ˆì‹œë¼ê³  ìƒê°í•œë‹¤.</p><p>ì´ ê¸€ì€ Pipeline patternì„ ì–¸ì œ ì‚¬ìš©í•˜ë©´ ì¢‹ì„ì§€ì— ì´ˆì ì„ ë§ì¶”ì—ˆê¸°ì— Pipeline patternì´ ë­”ì§€, ê·¸ ì‚¬ìš©ë²•ì€ ì–´ë–»ê²Œ ë˜ëŠ”ì§€ ë“±ì˜ ë‚´ìš©ì„ ëª¨ë¥´ëŠ” ìƒíƒœë¼ë©´ ì•„ë˜ ê¸€ë“¤ì„ ì¶”ì²œí•œë‹¤. (íŠ¹íˆ Aidan Baeë‹˜ì˜ ë¸”ë¡œê·¸ì—ëŠ” pipeline pattern ì™¸ì—ë„ ë‹¤ì–‘í•œ Go ê´€ë ¨ ë‚´ìš©ì„ ì˜ ì í˜€ìˆë‹¤.)</p><ul><li>Aidan Baeë‹˜ì˜ ì•„ì£¼ ê°„ë‹¨í•œ Pipeline pattern ì˜ˆì‹œ - <a href=https://aidanbae.github.io/code/golang-design/pipeline/>https://aidanbae.github.io/code/golang-design/pipeline/</a></li><li>GoBlogì˜ ê°„ë‹¨í•œ ë‚´ìš©ë¶€í„° ê½¤ë‚˜ ì–´ë ¤ìš´ ë‚´ìš©ê¹Œì§€ ë“¤ì–´ê°€ëŠ” ê²ƒ ê°™ì€ë°, ë‚´ìš©ë„ ê¸¸ê³  ì§§ì€ ì½”ë“œì— ì–µì§€ë¡œ ë§ì€ ë‚´ìš©ì„ ë¼ì›Œë„£ì€ ëŠë‚Œ.. <a href=https://blog.golang.org/pipelines>https://blog.golang.org/pipelines</a></li></ul><h2 id=-ì–¸ì œ-ì“°ëŠ”-ê²Œ-ì¢‹ì„ê¹Œ>ğŸ¤” ì–¸ì œ ì“°ëŠ” ê²Œ ì¢‹ì„ê¹Œ?</h2><p>ì•ì„  lazy evaluation ê´€ë ¨ëœ ë‚´ìš©ê³¼ <a href=https://www.reddit.com/r/golang/comments/7rjdw6/go_go_go_stream_processing_for_go/>ì´ ê¸€ì˜ ëŒ“ê¸€</a>(goë¡œ ì‘ì—…ì„ streamí•˜ë¼ëŠ” ê¸€ì— &ldquo;<em>ë„ˆ ì •ë§ ì €ë ‡ê²Œ streamí•˜ëŠ” ê²Œ ì¢‹ë‹¤ê³  ìƒê°í•´? ì´ ê²½ìš° ì•„ë‹ˆë©´ ê·¸ë‹¥ ì˜ ëª¨ë¥´ê² ëŠ”ë°?</em>&ldquo;ë¼ëŠ” ëŒ“ê¸€)ì´ ë‚˜ì˜ ì´í•´ë¥¼ ë„ì™€ì£¼ì—ˆë‹¤. <a href=https://labs.bawi.io/7-reasons-to-use-pipeline-architecture-93346f604b87>Pipeline architectureë¥¼ ì‚¬ìš©í•´ì•¼í•˜ëŠ” 7ê°€ì§€ ì´ìœ ë¼ëŠ” ê¸€</a>ì„ ì½ì–´ë³´ê¸°ë„ í–ˆì§€ë§Œ ì—¬ê¸°ì˜ ë‚´ìš©ì€ ì‹¤ì§ˆì ìœ¼ë¡œ ì™œ ê·¸ ì¥ì ì„ ê°–ëŠ”ì§€ì— ëŒ€í•œ ì„¤ëª…ì´ë‚˜ ë…¼ë¦¬ê°€ ë¶€ì¡±í–ˆë‹¤. (<em><del>ë‹¤ì†Œ Goì™€ Pipeline patternì— ëŒ€í•œ ë¬´ì¡°ê±´ì  ì‚¬ë‘ìœ¼ë¡œ ëŠê»´ì§..ã…ã…&mldr;</del></em>)</p><p>ë‚´ ìƒê°ì—ëŠ” ì•„ë˜ ë‘ ê°€ì§€ ê²½ìš°ì— Pipeline patternì„ ì´ìš©í•˜ëŠ” ê²ƒì´ ì¢‹ì„ ê²ƒ ê°™ë‹¤.</p><ul><li><strong>Input ì‘ì—…ì„ ëª¨ë‘ ìˆ˜í–‰í•˜ëŠ” ë°ì— ì˜¤ëœ ì‹œê°„ì´ ê±¸ë¦¬ëŠ” ê²½ìš°</strong></li><li><strong>ì‘ì—…í•˜ëŠ” ë°ì´í„°ì˜ ì–‘ì´ ë„ˆë¬´ ì»¤ì„œ Memoryë¥¼ ë§ì´ ì ìœ í•˜ë¯€ë¡œ ìª¼ê°œì„œ ë°”ë¡œ ë°”ë¡œ ì²˜ë¦¬í•˜ê³  ì‹¶ì€ ê²½ìš°</strong></li></ul><p>&lsquo;<em>ë””ë²„ê¹…í•˜ê¸° ì‰½ë‹¤</em>&lsquo;ê±°ë‚˜ &lsquo;<em>ì½”ë“œë¥¼ ì•Œì•„ë³´ê¸° ì‰½ë‹¤</em>&rsquo; ë“±ë“±ì˜ ê¸€ì„ ë³´ê¸´í–ˆë˜ ê²ƒ ê°™ì€ë° ê°œì¸ì ìœ¼ë¡œëŠ” ê·¸ëƒ¥ pipelineê³¼ channelì„ ì•ˆ ì“°ê³  ê·¸ëƒ¥ ë°˜ë³µë¬¸ì„ ëŒë¦¬ë©´ì„œ ë°ì´í„°ë¥¼ í†µì§¸ë¡œ ì‘ì—…í•˜ëŠ” ê²Œ ë””ë²„ê¹…ì´ë‚˜ ê°€ë…ì„±ë©´ìœ¼ë¡œ í›¨ì”¬ ìœ ë¦¬í•˜ë‹¤ê³  ìƒê°í•œë‹¤. ì¦‰ Concurrent patternì˜ ì¥ì ì€ íŠ¹ì • use caseì—ì„œì˜ ì„±ëŠ¥ì ì¸ ì¸¡ë©´ì´ë¼ê³  ìƒê°í•œë‹¤.</p><p>ê·¸ë¦¬ê³  ì´ê±´ ì—¬ë‹´ì¸ë° <strong>goì˜ channelì„ í†µí•œ data ì „ë‹¬ì´ ì¼ë°˜ì ìœ¼ë¡œ ë¹ ë¥¸ ê±´ ì ˆëŒ€ ì•„ë‹ˆë‹¤.</strong> channelì€ ìš°ì„  <code>thread safe</code>í•˜ê¸°ë•Œë¬¸ì— ì¼ë°˜ì ì¸ ì‘ì—…ì—ì„œëŠ” <strong>thread-unsafeí•œ ë°©ì‹ë³´ë‹¤ ëŠë¦° ê²ƒì´ ë‹¹ì—°</strong>í•˜ë‹¤. ë˜í•œ channelì€ ë‹¨ìˆœí•œ lock ê¸°ëŠ¥ ì™¸ì—ë„ ë‹¤ë¥¸ goroutine(í˜¹ì€ thread í˜¹ì€ function) ê°„ì˜ ë°ì´í„° ì „ì†¡, channelì— ëŒ€í•œ ë°˜ë³µ, ì—´ì—ˆëŠ”ì§€ ë‹«ì•˜ëŠ”ì§€ì— ëŒ€í•œ ì²´í¬ ë“±ë“± ë‹¤ì–‘í•œ ê¸°ëŠ¥ë„ ê°–ê³ ìˆê¸°ë•Œë¬¸ì— <strong>mutexì— ë¹„í•´ì„œë„ í›¨ì”¬ ëŠë¦° ë“¯í•˜ë‹¤</strong>. ê·¸ë ‡ê¸° ë•Œë¬¸ì— ìœ„ì—ì„œ ë‚˜ì—´í–ˆë“¯ Input ì‘ì—…ì´ ì˜¤ë˜ ê±¸ë¦¬ê±°ë‚˜ Memory ì ìœ ëŸ‰ì„ ì¤„ì´ê¸° ìœ„í•œ ê²½ìš°ì—ëŠ” channelì„ ì´ìš©í•œ Pipeline patternìœ¼ë¡œ ì‹¤ì‹œê°„ìœ¼ë¡œ ì‘ì—…í•˜ë©´ ìœ ë¦¬í•  ê²ƒì´ë¼ê³  ìƒê°í•œ ê²ƒì´ë‹¤.</p><p>ê·¸ë¦¬ê³  ì¶”ê°€ì ìœ¼ë¡œ ì•ì—ì„œ <code>Fan-in Fan-out</code> patternì—ì„œëŠ” ì—¬ëŸ¬ Goroutineì— ëŒ€í•œ Pipeline patternì´ ì ìš©ëœë‹¤ê³ í–ˆëŠ”ë°, Fan-in Fan-outì´ë€ ì—¬ëŸ¬ goroutineì´ í•˜ë‚˜ì˜ channelì— ê°’ì„ ë„£ê±°ë‚˜ ë¹¼ëŠ” êµ¬ì¡°ë¥¼ ë§í•œë‹¤. ì´ êµ¬ì¡°ì˜ ì¥ì ì€ ì¼ë°˜ì ì¸ Pipeline Patternì—ì„œ ê° ë‹¨ê³„ê°€ í•˜ë‚˜ì˜ goroutineë§Œì„ ì´ìš©í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ì—¬ëŸ¬ goroutineì„ ì´ìš©í•  ìˆ˜ ìˆë‹¤ëŠ” ì ì´ë‹¤. CPU boundí•œ ì‘ì—…ì´ ì•„ë‹Œ IO Blockì´ ì£¼ìš” latencyë¥¼ ì°¨ì§€í•˜ëŠ” ê²½ìš°ëŠ” Goroutineì„ ëŠ˜ë ¤ì£¼ë©´ concurrentí•˜ê²Œ ì‘ì—…í•  ìˆ˜ ìˆê¸°ë•Œë¬¸ì— ì„±ëŠ¥ì´ ì¢‹ì•„ì§€ë”ë¼. Fan-in Fan-out patternì— ëŒ€í•´ì„œëŠ” ê¸°íšŒê°€ ëœë‹¤ë©´ ë” ìì„¸íˆ ë‹¤ë¤„ë³´ê² ë‹¤.</p><p><strong>ì°¸ê³ </strong></p><ul><li>Mutexë³´ë‹¤ channelì´ ëŠë¦¬ë‹¤ëŠ” ë²¤ì¹˜ë§ˆí¬ ê¸€ - <a href=http://www.dogfootlife.com/archives/452>http://www.dogfootlife.com/archives/452</a></li><li>Mutexë¥¼ ì“¸ ìˆ˜ ìˆëŠ” ìƒí™©ì´ë©´ Mutexë¥¼ ì“°ëŠ” ê²ƒì´ ì¢‹ì„ ìˆ˜ë„ ìˆë‹¤ - <a href=https://github.com/golang/go/wiki/MutexOrChannel>https://github.com/golang/go/wiki/MutexOrChannel</a></li></ul><h2 id=ì˜ˆì‹œ-í”„ë¡œê·¸ë¨>ì˜ˆì‹œ í”„ë¡œê·¸ë¨</h2><h3 id=í”„ë¡œê·¸ë¨-ì„¤ëª…>í”„ë¡œê·¸ë¨ ì„¤ëª…</h3><p>Input ì‘ì—…ì„ ìˆ˜í–‰í•˜ëŠ” ë°ì— ì˜¤ëœ ì‹œê°„ì´ ê±¸ë¦¬ëŠ” ê²½ìš°ë¥¼ ì˜ˆì‹œë¡œ ë“¤ê¸° ìœ„í•´ MySQLì—ì„œ Gopherì— ëŒ€í•œ ë°ì´í„°ë¥¼ ì¡°íšŒí•œ ë’¤ Gopherë“¤ì˜ ì—°ë ¹ì„ +10 ì¦ê°€ì‹œí‚¤ëŠ” ì˜ˆì‹œë¥¼ ë§Œë“¤ì–´ë´¤ë‹¤.</p><p>Input ì‘ì—…ì„ ëª¨ë‘ ìˆ˜í–‰í•˜ëŠ” ë°ì— ì˜¤ë˜ ê±¸ë¦¬ê³ , ì‘ì—… ë‚´ìš©ì„ ì¡°ê¸ˆì”© ìª¼ê°¤ ìˆ˜ ìˆë‹¤ëŠ” ì „ì œì¡°ê±´ì„ ìœ„í•´ DB Queryë¥¼ í•  ë•Œ ì „ì²´ë¥¼ í•œ ë²ˆì— Select í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ 1ê°œì”© Selectí•˜ëŠ” ë‹¤ì†Œ ë¹„íš¨ìœ¨ì ì´ê³  ë¹„í˜„ì‹¤ì ì¸ ìƒí™©ì„ ì´ìš©í•˜ê¸´í•˜ì§€ë§Œ ê°„ë‹¨í•˜ê²Œ Pipeline patternì˜ íš¨ìœ¨ì„ ê·¹ëŒ€í™”ì‹œì¼œë³´ê³ ìí–ˆë˜ ì´ìœ ì´ë¯€ë¡œ ì–‘í•´ë¥¼ ë¶€íƒë“œë¦°ë‹¤.</p><p>ì˜ˆë¥¼ ë“¤ì–´ Pipeline patternì„ í†µí•´ <strong>1000ê°œì˜ Rowë¥¼ Queryí•˜ê³  ë‚œ ë’¤ 1000ê°œë¥¼ Updateí•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ 1000ê°œì˜ Rowë¥¼ Queryí•˜ë©´ì„œ 1ê°œ 1ê°œì˜ Rowë¥¼ ì–»ì–´ì˜¬ ë•Œ ë§ˆë‹¤ ë°”ë¡œë°”ë¡œ Update ì‘ì—…ì— Rowë¥¼ ë„˜ê²¨ì¤˜ ì‹¤ì‹œê°„ìœ¼ë¡œ ì‘ì—…</strong>í•  ìˆ˜ ìˆê²Œí•´ì£¼ëŠ” ê²ƒì´ë‹¤.</p><ul><li>Pipeline pattern: í•œ item ì”© ì‹¤ì‹œê°„ìœ¼ë¡œ ì „ë‹¬í•˜ë©° ì§„í–‰</li><li>Sequential pattern: ë”±íˆ Patternì´ë¼ê¸°ì—” ì¢€ ê·¸ë ‡ì§€ë§Œ ê·¸ëƒ¥ ì¼ë°˜ì ìœ¼ë¡œ Sequentialí•˜ê²Œ ì§„í–‰í•˜ëŠ” ê²½ìš°ë¥¼ ì˜ë¯¸. ì´ ì˜ˆì‹œì—ì„  ì „ì²´ Query ì™„ë£Œ í›„ ì „ì²´ Updateí•˜ëŠ” ë°©ì‹.</li></ul><p>Dockerë¥¼ ì´ìš©í•´ ê°„ë‹¨í•˜ê²Œ MySQL ì„œë²„ë¥¼ ë„ì› ê³ , Gormì„ ì´ìš©í•´ DB Queryì™€ updateë¥¼ ìˆ˜í–‰í–ˆë‹¤.</p><div class=expand><div class=expand-label style=cursor:pointer onclick="$h=$(this);$h.next('div').slideToggle(100,function(){$h.children('i').attr('class',function(){return $h.next('div').is(':visible')?'fas fa-chevron-down':'fas fa-chevron-right';});});"><i style=font-size:x-small class="fas fa-chevron-right"></i><span>ì˜ˆì‹œ í”„ë¡œê·¸ë¨ ì½”ë“œ</span></div><div class=expand-content style=display:none><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#f92672>package</span> <span style=color:#a6e22e>main</span>

<span style=color:#f92672>import</span> (
	<span style=color:#e6db74>&#34;fmt&#34;</span>
	<span style=color:#e6db74>&#34;github.com/brianvoe/gofakeit/v6&#34;</span>
	<span style=color:#e6db74>&#34;gorm.io/driver/mysql&#34;</span>
	<span style=color:#75715e>//&#34;gorm.io/driver/sqlite&#34;
</span><span style=color:#75715e></span>	<span style=color:#e6db74>&#34;gorm.io/gorm&#34;</span>
	<span style=color:#e6db74>&#34;gorm.io/gorm/logger&#34;</span>
	<span style=color:#e6db74>&#34;math/rand&#34;</span>
	<span style=color:#e6db74>&#34;time&#34;</span>
)

<span style=color:#66d9ef>var</span> (
	<span style=color:#a6e22e>NumTotalData</span>      <span style=color:#66d9ef>int</span> = <span style=color:#ae81ff>100</span> <span style=color:#75715e>// ì´ˆê¸°í™”í•  ë°ì´í„°
</span><span style=color:#75715e></span>	<span style=color:#a6e22e>NumManipulateData</span> <span style=color:#66d9ef>int</span> = <span style=color:#ae81ff>100</span> <span style=color:#75715e>// fetch í›„ mapì„ ì ìš©í•  ë°ì´í„° ìˆ˜
</span><span style=color:#75715e></span>)

<span style=color:#66d9ef>type</span> <span style=color:#a6e22e>Gopher</span> <span style=color:#66d9ef>struct</span> {
	<span style=color:#a6e22e>gorm</span>.<span style=color:#a6e22e>Model</span>
	<span style=color:#a6e22e>Name</span> <span style=color:#66d9ef>string</span>
	<span style=color:#a6e22e>Age</span>  <span style=color:#66d9ef>int</span>
}

<span style=color:#66d9ef>func</span> <span style=color:#a6e22e>initializeDB</span>(<span style=color:#a6e22e>db</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>gorm</span>.<span style=color:#a6e22e>DB</span>) {
	<span style=color:#75715e>// Migrate the schema
</span><span style=color:#75715e></span>	<span style=color:#a6e22e>db</span>.<span style=color:#a6e22e>AutoMigrate</span>(<span style=color:#f92672>&amp;</span><span style=color:#a6e22e>Gopher</span>{})

	<span style=color:#75715e>// Create initial data
</span><span style=color:#75715e></span>	<span style=color:#66d9ef>for</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>:=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>i</span> &lt; <span style=color:#a6e22e>NumTotalData</span>; <span style=color:#a6e22e>i</span><span style=color:#f92672>++</span> {
		<span style=color:#a6e22e>gopher</span> <span style=color:#f92672>:=</span> <span style=color:#f92672>&amp;</span><span style=color:#a6e22e>Gopher</span>{<span style=color:#a6e22e>Name</span>: <span style=color:#a6e22e>gofakeit</span>.<span style=color:#a6e22e>Name</span>(), <span style=color:#a6e22e>Age</span>: <span style=color:#a6e22e>rand</span>.<span style=color:#a6e22e>Intn</span>(<span style=color:#ae81ff>60</span>) <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>}
		<span style=color:#a6e22e>gopher</span>.<span style=color:#a6e22e>ID</span> = uint(<span style=color:#a6e22e>i</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>)
		<span style=color:#a6e22e>db</span>.<span style=color:#a6e22e>Save</span>(<span style=color:#a6e22e>gopher</span>)
	}
	<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;Initialized DB&#34;</span>)
}

<span style=color:#66d9ef>type</span> <span style=color:#a6e22e>SequentialPattern</span> <span style=color:#66d9ef>struct</span> {
	<span style=color:#a6e22e>DB</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>gorm</span>.<span style=color:#a6e22e>DB</span>
}
<span style=color:#66d9ef>type</span> <span style=color:#a6e22e>PipelinePattern</span> <span style=color:#66d9ef>struct</span> {
	<span style=color:#a6e22e>DB</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>gorm</span>.<span style=color:#a6e22e>DB</span>
}

<span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>sp</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>SequentialPattern</span>) <span style=color:#a6e22e>Execute</span>() {
	<span style=color:#a6e22e>start</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>time</span>.<span style=color:#a6e22e>Now</span>()
	<span style=color:#a6e22e>sp</span>.<span style=color:#a6e22e>Map</span>(<span style=color:#a6e22e>sp</span>.<span style=color:#a6e22e>FetchData</span>())
	<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;sequential&#34;</span>, <span style=color:#a6e22e>sp</span>)
	<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;Elapsed:&#34;</span>, <span style=color:#a6e22e>time</span>.<span style=color:#a6e22e>Now</span>().<span style=color:#a6e22e>Sub</span>(<span style=color:#a6e22e>start</span>))
	<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Print</span>(<span style=color:#a6e22e>time</span>.<span style=color:#a6e22e>Now</span>().<span style=color:#a6e22e>Sub</span>(<span style=color:#a6e22e>start</span>))
	<span style=color:#a6e22e>gophers</span> <span style=color:#f92672>:=</span> make([]<span style=color:#a6e22e>Gopher</span>, <span style=color:#ae81ff>0</span>)
	<span style=color:#a6e22e>sp</span>.<span style=color:#a6e22e>DB</span>.<span style=color:#a6e22e>Limit</span>(<span style=color:#a6e22e>NumTotalData</span>).<span style=color:#a6e22e>Find</span>(<span style=color:#f92672>&amp;</span><span style=color:#a6e22e>gophers</span>)
	<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Printf</span>(<span style=color:#e6db74>&#34;Average age(Num: %d): %d\n&#34;</span>, len(<span style=color:#a6e22e>gophers</span>), <span style=color:#66d9ef>func</span>() <span style=color:#66d9ef>int</span>{
	  <span style=color:#a6e22e>totalAge</span> <span style=color:#f92672>:=</span> <span style=color:#ae81ff>0</span>
	  <span style=color:#66d9ef>for</span> <span style=color:#a6e22e>_</span>, <span style=color:#a6e22e>gopher</span> <span style=color:#f92672>:=</span> <span style=color:#66d9ef>range</span> <span style=color:#a6e22e>gophers</span>{
	      <span style=color:#a6e22e>totalAge</span> <span style=color:#f92672>+=</span> <span style=color:#a6e22e>gopher</span>.<span style=color:#a6e22e>Age</span>
	  }
	  <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>totalAge</span><span style=color:#f92672>/</span>len(<span style=color:#a6e22e>gophers</span>)
	}())
}

<span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>sp</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>SequentialPattern</span>) <span style=color:#a6e22e>FetchData</span>() []<span style=color:#f92672>*</span><span style=color:#a6e22e>Gopher</span> {
	<span style=color:#a6e22e>gophers</span> <span style=color:#f92672>:=</span> make([]<span style=color:#f92672>*</span><span style=color:#a6e22e>Gopher</span>, <span style=color:#a6e22e>NumManipulateData</span>)
	<span style=color:#66d9ef>for</span> <span style=color:#a6e22e>id</span> <span style=color:#f92672>:=</span> <span style=color:#66d9ef>range</span> <span style=color:#a6e22e>gophers</span> {
		<span style=color:#a6e22e>gophers</span>[<span style=color:#a6e22e>id</span>] = <span style=color:#f92672>&amp;</span><span style=color:#a6e22e>Gopher</span>{}
		<span style=color:#a6e22e>sp</span>.<span style=color:#a6e22e>DB</span>.<span style=color:#a6e22e>Where</span>(<span style=color:#e6db74>&#34;id &gt; ?&#34;</span>, <span style=color:#a6e22e>id</span>).<span style=color:#a6e22e>Limit</span>(<span style=color:#ae81ff>1</span>).<span style=color:#a6e22e>Find</span>(<span style=color:#f92672>&amp;</span><span style=color:#a6e22e>gophers</span>[<span style=color:#a6e22e>id</span>])
	}

	<span style=color:#66d9ef>return</span> <span style=color:#a6e22e>gophers</span>
}

<span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>sp</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>SequentialPattern</span>) <span style=color:#a6e22e>Map</span>(<span style=color:#a6e22e>gophers</span> []<span style=color:#f92672>*</span><span style=color:#a6e22e>Gopher</span>) {
	<span style=color:#66d9ef>for</span> <span style=color:#a6e22e>_</span>, <span style=color:#a6e22e>gopher</span> <span style=color:#f92672>:=</span> <span style=color:#66d9ef>range</span> <span style=color:#a6e22e>gophers</span> {
		<span style=color:#a6e22e>gopher</span>.<span style=color:#a6e22e>Age</span> <span style=color:#f92672>+=</span> <span style=color:#ae81ff>10</span>
		<span style=color:#a6e22e>sp</span>.<span style=color:#a6e22e>DB</span>.<span style=color:#a6e22e>Save</span>(<span style=color:#a6e22e>gopher</span>)
	}
}

<span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>pp</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>PipelinePattern</span>) <span style=color:#a6e22e>Execute</span>() {
	<span style=color:#a6e22e>start</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>time</span>.<span style=color:#a6e22e>Now</span>()

	<span style=color:#a6e22e>pp</span>.<span style=color:#a6e22e>Map</span>(<span style=color:#a6e22e>pp</span>.<span style=color:#a6e22e>FetchData</span>())
	<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;pipeline&#34;</span>, <span style=color:#a6e22e>pp</span>)
	<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;Elapsed:&#34;</span>, <span style=color:#a6e22e>time</span>.<span style=color:#a6e22e>Now</span>().<span style=color:#a6e22e>Sub</span>(<span style=color:#a6e22e>start</span>))
	<span style=color:#a6e22e>gophers</span> <span style=color:#f92672>:=</span> make([]<span style=color:#a6e22e>Gopher</span>, <span style=color:#ae81ff>0</span>)
	<span style=color:#a6e22e>pp</span>.<span style=color:#a6e22e>DB</span>.<span style=color:#a6e22e>Limit</span>(<span style=color:#a6e22e>NumTotalData</span>).<span style=color:#a6e22e>Find</span>(<span style=color:#f92672>&amp;</span><span style=color:#a6e22e>gophers</span>)
	<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Printf</span>(<span style=color:#e6db74>&#34;Average age(Num: %d): %d\n&#34;</span>, len(<span style=color:#a6e22e>gophers</span>), <span style=color:#66d9ef>func</span>() <span style=color:#66d9ef>int</span>{
	   <span style=color:#a6e22e>totalAge</span> <span style=color:#f92672>:=</span> <span style=color:#ae81ff>0</span>
	   <span style=color:#66d9ef>for</span> <span style=color:#a6e22e>_</span>, <span style=color:#a6e22e>gopher</span> <span style=color:#f92672>:=</span> <span style=color:#66d9ef>range</span> <span style=color:#a6e22e>gophers</span>{
	       <span style=color:#a6e22e>totalAge</span> <span style=color:#f92672>+=</span> <span style=color:#a6e22e>gopher</span>.<span style=color:#a6e22e>Age</span>
	   }
	   <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>totalAge</span><span style=color:#f92672>/</span>len(<span style=color:#a6e22e>gophers</span>)
	}())
}
<span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>pp</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>PipelinePattern</span>) <span style=color:#a6e22e>FetchData</span>() <span style=color:#f92672>&lt;-</span><span style=color:#66d9ef>chan</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>Gopher</span> {
	<span style=color:#a6e22e>ch</span> <span style=color:#f92672>:=</span> make(<span style=color:#66d9ef>chan</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>Gopher</span>)
	<span style=color:#66d9ef>go</span> <span style=color:#66d9ef>func</span>() {
		<span style=color:#66d9ef>for</span> <span style=color:#a6e22e>id</span> <span style=color:#f92672>:=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>id</span> &lt; <span style=color:#a6e22e>NumManipulateData</span>; <span style=color:#a6e22e>id</span><span style=color:#f92672>++</span> {
			<span style=color:#66d9ef>var</span> <span style=color:#a6e22e>gopher</span> <span style=color:#a6e22e>Gopher</span>
			<span style=color:#a6e22e>pp</span>.<span style=color:#a6e22e>DB</span>.<span style=color:#a6e22e>Table</span>(<span style=color:#e6db74>&#34;gophers&#34;</span>).<span style=color:#a6e22e>Where</span>(<span style=color:#e6db74>&#34;id &gt; ?&#34;</span>, <span style=color:#a6e22e>id</span>).<span style=color:#a6e22e>Limit</span>(<span style=color:#ae81ff>1</span>).<span style=color:#a6e22e>Find</span>(<span style=color:#f92672>&amp;</span><span style=color:#a6e22e>gopher</span>)
			<span style=color:#a6e22e>ch</span> <span style=color:#f92672>&lt;-</span> <span style=color:#f92672>&amp;</span><span style=color:#a6e22e>gopher</span>
		}
		close(<span style=color:#a6e22e>ch</span>)
	}()

	<span style=color:#66d9ef>return</span> <span style=color:#a6e22e>ch</span>
}

<span style=color:#75715e>// ê³ í¼ë“¤ì„ ëª¨ë‘ 10ì‚´ ë” ë¨¹ê²Œ í•¨.
</span><span style=color:#75715e></span><span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>pp</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>PipelinePattern</span>) <span style=color:#a6e22e>Map</span>(<span style=color:#a6e22e>gophers</span> <span style=color:#f92672>&lt;-</span><span style=color:#66d9ef>chan</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>Gopher</span>) {
	<span style=color:#66d9ef>for</span> <span style=color:#a6e22e>gopher</span> <span style=color:#f92672>:=</span> <span style=color:#66d9ef>range</span> <span style=color:#a6e22e>gophers</span> {
		<span style=color:#a6e22e>gopher</span>.<span style=color:#a6e22e>Age</span> <span style=color:#f92672>+=</span> <span style=color:#ae81ff>10</span>
		<span style=color:#a6e22e>pp</span>.<span style=color:#a6e22e>DB</span>.<span style=color:#a6e22e>Save</span>(<span style=color:#a6e22e>gopher</span>)
	}
}

<span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
	<span style=color:#75715e>// $ docker run -it --name mysql --rm -e MYSQL_ROOT_PASSWORD=root -e MYSQL_DATABASE=concurrency -p 3306:3306 mysql
</span><span style=color:#75715e></span>	<span style=color:#75715e>// ë¡œ mysql ì„œë²„ë¥¼ ë„ìš¸ ìˆ˜ ìˆë‹¤.
</span><span style=color:#75715e></span>	<span style=color:#a6e22e>db</span>, <span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>gorm</span>.<span style=color:#a6e22e>Open</span>(<span style=color:#a6e22e>mysql</span>.<span style=color:#a6e22e>Open</span>(<span style=color:#e6db74>&#34;root:root@tcp(127.0.0.1:3306)/concurrency?charset=utf8mb4&amp;parseTime=True&amp;loc=Local&#34;</span>),
		<span style=color:#f92672>&amp;</span><span style=color:#a6e22e>gorm</span>.<span style=color:#a6e22e>Config</span>{<span style=color:#a6e22e>Logger</span>: <span style=color:#a6e22e>logger</span>.<span style=color:#a6e22e>Default</span>.<span style=color:#a6e22e>LogMode</span>(<span style=color:#a6e22e>logger</span>.<span style=color:#a6e22e>Silent</span>)})
	<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
		<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>err</span>)
		panic(<span style=color:#e6db74>&#34;failed to connect database&#34;</span>)
	}
	<span style=color:#a6e22e>initializeDB</span>(<span style=color:#a6e22e>db</span>)

	<span style=color:#75715e>// Execute with PipelinePattern
</span><span style=color:#75715e></span>	<span style=color:#66d9ef>func</span>() {
    <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;==============================&#34;</span>)
		<span style=color:#66d9ef>for</span> <span style=color:#a6e22e>rep</span> <span style=color:#f92672>:=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>rep</span> &lt; <span style=color:#ae81ff>10</span>; <span style=color:#a6e22e>rep</span><span style=color:#f92672>++</span> {
			<span style=color:#a6e22e>pattern</span> <span style=color:#f92672>:=</span> <span style=color:#f92672>&amp;</span><span style=color:#a6e22e>SequentialPattern</span>{<span style=color:#a6e22e>DB</span>: <span style=color:#a6e22e>db</span>}
			<span style=color:#a6e22e>pattern</span>.<span style=color:#a6e22e>Execute</span>()
		}
    <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;==============================&#34;</span>)
	}()

	<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Print</span>(<span style=color:#e6db74>&#34;DB ë¶€í•˜ë¥¼ ê°€ë¼ì•‰íˆê¸° ìœ„í•´ 5ì´ˆê°„ íœ´ì‹&#34;</span>)
	<span style=color:#a6e22e>time</span>.<span style=color:#a6e22e>Sleep</span>(<span style=color:#ae81ff>5</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>time</span>.<span style=color:#a6e22e>Second</span>)
	<span style=color:#75715e>// Execute with PipelinePattern
</span><span style=color:#75715e></span>	<span style=color:#66d9ef>func</span>() {
    <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;==============================&#34;</span>)
		<span style=color:#66d9ef>for</span> <span style=color:#a6e22e>rep</span> <span style=color:#f92672>:=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>rep</span> &lt; <span style=color:#ae81ff>10</span>; <span style=color:#a6e22e>rep</span><span style=color:#f92672>++</span> {
			<span style=color:#a6e22e>pattern</span> <span style=color:#f92672>:=</span> <span style=color:#f92672>&amp;</span><span style=color:#a6e22e>PipelinePattern</span>{<span style=color:#a6e22e>DB</span>: <span style=color:#a6e22e>db</span>}
			<span style=color:#a6e22e>pattern</span>.<span style=color:#a6e22e>Execute</span>()
		}
    <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;==============================&#34;</span>)
	}()
}
</code></pre></div></div></div><h3 id=-ë²¤ì¹˜ë§ˆí¬-ê²°ê³¼-ë¹„êµ>ğŸ“‰ ë²¤ì¹˜ë§ˆí¬ ê²°ê³¼ ë¹„êµ</h3><p><img src=line-chart-1.png alt=line-chart-1.png></p><p>Sequentialí•˜ê²Œ ì§„í–‰í•  ê²½ìš° ëª¨ë“  Itemì— ëŒ€í•œ Queryê°€ ì™„ë£Œë  ë•Œ ê¹Œì§€ Update ì‘ì—…ì€ <strong>ì§€ì—°</strong>ë˜ê²Œ ëœë‹¤. ê·¸ë¦¬ê³  Queryê°€ ëª¨ë‘ ì™„ë£Œë˜ì–´ì•¼ ë¹„ë¡œì†Œ Update ì‘ì—…ì„ ì‹œì‘í•  ìˆ˜ ìˆê²Œë˜ë¯€ë¡œ ì¢€ ë” ì‘ì—… ì‹œê°„ì´ ì˜¤ë˜ê±¸ë¦¬ëŠ” í¸ì´ë‹¤.</p><p>ë°˜ë©´ <strong>Pipeline</strong>ìœ¼ë¡œ ì§„í–‰í•  ê²½ìš° í•œ Itemì„ Query í•˜ìë§ˆì <strong>ë°”ë¡œ ë°”ë¡œ</strong> Upadte ì‘ì—…ì´ ì´ë£¨ì–´ì§ˆ ìˆ˜ ìˆê¸°ë•Œë¬¸ì— ì‘ì—… ì‹œê°„ì´ ë” ì§§ì€ ê²½í–¥ì´ ìˆë‹¤.</p><p>í•˜ì§€ë§Œ ì´ ì •ë„ ì°¨ì´ëŠ” ëšœë ·í•œ ì„±ëŠ¥ ì°¨ì´ë¡œ ë³´ê¸°ì—” ë‹¤ì†Œ ë¯¸ë¯¸í•œ ê²ƒ ê°™ì•˜ë‹¤. ê·¸ë˜ì„œ ì¢€ ë” IO latencyê°€ ê¸´ ìƒí™©ì„ ì´ìš©í•´ë´¤ë‹¤. DBë¡œ localhostì—ì„œ docker mysql serverë¥¼ ì´ìš©í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ìš´ì˜ ì¤‘ì´ë˜ k8s clusterì˜ mysql podë¥¼ kubectl port forwardí•˜ì—¬ ì´ìš©í•´ë³´ì•˜ë‹¤. (<em>ì •í™•íˆëŠ” ëª¨ë¥´ì§€ë§Œ remote db + kubectl port forawrd ë¥¼ ì´ìš©í•˜ëŠ” ê²½ìš° network latencyê°€ ì•„ì£¼ ì»¤ì ¸ ê·¹ë‹¨ì ìœ¼ë¡œ ì¢‹ì€ ì˜ˆì‹œ ìƒí™©ì´ ë  ìˆ˜ ìˆì„ ê²ƒ ê°™ì•˜ë‹¤.</em>)</p><p><img src=line-chart-2.png alt=line-chart-2.png></p><p>ìœ„ì—ì„œ ê°€ì •í•œ remote db + port forwardì˜ ê·¹ë‹¨ì  ìƒí™©ì€ ì‘ì—… ì§„í–‰ patternì— ë”°ë¼ latencyë¥¼ 2ë°° ê°€ëŸ‰ ì°¨ì´ë‚˜ê²Œ í–ˆë‹¤.</p><p>ì¦‰ <strong>í•œ ë‹¨ê³„ì—ì„œ ì˜¤ëœ ì‹œê°„ì´ ì†Œëª¨ë˜ì–´ ë‹¤ìŒ ë‹¨ê³„ê°€ ì§€ì—°ë˜ëŠ” ê²½ìš° Pipelineì„ ì´ìš©í•˜ë©´ ì¢‹ì€ ê²ƒ ê°™ë‹¤</strong>. <em>ì´ëŠ” ë§ˆì¹˜ ì»´í“¨í„° êµ¬ì¡°ì—ì„œ MIPS Processorì˜ Pipelineì„ ê³µë¶€í•  ë•Œì™€ ìœ ì‚¬í•œ ë“¯í•œ ëŠë‚Œì„ ì¤¬ë‹¤.</em></p><h2 id=ë§ˆë¬´ë¦¬>ë§ˆë¬´ë¦¬</h2><blockquote><p>ì´ ê¸€ì´ ì •í™•í•œ ë‚´ìš©ì€ ì•„ë‹ ìˆ˜ ìˆì§€ë§Œ ì¡°ì‚¬í•´ë³¸ ì„ ì—ì„œ ë²¤ì¹˜ë§ˆí¬ í•´ë³´ë©° ì‘ì„±í•´ë´¤ìŠµë‹ˆë‹¤. í˜¹ì‹œ ê¸€ì˜ ë‚´ìš© ì¤‘ ì˜ëª»ëœ ë‚´ìš©ì— ëŒ€í•œ í”¼ë“œë°±ì„ ì œì‹œí•´ì£¼ì‹ ë‹¤ë©´ ê¸°íšŒê°€ ë‹¿ëŠ” í•œ ì—´ì‹¬íˆ ë‹¤ì‹œ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤~!</p></blockquote><p>í‰ì†Œ ê¶ê¸ˆí–ˆë˜ &ldquo;<em>Goì˜ <code>concurrent pattern</code>ì€ ì–´ë–¨ ë•Œ ì“°ë©´ ì¢‹ì„ê¹Œ?</em>&rdquo; ë¼ëŠ” ì˜ë¬¸ ì¤‘ <code>pipeline pattern</code> ì— ëŒ€í•´ ì´ë ‡ê²Œ ì•Œì•„ë´¤ë‹¤.</p><p>Pipeline patternì´ CPU Boundí•œ ì‘ì—…ë³´ë‹¤ëŠ” IO latencyë¡œ ì¸í•´ ì˜¤ëœ ì‹œê°„ì´ ì†Œëª¨ë˜ëŠ” ì‘ì—…ì— ë” íš¨ìœ¨ì ì´ë¼ê³  ìƒê°í•œ ì´ìœ ëŠ” CPU Boundí•œ ì‘ì—…ì—ì„œëŠ” CPUê°€ ì´ë¯¸ í˜¹ì‚¬ë‹¹í•˜ê³  ìˆê¸° ë•Œë¬¸ì— êµ³ì´ ì—¬ëŸ¬ goroutineì„ schedule, switchí•˜ê±°ë‚˜ channelì„ í†µí•œ ë™ê¸°ì²˜ë¦¬ë¥¼ í•˜ë©´ì„œ ì‘ì—…ì„ ì§„í–‰í•˜ê¸°ë³´ë‹¤ëŠ” ê·¸ëƒ¥ ì¼ë°˜ì ì¸ ë°©ì‹ìœ¼ë¡œ ìˆœì°¨ì ìœ¼ë¡œ ì‘ì—…ì„ ì§„í–‰í•˜ëŠ” ê²Œ ì¢‹ì„ ìˆ˜ ìˆê¸° ë•Œë¬¸ì´ë‹¤. ì›Œë‚™ì— ì–¼ë§ˆë‚˜ CPU boundí•œ ì‘ì—…ì¸ì§€, ì–¼ë§ˆë‚˜ ë§ì€ goroutineì„ ì´ìš©í•˜ëŠ”ì§€ ë“±ë“± ë‹¤ì–‘í•œ ê²½ìš°ì— ë”°ë¼ ë‹¬ë¼ì§€ê¸° ë•Œë¬¸ì— ë”± ì˜ë¼ë§í•  ìˆ˜ë„ ì—†ê³ , ë‚˜ë„ ë§ì´ ë¶€ì¡±í•˜ê¸° ë•Œë¬¸ì— ì •í™•íˆëŠ” ëª¨ë¥´ê² ë‹¤. í•˜ì§€ë§Œ ì¶”ì¸¡ì»¨ëŒ€ ì ì–´ë„ io latencyë¡œ ì¸í•´ ì‘ì—…ë“¤ì´ ì§€ì—°ë˜ëŠ” ê²½ìš°ì—ëŠ” pipeline patternì´ ì¢‹ì€ ë“¯í•˜ë‹¤.</p><p>ì¶”ê°€ì ìœ¼ë¡œ <code>Fan-in Fan-out</code> pattern ë˜í•œ channelì„ ë°”íƒ•ìœ¼ë¡œ dataë¥¼ ì „ë‹¬í•˜ë©´ì„œ ì‘ì—…í•˜ê¸° ë•Œë¬¸ì— ì¼ì¢…ì˜ <code>Pipeline</code> patternì´ ì ìš©ëœ íŒ¨í„´ì¸ë“¯í•˜ì—¬ ê¸°íšŒê°€ ëœë‹¤ë©´ <strong>ì–´ë–¤ ê²½ìš°ì— ë‹¨ìˆœíˆ Pipeline íŒ¨í„´ì„ ì´ìš©í•˜ëŠ” ê²ƒë³´ë‹¤ ì—¬ëŸ¬ Goroutineì„ ì´ìš©í•´ ì‘ì—…í•˜ëŠ” Fan-in fan out patternì´ ì¢‹ì„ì§€ ë¹„êµ</strong>í•´ë³´ëŠ” ê¸€ì„ ì ì–´ë³´ê³ ì‹¶ë‹¤.</p><h2 id=ì°¸ê³ >ì°¸ê³ </h2><ul><li>Aidan Baeë‹˜ì˜ Pipeline patternì— ëŒ€í•œ ì†Œê°œ - <a href=https://aidanbae.github.io/code/golang-design/pipeline/>https://aidanbae.github.io/code/golang-design/pipeline/</a></li><li>Go Blogì˜ Pipeline patternì— ëŒ€í•œ ì†Œê°œ - <a href=https://blog.golang.org/pipelines>https://blog.golang.org/pipelines</a></li><li>Pipelineì€ ~~~ ì´ëŸ° ìƒí™©ì— ë„ì›€ì´ ë  ê»„?í•˜ëŠ” ëŒ“ê¸€ - <a href=https://www.reddit.com/r/golang/comments/7rjdw6/go_go_go_stream_processing_for_go/>https://www.reddit.com/r/golang/comments/7rjdw6/go_go_go_stream_processing_for_go/</a></li><li>Mutexì™€ Channel ë¹„êµ - <a href=https://github.com/golang/go/wiki/MutexOrChannel>https://github.com/golang/go/wiki/MutexOrChannel</a></li><li>Mutexì™€ Channelì˜ ì†ë„ ì°¨ì´ - <a href=http://www.dogfootlife.com/archives/452>http://www.dogfootlife.com/archives/452</a></li><li>Pipeline architectureë¥¼ ì‚¬ìš©í•˜ëŠ” 7ê°€ì§€ ì´ìœ (<del>ê°œì¸ì ìœ¼ë¡  ê³µê° ì•ˆ ê°</del>) - <a href=https://labs.bawi.io/7-reasons-to-use-pipeline-architecture-93346f604b87>https://labs.bawi.io/7-reasons-to-use-pipeline-architecture-93346f604b87</a></li><li>python generator ì†Œê°œ, ì‚¬ìš©ë²•- <a href=https://wikidocs.net/16069>https://wikidocs.net/16069</a></li><li>python generatorëŠ” thread-safeí•˜ì§€ ì•Šë‹¤. - <a href=https://stackoverflow.com/questions/1131430/are-generators-threadsafe>https://stackoverflow.com/questions/1131430/are-generators-threadsafe</a></li></ul><footer class=footline></footer></div><div id=disqus_thread></div><script type=application/javascript>var disqus_config=function(){};(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById('disqus_thread').innerHTML='Disqus comments not available by default when the website is previewed locally.';return;}
var d=document,s=d.createElement('script');s.async=true;s.src='//'+"umi0410"+'.disqus.com/embed.js';s.setAttribute('data-timestamp',+new Date());(d.head||d.body).appendChild(s);})();</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div><div id=navigation><a class="nav nav-prev" href=/blog/golang/go-vs-java-oop/ title="Go vs Java - Goì—ì„œì˜ ê°ì²´ ì§€í–¥"><i class="fa fa-chevron-left"></i></a><a class="nav nav-next" href=/blog/golang/go-vs-java-oop/ title="Go vs Java - Goì—ì„œì˜ ê°ì²´ ì§€í–¥" style=margin-right:0><i class="fa fa-chevron-right"></i></a></div></section><div style=left:-1000px;overflow:scroll;position:absolute;top:-1000px;border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px><div style=border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px></div></div><script src=/js/clipboard.min.js?1610376579></script><script src=/js/perfect-scrollbar.min.js?1610376579></script><script src=/js/perfect-scrollbar.jquery.min.js?1610376579></script><script src=/js/jquery.sticky.js?1610376579></script><script src=/js/featherlight.min.js?1610376579></script><script src=/js/highlight.pack.js?1610376579></script><script>hljs.initHighlightingOnLoad();</script><script src=/js/modernizr.custom-3.6.0.js?1610376579></script><script src=/js/learn.js?1610376579></script><script src=/js/hugo-learn.js?1610376579></script><script src=/mermaid/mermaid.js?1610376579></script><script>mermaid.initialize({startOnLoad:true});</script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-177403492-1','auto');ga('send','pageview');}</script></body></html>