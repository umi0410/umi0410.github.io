<!doctype html><html lang=ko-kr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Clova AI Custom Extension을 보다 재미있게 쿠버네티스로 배포해봤습니다. 
"><title>쿠버네티스로 Clova AI Custom Extension 배포하기 (feat. Istio, Cert Manager)</title><link rel=canonical href=https://umi0410.github.io/blog/clova-ai-on-k8s/><link rel=stylesheet href=/scss/style.min.css><meta property="og:title" content="쿠버네티스로 Clova AI Custom Extension 배포하기 (feat. Istio, Cert Manager)"><meta property="og:description" content="Clova AI Custom Extension을 보다 재미있게 쿠버네티스로 배포해봤습니다. 
"><meta property="og:url" content="https://umi0410.github.io/blog/clova-ai-on-k8s/"><meta property="og:site_name" content="Jinsu Playground"><meta property="og:type" content="article"><meta property="article:section" content="Blog"><meta property="article:published_time" content="2022-07-13T23:00:00+09:00"><meta property="article:modified_time" content="2022-07-13T23:00:00+09:00"><meta property="og:image" content="https://umi0410.github.io/blog/clova-ai-on-k8s/preview.png"><meta name=twitter:title content="쿠버네티스로 Clova AI Custom Extension 배포하기 (feat. Istio, Cert Manager)"><meta name=twitter:description content="Clova AI Custom Extension을 보다 재미있게 쿠버네티스로 배포해봤습니다. 
"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://umi0410.github.io/blog/clova-ai-on-k8s/preview.png"><link rel="shortcut icon" href=https://emojipedia-us.s3.dualstack.us-west-1.amazonaws.com/thumbs/120/google/241/whale_1f40b.png><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src=s,a.parentNode.insertBefore(i,a)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-177403492-1","auto"),ga("send","pageview"))</script><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link href="https://fonts.googleapis.com/css2?family=East+Sea+Dokdo&family=Noto+Sans+KR:wght@400&display=swap" rel=stylesheet><style>@import 'https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css';:root{--body-background:#fafeff;--base-font-family:Pretendard, 'Noto Sans KR', sans-serif}.site-name{--site-name-font-family:'East Sea Dokdo', cursive;font-family:var(--site-name-font-family);font-size:3.2rem!important}.left-sidebar{--sidebar-avatar-size:200px}figure.site-avatar{margin-left:auto!important;margin-right:auto!important}</style></head><body class="article-page has-toc"><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex
extended"><div id=article-toolbar><a href=https://umi0410.github.io class=back-home><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-chevron-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="15 6 9 12 15 18"/></svg><span>Back</span></a></div><main class="main full-width"><article class="has-image main-article"><header class=article-header><div class=article-image><a href=/blog/clova-ai-on-k8s/><img src=/blog/clova-ai-on-k8s/preview_hu0de35698344aa28c3f5141b2d5dcaef6_812038_800x0_resize_box_3.png srcset="/blog/clova-ai-on-k8s/preview_hu0de35698344aa28c3f5141b2d5dcaef6_812038_800x0_resize_box_3.png 800w, /blog/clova-ai-on-k8s/preview_hu0de35698344aa28c3f5141b2d5dcaef6_812038_1600x0_resize_box_3.png 1600w" width=800 height=537 loading=lazy alt="Featured image of post 쿠버네티스로 Clova AI Custom Extension 배포하기 (feat. Istio, Cert Manager)"></a></div><div class=article-details><header class=article-category><a href=/categories/devops/>devops</a>
<a href=/categories/istio/>istio</a>
<a href=/categories/cert-manager/>cert-manager</a>
<a href=/categories/kubernetes/>kubernetes</a></header><h2 class=article-title><a href=/blog/clova-ai-on-k8s/>쿠버네티스로 Clova AI Custom Extension 배포하기 (feat. Istio, Cert Manager)</a></h2><h3 class=article-subtitle>Clova AI Custom Extension을 보다 재미있게 쿠버네티스로 배포해봤습니다.</h3><footer class=article-time><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg><time class=article-time--published>Jul 13, 2022</time></footer></div></header><section class=article-content><h2 id=시작하며>시작하며</h2><p><figure style=flex-grow:149;flex-basis:357px><a href=/blog/clova-ai-on-k8s/preview.png data-size=827x555><img src=/blog/clova-ai-on-k8s/preview.png srcset="/blog/clova-ai-on-k8s/preview_hu0de35698344aa28c3f5141b2d5dcaef6_812038_480x0_resize_box_3.png 480w, /blog/clova-ai-on-k8s/preview_hu0de35698344aa28c3f5141b2d5dcaef6_812038_1024x0_resize_box_3.png 1024w" width=827 height=555 loading=lazy alt="Clova AI 스피커"></a><figcaption>Clova AI 스피커</figcaption></figure></p><p><strong>올해에는 많은 변화가 있었다!</strong></p><ul><li>💼 <strong>데브옵스 엔지니어</strong>로 회사를 가게 됐고 아주 만족 중이다!</li><li>🏠 회사의 좋은 보상, 복지에 힘입어 생애 첫 <strong>자취</strong>를 하게 됐다.</li><li>💻 <strong>네트워크</strong>나 <strong>리눅스</strong>, <strong>보안</strong> 등 딥한 영역에 좀 더 관심을 갖게 됐다.</li><li>🎸 <strong>기타</strong>를 꾸준히 다니고 있다.</li></ul><p>그런 변화들 속에서 자취방에 인터넷 설치를 하게 됐는데 <strong>클로바 AI 스피커</strong>를 공짜로 주더라.</p><p>본가에 있을 때도 쓰긴 했는데 딱히 관심 없다가 직접 클로바 앱을 깔아서 이것저것 써보니 &lsquo;전보다 재밌네..? ㅎㅎ&rsquo; 싶었고, &lsquo;아니 이거 직접 만들지는 못하나&rsquo;하는 생각이 들던 참에 &ldquo;스킬 스토어”라는 게 눈에 띄었다. 스킬 스토어에는 개별 개발사들이 개발한 자기네 기능들이 소개되어있었다.</p><p>요즘 재미있게 딥한 영역을 공부해나가고 있긴 하지만 너무 딥한 것만 하다보니 심심풀이 작업 좀 즐기고 싶은 마음에 나도 하나 스킬을 만들어보고자 했다. 마침 요즘 <code>istio</code>에도 관심이 많이 갔고 적용해보고 싶었는데 갖고 있던 k8s 클러스터에 istio는 배포해놓은 상태였고, <code>Gateway</code>, <code>VirtualService</code> 등의 <code>CRD</code>와 <code>인증서</code>만 잘 만져주면 스킬을 공개할 수 있을 것 같았다.</p><p>그리하여 &ldquo;<strong>우미, 미스터 디버거</strong>&ldquo;라는 스킬을 개발하고자 했고 이 녀석의 기능은 사용자가 &ldquo;디버거, 디버깅 팁 좀 알려줘"라는 식으로 요청하면 미리 정의해놓은 디버깅 팁(e.g. &ldquo;환경변수가 잘 설정되어있나요?&rdquo;) 중에서 랜덤으로 팁을 알려주는 것이다.</p><blockquote><p><em>이번 글은 그냥 일기장 같은 느낌으로 CS 지식은 일부 제외하고 적어보려합니다.</em></p></blockquote><blockquote><p><em>이번 글에서 사용한 소스코드는 Github <a class=link href=https://github.com/umi0410/umi-mrdebugger target=_blank rel=noopener>umi0410/umi-mrdebugger</a>에서 찾아보실 수 있습니다.</em></p></blockquote><h2 id=환경-및-버전-정보>환경 및 버전 정보</h2><table><thead><tr><th>이름</th><th>버전</th></tr></thead><tbody><tr><td>k8s cluster</td><td>1.22</td></tr><tr><td>Istio</td><td>1.11.8</td></tr><tr><td>cert-manager</td><td>1.8.2</td></tr></tbody></table><p>실제로 실무를 다루고 최신 기술들을 이용하다보니 <strong>최근 버전으로 인한 삽질이 잦았다</strong>. 따라서 혹시 참고하실 분이 계실까 싶어 내 클러스터의 환경 및 버전 정보를 정리해봤다. <strong>버전은 참 중요하다</strong>. 각 도구들의 호환성을 잘 확인해봐야한다.</p><p>나는 클러스터를 한동안 업그레이드 해주지 않아 2022년 7월 기준으로 그냥 저냥 최신은 아닌 <a class=link href=https://kubernetes.io/releases/patch-releases/#1-22 target=_blank rel=noopener>1.22 버전</a>의 k8s 클러스터를 갖고 있었고 istio는 k8s 1.22와 호환되는 버전 중 가장 오래된 minor 버전의 <a class=link href=https://istio.io/latest/docs/releases/supported-releases/ target=_blank rel=noopener>1.11.8</a>을 사용했다. istio를 최대한 구버전으로 이용해본 이유는 istio를 업그레이드해나가면서 istio의 변경사항, 역사등을 공부하면 좋을 것 같기 때문이었다. 때로는 업그레이드 작업을 실제로 진행해야할 수도 있고 말이다.</p><p><code>cert-manager</code>는 가끔 CRD api version이 변경되는 경우가 있어서 그냥 기록해놨다.</p><p><code>k8s</code>는 <code>GKE</code>를 이용 중이고 <code>istio</code>는 <code>istioct</code>l로, <code>cert-manager</code>는 <code>Helm3</code>로 관리 중이다.</p><h2 id=서버-개발하기>서버 개발하기</h2><p>서버 개발은 별거 없다. 그냥 HTTP Post 요청 분석 후 응답을 주면 된다. 실제로 정말 그 정도 수준이라 퇴근 후 몇 시간 만에 개발 → 배포까지 완료할 수 있었다. 생각보다 금방이었다.</p><p>직상된 지 몇 년은 된 듯하면서 <a class=link href=https://developers.naver.com/docs/clova/custom_ext/Develop/Guides/Build_Custom_Extension.md target=_blank rel=noopener>그닥 친절하진 않은 공식 문서</a>와 <a class=link href=https://developers.naver.com/docs/clova/custom_ext/Develop/Examples/Extension_Examples.md#CoinHelper target=_blank rel=noopener>예시 프로젝트(코인헬퍼)</a>를 참고하면 쉽게 만들어볼 수 있다. 나는 예시 프로젝트인 코인헬퍼 레포지토리를 포크 떠서 개발했다.</p><p>&ldquo;우미, 미스터 디버거&rdquo; 레포지토리: <a class=link href=https://github.com/umi0410/umi-mrdebugger target=_blank rel=noopener>https://github.com/umi0410/umi-mrdebugger</a></p><p>(<em>일기장스러운 글이므로 코드를 해석하진 않겠습니다.</em>)</p><p>많은 예시 프로젝트 중 코인헬퍼를 골라 개발해나간 이유는 유일하게 Go언어로 개발된 예시 프로젝트였기 때문일 뿐이었다. 실제로는 그냥 타입 선언이랑 유틸 함수 정도만 가져오고 나머진 다 재구현하게 되긴 했다. 기존엔 내장 <code>http</code> package를 사용했는데 <code>fiber</code>라는 웹프레임워크 이용하도록 변경하는 등..</p><h2 id=쿠버네티스에-배포하기>쿠버네티스에 배포하기</h2><p>쿠버네티스에 배포된 istio를 통해 외부에서 서버 Pod로 접속 가능하게끔 해줄 것이고, cert-manager를 통해 인증서 발급 후 해당 인증서와 관련된 시크릿을 istio가 가져가서 tls를 제공한다.</p><p><em>(k8s manifest file 또한 앞서 언급했듯 <a class=link href=https://github.com/umi0410/umi-mrdebugger target=_blank rel=noopener>https://github.com/umi0410/umi-mrdebugger</a> 에서 찾아보실 수 있습니다.)</em></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>umi-mrdebugger/k8s $ tree                                                                                      4s 00:38:42
</span></span><span class=line><span class=cl>.
</span></span><span class=line><span class=cl>├── certificate.yaml
</span></span><span class=line><span class=cl>├── cluster-issuer.yaml
</span></span><span class=line><span class=cl>├── deployment.yaml
</span></span><span class=line><span class=cl>├── gateway.yaml
</span></span><span class=line><span class=cl>├── svc.yaml
</span></span><span class=line><span class=cl>└── virtual-svc.yaml
</span></span></code></pre></div><p>필요한 항목들은 k8s 리소스들은 위와 같다</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=c># cluster-issuer.yaml</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>cert-manager.io/v1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>ClusterIssuer</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>clova-issuer</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>namespace</span><span class=p>:</span><span class=w> </span><span class=l>cert-manager</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>acme</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c># The ACME server URL</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>server</span><span class=p>:</span><span class=w> </span><span class=l>https://acme-v02.api.letsencrypt.org/directory</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>email</span><span class=p>:</span><span class=w> </span><span class=l>dev.umijs@gmail.com</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c># Name of a secret used to store the ACME account private key</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>privateKeySecretRef</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>clova-issuer-secret</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>solvers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>http01</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>ingress</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>class</span><span class=p>:</span><span class=w> </span><span class=l>istio</span><span class=w>
</span></span></span></code></pre></div><p>cert-manager가 Let&rsquo;s Encrypt로 인증서를 발급받을 수 있게 해주는 ClusterIssuer를 작성한다. 아마 Certificate와 동일 네임스페이스를 이용한다면 ClusterIssuer가 아닌 Issuer여도 괜찮을 것이다.</p><p>그리고 기존에는 Challenge 방식을 DNS01로 했었는데 DNS01 방식이 약간 가물 가물해져서 우선은 HTTP01 방식으로 도메인을 인증하기로 했다.</p><p>참고로 HTTP01 방식을 이용하는 경우 인증서를 발급받기 전부터 미리 HTTP → HTTPS 를 설정해두면 Challenge가 성공적으로 이루어지지 않는 듯하다. 아마 HTTPS로 리다이렉트 되는데 인증서가 없다보니 HTTPS 통신이 원활하지 않아서겠다.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=c># certificate.yaml</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>cert-manager.io/v1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>Certificate</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>mrdebugger-cert</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>namespace</span><span class=p>:</span><span class=w> </span><span class=l>istio-system</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>secretName</span><span class=p>:</span><span class=w> </span><span class=l>mrdebugger-cert-secret</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>commonName</span><span class=p>:</span><span class=w> </span><span class=l>mrdebugger.clova.jinsu.me</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>issuerRef</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>clova-issuer</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>ClusterIssuer</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>group</span><span class=p>:</span><span class=w> </span><span class=l>cert-manager.io</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>dnsNames</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=s2>&#34;mrdebugger.clova.jinsu.me&#34;</span><span class=w>
</span></span></span></code></pre></div><p>HTTP01 방식으로 Challenge를 진행하기 때문에 와일드카드(*, asterisk)는 사용하지 못해 그냥 사용할 도메인 네임인 <a class=link href=http://mrdebugger.clova.jinsu.me target=_blank rel=noopener>mrdebugger.clova.jinsu.me</a> 를 적어주었다.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=c># deployment.yaml</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>apps/v1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>Deployment</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>mrdebugger</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>labels</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>app</span><span class=p>:</span><span class=w> </span><span class=l>mrdebugger</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>replicas</span><span class=p>:</span><span class=w> </span><span class=m>1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>revisionHistoryLimit</span><span class=p>:</span><span class=w> </span><span class=m>3</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>selector</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>matchLabels</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>app</span><span class=p>:</span><span class=w> </span><span class=l>mrdebugger</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>template</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>labels</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>app</span><span class=p>:</span><span class=w> </span><span class=l>mrdebugger</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>terminationGracePeriodSeconds</span><span class=p>:</span><span class=w> </span><span class=m>1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>containers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>mrdebugger</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>umi0410/mrdebugger</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>imagePullPolicy</span><span class=p>:</span><span class=w> </span><span class=l>Always</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>ports</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>http</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>containerPort</span><span class=p>:</span><span class=w> </span><span class=m>8080</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>readinessProbe</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>httpGet</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>port</span><span class=p>:</span><span class=w> </span><span class=m>8080</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>path</span><span class=p>:</span><span class=w> </span><span class=l>/health</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>initialDelaySeconds</span><span class=p>:</span><span class=w> </span><span class=m>5</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>timeoutSeconds</span><span class=p>:</span><span class=w> </span><span class=m>2</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>successThreshold</span><span class=p>:</span><span class=w> </span><span class=m>1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>failureThreshold</span><span class=p>:</span><span class=w> </span><span class=m>3</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>periodSeconds</span><span class=p>:</span><span class=w> </span><span class=m>10</span><span class=w>
</span></span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=c># svc.yaml</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>v1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>Service</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>namespace</span><span class=p>:</span><span class=w> </span><span class=l>mrdebugger</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>labels</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>app</span><span class=p>:</span><span class=w> </span><span class=l>mrdebugger</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>mrdebugger</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>selector</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>app</span><span class=p>:</span><span class=w> </span><span class=l>mrdebugger</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>ports</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>mrdebugger</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>port</span><span class=p>:</span><span class=w> </span><span class=m>80</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>protocol</span><span class=p>:</span><span class=w> </span><span class=l>TCP</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>targetPort</span><span class=p>:</span><span class=w> </span><span class=l>http</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class=l>ClusterIP</span><span class=w>
</span></span></span></code></pre></div><p>이번엔 그저 그런 평범한 서버 Pod를 배포해줄 Deployment와 그것을 노출시켜주는 Service를 작성해줬다. 이건 뭐 설명할 건 없다.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=c># gateway.yaml</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>networking.istio.io/v1alpha3</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>Gateway</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>mrdebugger</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>selector</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>istio</span><span class=p>:</span><span class=w> </span><span class=l>ingressgateway</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>servers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>port</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>number</span><span class=p>:</span><span class=w> </span><span class=m>80</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>http</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>protocol</span><span class=p>:</span><span class=w> </span><span class=l>HTTP</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>hosts</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=s2>&#34;mrdebugger.clova.jinsu.me&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c>#tls:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c>#  httpsRedirect: true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>port</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>number</span><span class=p>:</span><span class=w> </span><span class=m>443</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>https</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>protocol</span><span class=p>:</span><span class=w> </span><span class=l>HTTPS</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>hosts</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=s2>&#34;mrdebugger.clova.jinsu.me&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>tls</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>mode</span><span class=p>:</span><span class=w> </span><span class=l>SIMPLE</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>credentialName</span><span class=p>:</span><span class=w> </span><span class=l>mrdebugger-cert-secret</span><span class=w>
</span></span></span></code></pre></div><p>istio의 Gateway CRD를 정의하자. 배포되어있는 istio ingress gateway를 selector로 선택해주고 아까 정의한 인증서가 담길 secret을 TLS에서 사용하도록 한다.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=c># virtual-svc.yaml</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>networking.istio.io/v1alpha3</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>VirtualService</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>mrdebugger</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>namespace</span><span class=p>:</span><span class=w> </span><span class=l>mrdebugger</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>hosts</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=s2>&#34;*&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>gateways</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=l>mrdebugger</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>http</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>match</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>uri</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>prefix</span><span class=p>:</span><span class=w> </span><span class=l>/</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>route</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>destination</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>host</span><span class=p>:</span><span class=w> </span><span class=l>mrdebugger</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>port</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>number</span><span class=p>:</span><span class=w> </span><span class=m>80</span><span class=w>
</span></span></span></code></pre></div><p>마지막으로 istio의 VirtualService CRD를 정의해주면 된다. 그냥 모든 요청을 mrdebugger 서비스로 넘겨준다고 보면 된다.</p><p>💡 몇 가지 istio CRD에 대해 헷갈리는 부분들을 정의해보자면 다음과 같다.</p><ul><li>Gateway는 istio ingress gateway와 다르다.<ul><li>Gateway는 CRD이고, ingress gateway는 자신을 selector로 설정한 Gateway를 보고 해당 설정을 적용한다.</li><li>마치 Ingress와 Nginx Ingress Controller 같은 느낌이랄까</li></ul></li><li>istio ingress gateway는 보통 istio-system 네임스페이스에 존재한다.</li><li>Gateway는 아무 네임스페이스에 만들어도 된다.</li><li>VirtualSevice 또한 아무 네임스페이스에 만들어도 된다.<ul><li>단, VirtualService의 destination은 접근 가능한 mesh 내의 호스트여야하고 네임스페이스가 다른 경우 적절한 도메인 네임을 써야할 수 있다.</li><li>같은 네임스페이스의 경우 service name만으로 이용 가능하다.</li></ul></li><li>Service, Deployment, Pod, … 또한 아무 네임스페이스에 만들어도 된다.</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>umi-mrdebugger $ kubectl create ns mrdebugger
</span></span><span class=line><span class=cl>namespace/mrdebugger created
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>umi-mrdebugger $ kubectl label namespace mrdebugger istio-injection<span class=o>=</span>enabled
</span></span><span class=line><span class=cl>namespace/mrdebugger labeled
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>umi-mrdebugger $ kubectl apply -n mrdebugger -f k8s/!<span class=o>[</span>clova-extension.png<span class=o>](</span>clova-extension.png<span class=o>)</span>
</span></span><span class=line><span class=cl>certificate.cert-manager.io/mrdebugger-cert created
</span></span><span class=line><span class=cl>clusterissuer.cert-manager.io/clova-issuer created
</span></span><span class=line><span class=cl>deployment.apps/mrdebugger created
</span></span><span class=line><span class=cl>gateway.networking.istio.io/mrdebugger created
</span></span><span class=line><span class=cl>service/mrdebugger created
</span></span><span class=line><span class=cl>virtualservice.networking.istio.io/mrdebugger created
</span></span></code></pre></div><p>한 번에 리소스가 빵 떠서 잘 연결되면 좋겠지만,,, 당연히도 현실실은 그렇진 않다. 🥲</p><p>자잘한 이슈들을 해결해주고 나면 다음과 같이 서버에게 성공적으로 응답을 받을 수 있다.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 인증서가 READY 되었다!</span>
</span></span><span class=line><span class=cl>$ kubectl get cert -n istio-system mrdebugger-cert
</span></span><span class=line><span class=cl>NAME              READY   SECRET                   AGE
</span></span><span class=line><span class=cl>mrdebugger-cert   True    mrdebugger-cert-secret   28m
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ curl https://mrdebugger.clova.jinsu.me/health
</span></span><span class=line><span class=cl>OK
</span></span></code></pre></div><p>🎉 굿. 좋당!</p><h2 id=clova-ai-console에서-custom-extension-등록하기>Clova AI Console에서 Custom Extension 등록하기</h2><p><figure style=flex-grow:226;flex-basis:543px><a href=/blog/clova-ai-on-k8s/clova-extension.png data-size=2644x1168><img src=/blog/clova-ai-on-k8s/clova-extension.png srcset="/blog/clova-ai-on-k8s/clova-extension_hu30a22d310386de55f6d8e7b01bdb85ec_145585_480x0_resize_box_3.png 480w, /blog/clova-ai-on-k8s/clova-extension_hu30a22d310386de55f6d8e7b01bdb85ec_145585_1024x0_resize_box_3.png 1024w" width=2644 height=1168 loading=lazy alt="Clova AI Console"></a><figcaption>Clova AI Console</figcaption></figure></p><p><a class=link href=https://developers.naver.com/console/clova/cek/#/list target=_blank rel=noopener>Clova AI Console</a>에 가서 자신의 Extension을 생성하면 된다. 만드는 과정은 별건 없다.</p><p><figure style=flex-grow:254;flex-basis:611px><a href=/blog/clova-ai-on-k8s/invoke-name.png data-size=988x388><img src=/blog/clova-ai-on-k8s/invoke-name.png srcset="/blog/clova-ai-on-k8s/invoke-name_huecd3aea919113a87c5572f6224b5da9d_24552_480x0_resize_box_3.png 480w, /blog/clova-ai-on-k8s/invoke-name_huecd3aea919113a87c5572f6224b5da9d_24552_1024x0_resize_box_3.png 1024w" width=988 height=388 loading=lazy alt="호출 이름 설정"></a><figcaption>호출 이름 설정</figcaption></figure></p><p>이것만 잘 설정해주면 되는데 보통 &ldquo;{{호출 이름}} 시작해줘"로 스킬이 시작되는 것 같다. 그 이후는 세션이 끊어지지 않으면 세션의 컨텍스트를 살려 대화할 수는 있는듯 하다.</p><p><figure style=flex-grow:141;flex-basis:338px><a href=/blog/clova-ai-on-k8s/build-interaction.png data-size=1822x1292><img src=/blog/clova-ai-on-k8s/build-interaction.png srcset="/blog/clova-ai-on-k8s/build-interaction_hu5f82ae87db59611aea885b4d853686af_141265_480x0_resize_box_3.png 480w, /blog/clova-ai-on-k8s/build-interaction_hu5f82ae87db59611aea885b4d853686af_141265_1024x0_resize_box_3.png 1024w" width=1822 height=1292 loading=lazy alt="Interaction 모델 빌드"></a><figcaption>Interaction 모델 빌드</figcaption></figure></p><p>그리고 나선 Interaction 모델 설정에 들어가 빌드를 해줘야한다. 자신이 Custom Intent를 사용하지 않는다해도 무조건 한 번은 빌드를 해줘야한다. 문서 상으로는 3~5분 정도 소요된다고 하는데 체감상 한 10분은 걸린듯하다… 최초 1번이 오래 걸리는 것 같고 그 이후로는 금방 되는 듯? (사이트 UI가 그닥 친절하진 않다. 약간은 버려진 느낌…?)</p><p>그러고 나면 테스터 ID를 등록해줘야한다. 보통은 심사, 실제 퍼블리시까지는 귀찮기 때문에… 혼자만 쓸 거라던가 그냥 재미삼아 만들어본 경우에는 뭐 테스터만으로 사용하는 것도 충분할 것 같다. 네이버 API 등등은 주로 이렇게 출시 심사 전까지 테스트 ID를 사용할 수 있게 해주더라.</p><p><figure style=flex-grow:47;flex-basis:113px><a href=/blog/clova-ai-on-k8s/on-skill-store.png data-size=1080x2280><img src=/blog/clova-ai-on-k8s/on-skill-store.png srcset="/blog/clova-ai-on-k8s/on-skill-store_huaaaec7118a99371c40755dcdb78fc351_364049_480x0_resize_box_3.png 480w, /blog/clova-ai-on-k8s/on-skill-store_huaaaec7118a99371c40755dcdb78fc351_364049_1024x0_resize_box_3.png 1024w" width=1080 height=2280 loading=lazy></a></figure></p><p>테스터 아이디를 등록한 뒤 네이버 클로바 앱에 자신의 네이버 아이디로 로그인하면 스킬 스토어 페이지에서 위와 같이 자신이 등록한 스킬을 볼 수 있다. 문서상으론 시간이 꽤 걸릴 수도 있다고 했는데 아마 바로 보였던 것 같다.</p><p>그럼 아마 아까 콘솔에서 설정한 &ldquo;{{호출 이름}} 시작해줘"로 스킬을 시작할 수 있을 것이다. 나는 끝에 &ldquo;시작해줘"를 안 붙여도 되는 줄 알고 호출 이름을 &ldquo;디버깅 도와줘"로 했는데 고생을 좀 했다. 호출 이름이 &ldquo;디버깅 도와줘"인 경우 실제로는 &ldquo;디버깅 도와줘 시작해줘&rdquo; 이런 식으로 말해야 실행이 되기 때문이다… ㅜㅜ</p><p>그럼 결과를 확인해보자.</p><div class=video-wrapper><iframe loading=lazy src=https://www.youtube.com/embed/gfkeh1Si_no allowfullscreen title="YouTube Video"></iframe></div><p>🎉 귀엽게 디버깅을 도와줘는 &ldquo;<strong>미스터 디버거 우미</strong>&ldquo;를 만나볼 수 있었다. 🥳</p><h2 id=마치며>마치며</h2><p>오랜만에 딥한 기술을 탐구하는 것에서 벗어나 유흥스러운 개발을 해보았다. 사이드 프로젝트를 시작으로 가꾸게 됐던 GKE 클러스터에 <strong>istio를 구축만 해놓고 제대로 도입은 못해본 상태였는데 이번 서버 배포를 진행하면서 한 번 데모처럼 istio를 사용해볼 수 있었어서 좋았다</strong>. istio를 도입해본 걸 생각하면 그닥 유흥스럽다기 보단 기술 탐구스러웠을지도..? ㅎㅎ</p><p>새로 회사를 들어가고나서는 궁금한 것, 공부하고 싶은 것이 넘쳐나고 재미있게 공부해나가고 있지만 다소 블로그에 정리하긴 어려운 내용들이 많은 것 같다. 어려운 내용들이다보니 공부는 했더라도 1번의 공부만으로 의미있는 글을 담아내긴 어렵기도 했다.</p><p>하지만 바쁘기도 한데다가 뭔가 깊이 있는 글을 쓰려다보니 요즘 블로그에 글을 오히려 안 쓰게 되고 &lsquo;아 이것도 써보고 싶은데 저것도 써보고 싶은데…&rsquo; 생각만 하다 벌써 마지막으로 글을 쓴지도 엄청 오래된 것 같다.</p><p>그래서 앞으로는 CS 지식이나 정확한 정보는 아니더라도 가끔 이렇게 개발 일기스러운 글도 적어볼까한다. 그런 글은 남에게 정보를 전달하려는 목적보단 나를 기록하는 용도기 때문에 &lsquo;<em>…입니다.</em>&rsquo; 체보다는 &lsquo;<em>…이다</em>&rsquo; 체로 그냥 가볍게 적어나가려한다.</p><p><em>그럼, 다음에 또 만나용.</em></p></section><footer class=article-footer><section class=article-copyright><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg><span>Licensed under CC BY-NC-SA 4.0</span></section></footer></article><aside class=related-contents--wrapper><h2 class=section-title>관련 글</h2><div class=related-contents><div class="flex article-list--tile"><article class=has-image><a href=/blog/devops/virtual-service-destination-rule-mesh-internal-traffic/><div class=article-image><img src=/blog/devops/virtual-service-destination-rule-mesh-internal-traffic/preview.67162889572ae46b69c86f95cc5bcd9e_hu479968be15567657f18e71d11f31e69a_283588_250x150_fill_box_smart1_3.png width=250 height=150 loading=lazy data-key data-hash="md5-ZxYoiVcq5GtpyG+VzFvNng=="></div><div class=article-details><h2 class=article-title>Virtual Service와 Destination Rule을 이용해 mesh 내부 트래픽을 원하는 대로 라우팅해보기</h2></div></a></article><article class=has-image><a href=/blog/devops/istio-1-10-network-interface/><div class=article-image><img src=/blog/devops/istio-1-10-network-interface/preview.4e9f54549cac5e0bacff136c35e1e401_hu29fb6a1fc6668bac997912987ebc8bfc_15975_250x150_fill_box_smart1_3.png width=250 height=150 loading=lazy data-key data-hash="md5-Tp9UVJysXgus/xNsNeHkAQ=="></div><div class=article-details><h2 class=article-title>istio와 envoy proxy를 통해 경험해보는 네트워크 인터페이스 (istio 1.10)</h2></div></a></article></div></div></aside><div class=disqus-container><div id=disqus_thread></div><script type=application/javascript>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//umi0410.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div><style>.disqus-container{background-color:var(--card-background);border-radius:var(--card-border-radius);box-shadow:var(--shadow-l1);padding:var(--card-padding)}</style><script>window.addEventListener("onColorSchemeChange",e=>{DISQUS&&DISQUS.reset({reload:!0})})</script><footer class=site-footer><section class=copyright>&copy;
2020 -
2022 Jinsu Playground</section><section class=powerby><a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a>로 만듦<br><a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a>의 <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=2.4.0>Stack</a></b> 테마 사용 중</section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.css integrity="sha256-c0uckgykQ9v5k+IqViZOZKc47Jn7KQil4/MP3ySA3F8=" crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.css integrity="sha256-SBLU4vv6CA6lHsZ1XyTdhyjJxCjPif/TRkjnsyGAGnE=" crossorigin=anonymous></main><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">Table of contents</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#시작하며>시작하며</a></li><li><a href=#환경-및-버전-정보>환경 및 버전 정보</a></li><li><a href=#서버-개발하기>서버 개발하기</a></li><li><a href=#쿠버네티스에-배포하기>쿠버네티스에 배포하기</a></li><li><a href=#clova-ai-console에서-custom-extension-등록하기>Clova AI Console에서 Custom Extension 등록하기</a></li><li><a href=#마치며>마치며</a></li></ol></nav></div></section></aside></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.5/dist/vibrant.min.js integrity="sha256-5NovOZc4iwiAWTYIFiIM7DxKUXKWvpVEuMEPLzcm5/g=" crossorigin=anonymous defer></script><script type=text/javascript src=/ts/main.js defer></script>
<script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>