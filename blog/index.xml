<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Blogs on Jinsu Playground</title><link>https://umi0410.github.io/blog/</link><description>Recent content in Blogs on Jinsu Playground</description><generator>Hugo -- gohugo.io</generator><language>ko-kr</language><lastBuildDate>Thu, 11 Aug 2022 03:20:00 +0900</lastBuildDate><atom:link href="https://umi0410.github.io/blog/index.xml" rel="self" type="application/rss+xml"/><item><title>Virtual Serviceì™€ Destination Ruleì„ ì´ìš©í•´ mesh ë‚´ë¶€ íŠ¸ë˜í”½ì„ ì›í•˜ëŠ” ëŒ€ë¡œ ë¼ìš°íŒ…í•´ë³´ê¸°</title><link>https://umi0410.github.io/blog/devops/virtual-service-destination-rule-mesh-internal-traffic/</link><pubDate>Thu, 11 Aug 2022 03:20:00 +0900</pubDate><guid>https://umi0410.github.io/blog/devops/virtual-service-destination-rule-mesh-internal-traffic/</guid><description>&lt;img src="https://umi0410.github.io/blog/devops/virtual-service-destination-rule-mesh-internal-traffic/preview.png" alt="Featured image of post Virtual Serviceì™€ Destination Ruleì„ ì´ìš©í•´ mesh ë‚´ë¶€ íŠ¸ë˜í”½ì„ ì›í•˜ëŠ” ëŒ€ë¡œ ë¼ìš°íŒ…í•´ë³´ê¸°" />&lt;h2 id="ì‹œì‘í•˜ë©°">ì‹œì‘í•˜ë©°&lt;/h2>
&lt;p>ë°ë¸Œì˜µìŠ¤ ì—”ì§€ë‹ˆì–´ë¡œ ì…ì‚¬í•œ ë’¤ ì£¼ë¡œ ë§¡ê³  ìˆëŠ” ì‘ì—…ì€ &lt;code>Istio&lt;/code> ê´€ë ¨ ì‘ì—…ì´ë‹¤. í‰ì†Œ ì°¸ ê´€ì‹¬ ìˆì—ˆë˜ ë¶„ì•¼ì´ê¸°ë„ í•˜ê³  istio ë¿ë§Œ ì•„ë‹ˆë¼ ë„¤íŠ¸ì›Œí¬ì— ëŒ€í•´ ê°œì¸ì ìœ¼ë¡œ ì •ë§ ê³µë¶€í•´ë³´ê³ ì‹¶ì—ˆëŠ”ë° ë•ë¶„ì— ì¬ë¯¸ìˆê²Œ ê³µë¶€í•˜ê³  ì„±ì¥í•˜ë©° ê·¼ë¬´í•˜ê³  ìˆëŠ” ê²ƒ ê°™ë‹¤. ğŸ˜Š&lt;/p>
&lt;p>ê·¼ë° ìš”ì¦˜ ë“¤ì–´ ì ì  ë‹¨ìˆœíˆ â€˜ì–´ë–»ê²Œ ì €ë–»ê²Œ í•˜ë‹ˆê¹Œ ëŒì•„ëŠ”ê°€ë„¤~ ì˜¤.. ë‚˜ istio ì¢€ íŒŒì•…í•œë“¯?ã…‹ã…‹â€™ ìˆ˜ì¤€ì˜ ìì„¸ë¡œëŠ” íŠ¸ëŸ¬ë¸”ìŠˆíŒ…ì„ í•˜ê±°ë‚˜ ì˜¬ë°”ë¥´ê²Œ ì„¤ê³„í•˜ê¸°ê°€ ì‰½ì§€ ì•Šì€ ê²½ìš°ë“¤ì´ ì¦ì•„ì¡Œë‹¤.&lt;/p>
&lt;p>ë”°ë¼ì„œ í‰ì†Œ ê¶ê¸ˆí–ˆë˜ ë‚´ìš© ì¤‘ í•˜ë‚˜ë¥¼ ì‚´ì§ íŒŒí—¤ì³ë³¼ê¹Œí•œë‹¤.&lt;/p>
&lt;p>ë‚˜ëŠ” ì£¼ë¡œ istio &lt;code>ingress gateway&lt;/code>ì™€ ê´€ë ¨ëœ ì‘ì—…ì„ ë§ì´ í–ˆì—ˆê³  ì´ ê²½ìš° Virtual ServiceëŠ” í•­ìƒ ingress gatewayë¥¼ ì°¸ì¡°í•˜ë„ë¡ ì„¤ì •í•´ì™”ë‹¤. ê·¼ë° istioë¥¼ ì²˜ìŒ ë°°ìš¸ ë•ŒëŠ” ë¶„ëª… â€˜client ì¸¡ì—ì„œ outbound handlerë¡œì„œì˜ Envody ì‚¬ì´ë“œì¹´ì„ í†µí•´ ì•Œì•„ì„œ ìš°ë¦¬ê°€ ì˜ë„í•˜ëŠ” ëª©ì ì§€ë¥¼ ì°¾ì•„ì„œ ìš”ì²­ì„ ë³´ë‚¸ë‹¤.â€™ ì´ëŸ° ì‹ìœ¼ë¡œ ë°°ì› ë˜ ê²ƒ ê°™ì€ë° â€˜ì™œ ë‚˜ëŠ” Virtual Serviceë¥¼ ì´ìš©í•  ë•Œ í•­ìƒ Gatewayë¥¼ ì„¤ì •í•´ì¤˜ì•¼í•˜ëŠ” ê²ƒì´ì—ˆì„ê¹Œ?â€™í•˜ëŠ” ê¶ê¸ˆì¦ì´ ìƒê²¼ë‹¤.&lt;/p>
&lt;ul>
&lt;li>&lt;strong>Virtual ServiceëŠ” Gatewayì— ingress gatewayë¥¼ ì„¤ì •í•´ì£¼ì§€ ì•Šì•„ë„ ë˜ëŠ” ê²ƒì¼ê¹Œ?&lt;/strong>&lt;/li>
&lt;li>&lt;strong>Virtual Serviceì— ì„¤ì •í•œ ë‚´ìš©ì€ ingress gatewayë¡œ ë“¤ì–´ì˜¨ ìš”ì²­ë¿ë§Œ ì•„ë‹ˆë¼ mesh ë‚´ë¶€ì—ì„œì˜ ìš”ì²­ì—ë„ ì ìš©ë  ìˆ˜ ìˆëŠ” ê²ƒì¸ê°€?&lt;/strong>&lt;/li>
&lt;li>&lt;strong>Destination Ruleì€ ë­í•˜ëŠ” ë…€ì„ì¼ê¹Œ? ì£¼ë¡œ ì–˜ëŠ” Virtual Serviceì™€ í•¨ê»˜ ì“°ëŠ” ì˜ˆì‹œê°€ ë§ì´ ë³´ì´ë˜ë° ê¼­ Virtual Serviceì™€ í•¨ê»˜ ì¨ì•¼í•˜ëŠ” ê±¸ê¹Œ?&lt;/strong>&lt;/li>
&lt;/ul>
&lt;p>ë”°ë¼ì„œ ì´ë²ˆ ê¸€ì—ì„œëŠ” ìœ„ì™€ ê°™ì€ ê¶ê¸ˆì¦ë“¤ì— ëŒ€í•´ ì‚½ì§ˆí•´ë³¸ ë‚´ìš©ì„ ì •ë¦¬í•´ë³´ë ¤í•œë‹¤. ì‘ì—…í•´ë³¸ ë‚´ìš©ì€ ì•„ë˜ì™€ ê°™ë‹¤.&lt;/p>
&lt;ol>
&lt;li>&lt;strong>ingress gatewayë¥¼ í†µí•´ ë“¤ì–´ì˜¤ëŠ” ìš”ì²­ì´ ì•„ë‹ˆë¼ mesh ë‚´ë¶€ì—ì„œ ë³´ë‚´ëŠ” ìš”ì²­ì— ëŒ€í•´ ì ìš©ë  ìˆ˜ ìˆë„ë¡ Virtual Serviceë¥¼ ì •ì˜í•œ ë’¤ mesh ë‚´ë¶€ì—ì„œ ìš”ì²­ì„ ë³´ë‚´ë³´ê¸°&lt;/strong>&lt;/li>
&lt;li>&lt;strong>Virtual Service ì—†ì´ Destination ì´ìš©í•´ë³´ê¸°&lt;/strong>&lt;/li>
&lt;/ol>
&lt;h2 id="virtual-serviceì™€-destination-ruleì—-ëŒ€í•´-ì§šê³ -ë„˜ì–´ê°€ë³´ì">Virtual Serviceì™€ Destination Ruleì— ëŒ€í•´ ì§šê³  ë„˜ì–´ê°€ë³´ì.&lt;/h2>
&lt;blockquote>
&lt;p>virtual services as how you route your trafficÂ toÂ a given destination, and then you use destination rules to configure what happens to trafficÂ forÂ that destination. Destination rules are applied after virtual service routing rules are evaluated, so they apply to the trafficâ€™s â€œrealâ€ destination.&lt;/p>
&lt;/blockquote>
&lt;p>&lt;a class="link" href="https://istio.io/latest/docs/concepts/traffic-management/#destination-rules" target="_blank" rel="noopener"
>https://istio.io/latest/docs/concepts/traffic-management/#destination-rules&lt;/a>&lt;/p>
&lt;blockquote>
&lt;/blockquote>
&lt;p>istioë¥¼ ì²˜ìŒ ë°°ìš¸ ë•Œì—ëŠ” (ë¬¼ë¡  ì´ ê¸€ì„ ì“°ê¸° ì „ê¹Œì§€ë„.. ã…ã…;;) Virtual Serviceì™€ Destination Ruleì´ ì°¸ í—·ê°ˆë ¸ë‹¤.&lt;/p>
&lt;p>Virtual ServiceëŠ” Gatewayë¥¼ í†µí•´ &lt;code>hosts&lt;/code> ì„¤ì •í•œ í˜¸ìŠ¤íŠ¸ë¥¼ ì´ìš©í•´ ë“¤ì–´ì˜¨ ìš”ì²­ì„ ì–´ë–¤ ê¸°ì¤€ìœ¼ë¡œ ì–´ë–¤ (ì•½ê°„ì€ ê°€ìƒì¸) ëª©ì ì§€ë¡œ ë³´ë‚´ì¤„ ê²ƒì¸ê°€ë¥¼ ì˜ë¯¸í•œë‹¤. ì´ ë§ë„ ì¢€ í—·ê°ˆë¦´ ìˆ˜ ìˆëŠ”ë° ì˜ˆë¥¼ ë“¤ë©´ ë‹¤ìŒê³¼ ê°™ë‹¤.&lt;/p>
&lt;ul>
&lt;li>ingress gateway ë¥¼ í†µí•´&lt;/li>
&lt;li>Virtual Serviceì˜ hostsì¸ [â€&lt;a class="link" href="http://foo.jinsu.me/" target="_blank" rel="noopener"
>foo.jinsu.me&lt;/a>â€] ì¤‘ í•˜ë‚˜ì¸ foo.jinsu.meë¥¼ ì´ìš©í•´ ë“¤ì–´ì˜¨ ìš”ì²­ì„&lt;/li>
&lt;li>subsetì´ë‚˜ weightì— ë”°ë¼ foo v1 ì´ë‚˜ foo v2 ë¡œ ë³´ë‚¸ë‹¤.&lt;/li>
&lt;/ul>
&lt;p>ìœ„ì™€ ê°™ì€ ì„¤ì •ì„ í•´ì£¼ëŠ” ê²ƒì´ Virtual Serviceì´ë‹¤.&lt;/p>
&lt;p>ê·¸ëŸ¼ foo v1ê³¼ foo v2ëŠ” ëˆ„ê°€ ì •ì˜í•´ì¤„ê¹Œ? ê·€ì‹  ê°™ì´ ì•Œì•„ì„œ v1ì— ëŒ€í•œ endpointì™€ v2ì— ëŒ€í•œ endpointë¥¼ ë¶„ë¥˜í•  ìˆ˜ëŠ” ì—†ì„í…ë° ë§ì´ë‹¤. ë°”ë¡œ ì´ë•Œ Destination Ruleì´ ë“±ì¥í•œë‹¤.&lt;/p>
&lt;p>Destination Ruleì€ ì–´ë–¤ ê¸°ì¤€ìœ¼ë¡œ íŠ¹ì • Service(ì¿ ë²„ì˜ ê¸°ë³¸ ë¦¬ì†ŒìŠ¤ íƒ€ì…)ì— ëŒ€í•œ subsetì„ ë‚˜ëˆŒì§€ ì •ì˜í•  ìˆ˜ ìˆë‹¤. í˜¹ì€ ê·¸ ì™¸ì—ë„ ê¸°ë³¸ì ìœ¼ë¡œ Serviceê°€ ì œê³µí•˜ì§€ ì•ŠëŠ” ìœ ìš©í•œ ë°©ì‹ë“¤ì„ í†µí•´ Endpointê°€ ê´€ë¦¬ë  ìˆ˜ ìˆë„ë¡ í•´ì¤€ë‹¤. ì´ë•Œ ë§í•˜ëŠ” EndpointëŠ” ì¿ ë²„ì˜ ê¸°ë³¸ ë¦¬ì†ŒìŠ¤ íƒ€ì… ì¤‘ í•˜ë‚˜ì¸ Endpointê°€ ì•„ë‹ˆë¼ Destination Ruleì„ í†µí•´ ì‹¤ì œë¡œ íŠ¸ë˜í”½ì´ í˜ë ¤ë³´ë‚´ì§„ë‹¤ëŠ” ì˜ë¯¸ì˜ Endpointë¥¼ ì˜ë¯¸í•œë‹¤.&lt;/p>
&lt;p>ê·¼ë° ë­,,, ë‚˜ë¦„ëŒ€ë¡œ ë‘ ê°œë…ì„ ì •ë¦¬í•´ë³´ë ¤í–ˆëŠ”ë° ì‹œì›í•œ ì •ë¦¬ëŠ” ì•„ë‹Œ ê²ƒ ê°™ë‹¤â€¦ ì“°ë‹¤ë³´ë©´ ê°ì´ì˜¤ëŠ”ë° ì•„ì§ ë”± ê¹”ë”í•˜ê²Œ ì •ë¦¬í•  ìˆ˜ ìˆëŠ” ìˆ˜ì¤€ì˜ ì´í•´ëŠ” ì•„ë‹Œê°€ë³´ë‹¤.&lt;/p>
&lt;h2 id="mesh-ë‚´ë¶€ì˜-í†µì‹ ì—ì„œë„-virtual-serviceë‚˜-destination-ruleì´-ë™ì‘í•˜ëŠ”ê°€">mesh ë‚´ë¶€ì˜ í†µì‹ ì—ì„œë„ virtual serviceë‚˜ destination ruleì´ ë™ì‘í•˜ëŠ”ê°€?&lt;/h2>
&lt;p>ì•ì„œ Virtual Serviceì— ëŒ€í•´ ì„¤ëª…í•  ë•Œ â€œGatewayë¥¼ í†µí•´ ë“¤ì–´ì˜¨ ìš”ì²­ì´ â€¦(ìƒëµ)â€ ì´ë¼ë©° ì„¤ëª…ì„ í–ˆëŠ”ë° ê·¸ë ‡ë‹¤ë©´ &lt;strong>Virtual ServiceëŠ” ingress gatewayë¥¼ í†µí•´ ë“¤ì–´ì˜¨ ìš”ì²­ì— ëŒ€í•œ ì„¤ì •ë§Œ ì •ì˜ê°€ ê°€ëŠ¥í•˜ëƒë¼ê³ í•˜ë©´ ê·¸ê±´ ë‹¹ì—°íˆ ì•„ë‹ˆë‹¤.&lt;/strong> ì• ì´ˆì— istioë¥¼ í†µí•´ ìš°ë¦¬ê°€ ì–»ê³  ì‹¶ì€ ê²ƒì€ ingressì— ëŒ€í•œ ê¸°ëŠ¥ë¿ë§Œ ì•„ë‹ˆë¼ mesh ë‚´ë¶€ í†µì‹ ì— ëŒ€í•œ ê¸°ëŠ¥ë„ í° ë¶€ë¶„ì¼ ê²ƒì´ë‹ˆ ë§ì´ë‹¤.&lt;/p>
&lt;blockquote>
&lt;p>The reserved word mesh is used to imply all the sidecars in the mesh. When this field is omitted, the default gateway (mesh) will be used, which would apply the rule to all sidecars in the mesh.&lt;/p>
&lt;/blockquote>
&lt;p>&lt;a class="link" href="https://istio.io/latest/docs/reference/config/networking/virtual-service/#VirtualService" target="_blank" rel="noopener"
>https://istio.io/latest/docs/reference/config/networking/virtual-service/#VirtualService&lt;/a>&lt;/p>
&lt;blockquote>
&lt;/blockquote>
&lt;p>&lt;strong>Virtual Serviceê°€ &lt;code>mesh&lt;/code> ë¼ëŠ” ì˜ˆì•½ëœ gateway ì´ë¦„ì„ ì´ìš©í•˜ë©´ ê·¸ê²ƒì€ mesh ë‚´ì˜ sidecarë“¤ì—ê²Œ ëª¨ë‘ ì ìš©ë˜ëŠ” ruleì´ ëœë‹¤.&lt;/strong> Virtual Serviceì˜ gatewaymesh ë‚´ë¶€ í†µì‹ ì— ìˆì–´ Virtual Serviceì˜ ì—­í• ì´ í¼ì—ë„ ë¶ˆêµ¬í•˜ê³  ì•„ì´ëŸ¬ë‹ˆí•˜ê²Œë„ ìœ„ì™€ ê°™ì€ ë‚´ìš©ì„ ì°¾ì•„ë³¼ ìˆ˜ ìˆëŠ” ë¬¸ì„œê°€ ë§ì§€ëŠ” ì•Šì•˜ë‹¤.&lt;/p>
&lt;p>ì •ë¦¬í•˜ìë©´ â€œmesh ë‚´ë¶€ì˜ í†µì‹ ì—ì„œë„ virtual serviceë‚˜ destination ruleì´ ë™ì‘í•˜ëŠ”ê°€?â€ì— ëŒ€í•œ ëŒ€ë‹µì€ ì•„ë˜ì™€ ê°™ë‹¤.&lt;/p>
&lt;ul>
&lt;li>&lt;strong>Virtual Serviceì˜ gatewaysì— &lt;code>mesh&lt;/code> ê°€ í¬í•¨ë˜ì–´ìˆê±°ë‚˜ &lt;code>gateways&lt;/code> ê°€ ìƒëµë˜ì—ˆê³ , client ì¸¡ envoy sidecarê°€ outbound handler ì—­í• ì„ ìˆ˜í–‰í•œë‹¤ë©´ â†’ YES&lt;/strong>&lt;/li>
&lt;li>Virtual Serviceì˜ gatewaysë¥¼ ì •ì˜í–ˆëŠ”ë° &lt;code>mesh&lt;/code> ê°€ í¬í•¨ë˜ì–´ìˆì§€ ì•Šë‹¤ë©´ â†’ NO&lt;/li>
&lt;li>client ì¸¡ envoy sidecarê°€ ì¡´ì¬í•˜ì§€ ì•Šê±°ë‚˜ outbound handler ì—­í• ì„ ì œëŒ€ë¡œ ìˆ˜í–‰í•˜ì§€ ëª»í•œë‹¤ë©´ â†’ NO&lt;/li>
&lt;/ul>
&lt;p>ê·¸ëŸ¼ í•œ ë²ˆ ì‹¤ìŠµì„ í†µí•´ í™•ì¸í•´ë³´ì.&lt;/p>
&lt;h2 id="mesh-ë‚´ë¶€-í†µì‹ ì—ì„œ-virtual-service--destination-ruleì„-í†µí•´-service-subsetê³¼-weight-ì´ìš©í•´ë³´ê¸°">mesh ë‚´ë¶€ í†µì‹ ì—ì„œ Virtual Service + Destination Ruleì„ í†µí•´ Service subsetê³¼ weight ì´ìš©í•´ë³´ê¸°&lt;/h2>
&lt;p>&lt;code>httpping-without-sidecar&lt;/code>ë¼ëŠ” ì´ë¦„ì˜ ì„œë¹„ìŠ¤ë¥¼ ë°°í¬í•´ë‘ì—ˆê³ , ì´ëŠ” golangìœ¼ë¡œ ë§Œë“¤ì–´ì§„ ìš”ì²­ì´ ë“¤ì–´ì˜¬ ë•Œ â€œpongâ€ ë¡œê·¸ë¥¼ ë‚¨ê¸°ëŠ” ë‹¨ìˆœí•œ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ë‹¤. ì´ ì„œë¹„ìŠ¤ì˜ Podë“¤ì€ Envoy ì‚¬ì´ë“œì¹´ë¥¼ ì£¼ì…ë°›ì§€ ì•ŠëŠ”ë‹¤.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">$ kubectl get pod -l &lt;span class="nv">app&lt;/span>&lt;span class="o">=&lt;/span>httpping-without-sidecar
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME READY STATUS RESTARTS AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">httpping-without-sidecar-v1-7fd6bfdb57-bcpdh 1/1 Running &lt;span class="m">0&lt;/span> 2m54s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">httpping-without-sidecar-v1-7fd6bfdb57-s4smn 1/1 Running &lt;span class="m">0&lt;/span> 2m54s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">httpping-without-sidecar-v1-7fd6bfdb57-zg8td 1/1 Running &lt;span class="m">0&lt;/span> 2m54s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">httpping-without-sidecar-v2-5df8b7f656-n4cvh 1/1 Running &lt;span class="m">0&lt;/span> 2m53s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">httpping-without-sidecar-v2-5df8b7f656-nfm6q 1/1 Running &lt;span class="m">0&lt;/span> 2m53s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">httpping-without-sidecar-v2-5df8b7f656-vbgpr 1/1 Running &lt;span class="m">0&lt;/span> 2m53s
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>v1 ê³¼ v2ì— ëŒ€í•œ Deployment ê°ê° ë°°í¬í•´ë‘ì—ˆë‹¤.&lt;/p>
&lt;p>ê° ë²„ì „ë³„ë¡œ 3ê°œì˜ Podê°€ ë°°í¬ë˜ì–´ìˆë‹¤.&lt;/p>
&lt;p>ë²„ì „ ë³„ë¡œ Podë“¤ì€ ë‹¤ìŒê³¼ ê°™ì´ ë¼ë²¨ì´ ë¶™ì–´ìˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="c"># v1 Podì˜ ê²½ìš°&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">app&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">httpping-without-sidecar&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">version&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">v1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="c"># v2 Podì˜ ê²½ìš°&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">app&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">httpping-without-sidecar&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">version&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">v2&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Service, Destination Rule, Virtual ServiceëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">apiVersion&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">v1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">kind&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Service&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">metadata&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">namespace&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">infra-jinsu-lab&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">httpping-without-sidecar&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">spec&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">selector&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">app&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">httpping-without-sidecar&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ports&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">protocol&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">TCP&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">port&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">8080&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">targetPort&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">80&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ServiceëŠ” versionì„ ëª…ì‹œí•˜ì§€ ì•Šì€ ì±„ appë§Œì„ ëª…ì‹œí•˜ëŠ” ìˆ˜í¼ì…‹ìœ¼ë¡œì„œ ì •ì˜í–ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">apiVersion&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">networking.istio.io/v1alpha3&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">kind&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">DestinationRule&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">metadata&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">namespace&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">infra-jinsu-lab&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">httpping-without-sidecar-destination&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">spec&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">host&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">httpping-without-sidecar&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">subsets&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">v1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">labels&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">app&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">httpping-without-sidecar&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">version&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">v1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">v2&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">labels&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">app&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">httpping-without-sidecar&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">version&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">v2&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Destination Ruleì€ Serviceì— í•´ë‹¹í•˜ëŠ” Endpointë“¤ì˜ Subsetì²˜ëŸ¼ ì •ì˜ëœë‹¤.&lt;/p>
&lt;p>version ë¼ë²¨ì´ ì¶”ê°€ë˜ì—ˆë‹¤.&lt;/p>
&lt;p>hostëŠ” Serviceë¥¼ ê°€ë¦¬í‚¬ ìˆ˜ ìˆëŠ” ì´ë¦„ì´ì–´ì•¼í•œë‹¤. ê°™ì€ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì¼ ê²½ìš° Short nameìœ¼ë¡œ í‘œí˜„í•  ìˆ˜ë„ ìˆê³ , ì–¸ì œëŠ” FQDN(e.g. httpping-with-sidecar.infra-jinsu.lab.svc.cluster.local)ìœ¼ë¡œ í‘œí˜„í•  ìˆ˜ë„ ìˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">apiVersion&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">networking.istio.io/v1alpha3&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">kind&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">VirtualService&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">metadata&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">namespace&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">infra-jinsu-lab&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">httpping-without-sidecar&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">spec&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">hosts&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;httpping-without-sidecar&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">gateways&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">mesh&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">http&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">match&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">uri&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">prefix&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">/&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">route&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">destination&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">host&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">httpping-without-sidecar&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">subset&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">v1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">port&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">number&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">8080&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">weight&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">10&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">destination&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">host&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">httpping-without-sidecar&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">subset&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">v2&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">port&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">number&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">8080&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">weight&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">90&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ì•ì„œ ë§í•œëŒ€ë¡œ í´ëŸ¬ìŠ¤í„° ë‚´ë¶€ í†µì‹ ì— ëŒ€í•´ Virtual Serviceë¥¼ ì ìš©í•˜ë ¤ë©´ &lt;code>gateways&lt;/code> ë¥¼ ìƒëµí•˜ê±°ë‚˜ &lt;code>mesh&lt;/code> ë¼ëŠ” ì˜ˆì•½ëœ ì´ë¦„ì˜ ê²Œì´íŠ¸ì›¨ì´ë¥¼ í¬í•¨ì‹œì¼œì¤€ë‹¤. ë˜í•œ mesh ë‚´ë¶€ í†µì‹ ì— ëŒ€í•´ì„œëŠ” hostsì— Destination Ruleì²˜ëŸ¼ Serviceë¥¼ ì°¸ì¡°í•  ìˆ˜ ìˆëŠ” ì´ë¦„ì„ ì ì–´ì¤€ë‹¤.&lt;/p>
&lt;p>ê·¸ë¦¬ê³ ì„œëŠ” Destination Ruleì—ì„œ ì •ì˜í•œ v1 subsetì€ weightë¥¼ 10ìœ¼ë¡œ, v2 subsetì€ weightë¥¼ 90ìœ¼ë¡œ ì„¤ì •í•´ì¤¬ë‹¤. ì´ë ‡ê²Œ ë˜ë©´ &lt;strong>ëˆ„êµ°ê°€ê°€ ì„œë¹„ìŠ¤ë¥¼ í–¥í•´ ìš”ì²­ì„ ë³´ëƒˆì„ ë•Œ v1ê³¼ v2ê°€ 1ëŒ€9ì˜ ë¹„ìœ¨ë¡œ ë¡œë“œë°¸ëŸ°ìŠ¤ê°€ ë  ê²ƒì´ë‹¤&lt;/strong> ğŸ™‚&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">curl -H &lt;span class="s1">&amp;#39;foo: bar&amp;#39;&lt;/span> http://httpping-without-sidecar.infra-jinsu-lab:8080/ping
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="https://umi0410.github.io/blog/devops/virtual-service-destination-rule-mesh-internal-traffic/weight.png"
width="2558"
height="1409"
srcset="https://umi0410.github.io/blog/devops/virtual-service-destination-rule-mesh-internal-traffic/weight_hu479968be15567657f18e71d11f31e69a_283588_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/devops/virtual-service-destination-rule-mesh-internal-traffic/weight_hu479968be15567657f18e71d11f31e69a_283588_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="ì¢Œì¸¡ì€ weightê°€ 10ì¸ v1 Pod 3ê°œ | ìš°ì¸¡ì€ weightê°€ 90ì¸ v2 Pod 3ê°œ"
class="gallery-image"
data-flex-grow="181"
data-flex-basis="435px"
>&lt;/p>
&lt;p>Envoy ì‚¬ì´ë“œì¹´ê°€ ì‚½ì…ëœ ì–´ë–¤ Podì—ì„œ ìœ„ì˜ ì»¤ë§¨ë“œë¥¼ í†µí•´ &lt;code>httpping-without-sidecar&lt;/code> ì„œë¹„ìŠ¤ë¡œ ìš”ì²­ì„ ë³´ë‚¸ ê²½ìš°ì˜ ëª¨ìŠµì´ë‹¤. ì¢Œì¸¡ ë¡œê·¸ëŠ” v1 Pod 3ê°œì˜ ë¡œê·¸ì´ê³ , ìš°ì¸¡ ë¡œê·¸ëŠ” v2 Pod 3ê°œì˜ ë¡œê·¸ì´ë‹¤.&lt;/p>
&lt;p>&lt;strong>Virtual Serviceì—ì„œ ì •ì˜í•œëŒ€ë¡œ ëŒ€ë¶€ë¶„ì˜ íŠ¸ë˜í”½ì€ v2ë¡œ í˜ëŸ¬ê°”ê³  Destination Ruleì—ì„œ ì •ì˜í•œ ëŒ€ë¡œ v1, v2ì— ëŒ€í•œ subsetì´ ì˜ ë¶„ë¥˜ëœ ë“¯í•˜ë‹¤!&lt;/strong>&lt;/p>
&lt;p>ì°¸ê³ ë¡œ ë‹¹ì—°íˆë„ í´ë¼ì´ì–¸íŠ¸ ì¸¡ì—ì„œ Enovyê°€ outbound handlingì„ í•´ì£¼ì§€ ëª»í•œë‹¤ë©´(í˜¹ì€ sidecarê°€ ì‚½ì…ë˜ì§€ ì•Šì•˜ë‹¤ë©´) weight ì¡°ì ˆë„ ë˜ì§€ ì•Šê³  ê·¸ëƒ¥ ë¼ìš´ë“œë¡œë¹ˆìœ¼ë¡œ ë¶€í•˜ê°€ ë¶„ì‚°ë  ê²ƒì´ë‹¤.&lt;/p>
&lt;h2 id="virtual-service-ì—†ì´-destination-ruleë§Œìœ¼ë¡œ-ì›í•˜ëŠ”-ë°©ì‹ì„-í†µí•´-ë¶€í•˜-ë¶„ì‚°ì‹œí‚¤ê¸°">Virtual Service ì—†ì´ Destination Ruleë§Œìœ¼ë¡œ ì›í•˜ëŠ” ë°©ì‹ì„ í†µí•´ ë¶€í•˜ ë¶„ì‚°ì‹œí‚¤ê¸°&lt;/h2>
&lt;p>ì´ë²ˆì—ëŠ” &lt;strong>Virtual Service ì—†ì´ Destination Ruleì˜ ê¸°ëŠ¥ ì¤‘ í•˜ë‚˜ì¸ consistentHashë¥¼ í†µí•œ ë¡œë“œë°¸ëŸ°ìŠ¤ë¥¼ í•´ë³¼ ê²ƒì´ë‹¤. ì´ë¥¼ ì´ìš©í•˜ë©´ íŠ¹ì • í‚¤ì— ëŒ€í•œ ê°’ì„ í•´ì‹±í•´ì„œ í•´ë‹¹ í•´ì‹œ ê°’ì„ ë‹´ë‹¹í•˜ëŠ” Podì—ê²Œ ìš”ì²­ì„ ë³´ë‚¼ ê²ƒì´ë‹¤!&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">$ kubectl delete virtualservice httpping-without-sidecar
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">virtualservice.networking.istio.io &lt;span class="s2">&amp;#34;httpping-without-sidecar&amp;#34;&lt;/span> deleted
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Virtual Service ì—†ì´ ë™ì‘í•¨ì„ ë¶„ëª…íˆ í•˜ê¸° ìœ„í•´ ì‚­ì œí•´ì¤€ë‹¤.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">apiVersion&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">networking.istio.io/v1alpha3&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">kind&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">DestinationRule&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">metadata&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">namespace&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">infra-jinsu-lab&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">httpping-without-sidecar-destination&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">spec&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">host&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">httpping-without-sidecar&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">trafficPolicy&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">loadBalancer&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">consistentHash&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">httpHeaderName&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">foo&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ì´ë²ˆì—ëŠ” Destinationì„ ìœ„ì™€ ê°™ì´ ì‘ì„±í•´ì¤Œìœ¼ë¡œì¨ í—¤ë” ì¤‘ fooë¼ëŠ” í‚¤ì— ëŒ€í•œ ê°’ì— ë”°ë¼ ë¶€í•˜ê°€ ë¶„ì‚°ë˜ë„ë¡ í•  ê²ƒì´ë‹¤. &lt;strong>ê°™ì€ ê°’ìœ¼ë¡œ ìš”ì²­ì„ ë³´ë‚´ë©´ ë‹´ë‹¹í•˜ëŠ” í•´ì‹œ ê°’ì´ ë³€ê²½ë˜ì§€ ì•ŠëŠ” í•œ ê°™ì€ Podë¡œë§Œ ìš”ì²­&lt;/strong>ì´ ê°ˆ ê²ƒì´ë‹¤.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">curl -H &lt;span class="s1">&amp;#39;foo: bar&amp;#39;&lt;/span> http://httpping-with-sidecar.infra-jinsu-lab:8080/ping
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Envoy ì‚¬ì´ë“œì¹´ê°€ ì‚½ì…ë˜ì–´ outbound handlerê°€ ì˜ ë™ì‘ ì¤‘ì¸ ë‹¤ë¥¸ Podì—ì„œ ìœ„ì™€ ê°™ì´ ìš”ì²­ì„ ì—¬ëŸ¬ ì°¨ë¡€ ë³´ë‚´ë´¤ë‹¤.&lt;/p>
&lt;p>&lt;img src="https://umi0410.github.io/blog/devops/virtual-service-destination-rule-mesh-internal-traffic/consistent-hash.png"
width="2560"
height="1395"
srcset="https://umi0410.github.io/blog/devops/virtual-service-destination-rule-mesh-internal-traffic/consistent-hash_huec96e079d93944483a2dbb05770995ea_198415_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/devops/virtual-service-destination-rule-mesh-internal-traffic/consistent-hash_huec96e079d93944483a2dbb05770995ea_198415_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="Consistent Hash ì„¤ì • í›„ foo: barë¼ëŠ” ë™ì¼í•œ í—¤ë”ë¡œ ìš”ì²­ì„ ë³´ë‚¸ ê²½ìš°ì˜ ë¡œê·¸"
class="gallery-image"
data-flex-grow="183"
data-flex-basis="440px"
>&lt;/p>
&lt;p>ìœ„ì™€ ê°™ì´ í•˜ë‚˜ì˜ Podë¡œë§Œ ìš”ì²­ì´ ê°„ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆì—ˆë‹¤!&lt;/p>
&lt;h2 id="ë§ˆì¹˜ë©°">ë§ˆì¹˜ë©°&lt;/h2>
&lt;p>ì´ë²ˆ ì£¼ì— ì—…ë¬´ê°€ ì •ë§ ë§ì•˜ëŠ”ë° ì´ë˜ ì €ë˜ ì˜¤ê°”ë˜ ëŒ€í™” ì¤‘ì— í—·ê°ˆë¦¬ëŠ” ë¶€ë¶„ì´ ìˆì–´ì„œ ê°‘ìê¸° ì•¼ë°¤ì— ì´ë ‡ê²Œ ë‚´ìš©ì„ ì •ë¦¬í•´ë´¤ë‹¤. ê³µì‹ ë¬¸ì„œë¥¼ ë‹¤ì‹œ í•œ ë²ˆ ì •ë…í•œ ë’¤ â€˜ì•„~ ì–˜ì˜ ì—­í• ì€ ì´ê±°ë‹ˆê¹Œ ì´ë ‡ê²Œ í•˜ë©´ ì´ë ‡ê²Œ ë˜ê² êµ°!â€™ì´ë¼ë©° ì‚´ì§ì¿µ ì´í•´ë¥¼ í•œ ë’¤ì— ì‹¤ìŠµì„ í•´ë´¤ê³  ê²°ê³¼ê°€ ì˜ ë‚˜ì™€ì„œ ë¿Œë“¯í•˜ë‹¤. ë§˜ í¸íˆ ì˜ ìˆ˜ ìˆì„ ë“¯.&lt;/p>
&lt;p>ë‹¤ë§Œ ë¬¸ì„œ ë‚´ìš©ê³¼ ì»¨ì…‰ë“¤ì˜ â€œì—­í• &amp;quot;ì´ë‚˜ â€œì˜ë¯¸&amp;quot;ì— ëŒ€í•œ ì´í•´ ë¿ë§Œ ì•„ë‹ˆë¼ ì‹¤ì œ ë™ì‘ í”Œë¡œìš°ê¹Œì§€ë„ ì•Œê³  ì‹¶ì€ ë§ˆìŒì€ ìˆëŠ”ë° ë„ˆë¬´ ì¡°ê¸‰í•´í•˜ëŠ” ê²ƒë³´ë‹¤ëŠ” ë¹ ë¥´ì§„ ì•Šë”ë¼ë„ ê¾¸ì¤€í•˜ê²Œ ì´ë ‡ê²Œ í•˜ë‚˜ í•˜ë‚˜ ê³µë¶€í•´ë‚˜ê°€ë©´ ë  ê²ƒì´ë¼ê³  ë¯¿ëŠ”ë‹¤!&lt;/p>
&lt;h2 id="ì°¸ê³ ">ì°¸ê³ &lt;/h2>
&lt;ul>
&lt;li>ê°ì¢… istio ë¬¸ì„œë“¤
&lt;ul>
&lt;li>Traffic Management ì»¨ì…‰ &lt;a class="link" href="https://istio.io/latest/docs/concepts/traffic-management/" target="_blank" rel="noopener"
>https://istio.io/latest/docs/concepts/traffic-management/&lt;/a>&lt;/li>
&lt;li>Traffic Management, Networking config ê´€ë ¨ ë¬¸ì„œ &lt;a class="link" href="https://istio.io/latest/docs/reference/config/networking/" target="_blank" rel="noopener"
>https://istio.io/latest/docs/reference/config/networking/&lt;/a>
&amp;laquo;&amp;laquo;&amp;laquo;&amp;lt; HEAD&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Using Istio VirtualService from inside of the cluster - &lt;a class="link" href="https://stackoverflow.com/questions/65626962/using-istio-virtualservice-from-inside-of-the-cluster" target="_blank" rel="noopener"
>https://stackoverflow.com/questions/65626962/using-istio-virtualservice-from-inside-of-the-cluster&lt;/a>
=======&lt;/li>
&lt;li>Using Istio VirtualService from inside of the cluster - &lt;a class="link" href="https://stackoverflow.com/questions/65626962/using-istio-virtualservice-from-inside-of-the-cluster" target="_blank" rel="noopener"
>https://stackoverflow.com/questions/65626962/using-istio-virtualservice-from-inside-of-the-cluster&lt;/a>&lt;/li>
&lt;/ul>
&lt;blockquote>
&lt;blockquote>
&lt;blockquote>
&lt;blockquote>
&lt;blockquote>
&lt;blockquote>
&lt;blockquote>
&lt;p>a5aea5fa65117a37072d4d860951c123a5333dcf&lt;/p>
&lt;/blockquote>
&lt;/blockquote>
&lt;/blockquote>
&lt;/blockquote>
&lt;/blockquote>
&lt;/blockquote>
&lt;/blockquote></description></item><item><title>istioì™€ envoy proxyë¥¼ í†µí•´ ê²½í—˜í•´ë³´ëŠ” ë„¤íŠ¸ì›Œí¬ ì¸í„°í˜ì´ìŠ¤ (istio 1.10)</title><link>https://umi0410.github.io/blog/devops/istio-1-10-network-interface/</link><pubDate>Sun, 17 Jul 2022 22:00:00 +0900</pubDate><guid>https://umi0410.github.io/blog/devops/istio-1-10-network-interface/</guid><description>&lt;img src="https://umi0410.github.io/blog/devops/istio-1-10-network-interface/preview.png" alt="Featured image of post istioì™€ envoy proxyë¥¼ í†µí•´ ê²½í—˜í•´ë³´ëŠ” ë„¤íŠ¸ì›Œí¬ ì¸í„°í˜ì´ìŠ¤ (istio 1.10)" />&lt;h2 id="ì‹œì‘í•˜ë©°">ì‹œì‘í•˜ë©°&lt;/h2>
&lt;p>ìš”ì¦˜ istioë¥¼ ê³µë¶€í•˜ë˜ ì¤‘ istioê°€ ë³€í™”í•´ì˜¨ ê³¼ì •ì— ëŒ€í•´ì„œë„ í¥ë¯¸ê°€ ìƒê²¨ ì§€ë‚œ ë²„ì „ë“¤ì˜ ë¦´ë¦¬ì¦ˆ ë…¸íŠ¸ë“¤ë„ ì½ì–´ë³´ê³  ìˆìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë˜ ì¤‘ í˜„ ì‹œì (2022ë…„ 7ì›”)ì—ëŠ” ì´ë¯¸ ê³µì‹ì ì¸ End of Lifeê°€ ì§€ë‚œ &lt;strong>2021ë…„ 3ì›” ì²˜ìŒ ë¦´ë¦¬ì¦ˆëœ istio 1.10ì˜ ë¦´ë¦¬ì¦ˆ ë…¸íŠ¸ë¥¼ ë³´ë‹¤ê°€ ì¬ë¯¸ìˆëŠ” ì ì„ í•˜ë‚˜ ë°œê²¬&lt;/strong>í•  ìˆ˜ ìˆì—ˆëŠ”ë°ìš”.&lt;/p>
&lt;p>ë°”ë¡œ &lt;strong>envoy proxyê°€ &lt;code>eth0&lt;/code>ì— ëŒ€í•œ ìš”ì²­ì„ ë„˜ê²¨ì£¼ëŠ” containerì˜ network interfaceê°€ &lt;code>lo&lt;/code> ì—ì„œ &lt;code>eth0&lt;/code> ë¡œ ë³€ê²½ë˜ì—ˆë‹¤&lt;/strong>ëŠ” ì ì…ë‹ˆë‹¤. ë„¤íŠ¸ì›Œí¬ì— ëŒ€í•´, ê·¸ ì¤‘ì—ì„œë„ íŠ¹íˆ ë„¤íŠ¸ì›Œí¬ ì¸í„°í˜ì´ìŠ¤ì— ëŒ€í•´ ì˜ ëª°ëë˜ ë•Œì—ëŠ” ì´ ë³€ê²½ì‚¬í•­ì— ê·¸ë‹¥ ê´€ì‹¬ì´ ì•ˆ ê°”ì„ ê²ƒ ê°™ì€ë° ìµœê·¼ ë„¤íŠ¸ì›Œí¬ ì¸í„°í˜ì´ìŠ¤ì— ëŒ€í•´ ê³µë¶€ë¥¼ í•´ì„œì¸ì§€ ì´ ë³€ê²½ì‚¬í•­ì— ê´€ì‹¬ì´ ê°”ìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>ê·¸ë˜ì„œ ì´ë²ˆ ê¸€ì—ì„œëŠ” ë„¤íŠ¸ì›Œí¬ ì¸í„°í˜ì´ìŠ¤ì™€ ê´€ë ¨ëœ &lt;code>istio&lt;/code> &lt;code>1.9&lt;/code> â†’ &lt;code>1.10&lt;/code>ì˜ ë³€ê²½ì‚¬í•­ì„ ì‹¤ì œ ì‘ì—…ì„ í†µí•´ í™•ì¸í•´ë³´ë ¤í•©ë‹ˆë‹¤. ì‹¤ì œ ì‘ì—…ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.&lt;/p>
&lt;ul>
&lt;li>&lt;strong>istio 1.9&lt;/strong> - ì„œë²„ë¥¼ &lt;code>lo&lt;/code> (ë£¨í”„ë°± ì¸í„°í˜ì´ìŠ¤)ì˜ IP(127.0.0.1)ë¡œ ë„ìš´ ê²½ìš° Serviceì— ìš”ì²­ì„ ë³´ë‚´ ì„±ê³µì ì¸ ì‘ë‹µì„ ë°›ì„ ìˆ˜ ìˆìŒì„ í™•ì¸&lt;/li>
&lt;li>&lt;strong>istio 1.9&lt;/strong> - ì„œë²„ë¥¼ &lt;code>eth0&lt;/code> ì˜ IPë¡œ ë„ìš´ ê²½ìš° Serviceì— ìš”ì²­ì„ ë³´ë‚´ë„ ìš”ì²­ì´ ì œëŒ€ë¡œ ì „ë‹¬ë˜ì§€ ì•ŠìŒì„ í™•ì¸&lt;/li>
&lt;li>&lt;strong>istio 1.10&lt;/strong> - ì„œë²„ë¥¼ &lt;code>lo&lt;/code> (ë£¨í”„ë°± ì¸í„°í˜ì´ìŠ¤)ì˜ IP(127.0.0.1)ë¡œ ë„ìš´ ê²½ìš° Serviceì— ìš”ì²­ì„ ë³´ë‚´ë„ ìš”ì²­ì´ ì œëŒ€ë¡œ ì „ë‹¬ë˜ì§€ ì•ŠìŒì„ í™•ì¸&lt;/li>
&lt;li>&lt;strong>istio 1.10&lt;/strong> - ì„œë²„ë¥¼ &lt;code>eth0&lt;/code> ì˜ IPë¡œ ë„ìš´ ê²½ìš° Serviceì— ìš”ì²­ì„ ë³´ë‚´ ì„±ê³µì ì¸ ì‘ë‹µì„ ë°›ì„ ìˆ˜ ìˆìŒì„ í™•ì¸&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://umi0410.github.io/blog/devops/istio-1-10-network-interface/version-compatibility.png"
width="2602"
height="710"
srcset="https://umi0410.github.io/blog/devops/istio-1-10-network-interface/version-compatibility_hu9ee91d2674eb5146d2a8fafcbb1eff3a_90034_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/devops/istio-1-10-network-interface/version-compatibility_hu9ee91d2674eb5146d2a8fafcbb1eff3a_90034_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="istio &amp;lt;-&amp;gt; k8s ë²„ì „ í˜¸í™˜ì„±"
class="gallery-image"
data-flex-grow="366"
data-flex-basis="879px"
>&lt;/p>
&lt;p>&lt;code>k8s&lt;/code> ë²„ì „ì€ istio 1.9ì™€ istio 1.10 ëª¨ë‘ì™€ í˜¸í™˜ë˜ëŠ” k8s &lt;code>1.20&lt;/code> ì„ ì´ìš©í•  ê²ƒì´ê³  k8sëŠ” &lt;code>minikube&lt;/code>ë¥¼ í†µí•´ ë¡œì»¬ì—ì„œ êµ¬ì„±í•  ê²ƒì…ë‹ˆë‹¤.&lt;/p>
&lt;p>âš ï¸ ì°¸ê³ ë¡œ M1 ë§¥ë¶ì˜ minikubeì—ì„  envoy proxyê°€ ë™ì‘í•˜ì§€ ì•Šì•„ì„œì¸ì§€ istioë¥¼ ì œëŒ€ë¡œ ì´ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ë”°ë¼ì„œ ì €ëŠ” ubuntuì—ì„œ minikubeë¥¼ í†µí•´ ì‘ì—…í–ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;h2 id="istio-19--110-ë³€ê²½ì‚¬í•­-ì¤‘-ì¬ë¯¸ìˆëŠ”-ì ">istio 1.9 â†’ 1.10 ë³€ê²½ì‚¬í•­ ì¤‘ ì¬ë¯¸ìˆëŠ” ì &lt;/h2>
&lt;p>&lt;img src="https://umi0410.github.io/blog/devops/istio-1-10-network-interface/networking-change.png"
width="2280"
height="970"
srcset="https://umi0410.github.io/blog/devops/istio-1-10-network-interface/networking-change_hu6fe6d6382b53ebbea105f054157c1f5e_208679_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/devops/istio-1-10-network-interface/networking-change_hu6fe6d6382b53ebbea105f054157c1f5e_208679_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="1.10 ë¦´ë¦¬ì¦ˆ ë…¸íŠ¸"
class="gallery-image"
data-flex-grow="235"
data-flex-basis="564px"
>&lt;/p>
&lt;p>(ì°¸ê³ : &lt;a class="link" href="https://istio.io/latest/news/releases/1.10.x/announcing-1.10/" target="_blank" rel="noopener"
>https://istio.io/latest/news/releases/1.10.x/announcing-1.10/&lt;/a>)&lt;/p>
&lt;p>1.10 ë²„ì „ì˜ ë³€ê²½ì‚¬í•­ì— ëŒ€í•´ ì¢€ ë” ìì„¸íˆ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤. ì´ì „ ë²„ì „ì—ì„œëŠ” Sidecar Envoy Proxyê°€ &lt;code>eth0&lt;/code>ìœ¼ë¡œ ë“¤ì–´ì˜¨ ìš”ì²­ì„ &lt;code>lo&lt;/code>ë¡œ ë„˜ê²¨ì¤˜ì™”ëŠ”ë° ì´ë²ˆ ë²„ì „(1.10)ì—ì„œë¶€í„°ëŠ” &lt;code>eth0&lt;/code>ë¡œ ë“¤ì–´ì˜¨ ìš”ì²­ì„ eth0ë¡œ ë„˜ê²¨ì¤€ë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤.&lt;/p>
&lt;p>ëŒ€ë¶€ë¶„ ì„œë²„ë¥¼ ë„ìš¸ ë•Œ &lt;code>0.0.0.0&lt;/code>ì„ í†µí•´ loopback interfaceì™€ ethernet interface ëª¨ë‘ì— ì„œë²„ë¥¼ ë„ìš°ëŠ” ê²½ìš°ê°€ ë§ì•„ í•´ë‹¹ ë‚´ìš©ì´ í° ë³€í™”ë¥¼ ê°€ì ¸ì˜¤ì§„ ì•Šì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>í•˜ì§€ë§Œ ë§Œì•½ ê¸°ì¡´ì— íŠ¹ì • interfaceì˜ IPë§Œì„ ì§€ì •í•´ì„œ ì„œë²„ë¥¼ ë„ìš°ëŠ” ê²½ìš°ê°€ ìˆì—ˆë‹¤ë©´ ì´ ë³€ê²½ì‚¬í•­ìœ¼ë¡œ ì¸í•´ í†µì‹  ì¥ì• ê°€ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;ul>
&lt;li>loopback interfaceì˜ IPë¡œë§Œ ì„œë²„ë¥¼ ë„ìš´ ê²½ìš° â†’ &lt;code>eth0&lt;/code>ë¡œ ë³´ë‚¸ ìš”ì²­ì„ sidecarë¥¼ ê±°ì³ &lt;code>lo&lt;/code>ê°€ ë°›ì„ ìˆ˜ ìˆë˜ ì»¨í…Œì´ë„ˆê°€ ìš”ì²­ì„ ë°›ì„ ìˆ˜ ì—†ì–´ì§.&lt;/li>
&lt;li>eth0 interfaceì˜ IPë¡œë§Œ ì„œë²„ë¥¼ ë ìš´ ê²½ìš° â†’ &lt;code>eth0&lt;/code>ë¡œ ë³´ë‚¸ ìš”ì²­ì„ sidecarë¥¼ ê±°ì³ ì—¬ì „íˆ &lt;code>eth0&lt;/code>ê°€ ìš”ì²­ì„ ë°›ì„ ìˆ˜ ìˆì–´ì§.&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>ì´ëŸ¬í•œ ë³€ê²½ ì‚¬í•­ì´ ì¶”ê°€ëœ ì´ìœ ëŠ”?&lt;/strong>&lt;/p>
&lt;p>On-premiseë‚˜ non-k8s í™˜ê²½ì—ì„œëŠ” ë³´í†µ &lt;code>lo&lt;/code> ì— ì„œë²„ë¥¼ ë„ìš°ëŠ” ê²½ìš°ëŠ” ì™¸ë¶€ì—ì„œì˜ ì ‘ì†ì„ ë§‰ìœ¼ë ¤ëŠ” ê²½ìš°ì¼ ê²ƒì…ë‹ˆë‹¤. ë°˜ë©´ &lt;code>eth0&lt;/code> ì— ì„œë²„ë¥¼ ë„ìš°ëŠ” ê²½ìš°ëŠ” ì™¸ë¶€ì—ì„œì˜ ì ‘ì†ì„ í—ˆìš©í•˜ë ¤ëŠ” ê²½ìš°ì¼ ê²ƒì…ë‹ˆë‹¤.&lt;/p>
&lt;p>í•˜ì§€ë§Œ ì´ì „ì—ëŠ” ì´ëŸ¬í•œ ê¸°ì¡´ í™˜ê²½ì—ì„œ istioë¥¼ ë„ì…í•˜ê²Œ ë˜ë©´ ê¸°ì¡´ì˜ ì˜ë„ì™€ ë°˜ëŒ€ë˜ê²Œ ì˜¤íˆë ¤ &lt;code>lo&lt;/code> ì— ì„œë²„ë¥¼ ë„ìš´ ê²½ìš° ì˜¤íˆë ¤ envoy sidecarì—ê²Œ ìš”ì²­ì„ ì „ë‹¬ë°›ì„ ìˆ˜ ìˆì–´ì§€ê³ , &lt;code>eth0&lt;/code> ì— ì„œë²„ë¥¼ ë„ìš´ ê²½ìš°ëŠ” ì˜¤íˆë ¤ enovy sidecarì—ê²Œ ìš”ì²­ì„ ì „ë‹¬ë°›ì„ ìˆ˜ ì—†ì—ˆë˜ ëª¨ìˆœëœ ìƒí™©ì´ ë°œìƒí–ˆë‹¤ê³  í•©ë‹ˆë‹¤.&lt;/p>
&lt;p>ë”°ë¼ì„œ ì´ëŸ¬í•œ ëª¨ìˆœëœ ìƒí™©ë“¤ì„ ë°©ì§€í•˜ê³ ì ì´ëŸ¬í•œ ë³€ê²½ì‚¬í•­ì´ ì¶”ê°€ë˜ì—ˆë‹¤ê³  í•©ë‹ˆë‹¤.&lt;/p>
&lt;h2 id="minikubeë¥¼-í†µí•´-k8s-12015-í™˜ê²½-êµ¬ì¶•í•˜ê¸°">minikubeë¥¼ í†µí•´ k8s 1.20.15 í™˜ê²½ êµ¬ì¶•í•˜ê¸°&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">$ minikube start --profile k8s-1-20 --kubernetes-version 1.20.15
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ìœ„ì˜ ëª…ë ¹ì–´ë¥¼ í†µí•´ íŠ¹ì • k8s ë²„ì „(1.20.15)ì˜ í™˜ê²½ì„ ë¡œì»¬ì— êµ¬ì¶•í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;h2 id="k8sì—-istio-19ì™€-110-ì„¤ì¹˜í•˜ê¸°">k8sì— istio 1.9ì™€ 1.10 ì„¤ì¹˜í•˜ê¸°&lt;/h2>
&lt;p>istioctlì„ í†µí•´ ë‘ ë²„ì „ì˜ istioë¥¼ k8s clusterì— ë°°í¬í•´ì¤„ ê²ƒì…ë‹ˆë‹¤.&lt;/p>
&lt;p>istioctlì˜ ë²„ì „ì— ë§ê²Œ istioê°€ ì„¤ì¹˜ë˜ê¸° ë•Œë¬¸ì— ê·¸ë•Œ ê·¸ë•Œ í¸ë¦¬í•˜ê²Œ istioctlì˜ ë²„ì „ì„ ë³€ê²½í•´ì•¼í•©ë‹ˆë‹¤. ë”°ë¼ì„œ ì €ëŠ” &lt;a class="link" href="https://github.com/asdf-vm/asdf" target="_blank" rel="noopener"
>asdf&lt;/a>ë¼ëŠ” ë„êµ¬ë¥¼ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤. ìŠ¤íƒ€ ìˆ˜ëŠ” ì ì§€ë§Œ &lt;a class="link" href="https://github.com/virtualstaticvoid/asdf-istioctl" target="_blank" rel="noopener"
>asdfì˜ istioctl plugin&lt;/a>ì„ ì´ìš©í•˜ê¸°ë„ í–ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://umi0410.github.io/blog/devops/istio-1-10-network-interface/istioctl-profiles.png"
width="3182"
height="582"
srcset="https://umi0410.github.io/blog/devops/istio-1-10-network-interface/istioctl-profiles_huc2f3f759952870d04254f07cdea3bebc_60119_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/devops/istio-1-10-network-interface/istioctl-profiles_huc2f3f759952870d04254f07cdea3bebc_60119_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="ë¯¸ë¦¬ ì •ì˜ë˜ì–´ ìˆëŠ” Profile ëª©ë¡"
class="gallery-image"
data-flex-grow="546"
data-flex-basis="1312px"
>&lt;/p>
&lt;p>ì°¸ê³ : &lt;a class="link" href="https://istio.io/latest/docs/setup/additional-setup/config-profiles/" target="_blank" rel="noopener"
>https://istio.io/latest/docs/setup/additional-setup/config-profiles/&lt;/a>&lt;/p>
&lt;p>istioctlì„ í†µí•´ istioë¥¼ í´ëŸ¬ìŠ¤í„°ì— ë°°í¬í•  ë•Œì—ëŠ” ë¯¸ë¦¬ ì •ì˜ë˜ì–´ìˆëŠ” profileì´ë¼ëŠ” ê²ƒì„ ì´ìš©í•´ ì¢€ ë” í¸ë¦¬í•˜ê²Œ ì„¤ì •ì„ í•´ì¤„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë²ˆ ì‘ì—…ì—ì„œ gatewayë“¤ì€ í•„ìš” ì—†ê¸° ë•Œë¬¸ì— ì €ëŠ” minimal profileì„ í†µí•´ ì„¤ì¹˜í•´ì£¼ê² ìŠµë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">asdf plugin-add istioctl https://github.com/virtualstaticvoid/asdf-istioctl.git &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span>asdf install istioctl 1.9.9 &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span>asdf install istioctl 1.10.6
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ìœ„ì˜ ëª…ë ¹ì–´ë¥¼ í†µí•´ istioctl 1.9.9ì™€ 1.10.6 ë‘ ë²„ì „ì„ ëª¨ë‘ ì„¤ì¹˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">$ asdf global istioctl 1.9.9 &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> istioctl version
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">no running Istio pods in &lt;span class="s2">&amp;#34;istio-system&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">1.9.9
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>istioctl 1.9.9ë¥¼ ì´ìš©í•˜ë„ë¡ ì„¤ì •í•©ë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">istioctl install --set &lt;span class="nv">profile&lt;/span>&lt;span class="o">=&lt;/span>minimal --set &lt;span class="nv">revision&lt;/span>&lt;span class="o">=&lt;/span>1-9 --set values.global.proxy.holdApplicationUntilProxyStarts&lt;span class="o">=&lt;/span>&lt;span class="nb">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">! values.global.proxy.holdApplicationUntilProxyStarts is deprecated&lt;span class="p">;&lt;/span> use meshConfig.defaultConfig.holdApplicationUntilProxyStarts instead
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">! Istio is being downgraded from 1.9.0 -&amp;gt; 1.9.9.This will install the Istio 1.9.9 minimal profile with &lt;span class="o">[&lt;/span>&lt;span class="s2">&amp;#34;Istio core&amp;#34;&lt;/span> &lt;span class="s2">&amp;#34;Istiod&amp;#34;&lt;/span>&lt;span class="o">]&lt;/span> components into the cluster. Proceed? &lt;span class="o">(&lt;/span>y/N&lt;span class="o">)&lt;/span> y
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">âœ” Istio core installed
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">âœ” Istiod installed
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">âœ” Installation &lt;span class="nb">complete&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>istio 1.9.9ë¥¼ &lt;code>1-9&lt;/code>ë¼ëŠ” revisionìœ¼ë¡œ ê¹”ì•„ì¤ë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;code>values.global.proxy.holdApplicationUntilProxyStarts&lt;/code>ì™€ &lt;code>meshConfig.defaultConfig.holdApplicationUntilProxyStarts&lt;/code>ëŠ” envoy proxyê°€ ì¤€ë¹„ëœ ë’¤ì—
ìš°ë¦¬ê°€ ì •ì˜í•œ ì‹¤ì œ ì»¨í…Œì´ë„ˆë¥¼ ì‹œì‘í•˜ëŠ” ì˜µì…˜ì…ë‹ˆë‹¤. ì „ìëŠ” Deprecated ë˜ì—ˆë‹¤ê³  ê²½ê³ ê°€ ëœ¨ì§€ë§Œ ì ìš©í•´ë³¸ ê²°ê³¼ 1.9 ë²„ì „ ëŒ€ì—ì„œëŠ” ì—¬ì „íˆ ì „ìë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒ ê°™ë”ë¼êµ¬ìš”.
ë”°ë¼ì„œ ì €ëŠ” 1.9.9 ë²„ì „ì—ì„œëŠ” ì „ìì˜ ì¸ìë¥¼, 1.10.6 ë²„ì „ì—ì„œëŠ” í›„ìì˜ ì¸ìë¥¼ ì ìš©í•´ì£¼ì—ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>ë§Œì•½ envoy proxyê°€ ì™„ì „íˆ ì¤€ë¹„ë˜ê¸° ì „ì— ë‹¤ë¥¸ ì»¨í…Œì´ë„ˆì—ì„œ ë„¤íŠ¸ì›Œí¬ ì‘ì—…ì„ ìˆ˜í–‰í•˜ë©´ í•´ë‹¹ ì‘ì—…ì€ ì„±ê³µì ìœ¼ë¡œ ìˆ˜í–‰ë˜ì§€ ì•Šì„ ê²ƒì…ë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">$ asdf global istioctl 1.10.6 &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> istioctl version
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">client version: 1.10.6
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">control plane version: 1.9.9
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">data plane version: none
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>istioctl 1.10.6ì„ ì´ìš©í•˜ë„ë¡ ì„¤ì •í•©ë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">$ istioctl install --set &lt;span class="nv">profile&lt;/span>&lt;span class="o">=&lt;/span>minimal --set &lt;span class="nv">revision&lt;/span>&lt;span class="o">=&lt;/span>1-10 --set meshConfig.defaultConfig.holdApplicationUntilProxyStarts&lt;span class="o">=&lt;/span>&lt;span class="nb">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">WARNING: Istio is being upgraded from 1.9.9 -&amp;gt; 1.10.6.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">WARNING: Before upgrading, you may wish to use &lt;span class="s1">&amp;#39;istioctl analyze&amp;#39;&lt;/span> to check forIST0002 and IST0135 deprecation warnings.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">This will install the Istio 1.10.6 minimal profile with &lt;span class="o">[&lt;/span>&lt;span class="s2">&amp;#34;Istio core&amp;#34;&lt;/span> &lt;span class="s2">&amp;#34;Istiod&amp;#34;&lt;/span>&lt;span class="o">]&lt;/span> components into the cluster. Proceed? &lt;span class="o">(&lt;/span>y/N&lt;span class="o">)&lt;/span> y
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">âœ” Istio core installed
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">âœ” Istiod installed
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">âœ” Installation &lt;span class="nb">complete&lt;/span> Thank you &lt;span class="k">for&lt;/span> installing Istio 1.10. Please take a few minutes to tell us about your install/upgrade experience! https://forms.gle/KjkrDnMPByq7akrYA
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>istio 1.10.6ì„ &lt;code>1-10&lt;/code>ì´ë¼ëŠ” revisionìœ¼ë¡œ ê¹”ì•„ì¤ë‹ˆë‹¤.&lt;/p>
&lt;p>ì›Œë‹ì´ ë– ìˆê¸´ í•˜ì§€ë§Œ ê·¸ë‹¥ ìƒê´€ì€ ì—†ìŠµë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">$ kubectl get pod -n istio-system
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME READY STATUS RESTARTS AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">istiod-1-10-5cd4d5b44d-b98xm 1/1 Running &lt;span class="m">0&lt;/span> 84s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">istiod-1-9-6b549b9d87-9f76b 1/1 Running &lt;span class="m">0&lt;/span> 2m56s
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ì˜ ê¹”ë ¸ë‹¤ë©´ ìœ„ì™€ ê°™ì´ Podë“¤ì´ ì„±ê³µì ìœ¼ë¡œ ë–´ì„ ê²ƒì…ë‹ˆë‹¤.&lt;/p>
&lt;h2 id="istio-sidecarê°€-injectedëœ-netcat-server--client-pod-ë°°í¬í•˜ê¸°">istio sidecarê°€ injectedëœ netcat server &amp;amp; client Pod ë°°í¬í•˜ê¸°&lt;/h2>
&lt;p>ì´ì œ netcat serverì´ì clientê°€ ë  Pod ë“¤ì„ ë°°í¬í•´ì¤„ ê²ƒì…ë‹ˆë‹¤.&lt;/p>
&lt;p>ë°°í¬í•  ë¦¬ì†ŒìŠ¤ë“¤ì€ ëª¨ë‘ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.&lt;/p>
&lt;ul>
&lt;li>&lt;strong>Namespace rev-1-9&lt;/strong> - istio 1.9ì˜ sidecar injectë¥¼ ë°›ì„ Namespace&lt;/li>
&lt;li>&lt;strong>Namespace rev-1-10&lt;/strong> - istio 1.10ì˜ sidecar injectë¥¼ ë°›ì„ Namespace&lt;/li>
&lt;li>&lt;strong>Pod netcat-client&lt;/strong> - &lt;code>default&lt;/code> Namespaceì—ì„œ ê° Serviceë¥¼ í†µí•´ netcat ìš”ì²­ì„ ë‚ ë ¤ì¤„ client&lt;/li>
&lt;li>&lt;strong>Pod netcat-lo&lt;/strong> - &lt;code>lo&lt;/code> ì¸í„°í˜ì´ìŠ¤ì˜ IP ì— netcat ì„œë²„ë¥¼ ë„ìš°ëŠ” Pod.&lt;/li>
&lt;li>&lt;strong>Pod netcat-eth0&lt;/strong> - &lt;code>eth0&lt;/code> ì¸í„°í˜ì´ìŠ¤ì˜ IPì— netcat ì„œë²„ë¥¼ ë„ìš°ëŠ” Pod.&lt;/li>
&lt;li>&lt;strong>Service lo&lt;/strong> - &lt;code>lo&lt;/code> ì¸í„°í˜ì´ìŠ¤ì˜ IPì— netcat ì„œë²„ë¥¼ ë„ìš´ Podë¥¼ ë…¸ì¶œì‹œì¼œì¤„ Service&lt;/li>
&lt;li>&lt;strong>Service eth0&lt;/strong> - &lt;code>eth0&lt;/code> ì¸í„°í˜ì´ìŠ¤ì˜ IPì— netcat ì„œë²„ë¥¼ ë„ìš´ Podë¥¼ ë…¸ì¶œì‹œì¼œì¤„ Service&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>(netcat ì„œë²„ PodëŠ” 8080 í¬íŠ¸ì— ìš”ì²­ì´ TCP ì»¤ë„¥ì…˜ì´ í˜•ì„±ë˜ë©´ â€œpongâ€ìœ¼ë¡œ ì‘ë‹µí•˜ëŠ” Podì…ë‹ˆë‹¤.)&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">apiVersion&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">v1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">kind&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Namespace&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">metadata&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">labels&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">istio.io/rev&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">1-9&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">rev-1-9&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nn">---&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">apiVersion&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">v1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">kind&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Namespace&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">metadata&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">labels&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">istio.io/rev&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">1-10&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">rev-1-10&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nn">---&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">apiVersion&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">v1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">kind&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Pod&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">metadata&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">namespace&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">default&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">netcat-client&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">spec&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">containers&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">ubuntu:22.04&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">command&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;/bin/bash&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;-c&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">args&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="p">|&lt;/span>&lt;span class="sd">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> apt update &amp;amp;&amp;amp; apt install -y ncat
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> while true;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> do sleep 60;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> done;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">imagePullPolicy&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">IfNotPresent&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">netcat-client&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">restartPolicy&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Always&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nn">---&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">apiVersion&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">v1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">kind&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Pod&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">metadata&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">namespace&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">rev-1-9&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">netcat-lo&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">labels&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">app&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">rev-1-9-lo&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">spec&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">containers&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">ubuntu:22.04&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">command&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;/bin/bash&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;-c&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">args&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="p">|&lt;/span>&lt;span class="sd">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> apt update &amp;amp;&amp;amp; apt install -y net-tools ncat
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> ifconfig eth0 | grep &amp;#39;inet &amp;#39; | awk &amp;#39;{print $2}&amp;#39;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> while true
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> do echo &amp;#39;pong&amp;#39; | nc -l 127.0.0.1 8080
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> sleep 1
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> done&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">imagePullPolicy&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">IfNotPresent&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">ubuntu&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ports&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">containerPort&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">8080&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">restartPolicy&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Always&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nn">---&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">apiVersion&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">v1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">kind&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Pod&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">metadata&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">namespace&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">rev-1-10&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">netcat-lo&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">labels&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">istio.io/rev&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">1-10&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">app&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">rev-1-10-lo&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">spec&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">containers&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">ubuntu:22.04&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">command&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;/bin/bash&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;-c&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">args&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="p">|&lt;/span>&lt;span class="sd">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> apt update &amp;amp;&amp;amp; apt install -y net-tools ncat
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> while true
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> do echo &amp;#39;pong&amp;#39; | nc -l 127.0.0.1 8080
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> sleep 1
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> done&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">imagePullPolicy&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">IfNotPresent&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">ubuntu&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ports&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">containerPort&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">8080&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">restartPolicy&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Always&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nn">---&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">apiVersion&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">v1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">kind&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Pod&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">metadata&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">namespace&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">rev-1-9&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">netcat-eth0&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">labels&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">istio.io/rev&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">1-9&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">app&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">rev-1-9-eth0&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">spec&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">containers&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">ubuntu:22.04&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">command&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;/bin/bash&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;-c&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">args&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="p">|&lt;/span>&lt;span class="sd">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> apt update &amp;amp;&amp;amp; apt install -y net-tools ncat
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> ifconfig eth0 | grep &amp;#39;inet &amp;#39; | awk &amp;#39;{print $2}&amp;#39;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> while true
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> do echo &amp;#39;pong&amp;#39; | nc -l $(ifconfig eth0 | grep &amp;#39;inet &amp;#39; | awk &amp;#39;{print $2}&amp;#39;) 8080
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> sleep 1
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> done&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">imagePullPolicy&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">IfNotPresent&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">ubuntu&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ports&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">containerPort&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">8080&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">restartPolicy&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Always&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nn">---&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">apiVersion&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">v1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">kind&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Pod&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">metadata&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">namespace&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">rev-1-10&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">netcat-eth0&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">labels&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">istio.io/rev&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">1-10&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">app&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">rev-1-10-eth0&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">spec&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">containers&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">ubuntu:22.04&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">command&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;/bin/bash&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;-c&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">args&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="p">|&lt;/span>&lt;span class="sd">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> apt update &amp;amp;&amp;amp; apt install -y net-tools ncat
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> ifconfig eth0 | grep &amp;#39;inet &amp;#39; | awk &amp;#39;{print $2}&amp;#39;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> while true
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> do echo &amp;#39;pong&amp;#39; | nc -l $(ifconfig eth0 | grep &amp;#39;inet &amp;#39; | awk &amp;#39;{print $2}&amp;#39;) 8080
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> done&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">imagePullPolicy&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">IfNotPresent&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">ubuntu&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ports&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">containerPort&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">8080&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">restartPolicy&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Always&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nn">---&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">apiVersion&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">v1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">kind&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Service&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">metadata&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">namespace&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">rev-1-9&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">lo&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">spec&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ports&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">port&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">8080&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">protocol&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">TCP&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">selector&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">app&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">rev-1-9-lo&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nn">---&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">apiVersion&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">v1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">kind&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Service&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">metadata&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">namespace&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">rev-1-9&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">eth0&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">spec&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ports&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">port&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">8080&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">protocol&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">TCP&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">selector&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">app&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">rev-1-9-eth0&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nn">---&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">apiVersion&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">v1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">kind&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Service&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">metadata&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">namespace&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">rev-1-10&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">lo&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">spec&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ports&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">port&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">8080&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">protocol&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">TCP&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">selector&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">app&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">rev-1-10-lo&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nn">---&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">apiVersion&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">v1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">kind&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Service&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">metadata&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">namespace&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">rev-1-10&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">eth0&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">spec&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ports&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">port&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">8080&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">protocol&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">TCP&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">selector&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">app&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">rev-1-10-eth0&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">$ kubectl apply -f tmp.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">namespace/rev-1-9 created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">namespace/rev-1-10 created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pod/netcat-client created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pod/netcat-lo created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pod/netcat-lo created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pod/netcat-eth0 created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pod/netcat-eth0 created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">service/lo created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">service/eth0 created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">service/lo created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">service/eth0 created
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ìœ„ì˜ ëª…ë ¹ì–´ë“¤ì„ ì´ìš©í•´ sidecarê°€ injectedë  netcat ì„œë²„ì™€ í´ë¼ì´ì–¸íŠ¸ Podë¥¼ ë°°í¬í•´ì¤ë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">$ kubectl get pod -A
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAMESPACE NAME READY STATUS RESTARTS AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">default netcat-client 1/1 Running &lt;span class="m">0&lt;/span> 15m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">istio-system istiod-1-10-5cd4d5b44d-8lv2h 1/1 Running &lt;span class="m">0&lt;/span> 145m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">istio-system istiod-1-9-5ccbd888d8-scdzz 1/1 Running &lt;span class="m">0&lt;/span> 107m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rev-1-10 netcat-eth0 2/2 Running &lt;span class="m">0&lt;/span> 18m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rev-1-10 netcat-lo 2/2 Running &lt;span class="m">0&lt;/span> 18m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rev-1-9 netcat-eth0 2/2 Running &lt;span class="m">1&lt;/span> 17m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rev-1-9 netcat-lo 2/2 Running &lt;span class="m">1&lt;/span> 17m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ kubectl get svc -A
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAMESPACE NAME TYPE CLUSTER-IP EXTERNAL-IP PORT&lt;span class="o">(&lt;/span>S&lt;span class="o">)&lt;/span> AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">default kubernetes ClusterIP 10.96.0.1 &amp;lt;none&amp;gt; 443/TCP 3h10m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">istio-system istiod-1-10 ClusterIP 10.110.227.112 &amp;lt;none&amp;gt; 15010/TCP,15012/TCP,443/TCP,15014/TCP 3h3m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">istio-system istiod-1-9 ClusterIP 10.107.205.100 &amp;lt;none&amp;gt; 15010/TCP,15012/TCP,443/TCP,15014/TCP 145m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-system kube-dns ClusterIP 10.96.0.10 &amp;lt;none&amp;gt; 53/UDP,53/TCP,9153/TCP 3h10m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rev-1-10 eth0 ClusterIP 10.111.38.103 &amp;lt;none&amp;gt; 8080/TCP 35m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rev-1-10 lo ClusterIP 10.106.100.209 &amp;lt;none&amp;gt; 8080/TCP 35m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rev-1-9 eth0 ClusterIP 10.105.29.177 &amp;lt;none&amp;gt; 8080/TCP 35m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rev-1-9 lo ClusterIP 10.100.228.64 &amp;lt;none&amp;gt; 8080/TCP 35m
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ì„±ê³µì ìœ¼ë¡œ ë°°í¬í–ˆë‹¤ë©´ ìœ„ì™€ ê°™ì„ ê²ƒì…ë‹ˆë‹¤.&lt;/p>
&lt;h2 id="netcat-ì„œë²„ë“¤ì—ê²Œ-ìš”ì²­-ë³´ë‚´ë³´ê¸°">netcat ì„œë²„ë“¤ì—ê²Œ ìš”ì²­ ë³´ë‚´ë³´ê¸°&lt;/h2>
&lt;p>kubectl execì™€ netcat ëª…ë ¹ì–´ë¥¼ í†µí•´ &lt;code>netcat-client&lt;/code> ì˜ ì´ë¦„ìœ¼ë¡œ ë°°í¬í•œ Podë¡œ ê° Serviceë“¤ì„ ê±°ì³ ê° Podì—ê²Œ ìš”ì²­ì„ ë³´ë‚´ë³¼ ê²ƒì…ë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">$ kubectl &lt;span class="nb">exec&lt;/span> -n default netcat-client -- bash -c &lt;span class="s2">&amp;#34;echo &amp;#39;ping&amp;#39; | nc lo.rev-1-9 8080&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pong
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ kubectl &lt;span class="nb">exec&lt;/span> -n default netcat-client -- bash -c &lt;span class="s2">&amp;#34;echo &amp;#39;ping&amp;#39; | nc eth0.rev-1-9 8080&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Ncat: Connection reset by peer.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">command&lt;/span> terminated with &lt;span class="nb">exit&lt;/span> code &lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ê° Podì˜ netcat serverê°€ ì„±ê³µì ìœ¼ë¡œ ì‹¤í–‰ë˜ë©´ ìœ„ì™€ ê°™ì´ &lt;code>netcat-client&lt;/code> Podë¥¼ ì´ìš©í•´ ëª…ë ¹ì„ ë‚ ë ¤ ì‘ë‹µì„ ë°›ì•„ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>(&lt;strong>ì´ˆê¸° ì„œë²„ê°€ êµ¬ë™ë˜ê¸°ê¹Œì§€ ë‹¤ì†Œ ì‹œê°„ì´ ê±¸ë¦´ ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/strong> ì´ ê²½ìš° ì„œë²„ì˜ ë¡œê·¸ë¥¼ í†µí•´ ì„œë²„ê°€ êµ¬ë™ëëŠ”ì§€ë¥¼ í™•ì¸í•´ë³´ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.)&lt;/p>
&lt;p>&lt;code>eth0&lt;/code>ì˜ IPì— ì„œë²„ë¥¼ ë„ìš´ Podë¥¼ ëª©ì ì§€ë¡œ í•˜ëŠ” Serviceì—ê²Œ ìš”ì²­ì„ ë³´ë‚¼ ê²½ìš° í•´ë‹¹ ëª©ì ì§€ Podê°€ istio 1.9ì— ì˜í•´ sidecar injection ë˜ì—ˆë‹¤ë©´ Pod ë‚´ì˜ ì„œë²„ëŠ” ì˜¬ë°”ë¥´ê²Œ ìš”ì²­ì„ ì „ë‹¬ë°›ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">$ kubectl &lt;span class="nb">exec&lt;/span> -n default netcat-client -- bash -c &lt;span class="s2">&amp;#34;echo &amp;#39;ping&amp;#39; | nc lo.rev-1-10 8080&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Ncat: Connection reset by peer.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">command&lt;/span> terminated with &lt;span class="nb">exit&lt;/span> code &lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ kubectl &lt;span class="nb">exec&lt;/span> -n default netcat-client -- bash -c &lt;span class="s2">&amp;#34;echo &amp;#39;ping&amp;#39; | nc eth0.rev-1-10 8080&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pong
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>istio 1.10ì„ ì´ìš©í•œ ê²½ìš° ê²°ê³¼ëŠ” ì˜ˆìƒëŒ€ë¡œ istio 1.9ì™€ ë°˜ëŒ€ì…ë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;code>lo&lt;/code> ì˜ IPì— ì„œë²„ë¥¼ ë„ìš´ Podë¥¼ ëª©ì ì§€ë¡œ í•˜ëŠ” Serviceì—ê²Œ ìš”ì²­ì„ ë³´ë‚¼ ê²½ìš° í•´ë‹¹ ëª©ì ì§€ Podê°€ istio 1.10ì— ì˜í•´ sidecar injection ë˜ì—ˆë‹¤ë©´ Pod ë‚´ì˜ ì„œë²„ëŠ” ì˜¬ë°”ë¥´ê²Œ ìš”ì²­ì„ ì „ë‹¬ë°›ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.&lt;/p>
&lt;h2 id="ë§ˆì¹˜ë©°">ë§ˆì¹˜ë©°&lt;/h2>
&lt;p>ìš”ì¦˜ ë²„ì „ì´ ì°¸ ì¤‘ìš”í•˜ë‹¤ëŠ” ìƒê°ì´ ë“­ë‹ˆë‹¤. ì‹¤ì œë¡œ &lt;strong>ì´ë ‡ê²Œ ë²„ì „ì— ë”°ë¼ í†µì‹ ì´ ë˜ê³  ì•ˆ ë˜ê³ ê°€ ê²°ì •ë  ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì„ í™•ì¸í•´ë³´ë‹ˆ í•œì¸µ ë” ë²„ì „ì´ ì¤‘ìš”í•˜ê²Œ ëŠê»´ì§‘ë‹ˆë‹¤.&lt;/strong>&lt;/p>
&lt;p>ë”°ë¡œ ì»¨í…Œì´ë„ˆ ì´ë¯¸ì§€ë¥¼ ì œì‘í•˜ê³  imagePullSecretì„ ê¸°ì…í•˜ê¸° ê·€ì°®ì•„ì„œ ê¸°ì¡´ì— ì¡´ì¬í•˜ëŠ” Ubuntu ì´ë¯¸ì§€ë¥¼ í™œìš©í•˜ë ¤ë‹¤ ë³´ë‹ˆ ê°„ë‹¨í•˜ê²Œ ë„¤íŠ¸ì›Œí¬ í†µì‹ ì„ í•˜ê¸° ìœ„í•´ netcatì„ ì ê·¹ í™œìš©í•´ë´¤ìŠµë‹ˆë‹¤. ì˜¤íˆë ¤ ë„ˆë¬´ ì½”ë“œê°€ ê¸¸ì–´ì¡Œë‚˜ ì‹¶ê¸°ë„í•˜ë„¤ìš”.&lt;/p>
&lt;p>ì´ ì‘ì—…ì„ í•˜ë©´ì„œ ì™„ì „íˆ ì´í•´í•˜ì§€ ëª»í•œ ë¶€ë¶„ì´ í•œ ê°€ì§€ ì¡´ì¬í•˜ê¸´ í•©ë‹ˆë‹¤. ì‘ì—…í•˜ë©° ê²½í—˜í•œ ë°”ë¡œëŠ” Podì˜ IPë¡œ ìš”ì²­ì„ ë³´ë‚´ëŠ” ê²½ìš°ì—ëŠ” istio ë²„ì „ì— ë¬´ê´€í•˜ê²Œ eth0ì˜ IPë¡œ ì„œë²„ë¥¼ ë„ì›Œì•¼ë§Œ ì™¸ë¶€(ë™ë£Œ Podë“¤)ì—ì„œëŠ” ì ‘ì†ì´ ê°€ëŠ¥í•˜ê³ , loì˜ IPë¡œ ì„œë²„ë¥¼ ë„ìš°ëŠ” ê²½ìš° Podì˜ IPë¡œ ì ‘ì†ì´ ë¶ˆê°€ëŠ¥í–ˆëŠ”ë°ìš”. ì‚¬ì‹¤ ì´ë¡œ ì¸í•´ ë§ì€ ì‚½ì§ˆì„ í–ˆìŠµë‹ˆë‹¤â€¦ ì™œ ì„œë¹„ìŠ¤ë¡œ ì ‘ì†í•  ë•Œì—ëŠ” ì˜ˆìƒëŒ€ë¡œ ë²„ì „ì— ë§ëŠ” ë™ì‘ì„ í•˜ëŠ”ë°, Podì˜ IPë¡œ ì§ì ‘ ì ‘ì†í•  ë•Œì—ëŠ” ë¬´ì¡°ê±´ eth0ì˜ IPë¡œ ì„œë²„ë¥¼ ë„ìš´ ê²½ìš°ì—ë§Œ ì™¸ë¶€ì—ì„œ ì ‘ê·¼ì´ ê°€ëŠ¥í•œì§€ëŠ” ì˜ ëª¨ë¥´ê² ìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>í•˜ì§€ë§Œ ê³¼ê±° ë²„ì „ì˜ istioë¥¼ í†µí•´ ë„¤íŠ¸ì›Œí¬ ì¸í„°í˜ì´ìŠ¤ì˜ ë™ì‘ì„ í™•ì¸í•´ë³´ëŠ” ê²ƒì€ ì´ ì •ë„ë¡œ ì¶©ë¶„í•  ê²ƒ ê°™ë‹¤ê³  ìƒê°ì´ ë“¤ì–´ ì´ë²ˆ ê¸€ì€ ì—¬ê¸°ì„œ ë§ˆë¬´ë¦¬ ì§€ìœ¼ë ¤í•©ë‹ˆë‹¤. ğŸ™‚&lt;/p></description></item><item><title>ì¿ ë²„ë„¤í‹°ìŠ¤ë¡œ Clova AI Custom Extension ë°°í¬í•˜ê¸° (feat. Istio, Cert Manager)</title><link>https://umi0410.github.io/blog/clova-ai-on-k8s/</link><pubDate>Wed, 13 Jul 2022 23:00:00 +0900</pubDate><guid>https://umi0410.github.io/blog/clova-ai-on-k8s/</guid><description>&lt;img src="https://umi0410.github.io/blog/clova-ai-on-k8s/preview.png" alt="Featured image of post ì¿ ë²„ë„¤í‹°ìŠ¤ë¡œ Clova AI Custom Extension ë°°í¬í•˜ê¸° (feat. Istio, Cert Manager)" />&lt;h2 id="ì‹œì‘í•˜ë©°">ì‹œì‘í•˜ë©°&lt;/h2>
&lt;p>&lt;img src="https://umi0410.github.io/blog/clova-ai-on-k8s/preview.png"
width="827"
height="555"
srcset="https://umi0410.github.io/blog/clova-ai-on-k8s/preview_hu0de35698344aa28c3f5141b2d5dcaef6_812038_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/clova-ai-on-k8s/preview_hu0de35698344aa28c3f5141b2d5dcaef6_812038_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="Clova AI ìŠ¤í”¼ì»¤"
class="gallery-image"
data-flex-grow="149"
data-flex-basis="357px"
>&lt;/p>
&lt;p>&lt;strong>ì˜¬í•´ì—ëŠ” ë§ì€ ë³€í™”ê°€ ìˆì—ˆë‹¤!&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>ğŸ’¼ &lt;strong>ë°ë¸Œì˜µìŠ¤ ì—”ì§€ë‹ˆì–´&lt;/strong>ë¡œ íšŒì‚¬ë¥¼ ê°€ê²Œ ëê³  ì•„ì£¼ ë§Œì¡± ì¤‘ì´ë‹¤!&lt;/li>
&lt;li>ğŸ  íšŒì‚¬ì˜ ì¢‹ì€ ë³´ìƒ, ë³µì§€ì— í˜ì…ì–´ ìƒì•  ì²« &lt;strong>ìì·¨&lt;/strong>ë¥¼ í•˜ê²Œ ëë‹¤.&lt;/li>
&lt;li>ğŸ’» &lt;strong>ë„¤íŠ¸ì›Œí¬&lt;/strong>ë‚˜ &lt;strong>ë¦¬ëˆ…ìŠ¤&lt;/strong>, &lt;strong>ë³´ì•ˆ&lt;/strong> ë“± ë”¥í•œ ì˜ì—­ì— ì¢€ ë” ê´€ì‹¬ì„ ê°–ê²Œ ëë‹¤.&lt;/li>
&lt;li>ğŸ¸ &lt;strong>ê¸°íƒ€&lt;/strong>ë¥¼ ê¾¸ì¤€íˆ ë‹¤ë‹ˆê³  ìˆë‹¤.&lt;/li>
&lt;/ul>
&lt;p>ê·¸ëŸ° ë³€í™”ë“¤ ì†ì—ì„œ ìì·¨ë°©ì— ì¸í„°ë„· ì„¤ì¹˜ë¥¼ í•˜ê²Œ ëëŠ”ë° &lt;strong>í´ë¡œë°” AI ìŠ¤í”¼ì»¤&lt;/strong>ë¥¼ ê³µì§œë¡œ ì£¼ë”ë¼.&lt;/p>
&lt;p>ë³¸ê°€ì— ìˆì„ ë•Œë„ ì“°ê¸´ í–ˆëŠ”ë° ë”±íˆ ê´€ì‹¬ ì—†ë‹¤ê°€ ì§ì ‘ í´ë¡œë°” ì•±ì„ ê¹”ì•„ì„œ ì´ê²ƒì €ê²ƒ ì¨ë³´ë‹ˆ &amp;lsquo;ì „ë³´ë‹¤ ì¬ë°Œë„¤..? ã…ã…&amp;rsquo; ì‹¶ì—ˆê³ , &amp;lsquo;ì•„ë‹ˆ ì´ê±° ì§ì ‘ ë§Œë“¤ì§€ëŠ” ëª»í•˜ë‚˜&amp;rsquo;í•˜ëŠ” ìƒê°ì´ ë“¤ë˜ ì°¸ì— &amp;ldquo;ìŠ¤í‚¬ ìŠ¤í† ì–´â€ë¼ëŠ” ê²Œ ëˆˆì— ë„ì—ˆë‹¤. ìŠ¤í‚¬ ìŠ¤í† ì–´ì—ëŠ” ê°œë³„ ê°œë°œì‚¬ë“¤ì´ ê°œë°œí•œ ìê¸°ë„¤ ê¸°ëŠ¥ë“¤ì´ ì†Œê°œë˜ì–´ìˆì—ˆë‹¤.&lt;/p>
&lt;p>ìš”ì¦˜ ì¬ë¯¸ìˆê²Œ ë”¥í•œ ì˜ì—­ì„ ê³µë¶€í•´ë‚˜ê°€ê³  ìˆê¸´ í•˜ì§€ë§Œ ë„ˆë¬´ ë”¥í•œ ê²ƒë§Œ í•˜ë‹¤ë³´ë‹ˆ ì‹¬ì‹¬í’€ì´ ì‘ì—… ì¢€ ì¦ê¸°ê³  ì‹¶ì€ ë§ˆìŒì— ë‚˜ë„ í•˜ë‚˜ ìŠ¤í‚¬ì„ ë§Œë“¤ì–´ë³´ê³ ì í–ˆë‹¤. ë§ˆì¹¨ ìš”ì¦˜ &lt;code>istio&lt;/code>ì—ë„ ê´€ì‹¬ì´ ë§ì´ ê°”ê³  ì ìš©í•´ë³´ê³  ì‹¶ì—ˆëŠ”ë° ê°–ê³  ìˆë˜ k8s í´ëŸ¬ìŠ¤í„°ì— istioëŠ” ë°°í¬í•´ë†“ì€ ìƒíƒœì˜€ê³ , &lt;code>Gateway&lt;/code>, &lt;code>VirtualService&lt;/code> ë“±ì˜ &lt;code>CRD&lt;/code>ì™€ &lt;code>ì¸ì¦ì„œ&lt;/code>ë§Œ ì˜ ë§Œì ¸ì£¼ë©´ ìŠ¤í‚¬ì„ ê³µê°œí•  ìˆ˜ ìˆì„ ê²ƒ ê°™ì•˜ë‹¤.&lt;/p>
&lt;p>ê·¸ë¦¬í•˜ì—¬ &amp;ldquo;&lt;strong>ìš°ë¯¸, ë¯¸ìŠ¤í„° ë””ë²„ê±°&lt;/strong>&amp;ldquo;ë¼ëŠ” ìŠ¤í‚¬ì„ ê°œë°œí•˜ê³ ì í–ˆê³  ì´ ë…€ì„ì˜ ê¸°ëŠ¥ì€ ì‚¬ìš©ìê°€ &amp;ldquo;ë””ë²„ê±°, ë””ë²„ê¹… íŒ ì¢€ ì•Œë ¤ì¤˜&amp;quot;ë¼ëŠ” ì‹ìœ¼ë¡œ ìš”ì²­í•˜ë©´ ë¯¸ë¦¬ ì •ì˜í•´ë†“ì€ ë””ë²„ê¹… íŒ(e.g. &amp;ldquo;í™˜ê²½ë³€ìˆ˜ê°€ ì˜ ì„¤ì •ë˜ì–´ìˆë‚˜ìš”?&amp;rdquo;) ì¤‘ì—ì„œ ëœë¤ìœ¼ë¡œ íŒì„ ì•Œë ¤ì£¼ëŠ” ê²ƒì´ë‹¤.&lt;/p>
&lt;blockquote>
&lt;p>&lt;em>ì´ë²ˆ ê¸€ì€ ê·¸ëƒ¥ ì¼ê¸°ì¥ ê°™ì€ ëŠë‚Œìœ¼ë¡œ CS ì§€ì‹ì€ ì¼ë¶€ ì œì™¸í•˜ê³  ì ì–´ë³´ë ¤í•©ë‹ˆë‹¤.&lt;/em>&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>&lt;em>ì´ë²ˆ ê¸€ì—ì„œ ì‚¬ìš©í•œ ì†ŒìŠ¤ì½”ë“œëŠ” Github &lt;a class="link" href="https://github.com/umi0410/umi-mrdebugger" target="_blank" rel="noopener"
>umi0410/umi-mrdebugger&lt;/a>ì—ì„œ ì°¾ì•„ë³´ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/em>&lt;/p>
&lt;/blockquote>
&lt;h2 id="í™˜ê²½-ë°-ë²„ì „-ì •ë³´">í™˜ê²½ ë° ë²„ì „ ì •ë³´&lt;/h2>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>ì´ë¦„&lt;/th>
&lt;th>ë²„ì „&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>k8s cluster&lt;/td>
&lt;td>1.22&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Istio&lt;/td>
&lt;td>1.11.8&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>cert-manager&lt;/td>
&lt;td>1.8.2&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>ì‹¤ì œë¡œ ì‹¤ë¬´ë¥¼ ë‹¤ë£¨ê³  ìµœì‹  ê¸°ìˆ ë“¤ì„ ì´ìš©í•˜ë‹¤ë³´ë‹ˆ &lt;strong>ìµœê·¼ ë²„ì „ìœ¼ë¡œ ì¸í•œ ì‚½ì§ˆì´ ì¦ì•˜ë‹¤&lt;/strong>. ë”°ë¼ì„œ í˜¹ì‹œ ì°¸ê³ í•˜ì‹¤ ë¶„ì´ ê³„ì‹¤ê¹Œ ì‹¶ì–´ ë‚´ í´ëŸ¬ìŠ¤í„°ì˜ í™˜ê²½ ë° ë²„ì „ ì •ë³´ë¥¼ ì •ë¦¬í•´ë´¤ë‹¤. &lt;strong>ë²„ì „ì€ ì°¸ ì¤‘ìš”í•˜ë‹¤&lt;/strong>. ê° ë„êµ¬ë“¤ì˜ í˜¸í™˜ì„±ì„ ì˜ í™•ì¸í•´ë´ì•¼í•œë‹¤.&lt;/p>
&lt;p>ë‚˜ëŠ” í´ëŸ¬ìŠ¤í„°ë¥¼ í•œë™ì•ˆ ì—…ê·¸ë ˆì´ë“œ í•´ì£¼ì§€ ì•Šì•„ 2022ë…„ 7ì›” ê¸°ì¤€ìœ¼ë¡œ ê·¸ëƒ¥ ì €ëƒ¥ ìµœì‹ ì€ ì•„ë‹Œ &lt;a class="link" href="https://kubernetes.io/releases/patch-releases/#1-22" target="_blank" rel="noopener"
>1.22 ë²„ì „&lt;/a>ì˜ k8s í´ëŸ¬ìŠ¤í„°ë¥¼ ê°–ê³  ìˆì—ˆê³  istioëŠ” k8s 1.22ì™€ í˜¸í™˜ë˜ëŠ” ë²„ì „ ì¤‘ ê°€ì¥ ì˜¤ë˜ëœ minor ë²„ì „ì˜ &lt;a class="link" href="https://istio.io/latest/docs/releases/supported-releases/" target="_blank" rel="noopener"
>1.11.8&lt;/a>ì„ ì‚¬ìš©í–ˆë‹¤. istioë¥¼ ìµœëŒ€í•œ êµ¬ë²„ì „ìœ¼ë¡œ ì´ìš©í•´ë³¸ ì´ìœ ëŠ” istioë¥¼ ì—…ê·¸ë ˆì´ë“œí•´ë‚˜ê°€ë©´ì„œ istioì˜ ë³€ê²½ì‚¬í•­, ì—­ì‚¬ë“±ì„ ê³µë¶€í•˜ë©´ ì¢‹ì„ ê²ƒ ê°™ê¸° ë•Œë¬¸ì´ì—ˆë‹¤. ë•Œë¡œëŠ” ì—…ê·¸ë ˆì´ë“œ ì‘ì—…ì„ ì‹¤ì œë¡œ ì§„í–‰í•´ì•¼í•  ìˆ˜ë„ ìˆê³  ë§ì´ë‹¤.&lt;/p>
&lt;p>&lt;code>cert-manager&lt;/code>ëŠ” ê°€ë” CRD api versionì´ ë³€ê²½ë˜ëŠ” ê²½ìš°ê°€ ìˆì–´ì„œ ê·¸ëƒ¥ ê¸°ë¡í•´ë†¨ë‹¤.&lt;/p>
&lt;p>&lt;code>k8s&lt;/code>ëŠ” &lt;code>GKE&lt;/code>ë¥¼ ì´ìš© ì¤‘ì´ê³  &lt;code>istio&lt;/code>ëŠ” &lt;code>istioct&lt;/code>lë¡œ, &lt;code>cert-manager&lt;/code>ëŠ” &lt;code>Helm3&lt;/code>ë¡œ ê´€ë¦¬ ì¤‘ì´ë‹¤.&lt;/p>
&lt;h2 id="ì„œë²„-ê°œë°œí•˜ê¸°">ì„œë²„ ê°œë°œí•˜ê¸°&lt;/h2>
&lt;p>ì„œë²„ ê°œë°œì€ ë³„ê±° ì—†ë‹¤. ê·¸ëƒ¥ HTTP Post ìš”ì²­ ë¶„ì„ í›„ ì‘ë‹µì„ ì£¼ë©´ ëœë‹¤. ì‹¤ì œë¡œ ì •ë§ ê·¸ ì •ë„ ìˆ˜ì¤€ì´ë¼ í‡´ê·¼ í›„ ëª‡ ì‹œê°„ ë§Œì— ê°œë°œ â†’ ë°°í¬ê¹Œì§€ ì™„ë£Œí•  ìˆ˜ ìˆì—ˆë‹¤. ìƒê°ë³´ë‹¤ ê¸ˆë°©ì´ì—ˆë‹¤.&lt;/p>
&lt;p>ì§ìƒëœ ì§€ ëª‡ ë…„ì€ ëœ ë“¯í•˜ë©´ì„œ &lt;a class="link" href="https://developers.naver.com/docs/clova/custom_ext/Develop/Guides/Build_Custom_Extension.md" target="_blank" rel="noopener"
>ê·¸ë‹¥ ì¹œì ˆí•˜ì§„ ì•Šì€ ê³µì‹ ë¬¸ì„œ&lt;/a>ì™€ &lt;a class="link" href="https://developers.naver.com/docs/clova/custom_ext/Develop/Examples/Extension_Examples.md#CoinHelper" target="_blank" rel="noopener"
>ì˜ˆì‹œ í”„ë¡œì íŠ¸(ì½”ì¸í—¬í¼)&lt;/a>ë¥¼ ì°¸ê³ í•˜ë©´ ì‰½ê²Œ ë§Œë“¤ì–´ë³¼ ìˆ˜ ìˆë‹¤. ë‚˜ëŠ” ì˜ˆì‹œ í”„ë¡œì íŠ¸ì¸ ì½”ì¸í—¬í¼ ë ˆí¬ì§€í† ë¦¬ë¥¼ í¬í¬ ë– ì„œ ê°œë°œí–ˆë‹¤.&lt;/p>
&lt;p>&amp;ldquo;ìš°ë¯¸, ë¯¸ìŠ¤í„° ë””ë²„ê±°&amp;rdquo; ë ˆí¬ì§€í† ë¦¬: &lt;a class="link" href="https://github.com/umi0410/umi-mrdebugger" target="_blank" rel="noopener"
>https://github.com/umi0410/umi-mrdebugger&lt;/a>&lt;/p>
&lt;p>(&lt;em>ì¼ê¸°ì¥ìŠ¤ëŸ¬ìš´ ê¸€ì´ë¯€ë¡œ ì½”ë“œë¥¼ í•´ì„í•˜ì§„ ì•Šê² ìŠµë‹ˆë‹¤.&lt;/em>)&lt;/p>
&lt;p>ë§ì€ ì˜ˆì‹œ í”„ë¡œì íŠ¸ ì¤‘ ì½”ì¸í—¬í¼ë¥¼ ê³¨ë¼ ê°œë°œí•´ë‚˜ê°„ ì´ìœ ëŠ” ìœ ì¼í•˜ê²Œ Goì–¸ì–´ë¡œ ê°œë°œëœ ì˜ˆì‹œ í”„ë¡œì íŠ¸ì˜€ê¸° ë•Œë¬¸ì¼ ë¿ì´ì—ˆë‹¤. ì‹¤ì œë¡œëŠ” ê·¸ëƒ¥ íƒ€ì… ì„ ì–¸ì´ë‘ ìœ í‹¸ í•¨ìˆ˜ ì •ë„ë§Œ ê°€ì ¸ì˜¤ê³  ë‚˜ë¨¸ì§„ ë‹¤ ì¬êµ¬í˜„í•˜ê²Œ ë˜ê¸´ í–ˆë‹¤. ê¸°ì¡´ì—” ë‚´ì¥ &lt;code>http&lt;/code> packageë¥¼ ì‚¬ìš©í–ˆëŠ”ë° &lt;code>fiber&lt;/code>ë¼ëŠ” ì›¹í”„ë ˆì„ì›Œí¬ ì´ìš©í•˜ë„ë¡ ë³€ê²½í•˜ëŠ” ë“±..&lt;/p>
&lt;h2 id="ì¿ ë²„ë„¤í‹°ìŠ¤ì—-ë°°í¬í•˜ê¸°">ì¿ ë²„ë„¤í‹°ìŠ¤ì— ë°°í¬í•˜ê¸°&lt;/h2>
&lt;p>ì¿ ë²„ë„¤í‹°ìŠ¤ì— ë°°í¬ëœ istioë¥¼ í†µí•´ ì™¸ë¶€ì—ì„œ ì„œë²„ Podë¡œ ì ‘ì† ê°€ëŠ¥í•˜ê²Œë” í•´ì¤„ ê²ƒì´ê³ , cert-managerë¥¼ í†µí•´ ì¸ì¦ì„œ ë°œê¸‰ í›„ í•´ë‹¹ ì¸ì¦ì„œì™€ ê´€ë ¨ëœ ì‹œí¬ë¦¿ì„ istioê°€ ê°€ì ¸ê°€ì„œ tlsë¥¼ ì œê³µí•œë‹¤.&lt;/p>
&lt;p>&lt;em>(k8s manifest file ë˜í•œ ì•ì„œ ì–¸ê¸‰í–ˆë“¯ &lt;a class="link" href="https://github.com/umi0410/umi-mrdebugger" target="_blank" rel="noopener"
>https://github.com/umi0410/umi-mrdebugger&lt;/a> ì—ì„œ ì°¾ì•„ë³´ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.)&lt;/em>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">umi-mrdebugger/k8s $ tree 4s 00:38:42
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”œâ”€â”€ certificate.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”œâ”€â”€ cluster-issuer.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”œâ”€â”€ deployment.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”œâ”€â”€ gateway.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”œâ”€â”€ svc.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â””â”€â”€ virtual-svc.yaml
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>í•„ìš”í•œ í•­ëª©ë“¤ì€ k8s ë¦¬ì†ŒìŠ¤ë“¤ì€ ìœ„ì™€ ê°™ë‹¤&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="c"># cluster-issuer.yaml&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">apiVersion&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">cert-manager.io/v1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">kind&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">ClusterIssuer&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">metadata&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">clova-issuer&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">namespace&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">cert-manager&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">spec&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">acme&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># The ACME server URL&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">server&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">https://acme-v02.api.letsencrypt.org/directory&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">email&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">dev.umijs@gmail.com&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># Name of a secret used to store the ACME account private key&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">privateKeySecretRef&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">clova-issuer-secret&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">solvers&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">http01&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ingress&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">class&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">istio&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>cert-managerê°€ Let&amp;rsquo;s Encryptë¡œ ì¸ì¦ì„œë¥¼ ë°œê¸‰ë°›ì„ ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” ClusterIssuerë¥¼ ì‘ì„±í•œë‹¤. ì•„ë§ˆ Certificateì™€ ë™ì¼ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ë¥¼ ì´ìš©í•œë‹¤ë©´ ClusterIssuerê°€ ì•„ë‹Œ Issuerì—¬ë„ ê´œì°®ì„ ê²ƒì´ë‹¤.&lt;/p>
&lt;p>ê·¸ë¦¬ê³  ê¸°ì¡´ì—ëŠ” Challenge ë°©ì‹ì„ DNS01ë¡œ í–ˆì—ˆëŠ”ë° DNS01 ë°©ì‹ì´ ì•½ê°„ ê°€ë¬¼ ê°€ë¬¼í•´ì ¸ì„œ ìš°ì„ ì€ HTTP01 ë°©ì‹ìœ¼ë¡œ ë„ë©”ì¸ì„ ì¸ì¦í•˜ê¸°ë¡œ í–ˆë‹¤.&lt;/p>
&lt;p>ì°¸ê³ ë¡œ HTTP01 ë°©ì‹ì„ ì´ìš©í•˜ëŠ” ê²½ìš° ì¸ì¦ì„œë¥¼ ë°œê¸‰ë°›ê¸° ì „ë¶€í„° ë¯¸ë¦¬ HTTP â†’ HTTPS ë¥¼ ì„¤ì •í•´ë‘ë©´ Challengeê°€ ì„±ê³µì ìœ¼ë¡œ ì´ë£¨ì–´ì§€ì§€ ì•ŠëŠ” ë“¯í•˜ë‹¤. ì•„ë§ˆ HTTPSë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸ ë˜ëŠ”ë° ì¸ì¦ì„œê°€ ì—†ë‹¤ë³´ë‹ˆ HTTPS í†µì‹ ì´ ì›í™œí•˜ì§€ ì•Šì•„ì„œê² ë‹¤.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="c"># certificate.yaml&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">apiVersion&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">cert-manager.io/v1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">kind&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Certificate&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">metadata&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">mrdebugger-cert&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">namespace&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">istio-system&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">spec&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">secretName&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">mrdebugger-cert-secret&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">commonName&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">mrdebugger.clova.jinsu.me&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">issuerRef&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">clova-issuer&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">kind&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">ClusterIssuer&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">group&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">cert-manager.io&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">dnsNames&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;mrdebugger.clova.jinsu.me&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>HTTP01 ë°©ì‹ìœ¼ë¡œ Challengeë¥¼ ì§„í–‰í•˜ê¸° ë•Œë¬¸ì— ì™€ì¼ë“œì¹´ë“œ(*, asterisk)ëŠ” ì‚¬ìš©í•˜ì§€ ëª»í•´ ê·¸ëƒ¥ ì‚¬ìš©í•  ë„ë©”ì¸ ë„¤ì„ì¸ &lt;a class="link" href="http://mrdebugger.clova.jinsu.me" target="_blank" rel="noopener"
>mrdebugger.clova.jinsu.me&lt;/a> ë¥¼ ì ì–´ì£¼ì—ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="c"># deployment.yaml&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">apiVersion&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">apps/v1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">kind&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Deployment&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">metadata&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">mrdebugger&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">labels&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">app&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">mrdebugger&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">spec&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">replicas&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">revisionHistoryLimit&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">3&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">selector&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">matchLabels&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">app&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">mrdebugger&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">template&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">metadata&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">labels&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">app&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">mrdebugger&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">spec&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">terminationGracePeriodSeconds&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">containers&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">mrdebugger&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">umi0410/mrdebugger&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">imagePullPolicy&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Always&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ports&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">http&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">containerPort&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">8080&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">readinessProbe&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">httpGet&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">port&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">8080&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">path&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">/health&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">initialDelaySeconds&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">5&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">timeoutSeconds&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">2&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">successThreshold&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">failureThreshold&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">3&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">periodSeconds&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">10&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="c"># svc.yaml&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">apiVersion&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">v1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">kind&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Service&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">metadata&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">namespace&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">mrdebugger&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">labels&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">app&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">mrdebugger&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">mrdebugger&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">spec&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">selector&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">app&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">mrdebugger&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ports&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">mrdebugger&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">port&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">80&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">protocol&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">TCP&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">targetPort&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">http&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">type&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">ClusterIP&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ì´ë²ˆì—” ê·¸ì € ê·¸ëŸ° í‰ë²”í•œ ì„œë²„ Podë¥¼ ë°°í¬í•´ì¤„ Deploymentì™€ ê·¸ê²ƒì„ ë…¸ì¶œì‹œì¼œì£¼ëŠ” Serviceë¥¼ ì‘ì„±í•´ì¤¬ë‹¤. ì´ê±´ ë­ ì„¤ëª…í•  ê±´ ì—†ë‹¤.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="c"># gateway.yaml&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">apiVersion&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">networking.istio.io/v1alpha3&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">kind&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Gateway&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">metadata&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">mrdebugger&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">spec&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">selector&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">istio&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">ingressgateway&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">servers&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">port&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">number&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">80&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">http&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">protocol&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">HTTP&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">hosts&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;mrdebugger.clova.jinsu.me&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c">#tls:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># httpsRedirect: true&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">port&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">number&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">443&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">https&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">protocol&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">HTTPS&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">hosts&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;mrdebugger.clova.jinsu.me&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">tls&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">mode&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">SIMPLE&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">credentialName&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">mrdebugger-cert-secret&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>istioì˜ Gateway CRDë¥¼ ì •ì˜í•˜ì. ë°°í¬ë˜ì–´ìˆëŠ” istio ingress gatewayë¥¼ selectorë¡œ ì„ íƒí•´ì£¼ê³  ì•„ê¹Œ ì •ì˜í•œ ì¸ì¦ì„œê°€ ë‹´ê¸¸ secretì„ TLSì—ì„œ ì‚¬ìš©í•˜ë„ë¡ í•œë‹¤.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="c"># virtual-svc.yaml&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">apiVersion&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">networking.istio.io/v1alpha3&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">kind&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">VirtualService&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">metadata&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">mrdebugger&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">namespace&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">mrdebugger&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">spec&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">hosts&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;*&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">gateways&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">mrdebugger&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">http&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">match&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">uri&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">prefix&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">/&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">route&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">destination&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">host&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">mrdebugger&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">port&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">number&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">80&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ë§ˆì§€ë§‰ìœ¼ë¡œ istioì˜ VirtualService CRDë¥¼ ì •ì˜í•´ì£¼ë©´ ëœë‹¤. ê·¸ëƒ¥ ëª¨ë“  ìš”ì²­ì„ mrdebugger ì„œë¹„ìŠ¤ë¡œ ë„˜ê²¨ì¤€ë‹¤ê³  ë³´ë©´ ëœë‹¤.&lt;/p>
&lt;p>ğŸ’¡ ëª‡ ê°€ì§€ istio CRDì— ëŒ€í•´ í—·ê°ˆë¦¬ëŠ” ë¶€ë¶„ë“¤ì„ ì •ì˜í•´ë³´ìë©´ ë‹¤ìŒê³¼ ê°™ë‹¤.&lt;/p>
&lt;ul>
&lt;li>GatewayëŠ” istio ingress gatewayì™€ ë‹¤ë¥´ë‹¤.
&lt;ul>
&lt;li>GatewayëŠ” CRDì´ê³ , ingress gatewayëŠ” ìì‹ ì„ selectorë¡œ ì„¤ì •í•œ Gatewayë¥¼ ë³´ê³  í•´ë‹¹ ì„¤ì •ì„ ì ìš©í•œë‹¤.&lt;/li>
&lt;li>ë§ˆì¹˜ Ingressì™€ Nginx Ingress Controller ê°™ì€ ëŠë‚Œì´ë„ê¹Œ&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>istio ingress gatewayëŠ” ë³´í†µ istio-system ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì— ì¡´ì¬í•œë‹¤.&lt;/li>
&lt;li>GatewayëŠ” ì•„ë¬´ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì— ë§Œë“¤ì–´ë„ ëœë‹¤.&lt;/li>
&lt;li>VirtualSevice ë˜í•œ ì•„ë¬´ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì— ë§Œë“¤ì–´ë„ ëœë‹¤.
&lt;ul>
&lt;li>ë‹¨, VirtualServiceì˜ destinationì€ ì ‘ê·¼ ê°€ëŠ¥í•œ mesh ë‚´ì˜ í˜¸ìŠ¤íŠ¸ì—¬ì•¼í•˜ê³  ë„¤ì„ìŠ¤í˜ì´ìŠ¤ê°€ ë‹¤ë¥¸ ê²½ìš° ì ì ˆí•œ ë„ë©”ì¸ ë„¤ì„ì„ ì¨ì•¼í•  ìˆ˜ ìˆë‹¤.&lt;/li>
&lt;li>ê°™ì€ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì˜ ê²½ìš° service nameë§Œìœ¼ë¡œ ì´ìš© ê°€ëŠ¥í•˜ë‹¤.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Service, Deployment, Pod, â€¦ ë˜í•œ ì•„ë¬´ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì— ë§Œë“¤ì–´ë„ ëœë‹¤.&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">umi-mrdebugger $ kubectl create ns mrdebugger
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">namespace/mrdebugger created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">umi-mrdebugger $ kubectl label namespace mrdebugger istio-injection&lt;span class="o">=&lt;/span>enabled
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">namespace/mrdebugger labeled
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">umi-mrdebugger $ kubectl apply -n mrdebugger -f k8s/!&lt;span class="o">[&lt;/span>clova-extension.png&lt;span class="o">](&lt;/span>clova-extension.png&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">certificate.cert-manager.io/mrdebugger-cert created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">clusterissuer.cert-manager.io/clova-issuer created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">deployment.apps/mrdebugger created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gateway.networking.istio.io/mrdebugger created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">service/mrdebugger created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">virtualservice.networking.istio.io/mrdebugger created
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>í•œ ë²ˆì— ë¦¬ì†ŒìŠ¤ê°€ ë¹µ ë– ì„œ ì˜ ì—°ê²°ë˜ë©´ ì¢‹ê² ì§€ë§Œ,,, ë‹¹ì—°íˆë„ í˜„ì‹¤ì‹¤ì€ ê·¸ë ‡ì§„ ì•Šë‹¤. ğŸ¥²&lt;/p>
&lt;p>ìì˜í•œ ì´ìŠˆë“¤ì„ í•´ê²°í•´ì£¼ê³  ë‚˜ë©´ ë‹¤ìŒê³¼ ê°™ì´ ì„œë²„ì—ê²Œ ì„±ê³µì ìœ¼ë¡œ ì‘ë‹µì„ ë°›ì„ ìˆ˜ ìˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ì¸ì¦ì„œê°€ READY ë˜ì—ˆë‹¤!&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ kubectl get cert -n istio-system mrdebugger-cert
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME READY SECRET AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mrdebugger-cert True mrdebugger-cert-secret 28m
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">$ curl https://mrdebugger.clova.jinsu.me/health
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">OK
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ğŸ‰ êµ¿. ì¢‹ë‹¹!&lt;/p>
&lt;h2 id="clova-ai-consoleì—ì„œ-custom-extension-ë“±ë¡í•˜ê¸°">Clova AI Consoleì—ì„œ Custom Extension ë“±ë¡í•˜ê¸°&lt;/h2>
&lt;p>&lt;img src="https://umi0410.github.io/blog/clova-ai-on-k8s/clova-extension.png"
width="2644"
height="1168"
srcset="https://umi0410.github.io/blog/clova-ai-on-k8s/clova-extension_hu30a22d310386de55f6d8e7b01bdb85ec_145585_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/clova-ai-on-k8s/clova-extension_hu30a22d310386de55f6d8e7b01bdb85ec_145585_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="Clova AI Console"
class="gallery-image"
data-flex-grow="226"
data-flex-basis="543px"
>&lt;/p>
&lt;p>&lt;a class="link" href="https://developers.naver.com/console/clova/cek/#/list" target="_blank" rel="noopener"
>Clova AI Console&lt;/a>ì— ê°€ì„œ ìì‹ ì˜ Extensionì„ ìƒì„±í•˜ë©´ ëœë‹¤. ë§Œë“œëŠ” ê³¼ì •ì€ ë³„ê±´ ì—†ë‹¤.&lt;/p>
&lt;p>&lt;img src="https://umi0410.github.io/blog/clova-ai-on-k8s/invoke-name.png"
width="988"
height="388"
srcset="https://umi0410.github.io/blog/clova-ai-on-k8s/invoke-name_huecd3aea919113a87c5572f6224b5da9d_24552_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/clova-ai-on-k8s/invoke-name_huecd3aea919113a87c5572f6224b5da9d_24552_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="í˜¸ì¶œ ì´ë¦„ ì„¤ì •"
class="gallery-image"
data-flex-grow="254"
data-flex-basis="611px"
>&lt;/p>
&lt;p>ì´ê²ƒë§Œ ì˜ ì„¤ì •í•´ì£¼ë©´ ë˜ëŠ”ë° ë³´í†µ &amp;ldquo;{{í˜¸ì¶œ ì´ë¦„}} ì‹œì‘í•´ì¤˜&amp;quot;ë¡œ ìŠ¤í‚¬ì´ ì‹œì‘ë˜ëŠ” ê²ƒ ê°™ë‹¤. ê·¸ ì´í›„ëŠ” ì„¸ì…˜ì´ ëŠì–´ì§€ì§€ ì•Šìœ¼ë©´ ì„¸ì…˜ì˜ ì»¨í…ìŠ¤íŠ¸ë¥¼ ì‚´ë ¤ ëŒ€í™”í•  ìˆ˜ëŠ” ìˆëŠ”ë“¯ í•˜ë‹¤.&lt;/p>
&lt;p>&lt;img src="https://umi0410.github.io/blog/clova-ai-on-k8s/build-interaction.png"
width="1822"
height="1292"
srcset="https://umi0410.github.io/blog/clova-ai-on-k8s/build-interaction_hu5f82ae87db59611aea885b4d853686af_141265_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/clova-ai-on-k8s/build-interaction_hu5f82ae87db59611aea885b4d853686af_141265_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="Interaction ëª¨ë¸ ë¹Œë“œ"
class="gallery-image"
data-flex-grow="141"
data-flex-basis="338px"
>&lt;/p>
&lt;p>ê·¸ë¦¬ê³  ë‚˜ì„  Interaction ëª¨ë¸ ì„¤ì •ì— ë“¤ì–´ê°€ ë¹Œë“œë¥¼ í•´ì¤˜ì•¼í•œë‹¤. ìì‹ ì´ Custom Intentë¥¼ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤í•´ë„ ë¬´ì¡°ê±´ í•œ ë²ˆì€ ë¹Œë“œë¥¼ í•´ì¤˜ì•¼í•œë‹¤. ë¬¸ì„œ ìƒìœ¼ë¡œëŠ” 3~5ë¶„ ì •ë„ ì†Œìš”ëœë‹¤ê³  í•˜ëŠ”ë° ì²´ê°ìƒ í•œ 10ë¶„ì€ ê±¸ë¦°ë“¯í•˜ë‹¤â€¦ ìµœì´ˆ 1ë²ˆì´ ì˜¤ë˜ ê±¸ë¦¬ëŠ” ê²ƒ ê°™ê³  ê·¸ ì´í›„ë¡œëŠ” ê¸ˆë°© ë˜ëŠ” ë“¯? (ì‚¬ì´íŠ¸ UIê°€ ê·¸ë‹¥ ì¹œì ˆí•˜ì§„ ì•Šë‹¤. ì•½ê°„ì€ ë²„ë ¤ì§„ ëŠë‚Œâ€¦?)&lt;/p>
&lt;p>ê·¸ëŸ¬ê³  ë‚˜ë©´ í…ŒìŠ¤í„° IDë¥¼ ë“±ë¡í•´ì¤˜ì•¼í•œë‹¤. ë³´í†µì€ ì‹¬ì‚¬, ì‹¤ì œ í¼ë¸”ë¦¬ì‹œê¹Œì§€ëŠ” ê·€ì°®ê¸° ë•Œë¬¸ì—â€¦ í˜¼ìë§Œ ì“¸ ê±°ë¼ë˜ê°€ ê·¸ëƒ¥ ì¬ë¯¸ì‚¼ì•„ ë§Œë“¤ì–´ë³¸ ê²½ìš°ì—ëŠ” ë­ í…ŒìŠ¤í„°ë§Œìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” ê²ƒë„ ì¶©ë¶„í•  ê²ƒ ê°™ë‹¤. ë„¤ì´ë²„ API ë“±ë“±ì€ ì£¼ë¡œ ì´ë ‡ê²Œ ì¶œì‹œ ì‹¬ì‚¬ ì „ê¹Œì§€ í…ŒìŠ¤íŠ¸ IDë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ í•´ì£¼ë”ë¼.&lt;/p>
&lt;p>&lt;img src="https://umi0410.github.io/blog/clova-ai-on-k8s/on-skill-store.png"
width="1080"
height="2280"
srcset="https://umi0410.github.io/blog/clova-ai-on-k8s/on-skill-store_huaaaec7118a99371c40755dcdb78fc351_364049_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/clova-ai-on-k8s/on-skill-store_huaaaec7118a99371c40755dcdb78fc351_364049_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="47"
data-flex-basis="113px"
>&lt;/p>
&lt;p>í…ŒìŠ¤í„° ì•„ì´ë””ë¥¼ ë“±ë¡í•œ ë’¤ ë„¤ì´ë²„ í´ë¡œë°” ì•±ì— ìì‹ ì˜ ë„¤ì´ë²„ ì•„ì´ë””ë¡œ ë¡œê·¸ì¸í•˜ë©´ ìŠ¤í‚¬ ìŠ¤í† ì–´ í˜ì´ì§€ì—ì„œ ìœ„ì™€ ê°™ì´ ìì‹ ì´ ë“±ë¡í•œ ìŠ¤í‚¬ì„ ë³¼ ìˆ˜ ìˆë‹¤. ë¬¸ì„œìƒìœ¼ë¡  ì‹œê°„ì´ ê½¤ ê±¸ë¦´ ìˆ˜ë„ ìˆë‹¤ê³  í–ˆëŠ”ë° ì•„ë§ˆ ë°”ë¡œ ë³´ì˜€ë˜ ê²ƒ ê°™ë‹¤.&lt;/p>
&lt;p>ê·¸ëŸ¼ ì•„ë§ˆ ì•„ê¹Œ ì½˜ì†”ì—ì„œ ì„¤ì •í•œ &amp;ldquo;{{í˜¸ì¶œ ì´ë¦„}} ì‹œì‘í•´ì¤˜&amp;quot;ë¡œ ìŠ¤í‚¬ì„ ì‹œì‘í•  ìˆ˜ ìˆì„ ê²ƒì´ë‹¤. ë‚˜ëŠ” ëì— &amp;ldquo;ì‹œì‘í•´ì¤˜&amp;quot;ë¥¼ ì•ˆ ë¶™ì—¬ë„ ë˜ëŠ” ì¤„ ì•Œê³  í˜¸ì¶œ ì´ë¦„ì„ &amp;ldquo;ë””ë²„ê¹… ë„ì™€ì¤˜&amp;quot;ë¡œ í–ˆëŠ”ë° ê³ ìƒì„ ì¢€ í–ˆë‹¤. í˜¸ì¶œ ì´ë¦„ì´ &amp;ldquo;ë””ë²„ê¹… ë„ì™€ì¤˜&amp;quot;ì¸ ê²½ìš° ì‹¤ì œë¡œëŠ” &amp;ldquo;ë””ë²„ê¹… ë„ì™€ì¤˜ ì‹œì‘í•´ì¤˜&amp;rdquo; ì´ëŸ° ì‹ìœ¼ë¡œ ë§í•´ì•¼ ì‹¤í–‰ì´ ë˜ê¸° ë•Œë¬¸ì´ë‹¤â€¦ ã…œã…œ&lt;/p>
&lt;p>ê·¸ëŸ¼ ê²°ê³¼ë¥¼ í™•ì¸í•´ë³´ì.&lt;/p>
&lt;div class="video-wrapper">
&lt;iframe loading="lazy"
src="https://www.youtube.com/embed/gfkeh1Si_no"
allowfullscreen
title="YouTube Video"
>
&lt;/iframe>
&lt;/div>
&lt;p>ğŸ‰ ê·€ì—½ê²Œ ë””ë²„ê¹…ì„ ë„ì™€ì¤˜ëŠ” &amp;ldquo;&lt;strong>ë¯¸ìŠ¤í„° ë””ë²„ê±° ìš°ë¯¸&lt;/strong>&amp;ldquo;ë¥¼ ë§Œë‚˜ë³¼ ìˆ˜ ìˆì—ˆë‹¤. ğŸ¥³&lt;/p>
&lt;h2 id="ë§ˆì¹˜ë©°">ë§ˆì¹˜ë©°&lt;/h2>
&lt;p>ì˜¤ëœë§Œì— ë”¥í•œ ê¸°ìˆ ì„ íƒêµ¬í•˜ëŠ” ê²ƒì—ì„œ ë²—ì–´ë‚˜ ìœ í¥ìŠ¤ëŸ¬ìš´ ê°œë°œì„ í•´ë³´ì•˜ë‹¤. ì‚¬ì´ë“œ í”„ë¡œì íŠ¸ë¥¼ ì‹œì‘ìœ¼ë¡œ ê°€ê¾¸ê²Œ ëë˜ GKE í´ëŸ¬ìŠ¤í„°ì— &lt;strong>istioë¥¼ êµ¬ì¶•ë§Œ í•´ë†“ê³  ì œëŒ€ë¡œ ë„ì…ì€ ëª»í•´ë³¸ ìƒíƒœì˜€ëŠ”ë° ì´ë²ˆ ì„œë²„ ë°°í¬ë¥¼ ì§„í–‰í•˜ë©´ì„œ í•œ ë²ˆ ë°ëª¨ì²˜ëŸ¼ istioë¥¼ ì‚¬ìš©í•´ë³¼ ìˆ˜ ìˆì—ˆì–´ì„œ ì¢‹ì•˜ë‹¤&lt;/strong>. istioë¥¼ ë„ì…í•´ë³¸ ê±¸ ìƒê°í•˜ë©´ ê·¸ë‹¥ ìœ í¥ìŠ¤ëŸ½ë‹¤ê¸° ë³´ë‹¨ ê¸°ìˆ  íƒêµ¬ìŠ¤ëŸ¬ì› ì„ì§€ë„..? ã…ã…&lt;/p>
&lt;p>ìƒˆë¡œ íšŒì‚¬ë¥¼ ë“¤ì–´ê°€ê³ ë‚˜ì„œëŠ” ê¶ê¸ˆí•œ ê²ƒ, ê³µë¶€í•˜ê³  ì‹¶ì€ ê²ƒì´ ë„˜ì³ë‚˜ê³  ì¬ë¯¸ìˆê²Œ ê³µë¶€í•´ë‚˜ê°€ê³  ìˆì§€ë§Œ ë‹¤ì†Œ ë¸”ë¡œê·¸ì— ì •ë¦¬í•˜ê¸´ ì–´ë ¤ìš´ ë‚´ìš©ë“¤ì´ ë§ì€ ê²ƒ ê°™ë‹¤. ì–´ë ¤ìš´ ë‚´ìš©ë“¤ì´ë‹¤ë³´ë‹ˆ ê³µë¶€ëŠ” í–ˆë”ë¼ë„ 1ë²ˆì˜ ê³µë¶€ë§Œìœ¼ë¡œ ì˜ë¯¸ìˆëŠ” ê¸€ì„ ë‹´ì•„ë‚´ê¸´ ì–´ë µê¸°ë„ í–ˆë‹¤.&lt;/p>
&lt;p>í•˜ì§€ë§Œ ë°”ì˜ê¸°ë„ í•œë°ë‹¤ê°€ ë­”ê°€ ê¹Šì´ ìˆëŠ” ê¸€ì„ ì“°ë ¤ë‹¤ë³´ë‹ˆ ìš”ì¦˜ ë¸”ë¡œê·¸ì— ê¸€ì„ ì˜¤íˆë ¤ ì•ˆ ì“°ê²Œ ë˜ê³  &amp;lsquo;ì•„ ì´ê²ƒë„ ì¨ë³´ê³  ì‹¶ì€ë° ì €ê²ƒë„ ì¨ë³´ê³  ì‹¶ì€ë°â€¦&amp;rsquo; ìƒê°ë§Œ í•˜ë‹¤ ë²Œì¨ ë§ˆì§€ë§‰ìœ¼ë¡œ ê¸€ì„ ì“´ì§€ë„ ì—„ì²­ ì˜¤ë˜ëœ ê²ƒ ê°™ë‹¤.&lt;/p>
&lt;p>ê·¸ë˜ì„œ ì•ìœ¼ë¡œëŠ” CS ì§€ì‹ì´ë‚˜ ì •í™•í•œ ì •ë³´ëŠ” ì•„ë‹ˆë”ë¼ë„ ê°€ë” ì´ë ‡ê²Œ ê°œë°œ ì¼ê¸°ìŠ¤ëŸ¬ìš´ ê¸€ë„ ì ì–´ë³¼ê¹Œí•œë‹¤. ê·¸ëŸ° ê¸€ì€ ë‚¨ì—ê²Œ ì •ë³´ë¥¼ ì „ë‹¬í•˜ë ¤ëŠ” ëª©ì ë³´ë‹¨ ë‚˜ë¥¼ ê¸°ë¡í•˜ëŠ” ìš©ë„ê¸° ë•Œë¬¸ì— &amp;lsquo;&lt;em>â€¦ì…ë‹ˆë‹¤.&lt;/em>&amp;rsquo; ì²´ë³´ë‹¤ëŠ” &amp;lsquo;&lt;em>â€¦ì´ë‹¤&lt;/em>&amp;rsquo; ì²´ë¡œ ê·¸ëƒ¥ ê°€ë³ê²Œ ì ì–´ë‚˜ê°€ë ¤í•œë‹¤.&lt;/p>
&lt;p>&lt;em>ê·¸ëŸ¼, ë‹¤ìŒì— ë˜ ë§Œë‚˜ìš©.&lt;/em>&lt;/p></description></item><item><title>ArgoCD ì„ ì–¸ì ìœ¼ë¡œ ì´ìš©í•´ë‚˜ê°€ê¸° - Githubì„ í†µí•œ SSO ë° RBAC</title><link>https://umi0410.github.io/blog/devops/declarative-argocd-helm-rbac/</link><pubDate>Sat, 07 May 2022 22:00:00 +0900</pubDate><guid>https://umi0410.github.io/blog/devops/declarative-argocd-helm-rbac/</guid><description>&lt;img src="https://umi0410.github.io/blog/devops/declarative-argocd-helm-rbac/logo.png" alt="Featured image of post ArgoCD ì„ ì–¸ì ìœ¼ë¡œ ì´ìš©í•´ë‚˜ê°€ê¸° - Githubì„ í†µí•œ SSO ë° RBAC" />&lt;h2 id="ì‹œì‘í•˜ë©°">ì‹œì‘í•˜ë©°&lt;/h2>
&lt;p>ì €ë²ˆ ê¸€(&lt;a class="link" href="https://umi0410.github.io/blog/devops/declarative-argocd-helm-app-of-app/" target="_blank" rel="noopener"
>&amp;ldquo;ArgoCD ì„ ì–¸ì ìœ¼ë¡œ ì´ìš©í•´ë‚˜ê°€ê¸° - Helm, App of App&amp;rdquo;&lt;/a>)ì—ì„œëŠ”
&lt;code>Helm&lt;/code>ê³¼ &lt;code>App of App&lt;/code> íŒ¨í„´ì„ ì´ìš©í•´ ArgoCDë¥¼ ì„ ì–¸ì ìœ¼ë¡œ ì´ìš©í•´ë‚˜ê°€ëŠ” ë°©ë²•ì„ ë‹¤ë¤˜ìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>ë°”~ë¡œ ArgoCDë¥¼ ì¢€ ë” ì„ ì–¸ì ìœ¼ë¡œ ì´ìš©í•´ë‚˜ê°€ëŠ” ê²ƒê³¼ ê´€ë ¨ëœ íŒë¶€í„° ê¸€ì„ ì ì–´ë‚˜ê°€ê¸°ëŠ” ì¢€ ë¬´ë¦¬ê°€ ìˆì„ ê²ƒ ê°™ì•„ í•´ë‹¹ ê¸€ì—ì„œëŠ”&lt;/p>
&lt;p>ë°°ê²½ì§€ì‹ë“¤ì— ëŒ€í•œ ê°„ëµí•œ ì •ë¦¬ì™€ í•¸ì¦ˆì˜¨ ê°™ì€ ëŠë‚Œì˜ ë‚´ìš©ë“¤ë„ ë§ì´ í¬í•¨í•˜ê²Œ ëë˜ ê²ƒ ê°™ì•„ìš”.&lt;/p>
&lt;p>ì´ë²ˆ ê¸€ì—ì„œëŠ” &lt;strong>ArgoCDë¥¼ ì‹¤ì œë¡œ ì´ìš©í•˜ê¸° ìœ„í•´ í•„ìš”í• ë§Œí•œ ì´ëŸ° ì €ëŸ° ì„¤ì •ë“¤ì„ ì–´ë–»ê²Œ ì„ ì–¸ì ìœ¼ë¡œ ì •ì˜í•´ë³¼ ìˆ˜ ìˆì„ì§€&lt;/strong>ë¥¼ ì†Œê°œí•´ë³´ë ¤í•´ìš”!&lt;/p>
&lt;p>ê·¸ë¦¬ê³  ê·¸ ì˜ˆì‹œë¡œ &lt;code>RBAC ì„¤ì •&lt;/code>ì„ í•´ë³´ê² ìŠµë‹ˆë‹¤. ì´ë²ˆ ê¸€ì—ì„œ ìˆ˜í–‰í•´ë³¼ ì‘ì—…ì€ &lt;strong>Github ê³„ì •ì„ ArgoCDì™€ ì—°ë™ì‹œì¼œ ì—­í• (Role) ê¸°ë°˜ìœ¼ë¡œ ArgoCDì˜ ê¶Œí•œì„ ì œì–´&lt;/strong>í•˜ëŠ” ê²ƒì´ì—ìš”.&lt;/p>
&lt;p>&amp;lsquo;&lt;em>ì™œ RBACì„ ArgoCD ì»¤ìŠ¤í„°ë§ˆì´ì§•ì˜ ì˜ˆì‹œë¡œ í–ˆëŠ”ê°€?&lt;/em>&amp;lsquo;ëŠ” ì œê°€ ì‚¬ì´ë“œ í”„ë¡œì íŠ¸ì—ì„œ ArgoCDë¥¼ ì´ìš©í•˜ë©´ì„œ Local user(ArgoCDì˜ ìì²´ ê³„ì •)ì„ ì´ìš©í•˜ëŠ” ë°ì— ë¶ˆí¸ì´ ìˆì—ˆê¸° ë•Œë¬¸ì´ì—ìš”.
ì €ëŠ” &lt;strong>ArgoCDì™€ Github ê³„ì •ì„ ì—°ë™í•´ RBACì„ ì´ìš©í•¨ìœ¼ë¡œì¨ í•´ê²°&lt;/strong>í–ˆìŠµë‹ˆë‹¤. ì´ì œëŠ” Admin ê³„ì •ì˜ íŒ¨ìŠ¤ì›Œë“œë¥¼ ì•”ê¸°í•  í•„ìš”ë„ ìƒˆë¡œìš´ íŒ€ì›ì—ê²Œ ìƒˆ ê³„ì •ì„ ìƒì„±í•´ ì „ë‹¬í•  ì¼ë„ í•„ìš”ê°€ ì—†ì–´ì¡ŒìŠµë‹ˆë‹¤! ë˜í•œ Github ê³„ì • ë³„ë¡œ ê¶Œí•œì„ ê°–ë„ë¡ (e.g. readonly) ì„¤ì •í•  ìˆ˜ë„ ìˆì–´ì¡ŒìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>ê·¸ë¦¬ê³  ê¸€ì˜ ë‚´ìš©ì€ &amp;lsquo;&lt;em>ì œ ê¸€ë§Œ ë¬´ì¡°ê±´ ë”°ë¼í•˜ë©´ ë©ë‹ˆë‹¤&lt;/em>&amp;lsquo;ë³´ë‹¤ëŠ” &amp;lsquo;&lt;em>ì €ëŠ” ì´ëŸ° ì‹ìœ¼ë¡œ ìë£Œë¥¼ ì°¾ì•˜ê³  ì´ë ‡ê²Œ ì ìš©í•´ë´¤ì–´ìš”.&lt;/em>&amp;lsquo;ì‹ì˜ ë‚´ìš©ë“¤ì„ ë‹¤ë¤„ë³´ê² ìŠµë‹ˆë‹¤.&lt;/p>
&lt;h3 id="ë³¸-ê¸€ì—ì„œ-ì‚¬ìš©í•˜ëŠ”-í™˜ê²½">ë³¸ ê¸€ì—ì„œ ì‚¬ìš©í•˜ëŠ” í™˜ê²½&lt;/h3>
&lt;ul>
&lt;li>í•¸ì¦ˆì˜¨ ê³¼ì • ì°¸ê³  ë ˆí¬ì§€í† ë¦¬ - &lt;a class="link" href="https://github.com/umi0410/declarative-argocd/tree/master/configuring-rbac" target="_blank" rel="noopener"
>https://github.com/umi0410/declarative-argocd/tree/master/configuring-rbac&lt;/a>&lt;/li>
&lt;li>Minikubeë¥¼ ì´ìš©í•œ K8s Cluster&lt;/li>
&lt;li>&lt;a class="link" href="https://github.com/argoproj/argo-helm/tree/main/charts/argo-cd" target="_blank" rel="noopener"
>ArgoCD Helm Chart&lt;/a>ë¥¼ ì´ìš©í•´ argocd namespaceì— ë°°í¬í•œ ArgoCD&lt;/li>
&lt;/ul>
&lt;h2 id="rbacì´ë€">RBACì´ë€?&lt;/h2>
&lt;p>&lt;code>RBAC&lt;/code>ì€ &lt;code>Role-Based Access Contol&lt;/code>ì˜ ì•½ìë¡œ ì‰½ê²Œ ë§í•˜ìë©´ ê·¸ëƒ¥ ì—­í•  ê¸°ë°˜ ê¶Œí•œ ì œì–´ì…ë‹ˆë‹¤.&lt;/p>
&lt;p>ì†ì„± ê¸°ë°˜ìœ¼ë¡œ ë‚˜ë¦„ ë³µì¡í•œ ë¡œì§ì— ì˜í•´ ì–´ë–¤ ìœ ì €ê°€ ì–´ë–¤ ë¦¬ì†ŒìŠ¤ì— ì–´ë–¤ ì‘ì—…ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆëŠ”ì§€ë¥¼ ì •ì˜í•˜ëŠ” &lt;code>ABAC(Attribute-Base Access Control)&lt;/code>ì— ë¹„í•´ ê·¸ì € ê°„ë‹¨íˆ ì—­í• ì— ê¶Œí•œë“¤ì„ ë¶€ì—¬í•˜ê³  ìœ ì €ë“¤ì€ ê·¸ ì—­í• ì„ ë¶€ì—¬ë°›ìŒìœ¼ë¡œì¨ ê¶Œí•œì„ ì²´í¬í•˜ê²Œ ë©ë‹ˆë‹¤.&lt;/p>
&lt;p>ê°œì¸ì ìœ¼ë¡œëŠ” ë§ì€ ê²½ìš°ì— ê°„ë‹¨íˆ RBACë§Œìœ¼ë¡œë„ ê¶Œí•œ ì œì–´ê°€ ì¶©ë¶„í•œ ê²½ìš°ê°€ ë§ì€ ê²ƒ ê°™ìŠµë‹ˆë‹¤. ê·¸ë¦¬ê³  ë§ì€ ì†”ë£¨ì…˜ë“¤ì´ RBAC ê¸°ëŠ¥ì„ ì§€ì›í•˜ëŠ” ê²ƒ ê°™ì•˜ì–´ìš”. ArgoCD ë˜í•œ ë§ˆì°¬ê°€ì§€ë¡œ RBACì„ ì§€ì›í•˜ê³  ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;h2 id="github-organization--teamìœ¼ë¡œ-argocd-rbac-ì´ìš©í•˜ê¸°">Github organization + teamìœ¼ë¡œ ArgoCD RBAC ì´ìš©í•˜ê¸°&lt;/h2>
&lt;p>ì, ê·¸ëŸ¼ Githubì˜ Organization, Teamì„ í†µí•´ ArgoCDì—ì„œ RBACì„ ì´ìš©í•´ë³´ëŠ” ê³¼ì •ì„ ì§„í–‰í•´ë´…ì‹œë‹¤!&lt;/p>
&lt;h3 id="1-argocdì—-rbac-ì„¤ì •í•˜ê¸°">1. ArgoCDì— RBAC ì„¤ì •í•˜ê¸°&lt;/h3>
&lt;p>ìš”ì¦˜ ì¸ê¸°ìˆëŠ” ì†”ë£¨ì…˜ë“¤ì€ &lt;code>RBAC&lt;/code> ë° ê¸°íƒ€ ê¶Œí•œ ì œì–´ ê¸°ëŠ¥ì´ ëŒ€ë¶€ë¶„ ì¡´ì¬í•©ë‹ˆë‹¤. ë³´ì•ˆê³¼ ê¶Œí•œ ê´€ë¦¬ëŠ” ì•„ì£¼ ì¤‘ìš”í•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. ê·¸ë¦¬ê³  ê·¸ëŸ° ê¶Œí•œ ì œì–´ì˜ ë°©ë²• ì¤‘ ê°€ì¥ ëŒ€ì¤‘ì ì¸ ë°©ë²•ì€ ë°”ë¡œ &lt;code>RBAC&lt;/code> ì…ë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://umi0410.github.io/blog/devops/declarative-argocd-helm-rbac/rbac.png"
width="1204"
height="883"
srcset="https://umi0410.github.io/blog/devops/declarative-argocd-helm-rbac/rbac_hu8a1d47df067db6e35deb191bf75329be_273516_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/devops/declarative-argocd-helm-rbac/rbac_hu8a1d47df067db6e35deb191bf75329be_273516_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="ê³µì‹ ë¬¸ì„œ ì† RBAC ì„¤ëª…"
class="gallery-image"
data-flex-grow="136"
data-flex-basis="327px"
>&lt;/p>
&lt;p>ê³µì‹ ë¬¸ì„œëŠ” ì–¸ì œë‚˜ ê°€ì¥ ì¢‹ì€ êµê³¼ì„œì…ë‹ˆë‹¤. ìì„¸í•œ ë°©ë²•ì€ &lt;a class="link" href="https://argo-cd.readthedocs.io/en/stable/operator-manual/rbac/" target="_blank" rel="noopener"
>ê³µì‹ ë¬¸ì„œ&lt;/a>ì—ì„œ ì°¾ì•„ë³´ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://umi0410.github.io/blog/devops/declarative-argocd-helm-rbac/helm-chart-rbac.png"
width="1262"
height="74"
srcset="https://umi0410.github.io/blog/devops/declarative-argocd-helm-rbac/helm-chart-rbac_hu21132895ae0aab5f81e1c0650669ee11_33874_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/devops/declarative-argocd-helm-rbac/helm-chart-rbac_hu21132895ae0aab5f81e1c0650669ee11_33874_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="ArgoCD Helm Chart ì† Configuration"
class="gallery-image"
data-flex-grow="1705"
data-flex-basis="4092px"
>&lt;/p>
&lt;p>&lt;img src="https://umi0410.github.io/blog/devops/declarative-argocd-helm-rbac/default-values.png"
width="1109"
height="573"
srcset="https://umi0410.github.io/blog/devops/declarative-argocd-helm-rbac/default-values_hu2c68e4165a00fec2142fab308f6a57c0_319110_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/devops/declarative-argocd-helm-rbac/default-values_hu2c68e4165a00fec2142fab308f6a57c0_319110_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="default values.yaml"
class="gallery-image"
data-flex-grow="193"
data-flex-basis="464px"
>&lt;/p>
&lt;p>ë˜í•œ ì œê°€ ì‚¬ìš©í•œ &lt;a class="link" href="https://github.com/argoproj/argo-helm/tree/main/charts/argo-cd" target="_blank" rel="noopener"
>ArgoCD Helm Chartì—ì„œ ì œê³µí•˜ëŠ” README.md&lt;/a> ì† Configuration ë¶€ë¶„ê³¼ &lt;a class="link" href="https://github.com/argoproj/argo-helm/blob/main/charts/argo-cd/values.yaml" target="_blank" rel="noopener"
>default values.yaml&lt;/a> ë³´ë©´&lt;/p>
&lt;p>Helm Chartë¥¼ í†µí•´ ë°°í¬í•œ ArgoCDì˜ ê²½ìš° ì–´ë–»ê²Œ values.yamlì„ í†µí•´ rbacì„ ì„¤ì •í•  ìˆ˜ ìˆëŠ”ì§€ ë‚˜ì™€ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>ê¸°ë³¸ ì›ë¦¬ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.&lt;/p>
&lt;ul>
&lt;li>&lt;code>p, &amp;lt;role/user/group&amp;gt;, &amp;lt;resource&amp;gt;, &amp;lt;action&amp;gt;, &amp;lt;appproject&amp;gt;/&amp;lt;object&amp;gt;&lt;/code> - AppProjectì— ì†í•œ Object(e.g. Application)ì— ëŒ€í•œ ê¶Œí•œì„ ì •ì˜í•œë‹¤.&lt;/li>
&lt;li>&lt;code>p, &amp;lt;role/user/group&amp;gt;, &amp;lt;resource&amp;gt;, &amp;lt;action&amp;gt;, &amp;lt;object&amp;gt;&lt;/code> - AppProjectì— ì†í•˜ì§€ ì•ŠëŠ” Object(e.g. Clusters, AppProject, Repositories, &amp;hellip;)ì— ëŒ€í•œ ê¶Œí•œì„ ì •ì˜í•œë‹¤.&lt;/li>
&lt;/ul>
&lt;p>ê·¸ë¦¬ê³  ìœ„ì—ì„œ ë§í•˜ëŠ” Resourceë‚˜ Actionì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.&lt;/p>
&lt;ul>
&lt;li>&lt;strong>Resources&lt;/strong>: &lt;code>clusters&lt;/code>, &lt;code>projects&lt;/code>, &lt;code>applications&lt;/code>, &lt;code>repositories&lt;/code>, &lt;code>certificates&lt;/code>, &lt;code>accounts&lt;/code>, &lt;code>gpgkeys&lt;/code>&lt;/li>
&lt;li>&lt;strong>Actions&lt;/strong>: &lt;code>get&lt;/code>, &lt;code>create&lt;/code>, &lt;code>update&lt;/code>, &lt;code>delete&lt;/code>, &lt;code>sync&lt;/code>, &lt;code>override&lt;/code>, &lt;code>action&lt;/code>&lt;/li>
&lt;/ul>
&lt;p>ê³µì‹ ë¬¸ì„œì˜ ì„¤ëª…ì´ ì¢€ ë¶€ì¡±í•˜ê¸´í•˜ì§€ë§Œ Github SSOë¥¼ ì´ìš©í•´ ì¸ì¦í•˜ëŠ” ê²½ìš° RBACì€ ë‹¤ìŒê³¼ ê°™ì´ ì„¤ì •í•  ìˆ˜ ìˆë‹¤ê³  í•©ë‹ˆë‹¤.&lt;/p>
&lt;pre tabindex="0">&lt;code class="language-csv" data-lang="csv">p, role:org-admin, applications, *, */*, allow
p, role:org-admin, clusters, get, *, allow
p, role:org-admin, repositories, get, *, allow
p, role:org-admin, repositories, create, *, allow
p, role:org-admin, repositories, update, *, allow
p, role:org-admin, repositories, delete, *, allow
g, your-github-org:your-team, role:org-admin
&lt;/code>&lt;/pre>&lt;ul>
&lt;li>ì˜ë¯¸: org-adminì´ë¼ëŠ” Roleì´ ê°–ëŠ” ê¶Œí•œë“¤ì„ ì •ì˜í•˜ê³  í•´ë‹¹ &lt;!-- raw HTML omitted -->:&lt;!-- raw HTML omitted -->ì— ì†í•˜ëŠ” Github userë¡œ ë¡œê·¸ì¸í•œ ê²½ìš° org-admin Roleì— í—ˆìš©ëœ ê¶Œí•œë“¤ì„ ê°–ëŠ”ë‹¤.&lt;/li>
&lt;/ul>
&lt;p>ê·¸ë¦¬ê³  ì €ëŠ” ë‹¤ìŒê³¼ ê°™ì€ ìš”êµ¬ì‚¬í•­ì„ ê°€ì •í•˜ë ¤í•©ë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;strong>RBAC ìš”êµ¬ì‚¬í•­&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>ë‚˜ì˜ Github Organization &lt;code>khu-dev&lt;/code>ì˜ &lt;code>khumu-devops&lt;/code> íŒ€ì˜ ìœ ì €ë“¤ì€ admin ê¶Œí•œì„ ê°–ëŠ”ë‹¤.&lt;/li>
&lt;li>ë‚˜ì˜ Github Organization &lt;code>khu-dev&lt;/code>ì˜ &lt;code>khumu-devops&lt;/code> íŒ€ì˜ ìœ ì €ë“¤ì€ readonly ê¶Œí•œì„ ê°–ëŠ”ë‹¤.&lt;/li>
&lt;/ul>
&lt;p>ê·¸ ê²½ìš° ì €ëŠ” ë‹¤ìŒê³¼ ê°™ì´ values.yamlì„ ì‘ì„±í•œ ë’¤ helm releaseë¥¼ update í•´ì£¼ë©´ ë©ë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="c"># values.yaml&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">server&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">rbacConfig&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">policy.csv&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">|&lt;/span>&lt;span class="sd">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> g, khu-dev:khumu-developer, role:readonly
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> g, khu-dev:khumu-devops, role:admin&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nn">...&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;code>readonly&lt;/code>ì™€ &lt;code>admin&lt;/code>ì´ë¼ëŠ” Roleì€ ê³µì‹ë¬¸ì„œì—ë„ ë‚˜ì™€ìˆë“¯ &lt;code>builtin-policy&lt;/code>ë¡œì„œ &lt;a class="link" href="https://github.com/argoproj/argo-cd/blob/master/assets/builtin-policy.csv" target="_blank" rel="noopener"
>ì´ê³³&lt;/a>ì— ì‘ì„±ë˜ì–´ ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-console" data-lang="console">&lt;span class="line">&lt;span class="cl">&lt;span class="gp">$&lt;/span> helm upgrade -n argocd argocd &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span>&lt;span class="go"> argo/argo-cd -f values.yaml
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ê·¸ëŸ¼ ìœ„ì˜ ì»¤ë§¨ë“œë¥¼ í†µí•´ RBAC ì„¤ì •ì„ ì ìš©ì‹œì¼œì£¼ê² ìŠµë‹ˆë‹¤.&lt;/p>
&lt;h3 id="2-argocdì—-githubì„-í†µí•œ-sso-ì„¤ì •í•˜ê¸°">2. ArgoCDì— Githubì„ í†µí•œ SSO ì„¤ì •í•˜ê¸°&lt;/h3>
&lt;p>ArgoCDëŠ” &lt;a class="link" href="https://github.com/dexidp/dex" target="_blank" rel="noopener"
>Dex&lt;/a>ë¼ëŠ” ì¸ì¦ ê´€ë ¨ ê°ì¢… ê¸°ëŠ¥ì„ ë‹´ë‹¹í•˜ëŠ” ì»´í¬ë„ŒíŠ¸ë¥¼ í•¨ê»˜ ì œê³µí•˜ê³  ìˆìŠµë‹ˆë‹¤. &lt;code>Github&lt;/code>ì˜ &lt;code>OAuth2&lt;/code>ë¥¼ ì´ìš©í•´ &lt;code>SSO(Single Sign On)&lt;/code>ì„ ì´ìš©í•˜ëŠ” ê³¼ì •ì€ &lt;a class="link" href="https://argo-cd.readthedocs.io/en/stable/operator-manual/user-management/#dex" target="_blank" rel="noopener"
>ê³µì‹ë¬¸ì„œ Dex ë¶€ë¶„&lt;/a>ì—ë„
ì†Œê°œë˜ì–´ìˆê³ , ì‚¬ì‹¤ ì´ëŒ€ë¡œ ë”°ë¼ë§Œí•˜ë©´ ë©ë‹ˆë‹¤. ã…ã…&lt;/p>
&lt;p>&lt;img src="https://umi0410.github.io/blog/devops/declarative-argocd-helm-rbac/github-oauth-app.png"
width="660"
height="777"
srcset="https://umi0410.github.io/blog/devops/declarative-argocd-helm-rbac/github-oauth-app_hu395b1c716fc41f43b835749ac9fe7844_64355_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/devops/declarative-argocd-helm-rbac/github-oauth-app_hu395b1c716fc41f43b835749ac9fe7844_64355_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="Github OAuth app ìƒì„±í•˜ê¸°"
class="gallery-image"
data-flex-grow="84"
data-flex-basis="203px"
>&lt;/p>
&lt;p>&lt;code>Organization&lt;/code> - &lt;code>Settings&lt;/code> - &lt;code>Developer Settings&lt;/code> - &lt;code>OAuth Apps&lt;/code> ì—ì„œ ìœ„ì™€ ê°™ì´ OAuth Appì„ ë§Œë“¤ì–´ì£¼ê³  ì´í›„ ìƒì„±ë˜ëŠ” &lt;code>Client ID&lt;/code>ì™€ &lt;code>Client Secret&lt;/code>ì„ ë‹¤ìŒê³¼ ê°™ì´ &lt;code>dex.config&lt;/code>ì— ì „ë‹¬í•˜ë©´ ë©ë‹ˆë‹¤.
(ì‚¬ì‹¤ Organizationì´ ì•„ë‹ˆë¼ ê°œì¸ ê³„ì •ì—ì„œ Appì„ ìƒì„±í•´ë„ ë™ì‘í•©ë‹ˆë‹¤.)&lt;/p>
&lt;p>ë‹¨, &lt;code>dex.config&lt;/code>ëŠ” &lt;code>argocd-cm&lt;/code>ì´ë¼ëŠ” Configmapì˜ &lt;code>.data&lt;/code>ì˜ í•„ë“œë¡œ ì¡´ì¬í•˜ê¸° ë•Œë¬¸ì— ìš°ë¦¬ëŠ” Helm chartì˜ values.yamlì— &lt;code>dex.config&lt;/code>ë¥¼ ì˜¬ë°”ë¥´ê²Œ ì „ë‹¬í•´ì•¼í•©ë‹ˆë‹¤.
ì´ë¥¼ ìœ„í•´ì„  &lt;code>server.config.dex.config&lt;/code>ë¥¼ ë‹¤ìŒê³¼ ê°™ì´ ì‘ì„±í•´ì£¼ë©´ ë©ë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">server&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">config&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">dex.config&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">|&lt;/span>&lt;span class="sd">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> connectors:
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> # Github OAuthë¥¼ í†µí•´ SSOí•˜ë ¤ëŠ” ê²½ìš°
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> - type: github
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> id: github # ìƒê´€ ì—†ì„ ë“¯ ë­˜ë¡œ í•˜ë“ 
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> name: GitHub # ìƒê´€ ì—†ì„ ë“¯ ë­˜ë¡œ í•˜ë“ 
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> config:
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> clientID: &amp;lt;your github oauth app client id&amp;gt;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> clientSecret: &amp;lt;your github oauth app client secret&amp;gt;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> orgs:
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> - name: &amp;lt;your github organization name&amp;gt; # e.g. khu-dev&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nn">...&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;strong>server.config.dex.configì— ì‘ì„±í•´ì•¼í•œë‹¤ëŠ” ê²ƒì€ ì–´ë–»ê²Œ ì•Œ ìˆ˜ ìˆëŠ”ê°€?&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>&lt;a class="link" href="https://argo-cd.readthedocs.io/en/stable/operator-manual/declarative-setup/#quick-reference" target="_blank" rel="noopener"
>ArgoCDì˜ ê³µì‹ ë¬¸ì„œ&lt;/a>ì—ì„œëŠ” &lt;code>argocd-cm.yaml&lt;/code>ì„ &amp;lsquo;General Argo CD configuration&amp;rsquo;ë¡œ ì†Œê°œí•˜ê³  ìˆìŠµë‹ˆë‹¤.&lt;/li>
&lt;li>&lt;a class="link" href="https://github.com/argoproj/argo-helm/tree/main/charts/argo-cd" target="_blank" rel="noopener"
>ArgoCD Helm Chart Github&lt;/a>ì—ì„œëŠ” &lt;code>values.yaml&lt;/code> ì† &lt;code>server.config&lt;/code>ë¥¼ ë™ì¼í•˜ê²Œ &amp;lsquo;General Argo CD configuration&amp;rsquo;ë¡œ ì†Œê°œí•˜ê³  ìˆìŠµë‹ˆë‹¤.&lt;/li>
&lt;li>ë”°ë¼ì„œ &lt;code>values.yaml&lt;/code> ì† &lt;code>server.config&lt;/code>ì— ì •ì˜í•˜ëŠ” ë‚´ìš©ì´ ê³§ &lt;code>argocd-cm.yaml&lt;/code>ì˜ &lt;code>.data&lt;/code>ê°€ ë¨ì„ ìœ ì¶”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-console" data-lang="console">&lt;span class="line">&lt;span class="cl">&lt;span class="gp">$&lt;/span> helm upgrade -n argocd argocd &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span>&lt;span class="go"> argo/argo-cd -f values.yaml
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>í•œ ë²ˆ ë” ìœ„ì˜ ì»¤ë§¨ë“œë¥¼ í†µí•´ RBAC ì„¤ì •ì„ ì ìš©ì‹œì¼œì£¼ê² ìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://umi0410.github.io/blog/devops/declarative-argocd-helm-rbac/login-via-github.png"
width="1534"
height="916"
srcset="https://umi0410.github.io/blog/devops/declarative-argocd-helm-rbac/login-via-github_hu9c113ddcd41c506471c69869b28b5ba9_827681_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/devops/declarative-argocd-helm-rbac/login-via-github_hu9c113ddcd41c506471c69869b28b5ba9_827681_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="LOG IN VIA GITHUB ë²„íŠ¼ì´ ì¶”ê°€ëœ ëª¨ìŠµ"
class="gallery-image"
data-flex-grow="167"
data-flex-basis="401px"
>&lt;/p>
&lt;p>ì„±ê³µì ìœ¼ë¡œ Githubì„ í†µí•œ SSOê°€ í™œì„±í™”ë˜ë©´ ArgoCDì— ì ‘ì†í•  ë•Œ ìœ„ì™€ ê°™ì´ &lt;code>LOG IN VIA GITHUB&lt;/code> ë²„íŠ¼ì´ ì¶”ê°€ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>ê·¸ëŸ¼ ìš”êµ¬ì‚¬í•­ëŒ€ë¡œ &lt;code>khu-dev&lt;/code>ë¼ëŠ” Github Organizationì˜ &lt;code>khumu-developer&lt;/code> Teamì— ì†í•œ ê³„ì •ìœ¼ë¡œ ArgoCDì— ë¡œê·¸ì¸í•´ë³´ê² ìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://umi0410.github.io/blog/devops/declarative-argocd-helm-rbac/user-info.png"
width="823"
height="469"
srcset="https://umi0410.github.io/blog/devops/declarative-argocd-helm-rbac/user-info_hucef4272cca453302126c4eebb9e78a82_85359_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/devops/declarative-argocd-helm-rbac/user-info_hucef4272cca453302126c4eebb9e78a82_85359_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="User info"
class="gallery-image"
data-flex-grow="175"
data-flex-basis="421px"
>&lt;/p>
&lt;p>ì„±ê³µì ìœ¼ë¡œ ë¡œê·¸ì¸í•œ ë’¤ &lt;code>&amp;lt;your argocd url&amp;gt;/user-info&lt;/code>ë¡œ ì´ë™í•˜ë©´ ìœ„ì™€ ê°™ì´ &lt;!-- raw HTML omitted -->:&lt;!-- raw HTML omitted --> ì´ë¼ëŠ” ì´ë¦„ì˜ ê·¸ë£¹ì— ì†í•œ ëª¨ìŠµì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://umi0410.github.io/blog/devops/declarative-argocd-helm-rbac/permission-denied.png"
width="730"
height="925"
srcset="https://umi0410.github.io/blog/devops/declarative-argocd-helm-rbac/permission-denied_hua5411c757f7472ef3825c63a839272be_139750_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/devops/declarative-argocd-helm-rbac/permission-denied_hua5411c757f7472ef3825c63a839272be_139750_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="Permission denied"
class="gallery-image"
data-flex-grow="78"
data-flex-basis="189px"
>&lt;/p>
&lt;p>ì´í›„ ë§Œì•½ ì–´ë–¤ Applicationì„ Syncí•˜ë ¤í•´ë„ í˜„ì¬ ì†í•œ ê·¸ë£¹ì¸ &lt;code>khu-dev:khumu-developer&lt;/code>ëŠ” &lt;code>readonly&lt;/code> Roleì„ ë¶€ì—¬ë°›ì•˜ê¸°ì— ì–´ë– í•œ Appë„ Syncí•  ê¶Œí•œì´ ì—†ì–´ ìœ„ì™€ ê°™ì´ Permission Denied ë¼ëŠ” ì—ëŸ¬ë¥¼
ë§ì´í•˜ê²Œ ë©ë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://umi0410.github.io/blog/devops/declarative-argocd-helm-rbac/user-info-2.png"
width="826"
height="471"
srcset="https://umi0410.github.io/blog/devops/declarative-argocd-helm-rbac/user-info-2_hu2b0412c75c988732975fb3f78c2d2f2f_85455_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/devops/declarative-argocd-helm-rbac/user-info-2_hu2b0412c75c988732975fb3f78c2d2f2f_85455_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="User info"
class="gallery-image"
data-flex-grow="175"
data-flex-basis="420px"
>&lt;/p>
&lt;p>ğŸ‰ğŸ‰ğŸ‰ í•˜ì§€ë§Œ ìœ„ì™€ ê°™ì´ &lt;code>khu-dev:khumu-devops&lt;/code>ì— ì†í•œ ê³„ì •ìœ¼ë¡œ ë¡œê·¸ì¸í•œ ë’¤ ë™ì¼í•˜ê²Œ ì–´ë–¤ Appì„ Syncí•´ë³´ë©´ ì´ë²ˆì—ëŠ” ì„±ê³µì ìœ¼ë¡œ Appì´ Syncë˜ëŠ” ëª¨ìŠµì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. &lt;code>khu-dev:khumu-devops&lt;/code> ê·¸ë£¹ì€ admin Roleì„ ë¶€ì—¬ë°›ì•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤!&lt;/p>
&lt;p>ì, ê·¸ëŸ¼ ì´ì œëŠ” admin ê³„ì •ì„ ë¹„ë¡¯í•œ username, password ê¸°ë°˜ì˜ ê³„ì •ì„ ì´ìš©í•  í•„ìš” ì—†ì´ Githubì„ ì´ìš©í•´ ArgoCDì˜ ì¸ì¦/ì¸ê°€ë¥¼ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤ ã…ã…&lt;/p>
&lt;h2 id="ë§ˆì¹˜ë©°">ë§ˆì¹˜ë©°&lt;/h2>
&lt;p>ìƒˆë¡œìš´ íšŒì‚¬ì— ì…ì‚¬í•˜ê³  í–‰ë³µí•˜ê²Œ ì ì‘í•´ë‚˜ê°€ë©´ì„œ ìš´ë™, ì·¨ë¯¸, ì—…ë¬´ê¹Œì§€ ì±™ê¸°ë‹¤ë³´ë‹ˆ ê¸€ì„ ì‘ì„±í•´ë†“ê³  ë§ˆë¬´ë¦¬ë¥¼ ì˜¤ëœ ì‹œê°„ ë™ì•ˆ ì§“ì§€ ëª»í•˜ë‹¤ê°€ ê¸‰íˆ ì§€ë°©ì„ ê±°ì¼ì„ ê¸°íšŒ ì‚¼ì•„ ê¸€ì„ ë§ˆë¬´ë¦¬ ì§€ì–´ë´¤ìŠµë‹ˆë‹¤.
ìš°ì„ ì€ ArgoCDë¥¼ Helm chartì™€ í•¨ê»˜ ì„ ì–¸ì ìœ¼ë¡œ ì´ìš©í•´ë‚˜ê°€ëŠ” ë‚´ìš©ì€ ì´ ê¸€ì„ ëìœ¼ë¡œ 2í¸ìœ¼ë¡œ ë§ˆë¬´ë¦¬ ì§€ì–´ë³´ë ¤í•©ë‹ˆë‹¤. ì‚¬ì´ë“œ í”„ë¡œì íŠ¸ì—ì„œ ArgoCDë¥¼ ì´ìš©í•˜ë©´ì„œ ArgoCDëŠ” ì„ ì–¸ì ìœ¼ë¡œ ê´€ë¦¬ê°€ ê°€ëŠ¥í•˜ë‹¤ëŠ” ì¥ì ì„ ë§ì´
ì¨ë¨¹ì§€ ëª»í•˜ê³  ì¢€ ë”ëŸ¬ìš´ í˜•íƒœë¡œ ì–µì§€ë¡œ ì‚¬ìš©í•˜ë‹¤ë³´ë‹ˆ ë²ˆê±°ë¡­ê²Œ ëŠê»´ì¡Œë˜ ê²½ìš°ê°€ ë§ì•˜ëŠ”ë° ì € ìŠ¤ìŠ¤ë¡œë„ ì´ë¥¼ ì„ ì–¸ì ì¸ í˜•íƒœë¡œ ê°œì„ í•˜ë©´ì„œ ë§ì´ í¸í•´ì¡Œê³ , ê·¸ ê³¼ì •ë“¤ì„ ì´ë ‡ê²Œ ê¸€ë¡œ ê¸°ë¡í•˜ê³ ë‚˜ë‹ˆ ë‚˜ë¦„ ë¿Œë“¯í•©ë‹ˆë‹¤.&lt;/p>
&lt;p>ArgoCD ê´€ë ¨í•œ ë˜ ë‹¤ë¥¸ ë‚´ìš©ìœ¼ë¡œëŠ” &lt;a class="link" href="https://argocd-applicationset.readthedocs.io/en/stable/" target="_blank" rel="noopener"
>Applpicaitonset&lt;/a>ì— ê´€í•´ ì¶”í›„ì— ê¸°íšŒê°€ ë˜ë©´ ë‹¤ë¤„ë³¼ê¹Œ ìƒê° ì¤‘ì…ë‹ˆë‹¤.&lt;/p>
&lt;p>ëª‡ ë…„ ì „ì— ì²˜ìŒ ë°ë¸Œì˜µìŠ¤ ì—”ì§€ë‹ˆì–´ ì¸í„´ìœ¼ë¡œì„œ ì´ìª½ ì¼ì„ ì‹œì‘í–ˆì„ ë•Œ ì œê°€ ì•Œë˜ ArgoCDëŠ” &amp;lsquo;ArgoCDë¼ê³  ìš”ì¦˜ ì¿ ë²„ë„¤í‹°ìŠ¤ í™˜ê²½ì—ì„œ ì“¸ë§Œí•œ CD íˆ´ì´ ìˆë‹¤ë”ë¼&amp;rsquo; ì •ë„ì˜ ë„êµ¬ì˜€ë˜ ê²ƒ ê°™ì€ë° ì´ì œëŠ” ìì²´ CDíˆ´ë§Œì„ ì‚¬ìš©í•˜ëŠ” ê¸°ì—…ì„ ì œì™¸í•˜ë©´
ì¿ ë²„ë„¤í‹°ìŠ¤ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ëŠ” ëŒ€ë¶€ë¶„ì´ ArgoCDë¥¼ ì´ìš©í•  ì •ë„ë¡œ ëŒ€ì¤‘ì ì¸ ê¸°ìˆ ì´ ëœ ê²ƒ ê°™ê³ , ê·¸ ì‹œì ˆë³´ë‹¤ ë§ì€ ê¸°ëŠ¥ë“¤ì„ í¸ë¦¬í•˜ê²Œ ì œê³µí•˜ëŠ” ê¸°ìˆ ì´ ëœ ê²ƒ ê°™ì•„ ìƒˆì‚¼ ê¸°íŠ¹í•˜ë‹¨ ìƒê°ì´ ë“¤ì—ˆìŠµë‹ˆë‹¤ ã…ã….&lt;/p>
&lt;p>ë°ë¸Œì˜µìŠ¤ë¡œ ì…ì‚¬í•˜ë©´ì„œ ê±°ëŒ€í•œ ê·œëª¨ì˜ í´ë¼ìš°ë“œ ì¸í”„ë¼ë¥¼ ë‹¤ë£¨ë‹¤ë³´ë‹ˆ ë„¤íŠ¸ì›Œí¬ ê´€ë ¨ëœ ë‚´ìš©ì„ ìì£¼ ì ‘í•˜ê²Œ ë˜ê³ , ì´ë¡ ì ìœ¼ë¡œëŠ” ì œê°€ ì•½í•œ ë¶€ë¶„ì´ë¼ê³  ìƒê°ì´ ë“¤ì–´ì„œ ì•ìœ¼ë¡œëŠ” DevOps ì„œë¹„ìŠ¤ë“¤ë³´ë‹¤ëŠ” ë„¤íŠ¸ì›Œí¬ ê³µë¶€ë¥¼ ìš°ì„ ì ìœ¼ë¡œ í•´ë³¼ê¹Œí•©ë‹ˆë‹¤!
ê³§ ìì·¨ë¥¼ ì‹œì‘í• í…ë° ë¼ì¦ˆë² ë¦¬ íŒŒì´ë¡œ ìì·¨ë°©ì—ì„œ ì¬ë°ŒëŠ” ë¬´ì–¸ê°€ë¥¼ í•´ë³¼ ìˆ˜ ìˆì„ê¹Œ ì‹¶ì€ ìƒê°ë„ ìˆêµ¬ìš” ã…ã….
ì‹œê°„ì´ ë˜ë©´ ê´€ë ¨ ë‚´ìš©ì„ í‹ˆí‹ˆì´ ê¸°ë¡í•´ë³´ê² ìŠµë‹ˆë‹¤! ê°ì‚¬í•©ë‹ˆë‹¤.&lt;/p>
&lt;h2 id="ì°¸ê³ ìë£Œ">ì°¸ê³ ìë£Œ&lt;/h2>
&lt;ul>
&lt;li>&lt;a class="link" href="https://www.okta.com/kr/identity-101/role-based-access-control-vs-attribute-based-access-control/" target="_blank" rel="noopener"
>RBAC vs ABAC - Okta&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://argo-cd.readthedocs.io/en/stable/" target="_blank" rel="noopener"
>ArgoCD ê³µì‹ ë¬¸ì„œ&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://github.com/argoproj/argo-helm/tree/main/charts/argo-cd" target="_blank" rel="noopener"
>ArgoCD Helm Chart&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>ArgoCD ì„ ì–¸ì ìœ¼ë¡œ ì´ìš©í•´ë‚˜ê°€ê¸° - Helm, App of App</title><link>https://umi0410.github.io/blog/devops/declarative-argocd-helm-app-of-app/</link><pubDate>Fri, 22 Apr 2022 14:11:07 +0900</pubDate><guid>https://umi0410.github.io/blog/devops/declarative-argocd-helm-app-of-app/</guid><description>&lt;img src="https://umi0410.github.io/blog/devops/declarative-argocd-helm-app-of-app/logo.png" alt="Featured image of post ArgoCD ì„ ì–¸ì ìœ¼ë¡œ ì´ìš©í•´ë‚˜ê°€ê¸° - Helm, App of App" />&lt;h2 id="ì‹œì‘í•˜ë©°">ì‹œì‘í•˜ë©°&lt;/h2>
&lt;p>&lt;strong>ì·¨ì¤€ìƒ ê¸°ê°„ì„ ë§ˆë¬´ë¦¬&lt;/strong>í•˜ê³  &lt;strong>ë°ë¸Œì˜µìŠ¤ ì—”ì§€ë‹ˆì–´ë¡œì„œ ì»¤ë¦¬ì–´ë¥¼ ì‹œì‘&lt;/strong>í•˜ê²Œ ëìŠµë‹ˆë‹¤! ğŸ‰&lt;/p>
&lt;p>ê·¼ë¬´ë¥¼ ì‹œì‘í•˜ê¸° ì „ê¹Œì§€ ê¸°ê°„ì´ ì¢€ ë‚¨ì•„ìˆì–´ì„œ ê·¸ ì „ê¹Œì§€ ë­˜ í•´ë³´ë©´ ì¬ë°Œì„ê¹Œ ê³ ë¯¼í•˜ë˜ ì¤‘ì—
ìƒˆë¡œ ìƒê¸´ í´ë¼ìš°ë“œ ë™ì•„ë¦¬ì¸ &lt;strong>Cloud Club&lt;/strong>ì—ì„œ í´ë¼ìš°ë“œì™€ ì¸í”„ë¼ì— ê´€í•œ ì£¼ì œë¡œ ë°œí‘œí•  ê¸°íšŒê°€ ì£¼ì–´ì ¸ ArgoCDë¥¼ í† í”½ìœ¼ë¡œ ë°œí‘œë¥¼ í•´ë³´ë ¤í•©ë‹ˆë‹¤.
ê·¸ë¦¬ê³  ê´€ë ¨ëœ ë‚´ìš©ì„ í•œ ë²ˆ ë” ë¸”ë¡œê·¸ì— ì •ë¦¬í•´ë³´ë ¤í•´ìš”!&lt;/p>
&lt;p>ì£¼ì œëŠ” &amp;ldquo;&lt;em>&lt;code>ArgoCD&lt;/code> ì„ ì–¸ì ìœ¼ë¡œ ì´ìš©í•´ë‚˜ê°€ê¸°&lt;/em>&amp;rdquo; ì´ê³  ì£¼ë¡œ ë‹¤ë£° ë‚´ìš©ì€ ì–´ë–»ê²Œ ArgoCDë¥¼ ì¢€ ë”
ì„ ì–¸ì ìœ¼ë¡œ ê´€ë¦¬í•˜ê³  ì´ìš©í•´ë‚˜ê°ˆ ìˆ˜ ìˆì„ì§€ì…ë‹ˆë‹¤.&lt;/p>
&lt;p>ArgoCDê°€ ë­”ì§€, ì–´ë–»ê²Œ Getting Startedí• ì§€, GitOpsê°€ ë­”ì§€ ë“±ì„ ë‹¤ë£¨ì§€ ì•Šìœ¼ë ¤ëŠ” ì´ìœ ëŠ” ì´ë¯¸ ê·¸ ë‚´ìš©ìœ¼ë¡œëŠ” ì¶©ë¶„í•œ ì–‘ì§ˆì˜ ìë£Œê°€
ì¡´ì¬í•œë‹¤ê³  ìƒê°í•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.
ArgoCDë‚˜ GitOpsì˜ ê°œë… ìì²´ ê°™ì€ ë‚´ìš©ë³´ë‹¤ëŠ” ìƒˆë¡œìš´ ê¸°ìˆ (ArgoCD)ì„ ì ‘í•  ë•Œ ì–´ë–»ê²Œ ì…ë§›ëŒ€ë¡œ ì»¤ìŠ¤í„°ë§ˆì´ì§•í•´ë‚˜ê°€ëŠ”ì§€
ê·¸ë¦¬ê³  ê·¸ ì‘ì—…ì„ &lt;strong>ì–´ë–»ê²Œ ì¢€ ë” ìœ ì§€ë³´ìˆ˜í•˜ê¸° ì‰½ë„ë¡ ì¦‰ ì„ ì–¸ì ìœ¼ë¡œ í•´ë‚˜ê°ˆ ìˆ˜ ìˆì„ì§€&lt;/strong>ì— ëŒ€í•œ ì €ì˜ ì‘ì—… ê³¼ì •ì„ ì†Œê°œí•´ë³´ë ¤í•©ë‹ˆë‹¤ â˜ºï¸&lt;/p>
&lt;p>ì´ë²ˆ ê¸€ì—ì„œëŠ” í¬ê²Œ ë‹¤ìŒê³¼ ê°™ì€ ì‘ì—…ì„ ë‹¤ë£¨ê²Œ ë  ê±°ì—ìš”.&lt;/p>
&lt;ol>
&lt;li>&lt;code>minikube&lt;/code>ë¥¼ í†µí•´ ë¡œì»¬ì— kubernetes í™˜ê²½ì„ êµ¬ì¶•í•©ë‹ˆë‹¤.&lt;/li>
&lt;li>&lt;code>helm&lt;/code>ì„ í†µí•´ ArgoCDë¥¼ install í•©ë‹ˆë‹¤.&lt;/li>
&lt;li>&lt;code>ArgoCD&lt;/code>ë¥¼ ì´ìš©í•´ë³´ê¸° ìœ„í•´ &lt;code>CRD&lt;/code>ì¸ &lt;code>AppProject&lt;/code>ì™€ &lt;code>Application&lt;/code>ì„ ìƒì„±í•©ë‹ˆë‹¤.&lt;/li>
&lt;li>ì‹¤ì œë¡œ GitOpsì˜ í˜•íƒœë¡œ CDê°€ ì˜ ë™ì‘í•˜ëŠ”ì§€ í™•ì¸~&lt;/li>
&lt;li>1~4ë²ˆ ê³¼ì •ì„ helmì„ í†µí•´ ì¢€ ë” ì„ ì–¸ì ìœ¼ë¡œ ìˆ˜í–‰í•  ìˆ˜ ìˆë„ë¡ ê°œì„ í•©ë‹ˆë‹¤.&lt;/li>
&lt;/ol>
&lt;p>í•´ë‹¹ ê³¼ì •ë“¤ì„ ì‹¤ìŠµí•´ë³´ê³  ì‹¶ìœ¼ì‹  ë¶„ë“¤ì€ ì œê°€ ì‘ì„±í•´ë‘” Repository(&lt;a class="link" href="https://github.com/umi0410/declarative-argocd" target="_blank" rel="noopener"
>https://github.com/umi0410/declarative-argocd&lt;/a>)ë¥¼ í¬í¬í•œ ë’¤ ì‘ì—…í•˜ì‹œë©´ í¸í•˜ì‹¤ ê²ƒ ê°™ìŠµë‹ˆë‹¤.&lt;/p>
&lt;h2 id="glossary-ìš©ì–´-ì‚¬ì „">Glossary (ìš©ì–´ ì‚¬ì „)&lt;/h2>
&lt;p>ê°„ë‹¨í•˜ê²Œ ì´ë²ˆ ê¸€ì—ì„œ ë‹¤ë£¨ê²Œ ë  ìš©ì–´ë“¤ì„ ì •ë¦¬í•´ë³´ê² ìŠµë‹ˆë‹¤. ìì„¸í•œ ë‚´ìš©ì´ ê¶ê¸ˆí•˜ì‹œë‹¤ë©´ ë”°ë¡œ ì°¾ì•„ë³´ì‹œëŠ” ê²ƒì„ ì¶”ì²œë“œë¦¬ê² ìŠµë‹ˆë‹¤.
ì´ë²ˆ ê¸€ì—ì„œ ì „ë¶€ë¥¼ ë‹¤ë£¨ê¸´ í˜ë“¤ê¸° ë•Œë¬¸ì´ì—ìš” ã…œã……ã…œ&lt;/p>
&lt;ul>
&lt;li>&lt;strong>Glossary&lt;/strong> - ìš©ì–´ ì‚¬ì „&lt;/li>
&lt;li>&lt;strong>minikube&lt;/strong> - &amp;ldquo;minikube is local Kubernetes, focusing on making it easy to learn and develop for Kubernetes.&amp;rdquo; from &lt;a class="link" href="https://minikube.sigs.k8s.io/docs/start/" target="_blank" rel="noopener"
>Minikube Docs&lt;/a>&lt;/li>
&lt;li>&lt;strong>ArgoCD&lt;/strong> - &amp;ldquo;Argo CD is a declarative, GitOps continuous delivery tool for Kubernetes.&amp;rdquo; - from &lt;a class="link" href="https://argo-cd.readthedocs.io/en/stable/" target="_blank" rel="noopener"
>ArgoCD Documents&lt;/a>&lt;/li>
&lt;li>&lt;strong>CRD&lt;/strong>(Custom Resource Definition) - K8sì˜ í‘œì¤€ ResourceëŠ” ì•„ë‹ˆì§€ë§Œ ê°œë³„ì ìœ¼ë¡œ ì •ì˜í•˜ì—¬ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ë¦¬ì†ŒìŠ¤ kindë“¤ì„ ë§í•¨.&lt;/li>
&lt;li>&lt;strong>Application&lt;/strong> - ArgoCDê°€ ì‚¬ìš©í•˜ëŠ” CRD ì¤‘ í•˜ë‚˜. ì–´ë–¤ K8s ë¦¬ì†ŒìŠ¤ë“¤ì„ ì–´ë–¤ Repositoryì—ì„œ ê°€ì ¸ì™€ì„œ ì–´ë–¤ ì‹ìœ¼ë¡œ ë°°í¬í•  ì§€ë¥¼ ì •ì˜í•¨.&lt;/li>
&lt;li>&lt;strong>AppProject&lt;/strong> í˜¹ì€ Project - Applicationì´ ì†í•˜ëŠ” ê·¸ë£¹.&lt;/li>
&lt;li>&lt;strong>GitOps&lt;/strong> - DevOpsì˜ ì‹¤í˜„ í˜•íƒœ ì¤‘ í•˜ë‚˜. ì¸í”„ë¼ë‚˜ ì• í”Œë¦¬ì¼€ì´ì…˜ ìš´ì˜ ì •ë³´ì— ëŒ€í•œ Single Source of Truthë¡œì„œ Git Repositoryë¥¼ í™œìš©í•˜ëŠ” í˜•íƒœ&lt;/li>
&lt;li>&lt;strong>Helm&lt;/strong> - K8s applicationì„ íŒ¨í‚¤ì§•í•˜ì—¬ í¸ë¦¬í•˜ê²Œ ê´€ë¦¬í•  ìˆ˜ ìˆë„ë¡ í•´ì£¼ëŠ” ë„êµ¬&lt;/li>
&lt;li>&lt;strong>Chart&lt;/strong> - Helmì„ í†µí•´ ë°°í¬ë˜ëŠ” ê²ƒ. ChartëŠ” ë‹¤ì–‘í•œ k8s ë¦¬ì†ŒìŠ¤ë“¤ì„ íŒ¨í‚¤ì§•í•œ í˜•íƒœì´ë‹¤.&lt;/li>
&lt;li>&lt;strong>ì„ ì–¸ì &lt;/strong>(Declarative) - ì ˆì°¨ì (Procedural) í˜¹ì€ ëª…ë ¹ì (Imperative) ë°©ì‹ê³¼ ë‹¬ë¦¬ ê³¼ì •ì„ ìƒëµí•˜ê³  ê°„ê²°í•˜ê²Œ Desired Stateë¥¼ ì„ ì–¸ì ìœ¼ë¡œ ì •ì˜í•˜ëŠ” ê²ƒ.&lt;/li>
&lt;/ul>
&lt;h2 id="requirements">Requirements&lt;/h2>
&lt;ul>
&lt;li>&lt;strong>minikube&lt;/strong>
&lt;ul>
&lt;li>&lt;code>brew install minikube &amp;amp;&amp;amp; minikube start&lt;/code>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;strong>kubectl&lt;/strong>
&lt;ul>
&lt;li>&lt;code>brew install kubectl &amp;amp;&amp;amp; kubectl version&lt;/code>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;strong>helm&lt;/strong>
&lt;ul>
&lt;li>&lt;code>brew install helm &amp;amp;&amp;amp; helm version&lt;/code>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;strong>Github account&lt;/strong>
&lt;ul>
&lt;li>ì˜ˆì‹œ ì½”ë“œ ë ˆí¬(&lt;a class="link" href="https://github.com/umi0410/declarative-argocd" target="_blank" rel="noopener"
>https://github.com/umi0410/declarative-argocd&lt;/a>)ë¥¼ í¬í¬ëœ¬ ë’¤ ìì‹ ì˜ ë ˆí¬ë¥¼ í†µí•´ Continuouse Deployí•˜ê¸° ìœ„í•¨&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="argocdë¥¼-êµ¬ì¶•í•˜ê³ -ê´€ë¦¬í•˜ëŠ”-ë°©ë²•">ArgoCDë¥¼ êµ¬ì¶•í•˜ê³  ê´€ë¦¬í•˜ëŠ” ë°©ë²•&lt;/h2>
&lt;p>ì¿ ë²„ë„¤í‹°ìŠ¤ì—ì„œëŠ” ì–´ë–¤ ì„œë¹„ìŠ¤ë¥¼ ë°°í¬í•˜ê³  ê´€ë¦¬í•´ë‚˜ê°€ëŠ” ë°ì—ëŠ” ë‹¤ìŒê³¼ ê°™ì€ ë°©ë²•ë“¤ì´ ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;ul>
&lt;li>Plain k8s manifest yaml&lt;/li>
&lt;li>Kustomize&lt;/li>
&lt;li>Helm Chart&lt;/li>
&lt;li>&amp;hellip;&lt;/li>
&lt;/ul>
&lt;p>ì´ì™¸ì—ë„ ë‹¤ì–‘í•œ ë°©ë²•ë“¤ì´ ìˆì„ ìˆ˜ ìˆì§€ë§Œ ì¼ë‹¨ ì œê°€ ì‚¬ìš©í•´ë³¸ ë°©ë²•ë“¤ì€ ìœ„ì˜ 3ê°œì™€ ê°™ì•„ìš”.&lt;/p>
&lt;p>ì €ëŠ” ë³µì¡í•œ í˜•íƒœë¥¼ ê°€ì§„ ì˜¤í”ˆì†ŒìŠ¤ë¥¼ ë°°í¬í•  ë•Œì—ëŠ” Helm Chartë¥¼, ìš°ë¦¬ íŒ€ì˜ ì„œë¹„ìŠ¤ë¥¼ ê°ê° ë°°í¬í•  ë•Œì—ëŠ” ê°€ë³ê²Œ
ì¸ìë¥¼ ìˆ˜ì •í•˜ëŠ” ë“±ì˜ ìš©ë„ë¡œ Kustomizeë¥¼ ì‚¬ìš©í•˜ê³  ìˆìŠµë‹ˆë‹¤.
Plain k8s manifest yamlì€ ì‹¤ì œ ì—…ë¬´ë‚˜ í”„ë¡œì íŠ¸ì—ì„œëŠ” ê±°ì˜ ì‚¬ìš©í•˜ì§€ ì•Šê³ , ì¿ ë²„ë„¤í‹°ìŠ¤ ê´€ë ¨ tutorial ë“±ì—ì„œ ì£¼ë¡œ ì‚¬ìš©í•˜ê³  ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>ë³µì¡í•œ í˜•íƒœì˜ ì˜¤í”ˆì†ŒìŠ¤ë¥¼ ë°°í¬í•  ë•Œì—ëŠ” Helm Chartë¥¼ ì‚¬ìš©í•˜ëŠ” ì´ìœ ëŠ” Helm ChartëŠ” &lt;code>values.yaml&lt;/code>ê³¼ ê°™ì€ ì„¤ì • íŒŒì¼ì„
í†µí•´ í•„ìš”í•œ ëŒ€ë¶€ë¶„ì˜ ê²ƒì„ í¸ë¦¬í•˜ê²Œ ì„¤ì •í•˜ê²Œ í•˜ê³  ê´€ë¦¬í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. ì˜¤í”ˆì†ŒìŠ¤ í”„ë¡œì íŠ¸ë¥¼ ì§ì ‘ Plain k8s manifest íŒŒì¼ë“¤ë¡œ ê´€ë¦¬í•˜ê¸°ì—ëŠ”
ë„ˆë¬´ë‚˜ë„ ë²…ì°¨ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. Deploymentë§Œ í•´ë„ í•œ ì†ê°€ë½ìœ¼ë¡œ ì„¸ê¸° í˜ë“  ê²½ìš°ë„ ìˆê³ , Configmapì— ì „ë‹¬í•´ì•¼í•˜ëŠ” ê°’ë„ ë³€ê²½ë  ìˆ˜ ìˆëŠ”ë°, ë˜ ìƒˆë¡œìš´ ë²„ì „ì´ ì¶œì‹œë˜ë©´
ê·¸ manifest íŒŒì¼ë“¤ì„ í•˜ë‚˜ í•˜ë‚˜ ë¹„êµí•˜ëŠ” ê²ƒë„ ë„ˆë¬´ í˜ë“¤ì£ . ê·¸ë˜ì„œ ì €ëŠ” ë³´í†µ &lt;code>Nginx Ingress Controller&lt;/code>, &lt;code>Cert manager&lt;/code>, &lt;code>ArgoCD&lt;/code> ì™€ ê°™ì€ ì˜¤í”ˆì†ŒìŠ¤ë“¤ì€ Helmìœ¼ë¡œ ê´€ë¦¬í•˜ëŠ” ê²ƒì„ ì„ í˜¸í•©ë‹ˆë‹¤.&lt;/p>
&lt;p>ë°˜ë©´ ìš°ë¦¬ íŒ€ ì„œë¹„ìŠ¤ë¥¼ ë°°í¬í•˜ëŠ” ê²½ìš° ëŒ€ë¶€ë¶„ Image tagë§Œ ë³€ê²½í•˜ë©´ ë˜ëŠ”ë° ì´ëŸ° ì¼€ì´ìŠ¤ì—ëŠ” ê°€ë³ê²Œ &lt;code>Kustomize&lt;/code>ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì ì ˆí•˜ë‹¤ê³  ìƒê°ë©ë‹ˆë‹¤.&lt;/p>
&lt;p>ê·¸ë˜ì„œ! &lt;strong>ì´ë²ˆ ê¸€ì—ì„œëŠ” &lt;code>ArgoCD&lt;/code>ë¥¼ &lt;code>Helm&lt;/code>ìœ¼ë¡œ ë°°í¬&lt;/strong>í•´ë³´ë ¤ í•©ë‹ˆë‹¤.&lt;/p>
&lt;h2 id="helmìœ¼ë¡œ-ê°„ë‹¨í•˜ê²Œ-êµ¬ì¶•í•´ë³´ê¸°">Helmìœ¼ë¡œ ê°„ë‹¨í•˜ê²Œ êµ¬ì¶•í•´ë³´ê¸°&lt;/h2>
&lt;h3 id="argocd-helm-chart-ì„¤ì¹˜">ArgoCD Helm Chart ì„¤ì¹˜&lt;/h3>
&lt;p>Helm ìœ¼ë¡œ ArgoCDë¥¼ ì„¤ì¹˜í•˜ëŠ” ë°©ë²•ì€ &lt;a class="link" href="https://github.com/argoproj/argo-helm/tree/master/charts/argo-cd" target="_blank" rel="noopener"
>ArgoCD Helm Chart Github&lt;/a>ì—ì„œ í™•ì¸í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
ì°¸ ê°„ë‹¨í•©ë‹ˆë‹¤.&lt;/p>
&lt;p>ëŒ€ì‹  ì €ëŠ” namespaceë¥¼ &lt;code>argocd&lt;/code>ë¡œ ê³ ì •í•˜ì—¬ ì„¤ì¹˜í• ê²Œìš”! ê·¸ë ‡ì§€ ì•Šìœ¼ë©´ &lt;code>default&lt;/code> namespaceì— ì„¤ì¹˜ë”ë¼êµ¬ìš”. Release nameì€ &lt;code>argocd-demo&lt;/code>ë¡œ í•˜ê² ìŠµë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-console" data-lang="console">&lt;span class="line">&lt;span class="cl">&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span>&lt;span class="gp">$&lt;/span> minikube start
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">ğŸ˜„ minikube v1.25.2 on Darwin 12.2 (arm64)
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">...
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span>&lt;span class="gp">$&lt;/span> kubectl create ns argocd
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span>&lt;span class="gp">$&lt;/span> helm repo add argo https://argoproj.github.io/argo-helm
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">&amp;#34;argo&amp;#34; has been added to your repositories
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span>&lt;span class="gp">$&lt;/span> helm install -n argocd argocd-demo argo/argo-cd
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">NAME: argocd-demo
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">LAST DEPLOYED: Sat Apr 23 05:37:32 2022
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">NAMESPACE: argocd
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">STATUS: deployed
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">REVISION: 1
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">TEST SUITE: None
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">NOTES:
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">In order to access the server UI you have the following options:
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span>&lt;span class="go">1. kubectl port-forward service/argocd-demo-server -n argocd 8080:443
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span>&lt;span class="go"> and then open the browser on http://localhost:8080 and accept the certificate
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span>&lt;span class="go">2. enable ingress in the values file `server.ingress.enabled` and either
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go"> - Add the annotation for ssl passthrough: https://github.com/argoproj/argo-cd/blob/master/docs/operator-manual/ingress.md#option-1-ssl-passthrough
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go"> - Add the `--insecure` flag to `server.extraArgs` in the values file and terminate SSL at your ingress: https://github.com/argoproj/argo-cd/blob/master/docs/operator-manual/ingress.md#option-2-multiple-ingress-objects-and-hosts
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span>&lt;span class="go">After reaching the UI the first time you can login with username: admin and the random password generated during the installation. You can find the password by running:
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span>&lt;span class="go">kubectl -n argocd get secret argocd-initial-admin-secret -o jsonpath=&amp;#34;{.data.password}&amp;#34; | base64 -d
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span>&lt;span class="go">(You should delete the initial secret afterwards as suggested by the Getting Started Guide: https://github.com/argoproj/argo-cd/blob/master/docs/getting_started.md#4-login-using-the-cli)
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ëŒ€ë¶€ë¶„ì˜ ê²½ìš° helm chartë¥¼ installí•œ ë’¤ í‘œì‹œë˜ëŠ” ì•ˆë‚´ë¬¸ì´ ë§ì€ ë„ì›€ì´ ë©ë‹ˆë‹¤.&lt;/p>
&lt;p>1ë²ˆ - ë¸Œë¼ìš°ì €ì—ì„œ ArgoCDë¥¼ ì—´ê¸° ìœ„í•œ Port forwarding ì„¤ëª…ì´ì—ìš”.&lt;/p>
&lt;p>2ë²ˆ - Ingressë‚˜ TLS Termination ê´€ë ¨ ì„¤ëª…ì´ì—ìš”.&lt;/p>
&lt;p>ë‚˜ë¨¸ì§€ - adminê³¼ ëœë¤ íŒ¨ìŠ¤ì›Œë“œì— ëŒ€í•œ ì„¤ëª…ì´ì—ìš”.&lt;/p>
&lt;h3 id="ë¸Œë¼ìš°ì €ë¡œ-ë¡œê·¸ì¸í•´ë³´ê¸°">ë¸Œë¼ìš°ì €ë¡œ ë¡œê·¸ì¸í•´ë³´ê¸°&lt;/h3>
&lt;p>ìë™ìœ¼ë¡œ ìƒì„±ëœ admin ë¹„ë°€ë²ˆí˜¸ë¥¼ ì–»ì€ ë’¤ ì½˜ì†”ì— ì ‘ì†í•˜ê¸° ìœ„í•´ Port forwardí•œ ë’¤ ì ‘ì†í•´ë³¼ê²Œìš”.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-console" data-lang="console">&lt;span class="line">&lt;span class="cl">&lt;span class="gp">$&lt;/span> kubectl -n argocd get secret argocd-initial-admin-secret -o &lt;span class="nv">jsonpath&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;{.data.password}&amp;#34;&lt;/span> &lt;span class="p">|&lt;/span> base64 -d
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">5VYjI5YcfOo6XMHx
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span>&lt;span class="gp">$&lt;/span> kubectl port-forward service/argocd-demo-server -n argocd 8080:443
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">Forwarding from 127.0.0.1:8080 -&amp;gt; 8080
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">Forwarding from [::1]:8080 -&amp;gt; 8080
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="https://umi0410.github.io/blog/devops/declarative-argocd-helm-app-of-app/login.png"
width="1573"
height="1049"
srcset="https://umi0410.github.io/blog/devops/declarative-argocd-helm-app-of-app/login_hu7e8078ba43c639b9075fb1b2acd2ff79_623918_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/devops/declarative-argocd-helm-app-of-app/login_hu7e8078ba43c639b9075fb1b2acd2ff79_623918_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="ë¡œê·¸ì¸ í™”ë©´"
class="gallery-image"
data-flex-grow="149"
data-flex-basis="359px"
>
TLS ì„¤ì •ì„ ì˜¬ë°”ë¥´ê²Œ í•´ì£¼ì§€ ì•Šì•˜ê¸° ë–„ë¬¸ì— ë¸Œë¼ìš°ì €ì—ì„œ ì¸ì¦ì„œë‚˜ HTTPS ë¬¸ì œê°€ ê²½ê³ ë  ìˆ˜ ìˆì–´ìš”. ì¼ë‹¨ì€ &amp;lsquo;&lt;em>ë¬´ì‹œí•˜ê³  í˜ì´ì§€ ì§„í–‰í•˜ê¸°&lt;/em>&amp;lsquo;ì™€ ê°™ì€ ë²„íŠ¼ë“¤ì„ í†µí•´ ì§„í–‰í•´ì¤ì‹œë‹¤. ë¡œì»¬ì—ì„œ ë°ëª¨í•´ë³´ëŠ” ê²ƒì´ë‹ˆê¹Œìš”.
ê·¸ëŸ¼ ë²Œì¨ ì†ì‰½ê²Œ ë¡œê·¸ì¸ ì°½ì´ ëœ¬ ê²ƒì„ ë³¼ ìˆ˜ ìˆê³ , ì•„ê¹Œ ì¡°íšŒí•œ adminì— ëŒ€í•œ íŒ¨ìŠ¤ì›Œë“œë¥¼ í†µí•´ &lt;code>admin&lt;/code> / &lt;code>{{YOUR_PASSWORD}}&lt;/code>ë¡œ ë¡œê·¸ì¸í•´ì¤ë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://umi0410.github.io/blog/devops/declarative-argocd-helm-app-of-app/console.png"
width="1379"
height="906"
srcset="https://umi0410.github.io/blog/devops/declarative-argocd-helm-app-of-app/console_hu0ae6017bda3c97e28afa119368517377_147411_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/devops/declarative-argocd-helm-app-of-app/console_hu0ae6017bda3c97e28afa119368517377_147411_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="ì½˜ì†” í™”ë©´"
class="gallery-image"
data-flex-grow="152"
data-flex-basis="365px"
>&lt;/p>
&lt;p>ğŸ‰ ì§œì”~! &lt;strong>ArgoCD ì½˜ì†” í™”ë©´ì´ ë“±ì¥&lt;/strong>í–ˆì–´ìš”!!!&lt;/p>
&lt;h3 id="applicationì„-í†µí•´-cd-ë™ì‘ì„-í…ŒìŠ¤íŠ¸í•´ë³´ê¸°">Applicationì„ í†µí•´ CD ë™ì‘ì„ í…ŒìŠ¤íŠ¸í•´ë³´ê¸°&lt;/h3>
&lt;p>ArgoCDì—ëŠ” &lt;code>Repository&lt;/code>, &lt;code>AppProject&lt;/code>, &lt;code>Application&lt;/code> ê³¼ ê°™ì€ ê°œë…ë“¤ì´ ì¡´ì¬í•©ë‹ˆë‹¤.&lt;/p>
&lt;ul>
&lt;li>&lt;strong>Repository&lt;/strong> - Private Repository ë° ë‹¤ì–‘í•œ Repositoryì— ëŒ€í•œ ì„¤ì •ë“¤ì„ ë‹´ë‹¹í•´ìš”.&lt;/li>
&lt;li>&lt;strong>AppProject&lt;/strong> - Applicationì´ ì†í•  ìˆ˜ ìˆëŠ” ê·¸ë£¹ìœ¼ë¡œ í•´ë‹¹ Projectë‚´ì˜ Applicationë“¤ì´ ìˆ˜í–‰í•  ìˆ˜ ìˆëŠ”, í˜¹ì€ Project Tokenì´ ìˆ˜í–‰í•  ìˆ˜ ìˆëŠ” ë™ì‘ì„ ì œí•œí•  ìˆ˜ ìˆì–´ìš”.&lt;/li>
&lt;li>&lt;strong>Application&lt;/strong> - ì›í•˜ëŠ” k8s ë¦¬ì†ŒìŠ¤ë“¤ì„ ì–´ë–¤ ì‹ìœ¼ë¡œ CDí•  ì§€ì— ëŒ€í•œ ì„¤ì •ì´ì—ìš”.&lt;/li>
&lt;/ul>
&lt;p>Applicationì´ ê°€ì¥ ì¤‘ìš”í•´ìš”~! Private repositoryë¥¼ ì´ìš©í•˜ê¸° ì „ê¹Œì§€ëŠ” ì•„ë§ˆ Repositoryê°€ í•„ìš”í•˜ì§„ ì•Šì„ ê±°ê³ , default project ì™¸ì˜ í”„ë¡œì íŠ¸ë¥¼
ìƒì„±í•´ì„œ ì‚¬ìš©í•  ê²Œ ì•„ë‹ˆë©´ AppProjectë„ í•„ìš”í•˜ì§„ ì•Šì„ ê±°ì—ìš”.&lt;/p>
&lt;p>ë‹¤ë§Œ Applicationì€ í•„ìˆ˜ë¡œ ìƒˆë¡œ ìƒì„±í•´ì•¼ CD ë™ì‘ì„ í™•ì¸í•´ë³¼ ìˆ˜ ìˆì–´ìš”!&lt;/p>
&lt;p>ArgoCDì—ì„œ ì“°ì´ëŠ” ëŒ€ë¶€ë¶„ì˜ ë¦¬ì†ŒìŠ¤ëŠ” ì¿ ë²„ë„¤í‹°ìŠ¤ CRD(e.g. Repository, AppProject, Application)ë¡œ ê´€ë¦¬ë˜ê³  ê·¸ ì™¸ì˜ ê²ƒë“¤ë„ configmapì— ì„¤ì •ì„ ê¸°ì…í•¨ìœ¼ë¡œì¨ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤!&lt;/p>
&lt;p>ë”°ë¼ì„œ ìš°ë¦¬ëŠ” ArgoCD CRD ì¤‘ í•˜ë‚˜ì¸ Applicationì„ ë§Œë“¤ì–´ë³¼ ê±°ì—ìš”. ê³µì‹ ë¬¸ì„œì˜ Getting Startedì—ì„œëŠ” ì§ì ‘ ArgoCD CLIë¡œ Applicationì„ ë§Œë“¤ì§€ë§Œ
ArgoCD CLIë‚˜ ì½˜ì†” í™”ë©´ì„ í†µí•´ Applicationì„ ë§Œë“¤ê²Œ ë˜ë©´ ì¶”í›„ì— Applicationì„ yaml ì½”ë“œë¡œ ë‚˜íƒ€ë‚´ì–´ ì„ ì–¸ì ìœ¼ë¡œ ì´ìš©í•˜ë ¤ëŠ” ê²½ìš° ê¸°ì¡´ì˜ Applicationì„ ì½”ë“œë¡œ ë‚˜íƒ€ë‚´ë ¤ë©´ ì–´ë–»ê²Œ í•´ì•¼í•˜ëŠ”ì§€ í˜¼ë€ìŠ¤ëŸ¬ìš°ì‹¤ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.
ë”°ë¼ì„œ ì €ëŠ” &lt;strong>ì§ì ‘ Applicationì„ yamlë¡œ ì‘ì„±í•´ì„œ ì ìš©&lt;/strong>í•´ì£¼ê² ìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>í•˜ì§€ë§Œ ë§Œì•½ ì•„ì§ ArgoCDê°€ ë‚¯ì„œì‹œë‹¤ë©´ ë‹¨ìˆœíˆ ì½˜ì†”ì—ì„œ ì§ì ‘ Applicationì„ ìƒì„±í•˜ëŠ” ë°©ë²•ë„ ì¶”ì²œë“œë¦½ë‹ˆë‹¤. ì´í›„ ì–´ë–¤ ì„¤ì •ë“¤ì´ ìˆëŠ”ì§€ ê°ì„ ì¡ì•„ë³´ì‹œê³  ê·¸ëŸ° ì„¤ì •ë“¤ì„ ì–´ë–»ê²Œ CRD(yaml)ë¡œ ë‚˜íƒ€ë‚´ëŠ”ì§€ë¥¼
ì°¾ì•„ë‚˜ê°€ë©° IaCë¡œ ê´€ë¦¬í•˜ëŠ” ê²ƒë„ í•˜ë‚˜ì˜ ë°©ë²•ì´ë¼ê³  ìƒê°í•©ë‹ˆë‹¤.&lt;/p>
&lt;p>ì œê°€ ë³¸ ê²Œì‹œê¸€ì„ ìœ„í•´ ë§Œë“¤ì–´ë†“ì€ Repository(&lt;a class="link" href="https://github.com/umi0410/declarative-argocd" target="_blank" rel="noopener"
>https://github.com/umi0410/declarative-argocd&lt;/a>)ë¥¼ &lt;strong>Forkí•˜ì…”ì„œ&lt;/strong> ì‚¬ìš©í•˜ì‹œë©´ ë˜ê² ìŠµë‹ˆë‹¤. ê·¸ë¦¬ê³  &lt;strong>ì•„ë˜ í•­ëª©ë“¤ì„ ì˜ ìˆ˜í–‰í•´ì£¼ì„¸ìš”.&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>âš ï¸ ì•„ë˜ì˜ kubectl apply ìˆ˜í–‰ ì‹œ URLì„ ë³¸ì¸ì˜ Github username í˜¹ì€ Organization nameìœ¼ë¡œ ë³€ê²½í•˜ê¸°&lt;/li>
&lt;li>âš ï¸ fork ëœ¬ Repositoryì˜ &lt;code>getting-started/argocd/application.yml&lt;/code> íŒŒì¼ì—ì„œ &lt;code>spec.source.repoURL&lt;/code> ê°’ì„ ìì‹ ì˜ fork ëœ¬ Repository URLë¡œ ì˜¬ë°”ë¥´ê²Œ ìˆ˜ì •í•˜ê¸°&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>forkë¥¼ ëœ¨ëŠ” ì´ìœ &lt;/strong>ëŠ” ì´í›„ì— &lt;strong>GitOps ë°©ì‹ìœ¼ë¡œ CDí•˜ê¸° ìœ„í•´ image tagë¥¼ ë³€ê²½í•´ì„œ í‘¸ì‹œ&lt;/strong>í•œ ë’¤ ì—…ë°ì´íŠ¸ ë˜ëŠ” ëª¨ìŠµì„ ë³´ê¸° ìœ„í•¨ì´ì—ìš”!&lt;/p>
&lt;p>ì €í¬ëŠ” &lt;strong>ìƒ˜í”Œ í”„ë¡œì íŠ¸ë¡œ Guestbook(ë°©ëª…ë¡) í”„ë¡œì íŠ¸ë¥¼ ë°°í¬í•˜ê³  í™•ì¸&lt;/strong>í•´ë³¼ê±°ì—ìš”.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-console" data-lang="console">&lt;span class="line">&lt;span class="cl">&lt;span class="gp">$&lt;/span> kubectl apply -n argocd -f https://raw.githubusercontent.com/umi0410/declarative-argocd/master/getting-started/argocd/application.yml
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="https://umi0410.github.io/blog/devops/declarative-argocd-helm-app-of-app/guestbook-created.png"
width="790"
height="580"
srcset="https://umi0410.github.io/blog/devops/declarative-argocd-helm-app-of-app/guestbook-created_hubfe9081d55e0da841eb34d3069f41f17_117409_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/devops/declarative-argocd-helm-app-of-app/guestbook-created_hubfe9081d55e0da841eb34d3069f41f17_117409_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="guestbook ì•±ì´ ì˜ ë“±ë¡ëœ ëª¨ìŠµ"
class="gallery-image"
data-flex-grow="136"
data-flex-basis="326px"
>&lt;/p>
&lt;p>ê·¸ëŸ¼ ìœ„ì™€ ê°™ì´ guestbook ì•±ì´ ë“±ë¡ë˜ì–´ syncëœ ëª¨ìŠµì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-console" data-lang="console">&lt;span class="line">&lt;span class="cl">&lt;span class="gp">$&lt;/span> kubectl port-forward service/guestbook-ui -n default 8888:80
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">Forwarding from 127.0.0.1:8888 -&amp;gt; 80
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">Forwarding from [::1]:8888 -&amp;gt; 80
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ë§ˆì°¬ê°€ì§€ë¡œ ë°©ê¸ˆ ë°°í¬í•œ guestbookì´ ì˜ ë™ì‘í•˜ëŠ”ì§€ í™•ì¸í•´ë³´ê¸° ìœ„í•´ guestbook-ui ì„œë¹„ìŠ¤ë¥¼ port forwardí•´ì£¼ê² ìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://umi0410.github.io/blog/devops/declarative-argocd-helm-app-of-app/guestbook:0.1.png"
width="866"
height="276"
srcset="https://umi0410.github.io/blog/devops/declarative-argocd-helm-app-of-app/guestbook:0.1_hue167aac1c39dc47c9109555cba7e0443_28723_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/devops/declarative-argocd-helm-app-of-app/guestbook:0.1_hue167aac1c39dc47c9109555cba7e0443_28723_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="ks-guestbook-demo:0,1"
class="gallery-image"
data-flex-grow="313"
data-flex-basis="753px"
>&lt;/p>
&lt;p>&lt;code>0.1&lt;/code> ë²„ì „ìœ¼ë¡œ ì„¤ì¹˜í–ˆë‹¤ë©´ ìœ„ì™€ ê°™ì´ &lt;strong>ê²€ì€ íƒ€ì´í‹€ì˜ Guestbook&lt;/strong> UIë¥¼ í™•ì¸í•˜ì‹¤ ìˆ˜ ìˆì„ ê²ƒì…ë‹ˆë‹¤!&lt;/p>
&lt;p>ê·¸ëŸ¼ ê³¼ì—° ë‹¤ë¥¸ ë²„ì „ì˜ ì´ë¯¸ì§€ë¡œ ì—…ë°ì´íŠ¸í•˜ë ¤ë©´ ì–´ë–»ê²Œ í•´ë³¼ ìˆ˜ ìˆì„ê¹Œìš”?!&lt;/p>
&lt;p>&lt;img src="https://umi0410.github.io/blog/devops/declarative-argocd-helm-app-of-app/supported-image-tags.png"
width="914"
height="363"
srcset="https://umi0410.github.io/blog/devops/declarative-argocd-helm-app-of-app/supported-image-tags_hu33d7f97eadfa03b4c5afdfa040d65e6b_62565_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/devops/declarative-argocd-helm-app-of-app/supported-image-tags_hu33d7f97eadfa03b4c5afdfa040d65e6b_62565_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="ì§€ì›ë˜ëŠ” ì´ë¯¸ì§€ íƒœê·¸ ëª©ë¡.png"
class="gallery-image"
data-flex-grow="251"
data-flex-basis="604px"
>&lt;/p>
&lt;p>ì§€ì›ë˜ëŠ” ì´ë¯¸ì§€ íƒœê·¸ ëª©ë¡ì€ &lt;a class="link" href="https://console.cloud.google.com/gcr/images/heptio-images/global/ks-guestbook-demo" target="_blank" rel="noopener"
>ì´ê³³&lt;/a>ì—ì„œ í™•ì¸í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>ìš°ë¦¬ëŠ” GitOpsë¥¼ ìœ„í•œ ë„êµ¬ì¸ ArgoCDë¥¼ ì´ìš©í•˜ê³  ìˆê³  guestbook applicationì€ Auto Sync ì„¤ì •ì„ í•´ë†“ì•˜ê¸° ë•Œë¬¸ì—
ë‹¨ìˆœíˆ image tagë¥¼ &lt;code>0.2&lt;/code>ë¡œ ë³€ê²½í•œ ë’¤ í‘¸ì‹œí•´ì£¼ê¸°ë§Œ í•˜ë©´ ë©ë‹ˆë‹¤!&lt;/p>
&lt;p>ê·¸ëŸ¼ fork ëœ¨ì‹  ë ˆí¬ì§€í† ë¦¬ì—ì„œ &lt;code>getting-started/k8s/deployment.yml&lt;/code>ì˜ &lt;code>spec.template.spec.containers[0].image&lt;/code> tag ê°’ì„ &lt;code>0.1&lt;/code> -&amp;gt; &lt;code>0.2&lt;/code> ë¡œ ë³€ê²½í•´ì£¼ì‹œê³  í‘¸ì‹œí•´ì£¼ì„¸ìš”.&lt;/p>
&lt;p>&lt;img src="https://umi0410.github.io/blog/devops/declarative-argocd-helm-app-of-app/guestbook:0.2-pod.png"
width="1036"
height="624"
srcset="https://umi0410.github.io/blog/devops/declarative-argocd-helm-app-of-app/guestbook:0.2-pod_hud3e3fc0dda262da7b041e8cd14e9271e_139239_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/devops/declarative-argocd-helm-app-of-app/guestbook:0.2-pod_hud3e3fc0dda262da7b041e8cd14e9271e_139239_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="ks-guestbook-demo:0.2ë¡œ ë°°í¬ëœ Pod"
class="gallery-image"
data-flex-grow="166"
data-flex-basis="398px"
>&lt;/p>
&lt;p>ìœ„ì™€ ê°™ì´ Podì˜ ì»¨í…Œì´ë„ˆì˜ ì´ë¯¸ì§€ íƒœê·¸ê°€ &lt;code>0.2&lt;/code>ë¡œ ë³€ê²½ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆê³ &lt;/p>
&lt;p>&lt;img src="https://umi0410.github.io/blog/devops/declarative-argocd-helm-app-of-app/guestbook:0.2.png"
width="865"
height="278"
srcset="https://umi0410.github.io/blog/devops/declarative-argocd-helm-app-of-app/guestbook:0.2_huf37d3e4e0787326a08405c425180883f_38731_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/devops/declarative-argocd-helm-app-of-app/guestbook:0.2_huf37d3e4e0787326a08405c425180883f_38731_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="ks-guestbook-demo:0.2"
class="gallery-image"
data-flex-grow="311"
data-flex-basis="746px"
>&lt;/p>
&lt;p>ê¸°ì¡´ì—ëŠ” &lt;strong>ê²€ì •ìƒ‰ íƒ€ì´í‹€ì˜ &amp;ldquo;Guestbook&amp;rdquo;&lt;/strong> ì´ì—ˆì§€ë§Œ ì´ì œëŠ” &lt;strong>ì•Œë¡ë‹¬ë¡í•œ &amp;ldquo;Fancy Guestbook&amp;rdquo;&lt;/strong> ì´ ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆì–´ìš”~!&lt;/p>
&lt;h3 id="ì´ëŸ°-ì‹ì˜-ì‘ì—…-ë°©ì‹ì—ì„œ-ë¶ˆí¸í•œ-ì ë“¤">ì´ëŸ° ì‹ì˜ ì‘ì—… ë°©ì‹ì—ì„œ ë¶ˆí¸í•œ ì ë“¤&lt;/h3>
&lt;p>ì„±ê³µì ìœ¼ë¡œ CD ì‘ì—…ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ì‹¤ì œë¡œ ArgoCDë¥¼ ë„ì…í•˜ê³  ê¾¸ì¤€íˆ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” ë°©ê¸ˆê³¼ ê°™ì€ ë°©ì‹ìœ¼ë¡œ
ì‘ì—…í•˜ê²Œ ë˜ë©´ ëª‡ ê°€ì§€ ë¶ˆí¸ ì‚¬í•­ë“¤ì´ ì¡´ì¬í•  ìˆ˜ ìˆì–´ìš”.&lt;/p>
&lt;ol>
&lt;li>&lt;strong>helmìœ¼ë¡œ ArgoCDë¥¼ ì„¤ì¹˜í•œ ë’¤ ì¶”ê°€ì ìœ¼ë¡œ ìˆ˜ë™ìœ¼ë¡œ Applicationì„ ë“±ë¡&lt;/strong>í•´ì¤˜ì•¼ í•©ë‹ˆë‹¤.
&lt;ul>
&lt;li>ì´ë ‡ê²Œ ë˜ë©´ ë˜ ë‹¤ë¥¸ í´ëŸ¬ìŠ¤í„°ì— ë™ì¼í•œ ì„¤ì •ìœ¼ë¡œ ArgoCDë¥¼ ì„¤ì¹˜í•˜ê±°ë‚˜ ì¬êµ¬ì¶•í•  ë•Œ ë§ì´ ë²ˆê±°ë¡œìš¸ ìˆ˜ ìˆì–´ìš”.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>ì´í›„ì—ë„ &lt;strong>Applicationì„ ìƒˆë¡œ ìƒì„±í•  ë•Œë‚˜ ë³€ê²½í•  ë•Œë§ˆë‹¤ kubectlì„ ì§ì ‘ ìˆ˜í–‰&lt;/strong>í•´ì•¼í•©ë‹ˆë‹¤.
&lt;ul>
&lt;li>ìš°ë¦¬ëŠ” GitOpsì˜ í˜•íƒœë¡œ ArgoCDë¥¼ í†µí•´ &lt;code>Deployment&lt;/code>, &lt;code>Service&lt;/code>, &lt;code>Configmap&lt;/code> ë“±ì„ ê´€ë¦¬í•˜ê³  ìˆì§€ë§Œ
&lt;code>Application&lt;/code>ì€ ì§ì ‘ &lt;code>kubectl&lt;/code>ë¡œ ê´€ë¦¬í•˜ê³  ìˆì–´ìš”.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;h2 id="app-of-app-íŒ¨í„´ì„-í†µí•´-ì¢€-ë”-ì„ ì–¸ì ìœ¼ë¡œ-ê´€ë¦¬í•˜ê¸°">App of App íŒ¨í„´ì„ í†µí•´ ì¢€ ë” ì„ ì–¸ì ìœ¼ë¡œ ê´€ë¦¬í•˜ê¸°&lt;/h2>
&lt;p>ë”°ë¼ì„œ ìœ„ì™€ ê°™ì€ ë¶ˆí¸ ì‚¬í•­ë“¤ì„ í•´ì†Œí•˜ê¸° ìœ„í•´ì„œ ArgoCDì—ëŠ” &lt;code>App of App&lt;/code>ì´ë¼ëŠ” íŒ¨í„´ì´ ì¡´ì¬í•©ë‹ˆë‹¤.
&lt;code>App of App íŒ¨í„´&lt;/code>ì´ë€ &lt;strong>ArgoCDë¡œ ê´€ë¦¬í•  Applicationë“¤ì„ ê´€ë¦¬í•˜ëŠ” ìš°ë‘ë¨¸ë¦¬ Applicationì„ ë‘ëŠ” íŒ¨í„´&lt;/strong>ì„ ë§í•´ìš”.&lt;/p>
&lt;p>&lt;img src="https://umi0410.github.io/blog/devops/declarative-argocd-helm-app-of-app/app-of-app.png"
width="1148"
height="286"
srcset="https://umi0410.github.io/blog/devops/declarative-argocd-helm-app-of-app/app-of-app_hu0da6b93538f9bdd5fb228fadd6643369_67514_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/devops/declarative-argocd-helm-app-of-app/app-of-app_hu0da6b93538f9bdd5fb228fadd6643369_67514_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="ê³µì‹ë¬¸ì„œì—ì„œë„ ê´€ë ¨ ë‚´ìš©ì„ ì°¾ì•„ë³¼ ìˆ˜ ìˆì–´ìš”."
class="gallery-image"
data-flex-grow="401"
data-flex-basis="963px"
>&lt;/p>
&lt;p>&lt;img src="https://umi0410.github.io/blog/devops/declarative-argocd-helm-app-of-app/app-of-app-example.png"
width="1322"
height="903"
srcset="https://umi0410.github.io/blog/devops/declarative-argocd-helm-app-of-app/app-of-app-example_hu4e77d9db36c888cbfc316420e8661632_239899_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/devops/declarative-argocd-helm-app-of-app/app-of-app-example_hu4e77d9db36c888cbfc316420e8661632_239899_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="ì˜ˆë¥¼ ë“¤ì–´ App of App íŒ¨í„´ì„ ì´ìš©í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì´ ë‹¤ë¥¸ ì•±ë“¤ì„ ê´€ë¦¬í•  ìˆ˜ ìˆê²Œ ë¼ìš”."
class="gallery-image"
data-flex-grow="146"
data-flex-basis="351px"
>
ê·¸ëŸ¼ ìœ„ì—ì„œ 2ë²ˆìœ¼ë¡œ ì–¸ê¸‰í•œ ë¬¸ì œëŠ” ì–´ëŠ ì •ë„ í•´ê²°í•  ìˆ˜ ìˆì§€ë§Œ, ê·¸ëŸ¼ ê·¸ ìš°ë‘ë¨¸ë¦¬ Appì€ ì–´ë–»ê²Œ ìƒì„±/ê´€ë¦¬í•  ê²ƒì¸ê°€(1ë²ˆ ë¬¸ì œ)ê°€ ì—¬ì „íˆ ë¬¸ì œì—ìš”.&lt;/p>
&lt;p>ì €ëŠ” ì´ ë¬¸ì œë¥¼ ìš°ë¦¬ê°€ ì§ì ‘ Appì„ ìƒì„±/ê´€ë¦¬í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ArgoCD helm chartì˜ ì¶”ê°€ì ì¸ ì„¤ì •ì„ í†µí•´ ì„ ì–¸ì ìœ¼ë¡œ ê´€ë¦¬í•¨ìœ¼ë¡œì¨ í•´ê²°í•˜ë ¤í•©ë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://umi0410.github.io/blog/devops/declarative-argocd-helm-app-of-app/additional-applications.png"
width="1230"
height="220"
srcset="https://umi0410.github.io/blog/devops/declarative-argocd-helm-app-of-app/additional-applications_hu850b8bb10c85e0c5221cd6515a150d15_59547_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/devops/declarative-argocd-helm-app-of-app/additional-applications_hu850b8bb10c85e0c5221cd6515a150d15_59547_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="ArgoCD Helm Chart README.mdì— ì†Œê°œëœ ë¶€ë¶„"
class="gallery-image"
data-flex-grow="559"
data-flex-basis="1341px"
>&lt;/p>
&lt;p>ì„¤ì •ê°’ ì˜ˆì‹œëŠ” &lt;a class="link" href="https://github.com/argoproj/argo-helm/blob/master/charts/argo-cd/values.yaml" target="_blank" rel="noopener"
>ì´ê³³&lt;/a>ì—ì„œ í™•ì¸í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>ì¦‰, ArgoCD Helm Chartë¥¼ í†µí•´ ê´€ë¦¬í•  Applicationì„ &lt;code>values.yaml&lt;/code>ì— ì‘ì„±í•  ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤.&lt;/p>
&lt;p>ê·¸ëŸ¼ &lt;code>getting-started/values.yaml&lt;/code>ì˜ &lt;code>server.additionalApplications[0].source.repoURL&lt;/code>ì„ ë§ˆì°¬ê°€ì§€ë¡œ ë³¸ì¸ì´ fork ëœ¨ì‹  ë ˆí¬ì§€í† ë¦¬ì˜ URLë¡œ ë³€ê²½í•´ì£¼ì‹œê³  ì•„ë˜ì˜ ëª…ë ¹ì–´ë¡œ helm chartë¥¼ ì—…ê·¸ë ˆì´ë“œí•´ì£¼ì„¸ìš”.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-console" data-lang="console">&lt;span class="line">&lt;span class="cl">&lt;span class="gp">$&lt;/span> helm upgrade -n argocd argocd-demo argo/argo-cd -f getting-started/values.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">...
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ì´í›„ì—ëŠ” ì•„ë˜ì™€ ê°™ì´ &lt;code>app-of-app&lt;/code>ì´ë¼ëŠ” &lt;code>guestbook&lt;/code> Applicaitonì„ ê´€ë¦¬í•˜ëŠ” Applicationì´ ìƒì„±ëœ ê²ƒì„ ë³´ì‹¤ ìˆ˜ ìˆì„ ê±°ì—ìš” :)&lt;/p>
&lt;p>&lt;img src="https://umi0410.github.io/blog/devops/declarative-argocd-helm-app-of-app/app-of-app-2.png"
width="1273"
height="793"
srcset="https://umi0410.github.io/blog/devops/declarative-argocd-helm-app-of-app/app-of-app-2_hu6c80cf78a2d14fbf6c7e90b1ee9bab49_215714_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/devops/declarative-argocd-helm-app-of-app/app-of-app-2_hu6c80cf78a2d14fbf6c7e90b1ee9bab49_215714_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="app-of-app íŒ¨í„´ì´ ì ìš©ëœ ëª¨ìŠµ"
class="gallery-image"
data-flex-grow="160"
data-flex-basis="385px"
>&lt;/p>
&lt;p>app-of-appì€ guestbook applicationì„ ê´€ë¦¬í•˜ê³  ìˆìŠµë‹ˆë‹¤. ë§Œì•½ &lt;strong>ì¶”ê°€ì ìœ¼ë¡œ Applicationì„ ìƒì„±í•˜ê±°ë‚˜ ì‚­ì œí•˜ê³  ì‹¶ë‹¤ë©´ ì§ì ‘ kubectlì„ í†µí•´ ê´€ë¦¬í•  ê²ƒì´ ì•„ë‹ˆë¼
ë³€ê²½í•˜ê³ ì‹¶ì€ ì‚¬í•­ì„ &lt;code>getting-started/argocd&lt;/code>ì— ì‘ì„±í•œ ë’¤ Git pushí•˜ë©´ ArgoCDê°€ ì•Œì•„ì„œ ì ìš©&lt;/strong>í•´ì£¼ê²Œ ë©ë‹ˆë‹¤! ëŒ€ë‹¨í•˜ì£ ?!&lt;/p>
&lt;p>ê·¸ëŸ¼ ìœ„ì˜ ì‘ì—…ì„ í†µí•´ ìš°ë¦¬ê°€ ì•ì„œ ì–¸ê¸‰í–ˆë˜ ë¶ˆí¸ë“¤ì´ í•´ì†Œë˜ì—ˆëŠ”ì§€ í™•ì¸í•´ë³¼ê²Œìš”.
ì œê°€ ë°”ë¼ëŠ” ê±´ &lt;strong>ë°±ì§€ ìƒíƒœì˜ í´ëŸ¬ìŠ¤í„°ì—ì„œë„ ì œê°€ ì„ ì–¸í•´ë†“ì€ ì„¤ì • íŒŒì¼ë“¤ë§Œì„ í†µí•´ &lt;code>helm install&lt;/code> ëª…ë ¹ì–´ í•œ ì¤„ë§Œìœ¼ë¡œ
í˜„ì¬ì™€ ë™ì¼í•œ ArgoCD ìƒíƒœ, guestbook ìƒíƒœë¥¼ ê°–ëŠ” ê²ƒ&lt;/strong>ì´ì—ìš”! ì•„ì£¼ ì„ ì–¸ì ì´ì£ ?!&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-console" data-lang="console">&lt;span class="line">&lt;span class="cl">&lt;span class="gp">$&lt;/span> minikube delete
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">Deleting &amp;#34;minikube&amp;#34; in docker ...
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">ğŸ”¥ Deleting container &amp;#34;minikube&amp;#34; ...
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">...
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span>&lt;span class="gp">$&lt;/span> minikube start
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">ğŸ˜„ minikube v1.25.2 on Darwin 12.2 (arm64)
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">âœ¨ Automatically selected the docker driver
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">...
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span>&lt;span class="gp">#&lt;/span> ArgoCDë‚˜ guestbook ê´€ë ¨ Podë‚˜ ë¦¬ì†ŒìŠ¤ê°€ ì—†ìŒì„ í™•ì¸í•´ë³¼ê²Œìš”
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span>&lt;span class="gp">$&lt;/span> kubectl get pod --all-namespaces
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">NAMESPACE NAME READY STATUS RESTARTS AGE
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">kube-system coredns-64897985d-pd57n 1/1 Running 0 36s
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">...
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span>&lt;span class="gp">$&lt;/span> kubectl create ns argocd
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">namespace/argocd created
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span>&lt;span class="gp">$&lt;/span> helm install -n argocd argocd-demo argo/argo-cd -f getting-started/values.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">NAME: argocd-demo
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">LAST DEPLOYED: Sat Apr 23 07:27:22 2022
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">NAMESPACE: argocd
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">...
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ê·¸ëŸ¼ ì‹œì›í•˜ê²Œ minikubeë¥¼ í†µí•´ êµ¬ì¶•í•œ ì¿ ë²„ë„¤í‹°ìŠ¤ í™˜ê²½ì„ ë‚ ë ¤ë²„ë¦¬ê³  ë‹¤ì‹œ ìƒì„±í•œ ë’¤ ArgoCDë¥¼ helm chartë¡œ ê¹”ì•„ë³¼ê²Œìš”.
ì´ë²ˆì—ëŠ” helm chart ì„¤ì¹˜ ì‹œ &lt;code>getting-started/values.yaml&lt;/code>ì„ ì„¤ì •íŒŒì¼ë¡œ ì´ìš©í•´ì•¼í•©ë‹ˆë‹¤.&lt;/p>
&lt;p>helm installì´ ì™„ë£Œë˜ë©´ ë™ì¼í•œ ë°©ë²•ìœ¼ë¡œ ìƒˆë¡œìš´ Admin íŒ¨ìŠ¤ì›Œë“œë¥¼ ì¡°íšŒí•œ ë’¤ ë‹¤ì‹œ port forwardí•´ì£¼ì‹œê³  ì½˜ì†”ì— ë¡œê·¸ì¸í•´ì£¼ì„¸ìš”.&lt;/p>
&lt;p>&lt;img src="https://umi0410.github.io/blog/devops/declarative-argocd-helm-app-of-app/declarative-result.png"
width="1273"
height="786"
srcset="https://umi0410.github.io/blog/devops/declarative-argocd-helm-app-of-app/declarative-result_hu069aa837df522d39bd59ebc72e1dc62b_218299_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/devops/declarative-argocd-helm-app-of-app/declarative-result_hu069aa837df522d39bd59ebc72e1dc62b_218299_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="ì„ ì–¸ì ìœ¼ë¡œ ê´€ë¦¬ëœ ArgoCD. guestbookì€ Sync ì¤‘ì´ì—ìš” :)"
class="gallery-image"
data-flex-grow="161"
data-flex-basis="388px"
>&lt;/p>
&lt;p>&lt;img src="https://umi0410.github.io/blog/devops/declarative-argocd-helm-app-of-app/guestbook:0.2.png"
width="865"
height="278"
srcset="https://umi0410.github.io/blog/devops/declarative-argocd-helm-app-of-app/guestbook:0.2_huf37d3e4e0787326a08405c425180883f_38731_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/devops/declarative-argocd-helm-app-of-app/guestbook:0.2_huf37d3e4e0787326a08405c425180883f_38731_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="ì„ ì–¸ì ìœ¼ë¡œ ê´€ë¦¬ëœ guestbook"
class="gallery-image"
data-flex-grow="311"
data-flex-basis="746px"
>&lt;/p>
&lt;p>ğŸ‰ ì™€ìš°.. ìƒˆë¡œìš´ í´ëŸ¬ìŠ¤í„°ì—ì„œë„ &lt;strong>ìš°ë¦¬ê°€ ì„ ì–¸ì ìœ¼ë¡œ ì‘ì„±í•œ ì½”ë“œë“¤ë§Œ ìˆë‹¤ë©´ ìœ„ì™€ ê°™ì´ ê¸°ì¡´ê³¼ ë™ì¼í•œ ìƒíƒœë¡œ êµ¬ì¶•ì´ ê°€ëŠ¥&lt;/strong>í•˜ë„¤ìš”! ì¢‹ìŠµë‹ˆë‹¤ ì¢‹ì•„ìš”~&lt;/p>
&lt;h2 id="ë§ˆì¹˜ë©°">ë§ˆì¹˜ë©°&lt;/h2>
&lt;ol>
&lt;li>ArgoCDë¥¼ Helmìœ¼ë¡œ install í•´ë³´ê¸°&lt;/li>
&lt;li>Applicationì„ ìƒì„±í•˜ê³  guestbook í”„ë¡œì íŠ¸ë¥¼ í†µí•´ CD í…ŒìŠ¤íŠ¸í•´ë³´ê¸°&lt;/li>
&lt;li>ê·¸ ê³¼ì •ì—ì„œì˜ ë¶ˆí¸ì´ë‚˜ ë¬¸ì œì‚¬í•­ì„ ë°œê²¬í•´ë‚´ê³  ì„ ì–¸ì ìœ¼ë¡œ í•´ê²°í•´ë‚˜ê°€ê¸°
&lt;ul>
&lt;li>&lt;code>App of App&lt;/code> íŒ¨í„´ ì´ìš©í•˜ê¸°&lt;/li>
&lt;li>ArgoCD Helm Chartê°€ ì§€ì›í•˜ëŠ” &lt;code>additionalApplications&lt;/code> ì„¤ì •ì„ ì´ìš©í•˜ê¸°&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;p>ì´ë²ˆ ê¸€ì—ì„œ ìœ„ì˜ ê³¼ì •ë“¤ì„ í†µí•´ ArgoCDë¥¼ ì–´ë–»ê²Œ ì¢€ ë” ì„ ì–¸ì ìœ¼ë¡œ ê´€ë¦¬í•  ìˆ˜ ìˆì„ì§€ ë˜ ê·¸ëŸ° ì‘ì—…ì„ ìˆ˜í–‰í•  ë•Œ
ìë£Œë“¤ì„ ì–´ë””ì„œ ì°¾ì•„ë³¼ ìˆ˜ ìˆëŠ”ì§€ì— ëŒ€í•´ ì•Œì•„ë´¤ìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>ì¢€ ë” ì œê°€ ì–´ë–»ê²Œ ìë£Œë¥¼ ì°¾ì•„ë‚˜ê°€ëŠ” ì§€ ê·¸ëŸ° ìš”ë ¹ì´ë‚˜ ê³¼ì •ë“¤ì„ ì ì–´ë³´ë ¤í–ˆëŠ”ë° ê¸€ì´ ê¸¸ì–´ì§€ë©´ì„œ ê¸°ëŠ¥ ìì²´ì˜ ë‚´ìš©ì— ì§‘ì¤‘í•˜ê²Œ ëœ ê°ì´ ìˆë„¤ìš” ğŸ¥²..&lt;/p>
&lt;p>ë‹¤ìŒ í¸ì—ì„œëŠ” ArgoCDì—ì„œ RBAC ì„¤ì •ì„ í•´ë³´ë©´ì„œ &amp;lsquo;&lt;em>ì–´ë–»ê²Œ ìƒˆë¡œìš´ ê¸°ëŠ¥ë“¤ì„ ì°¾ê³  ì ìš©í•´ë‚˜ê°€ëŠ”ì§€&lt;/em>&amp;lsquo;ì— ì¢€ ë” í¬ì»¤ìŠ¤ë¥¼ ë§ì¶°ë³´ë ¤í•´ìš”. ë˜í•œ ì´ëŸ° ê³¼ì •ë“¤ì€ &lt;code>ArgoCD&lt;/code> ë¿ë§Œ ì•„ë‹ˆë¼
&lt;code>Kafka&lt;/code>, &lt;code>ELK&lt;/code>, &lt;code>Jenkins&lt;/code> ë“±ì˜ ì˜¤í”ˆì†ŒìŠ¤ë“¤ì„ ì‚¬ìš©í•  ë•Œì—ë„ ë„ì›€ì´ ë  ìˆ˜ ìˆì„ ê²ƒì´ë¼ ìƒê°í•©ë‹ˆë‹¤. &amp;lsquo;&lt;em>ì•„~ ì´ëŸ° ì‹ìœ¼ë¡œ ìë£Œë¥¼ ì°¾ì•„ë³¼ ìˆ˜ ìˆêµ¬ë‚˜&lt;/em>&amp;rsquo; í•˜ê³  ë§ì´ì£  ã…ã…&lt;/p>
&lt;p>ì´ë²ˆ ê¸€ì´ &lt;strong>ArgoCDë¥¼ ì²˜ìŒ ì´ìš©í•´ë³´ì‹œëŠ” ë¶„ë“¤&lt;/strong>, &lt;strong>ì´ìš©í•´ì˜¤ë©´ì„œ ì¡°ê¸ˆ ë¶ˆí¸í•˜ì…¨ë˜ ë¶„ë“¤&lt;/strong>, &lt;strong>ìƒˆë¡œìš´ ì˜¤í”ˆì†ŒìŠ¤ë¥¼ ì–´ë–»ê²Œ í•™ìŠµí•˜ê³  ì ìš©í•´ë‚˜ê°ˆì§€ ì˜ ëª¨ë¥´ê² ëŠ” ë¶„ë“¤&lt;/strong>ê»˜
ë„ì›€ì´ ë  ìˆ˜ ìˆëŠ” ê¸€ì´ì—ˆê¸°ë¥¼ ë°”ëë‹ˆë‹¤! ê°ì‚¬í•©ë‹ˆë‹¤~ ğŸ˜†&lt;/p></description></item><item><title>2021ë…„ íšŒê³ </title><link>https://umi0410.github.io/blog/thought/2021-review/</link><pubDate>Mon, 20 Dec 2021 15:46:54 +0900</pubDate><guid>https://umi0410.github.io/blog/thought/2021-review/</guid><description>&lt;h2 id="ì‹œì‘í•˜ë©°">ì‹œì‘í•˜ë©°&lt;/h2>
&lt;p>ë§¤ë…„ ê·¸ë¬ì§€ë§Œ 2021ë…„ë„ ì°¸ ë¹ ë¥´ê²Œ ì§€ë‚˜ê°„ ê²ƒ ê°™ë‹¤. ë²Œì¨ ì—°ë§ì´ë¼ë‹ˆ.&lt;/p>
&lt;p>ì˜¤ëŠ˜ì€ 2021ë…„ì„ ëŒì•„ë³´ë©° ì˜ í–ˆë˜ ë¶€ë¶„ì— ëŒ€í•´ì„  ë‚˜ ìì‹ ì„ ì¹­ì°¬í•´ì£¼ê³ , ì•„ì‰¬ì› ë˜ ë¶€ë¶„ì— ëŒ€í•´ì„œëŠ” ê°œì„ í•  ë°©ì•ˆì„ ì°¾ì•„ë´„ìœ¼ë¡œì¨
ìƒˆí•´ëŠ” ë” ëœ¨ê²ê³  ì˜ë¯¸ìˆê²Œ ë³´ë‚´ê³ ìí•œë‹¤~!&lt;/p>
&lt;p>ê°œë°œ ì™¸ì ì¸ ê±°ëŠ” ê°œì¸ì ìœ¼ë¡œ ì •ë¦¬í•  ê³„íšì´ê³ , ë³¸ íšŒê³ ë¡ì—ì„œëŠ” ê°œë°œ ê´€ë ¨ëœ ë‚´ìš© ìœ„ì£¼ë¡œ ì‘ì„±í–ˆë‹¤.&lt;/p>
&lt;h2 id="2021ë…„-ê°œë°œ-ê´€ë ¨-í™œë™-ìš”ì•½">2021ë…„ ê°œë°œ ê´€ë ¨ í™œë™ ìš”ì•½&lt;/h2>
&lt;ul>
&lt;li>ë‹¤ì–‘í•œ ì´ìœ ë¡œ ë¯¸ë¤„ì™”ë˜ &lt;strong>ìŠ¤í”„ë§&lt;/strong>ì„ ì‚¬ìš©í•´ë³´ê¸° ì‹œì‘í–ˆë‹¤.&lt;/li>
&lt;li>ë°”ë‹¥ë¶€í„° ì£¼ë„ì ìœ¼ë¡œ ì„¤ê³„/ê°œë°œí•´ë‚˜ê°ˆ ìˆ˜ ìˆëŠ” ì´ˆê¸° &lt;strong>ìŠ¤íƒ€íŠ¸ì—…ì— í•©ë¥˜&lt;/strong>í•´ ë‚˜ë¦„ ë§ì€ ê²½í—˜ì„ í•´ë³¼ ìˆ˜ ìˆì—ˆë‹¤.&lt;/li>
&lt;li>ì‹¤ì œ ê°œë°œ í”„ë¡œì íŠ¸ì— ì—¬ëŸ¿ ì°¸ì—¬í•´ í˜‘ì—…ì„ í•´ë³´ì•˜ë‹¤. (êµë‚´ ì‚¬ì´ë“œ í”„ë¡œì íŠ¸, ê°œë°œ ë™ì•„ë¦¬, ìŠ¤íƒ€íŠ¸ì—…)&lt;/li>
&lt;li>CS ì§€ì‹ì„ ë„˜ì–´ ê°œë°œìë¡œì„œ í•„ìš”í•  ë§Œí•œ ë‚´ìš©ë“¤ì„ ë§ì´ ì ‘í•˜ê³  ê³µë¶€í–ˆë‹¤.
&lt;ul>
&lt;li>DB, Transaction, Cache, Redis, Concurrent programming, TDD&lt;/li>
&lt;li>MSA, DDD, ë©”ì‹œì§€ í, CQRS, SAGA ë“±ì— ëŒ€í•´&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>AUSG(AWS ëŒ€í•™ìƒ ë™ì•„ë¦¬)ì™€ SOPT(ê°œë°œ ë™ì•„ë¦¬)ì—ì„œ ì§„í–‰í•œ ì„¸ë¯¸ë‚˜ì—ì„œ ElasticBeanstalk ê´€ë ¨ ì„¸ì…˜ì„ ì§„í–‰í–ˆë‹¤.&lt;/li>
&lt;li>ì·¨ì¤€ì„ ì‹œì‘í–ˆë‹¤.&lt;/li>
&lt;li>AWS SAA ìê²©ì¦ì„ ê³µë¶€ ì¤‘ì´ë‹¤.&lt;/li>
&lt;li>ë°±ì—”ë“œ/í´ë¼ìš°ë“œ ë¶„ì•¼ì— ìˆì–´ ëŒ€ë¶€ë¶„ì˜ ê¸°ìˆ  ì„¸ë¯¸ë‚˜ì™€ ê¸°ìˆ  ë¸”ë¡œê·¸ ê¸€ë“¤ì„ ì–´ëŠ ì •ë„ ë‹¤ ì´í•´í•  ìˆ˜ ìˆì–´ì¡Œë‹¤.&lt;/li>
&lt;li>ë¬´ì—‡ë³´ë‹¤ ì˜¬í•´ì—ëŠ” &lt;strong>ë§ˆìŒì´ ë§ëŠ” ì†Œì¤‘í•œ ì‚¬ëŒë“¤ì„ ë§ì´ ë§Œë‚˜ê²Œ ëœ ê²ƒ ê°™ì•„ ê°ì‚¬í•˜ë‹¤&lt;/strong>.&lt;/li>
&lt;/ul>
&lt;h2 id="ì¢‹ì•˜ë˜-ì ">ì¢‹ì•˜ë˜ ì &lt;/h2>
&lt;p>&lt;strong>ìŠ¤íƒ€íŠ¸ì—…ì— í•©ë¥˜í•´ ë§ì´ ì„±ì¥í•  ìˆ˜ ìˆì—ˆë‹¤!&lt;/strong>&lt;/p>
&lt;p>ì‘ë…„ê¹Œì§„ ëŒ€ë¶€ë¶„ì˜ í”„ë¡œì íŠ¸ë¥¼ í˜¼ìí•´ì™”ë˜ ê²ƒ ê°™ì€ë° ê·¸ëŸ¬ë‹¤ë³´ë‹ˆ ê¸°íš, ë””ìì¸, í”„ë¡ íŠ¸ ë“±ì— ë„ˆë¬´ ì—ë„ˆì§€ë¥¼ ëºê²¨ì„œ ë°±ì—”ë“œì— ì§‘ì¤‘í•˜ê¸°ê°€ í˜ë“¤ì—ˆë˜ ê²ƒ ê°™ë‹¤. ì´ëŸ° ì ì—ì„œ ì•„ì‰¬ì›€ì„ ëŠê¼ˆê³ , ìµœëŒ€í•œ ì‹¤ë¬´ì™€ ìœ ì‚¬í•œ ê²½í—˜ì„ í•´ë³´ê³  ì‹¶ë‹¤. ê·¸ë˜ì„œ ì œëŒ€ë¡œ ì‚¬ì´ë“œ í”„ë¡œì íŠ¸ë¥¼ êµ¬í•˜ëŠ” í”Œë«í¼ì—ì„œ íŒ€ì„ êµ¬í•´ë³´ê³ ì í–ˆë‹¤.&lt;/p>
&lt;p>ë‹¹ì‹œì— ê°œë°œ ë™ì•„ë¦¬ê°€ ì•„ë‹Œ íŒ€ì„ ë”°ë¡œ êµ¬í•˜ê³ ì í–ˆë˜ ì´ìœ ëŠ” ì‚¬ì‹¤ ê°œë°œ ë™ì•„ë¦¬ëŠ” ì¸í„°ë·° ê³¼ì •ì„ ê±°ì³ íŒ€ì„ ì •í•  ìˆ˜ ìˆëŠ” ê²Œ ì•„ë‹ˆë¼ ë³´í†µ ë™ì•„ë¦¬ì›ë“¤ ì¤‘ ëœë¤ìœ¼ë¡œ íŒ€ ë¹Œë”©ì´ ì´ë£¨ì–´ì§€ë‹¤ë³´ë‹ˆ ì‚¬ì‹¤ íŒ€ ë¹Œë”©ì— ìˆì–´ ìš´ì´ ë§ì€ ë¶€ë¶„ì„ ì°¨ì§€í•˜ì§€ë§Œ ë‚´ í”„ë¡œì íŠ¸ë¥¼ ê·¸ë ‡ê²Œ ìš´ì— ë§¡ê¸°ê³  ì‹¶ì§€ ì•Šì•˜ê¸° ë•Œë¬¸ì´ì—ˆë‹¤. ì‹¤ì œë¡œ ëŒ€ë¶€ë¶„ì˜ ë™ì•„ë¦¬ê°€ í•œ 1/3 ì •ë„ëŠ” í”„ë¡œì íŠ¸ë‚˜ í˜‘ì—…ì´ ì›í™œíˆ ì´ë£¨ì–´ì§€ì§€ ì•ŠëŠ” ê²ƒ ê°™ë‹¤.&lt;/p>
&lt;p>ì–´ì¨Œë“  ë‚˜ë¦„ì˜ ê·¸ëŸ° íŒë‹¨í•˜ì— ê°œë°œ ë™ì•„ë¦¬ë³´ë‹¨ ë”°ë¡œ ì‚¬ì´ë“œ í”„ë¡œì íŠ¸ íŒ€ì„ êµ¬í•´ì„œ í•©ë¥˜í•˜ëŠ” ê²Œ ë” ì¢‹ì€ íŒ€ì›ë“¤ì„ ë§Œë‚  ìˆ˜ ìˆì„ ê²ƒ ê°™ì•˜ê³ , ê²°ê³¼ì ìœ¼ë¡œëŠ” ì‚¬ì´ë“œ í”„ë¡œì íŠ¸ê°€ ì•„ë‹ˆë¼ ì´ˆê¸° ìŠ¤íƒ€íŠ¸ì—…ì— í•©ë¥˜í•˜ê²Œ ë˜ì–´ í•™ìƒìœ¼ë¡œì„œëŠ” ì ì§€ ì•Šì€ ê¸‰ì—¬ë¥¼ ë°›ìœ¼ë©° ì£¼ë„ì ìœ¼ë¡œ ê°œë°œí•´ë‚˜ê°€ê³  ë§ì´ ì„±ì¥í•  ìˆ˜ ìˆì—ˆë˜ ê²ƒ ê°™ë‹¤.&lt;/p>
&lt;p>ë‚˜ëŠ” ì´ íŒ€ì—ì„œ ê°œë°œ ë¦¬ë“œë¥¼ í•˜ë©° í´ë¼ìš°ë“œ ì¸í”„ë¼ ì„¤ê³„/êµ¬ì¶•, Spring Boot RESTful API ì„œë²„ ê°œë°œ, í”„ë¡ íŠ¸ ì¼ì • ê´€ë¦¬ ë° QA ë“±ì˜ ì—…ë¬´ë¥¼ ë‹´ë‹¹í–ˆë‹¤.&lt;/p>
&lt;p>Springë„ JPAë„ í…ŒìŠ¤íŠ¸ ì½”ë“œë„ ì²˜ìŒì´ì—ˆëŠ”ë°, ì˜ ì ìš©í•´ë³¼ ìˆ˜ ìˆì—ˆë‹¤. ì§€ì¸ë“¤ê³¼ ìŠ¤í„°ë”” ê·¸ë£¹ì„ ë§Œë“¤ì–´ í† ì˜í•˜ê³  ì¸í”„ëŸ°ì—ì„œ ê°•ì˜ë¥¼ ìˆ˜ê°•í•˜ë©° ê¸°ìˆ ì„ ê³µë¶€í•˜ê³  ì ìš©í•´ë‚˜ê°”ë‹¤. ì„œë¹„ìŠ¤ë¥¼ ê°œë°œí•˜ë©´ì„œ N+1 ì¿¼ë¦¬ì˜ ë¬¸ì œì  ê°™ì€ ë¶€ë¶„ë“¤ì„ ì‹¤ì œë¡œ ê²½í—˜í•´ë³¼ ìˆ˜ë„ ìˆì—ˆê³  ê°œì„ í•´ë‚˜ê°€ë©´ì„œ Latencyê°€ ë‚®ì€ ì„œë¹„ìŠ¤ ì œê³µí•˜ê¸°ìœ„í•œ ì „ëµë“¤ì— ëŒ€í•œ ê´€ì‹¬ë„ ê°–ê²Œ ëœ ê²ƒ ê°™ë‹¤.&lt;/p>
&lt;p>&lt;strong>CS ì§€ì‹ì„ ë„˜ì–´ ê°œë°œìë¡œì„œ í•„ìš”í•  ë§Œí•œ ë‚´ìš©ë“¤ì„ ë§ì´ ì ‘í•˜ê³  ê³µë¶€í–ˆë‹¤.&lt;/strong>&lt;/p>
&lt;p>â€˜MSAì— ê´€ì‹¬ìˆë‹¤, ê´€ì‹¬ìˆë‹¤.â€™ ë§ë§Œ í•˜ë‹¤ê°€ ì§€ì¸ì´ ì„ ë¬¼í•´ì¤€ â€œë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ íŒ¨í„´â€ì´ë¼ëŠ” ì±…ì„ ì‹œì‘ìœ¼ë¡œ DDDë¼ëŠ” ì£¼ì œì™€ ì¡°ê¸ˆ ë” ìì„¸í•œ MSAì— ëŒ€í•´ ì•Œê²Œ ë˜ì—ˆë‹¤.&lt;/p>
&lt;p>ì‹¤ì§ˆì ìœ¼ë¡œ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ë“¤ì´ ì–´ë–»ê²Œ ë‚®ì€ ì˜ì¡´ì„±ê³¼ ëŠìŠ¨í•œ ê²°í•©ìœ¼ë¡œ ë™ì‘í•  ìˆ˜ ìˆëŠ”ì§€ ê³µë¶€í•´ë³´ë‹¤ë³´ë‹ˆ ë©”ì‹œì§€ íì™€ CQRS, SAGAì™€ ê°™ì€ ë‚´ìš©ë“¤ë„ ì•Œê²Œ ë˜ì—ˆë‹¤.&lt;/p>
&lt;p>ê·¸ë¦¬ê³  ìºì‹œë‚˜ í…ŒìŠ¤íŠ¸ ì½”ë“œë“¤ì€ ë§‰ì—°í•˜ê²Œë§Œ ì•Œê³  ìˆë˜ ìƒíƒœì˜€ëŠ”ë° ì‹¤ì œë¡œ ë„ì…í•´ë³´ë©´ì„œ ì£¼ë‹ˆì–´ ì¹˜ê³ ëŠ” ì© ë‚˜ì˜ì§€ ì•Šì€ ì •ë„ê¹Œì§€ëŠ” ì•Œê²Œ ëœ ê²ƒ ê°™ë‹¤!&lt;/p>
&lt;p>ê·¸ë¦¬ê³  ê¸°ìˆ  ê´€ë ¨ëœ ì•„í‹°í´ì„ ì½ëŠ” ê±¸ ì°¸ ì¢‹ì•„í•˜ëŠ”ë° ì—´ì‹¬íˆ ì½ì€ ë‚´ìš©ë“¤ì´ ê·¸ëƒ¥ ìŠ¤ì³ì§€ë‚˜ê°€ëŠ” ê²ƒì´ ì•„ì‰½ê¸°ë„ í•˜ê³  ë‚¨ë“¤ì€ ì–´ë–»ê²Œ ìƒê°í•˜ë‚˜ ê¶ê¸ˆí•´ì„œ ì•„í‹°í´ ë‚´ìš©ì— ëŒ€í•œ ìš”ì•½ì´ë‚˜ ë‚´ ìƒê°ì„ ì ì–´ë‚˜ê°€ê¸° ì‹œì‘í–ˆë‹¤. ì´ë ‡ê²Œí•˜ë‹ˆ í™•ì‹¤íˆ ë‚´ìš©ì´ ì˜ ê¸°ì–µë‚˜ê¸°ë„ í•˜ê³ , ê°€ë” ë³¸ì¸ì˜ ìƒê°ì„ ê³µìœ í•´ì£¼ì‹œëŠ” ê²½ìš°ë„ ìˆì–´ì„œ ê·¸ë¥¼ í†µí•´ ë°°ì›Œë‚˜ê°€ê¸°ë„ í•œ ê²ƒ ê°™ë‹¤.&lt;/p>
&lt;p>ì´ëŸ° ê³µë¶€ë“¤ì„ ë°”íƒ•ìœ¼ë¡œ ê²°ê³¼ì ìœ¼ë¡œëŠ” ê³¼ê±°ì— ë‚´ê°€ ê¿ˆê¿¨ë˜ ê°œë°œì ìƒì— ì¢€ ë” ê°€ê¹Œì›Œì§„ ê²ƒ ê°™ë‹¤. ë‹¹ì‹œì—” ëŒ€ë¶€ë¶„ì˜ ê¸°ìˆ  ì„¸ë¯¸ë‚˜ê°€ ì˜¤í”„ë¼ì¸ìœ¼ë¡œ ì§„í–‰ëì—ˆê³  ë‚˜ëŠ” ë­ë¼ë„ ë°°ì›Œë³´ë ¤ê³  ì„¸ë¯¸ë‚˜ì— ì°¸ì—¬í–ˆìœ¼ë‚˜ ëŒ€ë¶€ë¶„ì˜ ë‚´ìš©ì„ ì´í•´í•˜ì§€ ëª»í–ˆê³ , ì£¼ë³€ì„ ë‘˜ëŸ¬ë³´ë©° â€˜ì•„ë‹ˆ&amp;hellip; ì—¬ê¸°ìˆëŠ” ì‚¬ëŒë“¤ì€ ì € ì–˜ê¸°ë¥¼ ë‹¤ ì´í•´í•  ìˆ˜ ìˆëŠ”ê±´ê°€..? ëŒ€ë‹¨í•˜ë‹¤â€™ë¼ëŠ” ìƒê°ì„ ê°€ì§€ê³¤í–ˆë‹¤.&lt;/p>
&lt;p>ê·¸ë˜ì„œ ë‚˜ë„ ë‚˜ì¤‘ì—ëŠ” ì´ëŸ° ë‚´ìš©ì„ ë‹¤ ì´í•´í•˜ê³  ê³µê°í•  ìˆ˜ ìˆëŠ” ê°œë°œìê°€ ë˜ê³  ì‹¶ì—ˆë‹¤. ê·¸ë¦¬ê³  ì˜¬í•´ë¥¼ ë§ˆë¬´ë¦¬í•˜ë©° ëŒì´ì¼œë³´ë‹ˆ ì´ì œ ëŒ€ë¶€ë¶„ì˜ ê¸°ìˆ  ì„¸ë¯¸ë‚˜ëŠ” ë¬´ë¦¬ ì—†ì´ ì´í•´í•  ìˆ˜ ìˆì—ˆë˜ ê²ƒ ê°™ì•„ ë¿Œë“¯í•˜ë‹¤. +_+&lt;/p>
&lt;p>ì˜¬í•´ì— ì¬ë¯¸ìˆê²Œ ë´¤ë˜ ì„¸ì…˜ë“¤ì€ ëŒ€ì¶© ë‹¤ìŒê³¼ ê°™ì•˜ë˜ ê²ƒ ê°™ë‹¤.&lt;/p>
&lt;ul>
&lt;li>&lt;a class="link" href="https://www.youtube.com/watch?v=l195D5WT_tE&amp;amp;list=PL7488rl_eFkEoy_YpfTuBdF8cr9YjpXpV&amp;amp;index=10" target="_blank" rel="noopener"
>[2019] PAYCO ì‡¼í•‘ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì•„í‚¤í…ì²˜(MSA) ì „í™˜ê¸°&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://www.youtube.com/watch?v=BnS6343GTkY&amp;amp;list=PL7488rl_eFkEoy_YpfTuBdF8cr9YjpXpV&amp;amp;index=7" target="_blank" rel="noopener"
>[ìš°ì•„ì½˜2020] ë°°ë‹¬ì˜ë¯¼ì¡± ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì—¬í–‰ê¸°&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://www.youtube.com/watch?v=mPB2CZiAkKM&amp;amp;list=PL7488rl_eFkEoy_YpfTuBdF8cr9YjpXpV&amp;amp;index=5" target="_blank" rel="noopener"
>[ìš°ì•„í•œí…Œí¬ì„¸ë¯¸ë‚˜] 191121 ìš°ì•„í•œë ˆë””ìŠ¤ by ê°•ëŒ€ëª…ë‹˜&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://www.youtube.com/watch?v=f6kdp27TYZs" target="_blank" rel="noopener"
>Google I/O 2012 - Go Concurrency Patterns&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://www.youtube.com/watch?v=mLIthm96u2Q&amp;amp;t=8s" target="_blank" rel="noopener"
>ë‹¹ê·¼ë§ˆì¼“ì˜ ê³ ì–¸ì–´ ë„ì…ê¸°, ê·¸ë¦¬ê³  í™œìš©ë²•&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://www.youtube.com/watch?v=92NizoBL4uA" target="_blank" rel="noopener"
>[NHN FORWARD 2021] Redis ì•¼ë¬´ì§€ê²Œ ì‚¬ìš©í•˜ê¸°&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>ìƒê°ì„ ê³µìœ í•˜ê³  ê³µê°í•  ìˆ˜ ìˆëŠ” ì†Œì¤‘í•œ ì‚¬ëŒë“¤ ë§Œë‚˜ê²Œ ëë‹¤.&lt;/strong>&lt;/p>
&lt;p>ì‚¬ì‹¤ ê·¸ë™ì•ˆì€ ì´ëŸ° ì €ëŸ° ì´ìœ ë¡œ ì „ì—­í•œ ë’¤ë¡œëŠ” ë‚˜ë‘ ì˜ ë§ëŠ” ì‚¬ëŒë“¤ì„ ë§Œë‚  ê¸°íšŒê°€ ì ì—ˆë‹¤. ì•„ë¬´ë˜ë„ í•™êµê°€ ê³ ë¦½ë˜ì–´ ìˆê³  ë„ˆë¬´ ì–´ë ¸ë˜ ê²Œ ì£¼ëœ ì›ì¸ì´ì—ˆë˜ ê²ƒ ê°™ë‹¤.&lt;/p>
&lt;p>í•˜ì§€ë§Œ ì˜¬í•´ì—ëŠ” ì˜ ë§ëŠ” ì‚¬ëŒë“¤ì„ ë§Œë‚˜ í•¨ê»˜ ì·¨ì—… ì¤€ë¹„ë¥¼ í•˜ë©´ì„œ ê°ìê°€ ê°€ì§„ ì»¤ë¦¬ì–´ì— ëŒ€í•œ ê°€ì¹˜ê´€ì´ë‚˜ ê°€ê³  ì‹¶ì–´í•˜ëŠ” íšŒì‚¬ ê¸°ì¤€ì„ ê³µìœ í•˜ë©´ì„œ ì„œë¡œ ìê¸° ìì‹ ì— ëŒ€í•´ì„œë„ ì˜ ì•Œì•„ê°ˆ ìˆ˜ ìˆì—ˆë˜ ê²ƒ ê°™ê³  ë§ì€ í˜ì´ ëë˜ ê²ƒ ê°™ë‹¤.&lt;/p>
&lt;p>ê°œë°œí•˜ë‹¤ê°€ ë“œëŠ” ê¶ê¸ˆì¦ì´ë‚˜ ì´í•´ ì•ˆë˜ëŠ” ì ì„ ë§ˆìŒ ë†“ê³  ê³µìœ í•  ìˆ˜ ìˆëŠ” ê·¸ë£¹ì´ ìƒê²¼ë‹¤. ã…ã….&lt;/p>
&lt;p>â€˜ì™œ ì„¸ì…˜ ë§ê³  JWTë¥¼ ì“¸ê¹Œâ€™, â€˜ë°ì´í„°ë‘ íŠ¸ë˜í”½ì´ ì–¼ë§ˆë‚˜ ì»¤ì ¸ì•¼ RDBê°€ ê°ë‹¹í•˜ê¸° í˜ë“  ìˆ˜ì¤€ì´ ë ê¹Œâ€™, â€˜ì¸í„°í˜ì´ìŠ¤ì™€ êµ¬í˜„ì²´ë¡œ êµ¬ë¶„í• ê¹Œ ê·¸ëƒ¥ êµ¬í˜„ì²´ë§Œ ì“¸ê¹Œâ€™ ì´ëŸ° ë‚´ìš©ë“¤ì— ëŒ€í•´ ìì£¼ ëŒ€í™”ë¥¼ ë‚˜ëˆ´ë˜ ê²ƒ ê°™ì€ë° ë”± ì •í•´ì§„ ì •ë‹µì´ ìˆëŠ” ì§ˆë¬¸ë“¤ì€ ì•„ë‹Œ ê²ƒ ê°™ë‹¤. í•˜ì§€ë§Œ ê·¸ì— ëŒ€í•´ í˜¼ìì„œ ê³ ë¯¼ë§Œ í•˜ê¸°ë³´ë‹¤ â€˜ë‚˜ë„ ê·¸ê±° ê¶ê¸ˆí•´â€™ í•˜ë©´ì„œ ê°™ì´ ê³ ë¯¼í•˜ê³  ê³µë¶€í•´ë‚˜ê°€ë‹¤ë³´ë‹ˆ í›¨ì”¬ ë” ì¬ë°Œë”ë¼!&lt;/p>
&lt;h2 id="ì•„ì‰¬ì› ë˜-ì -ê°œì„ í• -ì ">ì•„ì‰¬ì› ë˜ ì , ê°œì„ í•  ì &lt;/h2>
&lt;p>&lt;strong>ì„ íƒê³¼ ì§‘ì¤‘ì„ ì˜ í•˜ì§€ ëª»í–ˆë˜ ê²ƒ ê°™ë‹¤.&lt;/strong>&lt;/p>
&lt;p>ê°œì¸ì ì¸ ì¼ë¡œ ìŠ¬ëŸ¼í”„ê°€ ì°¾ì•„ì™”ë˜ ê²ƒ ê°™ê³  ê·¸ë¥¼ ëŠì–´ë‚´ë ¤ê³  ì´ë˜ ì €ë˜ ì¼ì„ ë²Œë ¸ë˜ ê²ƒ ê°™ë‹¤. ê·¸ëŸ¬ë‹¤ë³´ë‹ˆ í•œ í™œë™ì´ë‚˜ í”„ë¡œì íŠ¸ì— ëª°ì…í•˜ì§€ ëª»í•˜ê³  ë³‘ë ¬ì ìœ¼ë¡œ ì§„í–‰í•˜ë©´ì„œ ì•½ê°„ ëŠ˜ì–´ì§€ê²Œ ëœ ê²ƒ ê°™ì€ë°, í™•ì‹¤í•˜ê²Œ í•˜ë‚˜ì”© í•˜ë‚˜ì”© ì³ëƒˆìœ¼ë©´ ë” ì¢‹ì§€ ì•Šì•˜ì„ê¹Œ ì‹¶ë‹¤.&lt;/p>
&lt;p>ê·¸ë¦¬ê³  í”„ë¡œì íŠ¸ ë¿ë§Œ ì•„ë‹ˆë¼ ê³µë¶€ì— ìˆì–´ì„œë„ ë‚˜ë¦„ ê¹Šê²Œ íŒŒëŠ” ê±¸ ì¢‹ì•„í•œë‹¤ê³  ìƒê°í–ˆëŠ”ë° ë©´ì ‘ ì¤€ë¹„ë¥¼ í•˜ë©´ì„œ ë‚´ê°€ ì•„ì§ ë§ì´ ë¶€ì¡±í•˜ë‹¨ ê±¸ ëŠë¼ê²Œ ëê³ , ê·¸ë™ì•ˆ ì„ íƒê³¼ ì§‘ì¤‘ì„ ì˜ í•˜ì§€ ëª»í–ˆë‹¤ëŠ” ê±¸ ì•Œê²Œ ë˜ì—ˆë‹¤.&lt;/p>
&lt;p>í´ë¼ìš°ë“œ ì¸í”„ë¼ ì¡°ê¸ˆ, ì»¨í…Œì´ë„ˆ ì¡°ê¸ˆ, Java spring ì¡°ê¸ˆ, DB ì¡°ê¸ˆ, MSA/DDD ì¡°ê¸ˆ, ìºì‹œ/Redis ì¡°ê¸ˆ, Go ì¡°ê¸ˆ, &amp;hellip; ë­”ê°€ ë‹¤ ë‘ë£¨ë‘ë£¨ ì•Œê³ ëŠ” ìˆëŠ”ë° í´ë¼ìš°ë“œ ì¸í”„ë¼ë¥¼ ì œì™¸í•˜ë©´ ê¹Šì´ê°€ ê·¸ë¦¬ ê¹Šì§„ ëª»í–ˆë˜ ê²ƒ ê°™ë‹¤. ê²Œë‹¤ê°€ ì‚¬ì´ë“œí”„ë¡œì íŠ¸ì—ì„œ ì•ˆë“œë¡œì´ë“œë„ ê±´ë“œë¦¬ê³  ë¦¬ì•¡íŠ¸ë„ ì‚´ì§ ê±´ë“œë¦¬ê³  ì¿ ë²„ ìƒíƒœê³„ìª½ë„ ê±´ë“œë¦¬ê³  ê·¸ëŸ¬ë‹¤ë³´ë‹ˆ ì§‘ì¤‘ì´ ë¶„ì‚°ëœ ê²ƒë„ ìˆëŠ” ê²ƒ ê°™ë‹¤.&lt;/p>
&lt;p>&lt;strong>ê°œë°œì„ ì¦ê¸°ëŠ” ê±´ ë„ˆë¬´ ì¢‹ì§€ë§Œ, ê²°êµ­ í”„ë¡œê°€ ë˜ë ¤ë©´ ì¦ê¸°ë©´ì„œ ì¬ë°ŒëŠ” ê²ƒë§Œ í•  ìˆ˜ëŠ” ì—†ëŠ” ê²ƒ ê°™ë‹¤. ë•Œë¡œëŠ” ì¡°ê¸ˆ ì¬ë¯¸ê°€ ì—†ëŠ” ê²ƒë„ ê°ìˆ˜í•˜ê³  ë…¸ë ¥í•´ì•¼ í”„ë¡œê°€ ë  ìˆ˜ ìˆëŠ” ê²ƒ ê°™ë‹¤.&lt;/strong>&lt;/p>
&lt;p>ê·¸ë˜ì„œ ìƒˆí•´ì—ëŠ” &lt;strong>ê´€ì‹¬ìˆëŠ” ë¶„ì•¼ í­ì„ ì •í•´ ì±…ì„ í†µí•´ ì¢€ ë” í™•ì‹¤íˆ ë‹¤ì´ë¸Œ&lt;/strong>ë¥¼ í•´ë³´ê³ ìí•œë‹¤. ê° ë¶„ì•¼ë³„ë¡œ ë² ìŠ¤íŠ¸ì…€ëŸ¬ ê°™ì€ ì±…ë“¤ì„ í•œ ê¶Œì”©ì€ ì½ì–´ë³´ê³ ì ê²°ì‹¬í–ˆë‹¤.&lt;/p>
&lt;ul>
&lt;li>RDB - Real MySQL&lt;/li>
&lt;li>NoSQL - Real MongoDB&lt;/li>
&lt;li>NoSQL - ê° NoSQL ë¹„êµí•˜ëŠ” ë‚´ìš©ì˜ ì–´ë–¤ ì±… í•˜ë‚˜&lt;/li>
&lt;li>DDD/MSA - ë„ë©”ì¸ ì£¼ë„ ì„¤ê³„ë¡œ ì‹œì‘í•˜ëŠ” ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ê°œë°œ&lt;/li>
&lt;li>Redis - Redis in Action&lt;/li>
&lt;li>Spring Boot - Spring Bootë¥¼ ë‹¤ë£¬ ì–´ë–¤ ì±… í•˜ë‚˜&lt;/li>
&lt;li>Go - Effective Go&lt;/li>
&lt;li>ê¸°íƒ€ - ê°€ìƒ ë©´ì ‘ ì‚¬ë¡€ë¡œ ë°°ìš°ëŠ” ëŒ€ê·œëª¨ ì‹œìŠ¤í…œ ì„¤ê³„ ê¸°ì´ˆ&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>ë©˜íƒˆì´ ì•½í–ˆë‹¤.&lt;/strong>&lt;/p>
&lt;p>ì·¨ì—… ì¤€ë¹„ë¥¼ ì‹œì‘í•˜ê¸° ì „ë¶€í„° ë©˜íƒˆì´ ë§ì´ í”ë“¤ë ¸ë˜ ê²ƒ ê°™ë‹¤. ë‚˜ëŠ” ê·¸ëƒ¥ ì„¤ê³„í•˜ê³  ê°œë°œí•˜ëŠ” ê²Œ ì¢‹ì€ë° ì·¨ì—…ì„ ìœ„í•´ì„  ì½”ë”© í…ŒìŠ¤íŠ¸ë¥¼ ì¤€ë¹„í•´ì•¼í•œë‹¤ëŠ” ê²ƒë¶€í„° ìŠ¤íŠ¸ë ˆìŠ¤ì˜€ê³  JDë¥¼ ë³´ë©´ ìš”êµ¬ ì¡°ê±´ì€ ë¬¼ë¡  ìš°ëŒ€ ì‚¬í•­ê¹Œì§€ ëª¨ë‘ ìì‹ ìˆì–´ì•¼ë§Œ í•  ê²ƒ ê°™ì€ ì••ë°•ë„ ìŠ¤íŠ¸ë ˆìŠ¤ì˜€ë˜ ê²ƒ ê°™ë‹¤.&lt;/p>
&lt;p>ê·¸ëŸ¬ë‹¤ë³´ë‹ˆ ì§€ë ˆ ê²ì„ ë¨¹ê³  ì§€ì› ìì²´ë¥¼ ë¯¸ë£¨ê±°ë‚˜ ì§€ì›ê³¼ ë™ì‹œì— ê°‘ìê¸° í”¼ë¡œê°ì´ ëª°ë ¤ì˜¤ê³¤ í–ˆë˜ ê²ƒ ê°™ë‹¤. ê·¸ëŸ¬ë‹¤ë³´ë‹ˆ ì¼ìƒ ìƒí™œì´ë‚˜ ê³µë¶€ì—ë„ ì§€ì¥ì´ ìˆì—ˆë˜ ê²ƒ ê°™ë‹¤.&lt;/p>
&lt;p>ê·¸ë˜ì„œ ìƒˆí•´ì—ëŠ” ì»¤ë¦¬ì–´ì™€ ê´€ë ¨í•´ì„œ ì¢€ ë” ê°•í•œ ë©˜íƒˆë¡œ ì—´ì •ì ìœ¼ë¡œ ì„í•˜ë©´ ë” ì¢‹ì„ ê²ƒ ê°™ë‹¤.&lt;/p>
&lt;h2 id="2022-ëª©í‘œ">2022 ëª©í‘œ&lt;/h2>
&lt;ul>
&lt;li>ì§€ì‹ì˜ ê¹Šì´ë¥¼ ë” ê¹Šê²Œ í•´ì•¼ê² ë‹¤
&lt;ul>
&lt;li>ë¶„ì•¼ë³„ ì±… ì½ê¸°&lt;/li>
&lt;li>ë™ì˜ìƒ ê°•ì˜ ê¾¸ì¤€íˆ ì‹œì²­í•˜ê¸°&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>ì„ íƒê³¼ ì§‘ì¤‘ì„ í•˜ì
&lt;ul>
&lt;li>ë„ˆë¬´ ë‹¤ì–‘í•œ ë¶„ì•¼ë³´ë‹¤ëŠ” ë‚´ê°€ ìš°ì„ ìˆœìœ„ì— ë‘” ê¸°ìˆ ë“¤ì„ ìœ„ì£¼ë¡œ ê°œìˆ˜ëŠ” ì ë”ë¼ë„ ê¹Šì´ìˆê²Œ ê³µë¶€í•´ë‚˜ê°€ì&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>ìš´ë™ì„ ì†Œí™€íˆ í•˜ì§€ë§ì
&lt;ul>
&lt;li>ìš” ëª‡ ë‹¬ ìš´ë™ì„ ì†Œí™€íˆ í–ˆë”ë‹ˆ ëª¸ì´ ë»ê·¼í•´ì§€ê¸° ì‹œì‘í•œ ê²ƒ ê°™ë‹¤. ìƒˆí•´ì—ë„ ìš´ë™ì„ ê¾¸ì¤€íˆ í•´ì•¼ê² ë‹¤.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;p>ìì‹ ê° ìˆë˜ ê²¸ì†í•œ, í•œê²° ê°™ì´ ì—´ì •ì ì¸ ê°œë°œìê°€ ë˜ê³  ì‹¶ë‹¤.&lt;/p>
&lt;h2 id="ë§ˆì¹˜ë©°">ë§ˆì¹˜ë©°&lt;/h2>
&lt;p>ì˜¬í•´ì—ëŠ” ê³„ì†í•´ì„œ â€˜&lt;strong>ê¸¸ê²Œ ë³´ì&lt;/strong>â€™ëŠ” ë§ì„ ë˜ìƒˆê²¼ë˜ ê²ƒ ê°™ë‹¤. ì§€ê¸ˆ ë‹¹ì¥ ë‚´ê°€ ì½”ë”© í…ŒìŠ¤íŠ¸ì— í†µê³¼í–ˆëŠ”ì§€, ê¸°ìˆ  ë©´ì ‘ì— í†µê³¼í–ˆëŠ”ì§€ì— ì§‘ì°©í•˜ê¸°ë³´ë‹¤ëŠ” ë‚˜ ìì‹ ì´ ê·¸ëŸ¬í•œ ì§€ì‹ë“¤ì„ ìˆ™ì§€í•œ ì—”ì§€ë‹ˆì–´ê°€ ë˜ëŠ” ê²ƒì„ ëª©í‘œë¡œ í•˜ëŠ” ê²ƒì´ ë” ì¤‘ìš”í•˜ë‹¤ê³  ìƒê°í•˜ê¸° ë•Œë¬¸ì´ë‹¤.&lt;/p>
&lt;p>í•˜ì§€ë§Œ ì‚¬ëŒ ë§ˆìŒì´ë¼ëŠ” ê²Œ ì°¸&amp;hellip; ë¨¸ë¦¬ë¡œëŠ” ì•Œì•„ë„ â€˜&lt;strong>í˜¹ì‹œë¼ë„ êµ¬ë ì´ ë‹´ ë„˜ì–´ê°€ë“¯ ìš´ ì¢‹ìœ¼ë©´ ì–´ë–»ê²Œ ë  ìˆ˜ë„ ìˆì§€ ì•Šì„ê¹Œ&amp;hellip;?&lt;/strong>â€™ ì´ëŸ° ì•ŒëŸ‰í•œ ê¸°ëŒ€ë¥¼ í•˜ê²Œ ë˜ë”ë¼.&lt;/p>
&lt;p>ìƒˆí•´ì—ëŠ” ì¢€ ë” ë³¸ì§ˆì ìœ¼ë¡œ ì§€ì‹ì´ ê¹Šê³  ì‹¤ë ¥ ìˆëŠ” ê°œë°œìê°€ ë˜ê¸° ìœ„í•´ ì—¬ìœ ë¥¼ ê°–ê³  ë‚˜ì•„ê°€ì•¼í•  ê²ƒ ê°™ë‹¤!&lt;/p></description></item><item><title>ì¿¼ë¦¬ ìµœì í™”í•˜ê¸° - ì¡°íšŒìˆ˜ì™€ ê°™ì€ Count ì„±ê²©ì˜ ì‘ì—… ìµœì í™”í•˜ê¸° (N+1 ë¬¸ì œ ê´€ë ¨, feat. Redis)</title><link>https://umi0410.github.io/blog/optimizing-count-query-strategy/</link><pubDate>Wed, 24 Nov 2021 03:46:54 +0900</pubDate><guid>https://umi0410.github.io/blog/optimizing-count-query-strategy/</guid><description>&lt;img src="https://umi0410.github.io/blog/optimizing-count-query-strategy/index.png" alt="Featured image of post ì¿¼ë¦¬ ìµœì í™”í•˜ê¸° - ì¡°íšŒìˆ˜ì™€ ê°™ì€ Count ì„±ê²©ì˜ ì‘ì—… ìµœì í™”í•˜ê¸° (N+1 ë¬¸ì œ ê´€ë ¨, feat. Redis)" />&lt;h2 id="ì‹œì‘í•˜ë©°">ì‹œì‘í•˜ë©°&lt;/h2>
&lt;p>&lt;img src="https://umi0410.github.io/blog/optimizing-count-query-strategy/monitoring.png"
width="1012"
height="437"
srcset="https://umi0410.github.io/blog/optimizing-count-query-strategy/monitoring_hu3985549258cc81ebaf9b1ddb4dd53245_70044_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/optimizing-count-query-strategy/monitoring_hu3985549258cc81ebaf9b1ddb4dd53245_70044_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="Sentry monitoring - ëŠë ¤ì§„ API Latency"
class="gallery-image"
data-flex-grow="231"
data-flex-basis="555px"
>&lt;/p>
&lt;p>&lt;strong>ì§§ì€ ì˜ìƒì„ ë°”íƒ•ìœ¼ë¡œ ë°°í‹€ì„ í•  ìˆ˜ ìˆëŠ” ì„œë¹„ìŠ¤ë¥¼ &lt;code>Spring Boot MVC&lt;/code> + &lt;code>JPA&lt;/code>ë¡œ ê°œë°œ&lt;/strong>í•˜ë˜ ì¤‘ ìœ„ì™€ ê°™ì´ API &lt;strong>Latencyê°€ ì²˜ì°¸í•˜ê²Œë„ ëŠë¦° ìš”ì²­&lt;/strong>ë“¤ì´ ê°ì§€ë˜ê¸° ì‹œì‘í–ˆìŠµë‹ˆë‹¤. ê·¸ë™ì•ˆì€ ì¿¼ë¦¬ ìµœì í™”ë³´ë‹¤ëŠ” ë¡œì§ ê°œë°œì´ ë” ìš°ì„ ì‹œí•˜ë‹¤ë³´ë‹ˆ ì¿¼ë¦¬ ìµœì í™”ë¥¼ ë¯¸ë¤„ì™”ëŠ”ë°,
ì´ë²ˆ ê¸°íšŒì— ì´ì— ëŒ€í•´ ë‹¤ë¤„ë³´ë ¤í•©ë‹ˆë‹¤. ê°„ë‹¨í•˜ê²Œ ì½”ë“œë¥¼ ì§œì„œ í…ŒìŠ¤íŠ¸í•´ë³´ëŠë¼ Go ì–¸ì–´ë¥¼ ì´ìš©í–ˆì§€ë§Œ &lt;strong>JPAë¥¼ ì´ìš©í•˜ë“  ë­˜ ì´ìš©í•˜ë“  ë¬¸ì œì™€ ê·¸ì— ëŒ€í•œ í•´ê²°ì±…ì˜ ìš”ì§€ëŠ” ë™ì¼í•  ê²ƒ&lt;/strong>ì…ë‹ˆë‹¤.&lt;/p>
&lt;p>ì•„ë¬´ë˜ë„ ë°±ì—”ë“œì—ì„œ APIë¥¼ ê°œë°œí•˜ë©´ì„œ íŒŒì¼ ë°ì´í„°ë¥¼ ì£¼ê³  ë°›ëŠ” ê²Œ ì•„ë‹ˆë¼ë©´ ì£¼ë¡œ Latencyê°€ ëŠ˜ì–´ë‚˜ëŠ” ì´ìœ ëŠ” ë‹¤ìŒê³¼ ê°™ì„ ê²ƒì…ë‹ˆë‹¤.&lt;/p>
&lt;ul>
&lt;li>ë„ˆë¬´ ë§ì€ Write&lt;/li>
&lt;li>ë¶ˆí•„ìš”í•œ Column(í•„ë“œ) í˜¹ì€ ê´€ê³„ë¥¼ Eager Loading. ì¶”ê°€ì ìœ¼ë¡œ ê²½ìš°ì— ë”°ë¼ &lt;strong>N+1 ì¿¼ë¦¬ ë¬¸ì œ&lt;/strong> ë°œìƒ&lt;/li>
&lt;li>í•„ìš”í•œ Column(í•„ë“œ) í˜¹ì€ ê´€ê³„ë¥¼ ë’¤ëŠ¦ê²Œ Lazy Loading. ì¶”ê°€ì ìœ¼ë¡œ ê²½ìš°ì— ë”°ë¼ &lt;strong>N+1 ì¿¼ë¦¬ ë¬¸ì œ&lt;/strong> ë°œìƒ&lt;/li>
&lt;li>&lt;strong>ìš”ì²­ë§ˆë‹¤ ë§¤ë²ˆ ìˆ˜í–‰ë˜ëŠ” Joinì´ë‚˜ ì¼ì¢…ì˜ ì—°ì‚°ë“¤&lt;/strong>&lt;/li>
&lt;/ul>
&lt;blockquote>
&lt;p>&lt;code>N+1&lt;/code> ì¿¼ë¦¬ ë¬¸ì œ? - Nê°œì˜ ë°ì´í„°ë¥¼ ì¡°íšŒí•œ ê²½ìš°, ê° ë°ì´í„°ë“¤ì˜ ì—°ê´€ ê´€ê³„ë¥¼ ì¶”ê°€ì ìœ¼ë¡œ ì¡°íšŒí•˜ê¸° ìœ„í•´ í•œ ë²ˆì”© ë” ì¡°íšŒí•´ì•¼í•˜ëŠ” ë¬¸ì œ&amp;hellip; ì•„ì£¼ ì•…ëª… ë†’ì€ ë¬¸ì œë¡œ ìë£Œë¥¼ ì‰½ê²Œ ì°¾ì•„ë³¼ ìˆ˜ ìˆë‹¤.&lt;/p>
&lt;/blockquote>
&lt;p>ì‚¬ì‹¤ ì–´ë–»ê²Œ ë³´ë©´ N+1 ì¿¼ë¦¬ ë¬¸ì œê°€ ì›Œë‚™ ì•…ëª…ì´ ë†’ì•„ ê·¸ì— ëŒ€í•œ í•´ê²°ì±…ë“¤ë„ ê°„ë‹¨í•˜ê²ŒëŠ” ë§ì´ ì†Œê°œë˜ëŠ” ê²ƒ ê°™ê¸°ë„ í•©ë‹ˆë‹¤. ë”°ë¼ì„œ ì´ë²ˆ ê¸€ì—ì„œëŠ” ì¡°ê¸ˆì€ íŠ¹ì´í•˜ê²Œ &lt;strong>ì¡°íšŒìˆ˜ë‚˜ ëŒ“ê¸€ ê°œìˆ˜ì²˜ëŸ¼ ì¼ì¢…ì˜ Count ê¸°ëŠ¥ì´ í•„ìš”í•œ ê²½ìš°ì˜ N+1 ì¿¼ë¦¬ ë¬¸ì œë‚˜ ìš”ì²­ë§ˆë‹¤ ë§¤ë²ˆ ìˆ˜í–‰ë˜ëŠ” Joinì´ë‚˜ ì—°ì‚°ë“¤ë¡œ ì¸í•œ
ì˜¤ë²„í—¤ë“œë“¤ì„ ì¤„ì—¬ ìµœì í™”&lt;/strong>í•˜ëŠ” ë°©ë²•ì€ ì–´ë–¤ ê²ƒë“¤ì´ ìˆì„ì§€ì— ëŒ€í•œ ì œ ê³ ë¯¼ì„ ì†Œê°œí•´ë³´ë ¤ í•©ë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;strong>&lt;em>(ì´ ê¸€ì€ RDBë¥¼ ë©”ì¸ DBë¡œ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ì‘ì„±í–ˆìŠµë‹ˆë‹¤.)&lt;/em>&lt;/strong>&lt;/p>
&lt;h2 id="ì˜ìƒ-ì¡°íšŒìˆ˜-ê°™ì€-count-ì„±ê²©ì˜-ê°’ì—-ëŒ€í•œ-ì‘ì—…ì„-ìµœì í™”í•˜ì§€-ì•Šìœ¼ë©´">ì˜ìƒ ì¡°íšŒìˆ˜ ê°™ì€ Count ì„±ê²©ì˜ ê°’ì— ëŒ€í•œ ì‘ì—…ì„ ìµœì í™”í•˜ì§€ ì•Šìœ¼ë©´?!&lt;/h2>
&lt;ul>
&lt;li>ìŸì•„ì§€ëŠ” ì˜ìƒ ì¡°íšŒ ì´ë²¤íŠ¸ë§ˆë‹¤ RDBì— ë°ì´í„°ë¥¼ Write =&amp;gt; RDBì— ë„ˆë¬´ í° ë¶€í•˜&lt;/li>
&lt;li>ë§¤ë²ˆ íŠ¹ì • ì˜ìƒê³¼ ê´€ë ¨ëœ ì¡°íšŒ ë‚´ì—­ì„ RDBì—ì„œ Join í›„ ê·¸ ê°œìˆ˜ë¥¼ ê³„ì‚° =&amp;gt; RDBì— ë¶€í•˜, ëŠë¦° ì‘ì—…&lt;/li>
&lt;li>RDBì— ì˜ìƒ ì¡°íšŒ ì´ë²¤íŠ¸ë¥¼ Writeí•  ë•Œ ì˜ìƒ ì •ë³´ í…Œì´ë¸”ì— view_count ì»¬ëŸ¼ì„ ì¶”ê°€í•œ ë’¤ view_count ì»¬ëŸ¼ì— ì¡°íšŒìˆ˜ë¥¼ ìºì‹œ =&amp;gt; ìºì‹œ ì •í™•ë„ ë¬¸ì œ, í…Œì´ë¸” ì •ì˜ ë³€ê²½ í•„ìš”&lt;/li>
&lt;/ul>
&lt;p>ì˜ìƒ ì¡°íšŒìˆ˜ ê°™ì€ Count ì„±ê²©ì˜ ê°’ì„ ìµœì í™”í•´ì£¼ì§€ ì•Šìœ¼ë©´ ìœ„ì™€ ê°™ì€ ë¬¸ì œë“¤ì´ ë°œìƒí•  ìˆ˜ ìˆë‹¤ê³  ë´…ë‹ˆë‹¤.&lt;/p>
&lt;p>ë”°ë¼ì„œ ì˜ìƒ ì¡°íšŒ ì´ë²¤íŠ¸ì²˜ëŸ¼ ìŸì•„ì§€ëŠ” ë°ì´í„°ëŠ” ë„ˆë¬´ ë§ì€ Write ìš”ì²­ì€ RDBê°€ ì•„ë‹Œ NoSQLì„ ì‚¬ìš©í•˜ëŠ” ê²Œ ì¢‹ì„ ìˆ˜ ìˆì„ ê²ƒì…ë‹ˆë‹¤.&lt;/p>
&lt;p>í•˜ì§€ë§Œ NoSQLì— ì˜ìƒ ì¡°íšŒ ì´ë²¤íŠ¸ë¥¼ ì €ì¥í•œë‹¤ í•´ë„ ë§¤ë²ˆ ì˜ìƒ ì¡°íšŒ ë‚´ì—­ì„ ê°€ì ¸ì˜¨ ë’¤ ê·¸ ê°œìˆ˜ë¥¼ ê³„ì‚°í•˜ëŠ” ë°©ì‹ì€ ì–´ë–¤ DBë¥¼ ì‚¬ìš©í•˜ë˜ ë¶ˆí•„ìš”í•œ Readë„ ë§ì´ ë°œìƒí•  ê²ƒì´ê³ , ë‹¹ì—°íˆ ëŠë¦¬ê² ì£ . ë§Œì•½ ì–´ë–¤ ì˜ìƒì˜ ì¡°íšŒìˆ˜ê°€ 10ë§Œì¸ ê²½ìš° 10ë§Œê°œì˜ ì´ë²¤íŠ¸ë“¤ì„ ì¡°íšŒí•œ ë’¤ ê·¸ ê°œìˆ˜ë¥¼ ì´ìš©í•´ì•¼í• í…Œë‹ˆ ë§ì…ë‹ˆë‹¤.
ê²½ìš°ì— ë”°ë¼ì„œëŠ” ì˜ìƒ ì¡°íšŒ ì‹œ ê° ì˜ìƒì— ëŒ€í•œ ì¡°íšŒ ë‚´ì—­ì„ ì¶”ê°€ì ìœ¼ë¡œ ì¡°íšŒí•˜ê²Œ ë˜ëŠ” N+1 ì¿¼ë¦¬ ë¬¸ì œë¥¼ ê²ªì„ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>ë”°ë¼ì„œ &lt;strong>&lt;code>view_count&lt;/code> ê°™ì€ columnì„ ì¶”ê°€ì ìœ¼ë¡œ ë‘ëŠ” ê±´ ì–´ë–¨ê¹Œ&lt;/strong>ì‹¶ê¸°ë„ í•©ë‹ˆë‹¤ë§Œ ì¼ë°˜ì ìœ¼ë¡œëŠ” &lt;strong>ë™ì‹œì„± ì´ìŠˆë¡œ ì¸í•´ view_countì˜ ì •í™•ë„ê°€ ë–¨ì–´ì§€ê²Œ ë  ê²ƒ&lt;/strong>ì…ë‹ˆë‹¤. ë˜í•œ &lt;strong>ìŠ¤í‚¤ë§ˆê°€ ê°•ìš”ë˜ëŠ” RDBì˜ íŠ¹ì„±ì— ì˜í•´ í…Œì´ë¸” ì •ì˜ê°€ ë³€ê²½ë˜ì–´ì•¼í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤&lt;/strong>.&lt;/p>
&lt;blockquote>
&lt;p>ë™ì‹œì„± ì´ìŠˆ - ë§Œì•½ 100ëª…ì˜ ìœ ì €ì— ëŒ€í•œ ì˜ìƒ ì¡°íšŒë¥¼ ë™ì‹œì— ì²˜ë¦¬í•˜ëŠ” ê²½ìš° 100ê°œì˜ ìŠ¤ë ˆë“œëŠ” ëª¨ë‘ view_count=0 ìœ¼ë¡œ ì¡°íšŒë¥¼ í•œ ë’¤ ìì‹ ì˜ ì¡°íšŒ ì´ë²¤íŠ¸ë¡œ ì¸í•œ +1ì„ ë”í•´ view_count=1ë¡œ ì—…ë°ì´íŠ¸ ì»¤ë§¨ë“œë¥¼ ë‚ ë¦¬ê² ì§€ë§Œ ì‚¬ì‹¤ view_countëŠ” 1ì´ ì•„ë‹Œ 100ì´ ë˜ì–´ì•¼ ì •í™•í•œ ê²ƒì´ë‹¤.&lt;/p>
&lt;/blockquote>
&lt;h2 id="redisë¥¼-ë„ì…í•´ë³´ë©´-ì–´ë–¨ê¹Œ">Redisë¥¼ ë„ì…í•´ë³´ë©´ ì–´ë–¨ê¹Œ&lt;/h2>
&lt;p>&lt;code>Redis&lt;/code>ëŠ” ë©”ëª¨ë¦¬ë¥¼ ê¸°ë°˜ìœ¼ë¡œí•˜ëŠ” Key-Value í˜•íƒœì˜ NoSQLë¼ì„œ ì¼ë°˜ì ì¸ RDBì— ë¹„í•´ ì•„ì£¼ ë¹ ë¥´ë©´ì„œ ì‹±ê¸€ ìŠ¤ë ˆë“œ ê¸°ë°˜ì´ê¸° ë•Œë¬¸ì— ì •í™•í•œ Countì™€ Incrementê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤. ë”°ë¼ì„œ ì•„ê¹Œ ë°œìƒí–ˆë˜ ë¬¸ì œë“¤ì„ ë‹¤ìŒê³¼ ê°™ì´ í•´ê²°í•  ìˆ˜ ìˆì„ ê²ƒì…ë‹ˆë‹¤.&lt;/p>
&lt;ul>
&lt;li>
&lt;p>ìŸì•„ì§€ëŠ” ì˜ìƒ ì¡°íšŒ ì´ë²¤íŠ¸ë§ˆë‹¤ RDBì— ë°ì´í„°ë¥¼ Write&lt;/p>
&lt;p>=&amp;gt; &lt;del>RDBì— ë„ˆë¬´ í° ë¶€í•˜&lt;/del> (X), &lt;strong>ë¹ ë¥¸ Write&lt;/strong> (O)&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ë§¤ë²ˆ íŠ¹ì • ì˜ìƒê³¼ ê´€ë ¨ëœ ì¡°íšŒ ë‚´ì—­ì„ RDBì—ì„œ Join í›„ ê·¸ ê°œìˆ˜ë¥¼ ê³„ì‚°&lt;/p>
&lt;p>=&amp;gt; &lt;del>RDBì— ë¶€í•˜, ëŠë¦° ì‘ì—…&lt;/del> (X), &lt;strong>Redisì— ìµœê·¼ ì¡°íšŒ ë‚´ì—­ì„ ì €ì¥&lt;/strong>, ìƒí™©ì— ë”°ë¼ NoSQLì—ì„œ Replicateí•´ì„œ ì˜êµ¬í™”í•˜ëŠ” ê²ƒë„ ì¢‹ìŒ (O)&lt;/p>
&lt;/li>
&lt;li>
&lt;p>RDBì— ì˜ìƒ ì¡°íšŒ ì´ë²¤íŠ¸ë¥¼ Writeí•  ë•Œ ì˜ìƒ ì •ë³´ í…Œì´ë¸”ì— view_count ì»¬ëŸ¼ì„ ì¶”ê°€í•œ ë’¤ view_count ì»¬ëŸ¼ì— ì¡°íšŒìˆ˜ë¥¼ ìºì‹œ&lt;/p>
&lt;p>=&amp;gt; &lt;del>ìºì‹œ ì •í™•ë„ ë¬¸ì œ&lt;/del> (X), &lt;strong>Redisì˜ ì‹±ê¸€ìŠ¤ë ˆë“œ ê¸°ë°˜ì˜ ì •í™•í•œ ê³„ì‚°&lt;/strong>&lt;/p>
&lt;p>=&amp;gt; &lt;del>í…Œì´ë¸” ì •ì˜ ë³€ê²½ í•„ìš”&lt;/del> (X), &lt;strong>NoSQLì˜ ìœ ì—°í•¨&lt;/strong> (O)&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>ì´ëŸ° ì´ìœ ë¡œ ì¸í•´ ì¶”í›„ì— &lt;strong>ì¡°íšŒìˆ˜ë‚˜ ëŒ“ê¸€ ìˆ˜, íŒ”ë¡œì›Œ ìˆ˜ ë“±ë“±ì— ëŒ€í•´ Redisë¥¼ ì´ìš©í•˜ë©´ ì–´ë–¨ê¹Œ ì‹¶ì€ ìƒê°ì´ ë“œë„¤ìš”~!&lt;/strong> ê·¸ëŸ¼ ì‹¤ì œë¡œ ì•ì„œ ì†Œê°œí–ˆë˜ ë¬¸ì œ ìƒí™©ì´ë‚˜ í•´ê²° ë°©ë²•ë“¤ì´ ê°ê° ì„±ëŠ¥ì´ ì–´ë–¨ì§€ ì§ì ‘ ë°ì´í„°ì™€ ì¿¼ë¦¬ë¥¼ ì´ìš©í•´ ì‹¤í—˜í•´ë³´ê² ìŠµë‹ˆë‹¤.&lt;/p>
&lt;h2 id="ì‹¤ì œ-ì‹¤í—˜ì„-í†µí•´-ê°ê°ì˜-ë°©ì‹-ì„±ëŠ¥-ë¹„êµ">ì‹¤ì œ ì‹¤í—˜ì„ í†µí•´ ê°ê°ì˜ ë°©ì‹ ì„±ëŠ¥ ë¹„êµ&lt;/h2>
&lt;h3 id="ìƒí™©-ì†Œê°œ">ìƒí™© ì†Œê°œ&lt;/h3>
&lt;ul>
&lt;li>Localì—ì„œ Redis container, MySQL containerì„ ì´ìš©. Goì–¸ì–´ë¡œ ê°€ë³ê²Œ ì• í”Œë¦¬ì¼€ì´ì…˜ ì‘ì„±&lt;/li>
&lt;li>MySQLì˜ Video í…Œì´ë¸”ì— 1000ê°œì˜ ì˜ìƒ ë°ì´í„° ì¡´ì¬. ì¡°íšŒìˆ˜ë¥¼ ìºì‹œí•´ë†“ì€ view_count ì»¬ëŸ¼ ì¡´ì¬.&lt;/li>
&lt;li>MySQLì˜ View í…Œì´ë¸”ì— ì•½ 2ì²œë§Œ ê°œì˜ ì¡°íšŒ ë‚´ì—­ ì¡´ì¬.(ì¦‰ ì˜ìƒ ë‹¹ ìˆ˜ì²œê°œì˜ ì¡°íšŒ ë‚´ì—­ ì¡´ì¬) ì¸ë±ìŠ¤ëŠ” ì˜ ê±¸ì–´ë†“ìŒ.&lt;/li>
&lt;li>Redisì— &lt;code>key=video_view_count:{{video_id}}&lt;/code>, &lt;code>value={{view_count}}&lt;/code> í˜•íƒœë¡œ view_count ìºì‹œ&lt;/li>
&lt;li>&lt;strong>ëœë¤í•˜ê²Œ 5ê°œì˜ ì˜ìƒì— ëŒ€í•œ ì •ë³´ë¥¼ ì œê³µí•  ê²ƒì¸ë° ì´ë•Œ ì¡°íšŒìˆ˜ë„ í¬í•¨ë˜ì–´ì•¼í•œë‹¤.&lt;/strong>&lt;/li>
&lt;/ul>
&lt;h3 id="ë¹„êµí• -ë°©ì‹ë“¤-ì†Œê°œ">ë¹„êµí•  ë°©ì‹ë“¤ ì†Œê°œ&lt;/h3>
&lt;ul>
&lt;li>&lt;strong>Select í›„ Redisì— ìºì‹œëœ ì¡°íšŒìˆ˜ ì´ìš©&lt;/strong>
&lt;ul>
&lt;li>ì˜ìƒì— ëŒ€í•œ ì •ë³´ ìì²´ëŠ” Video í…Œì´ë¸”ì„ ì´ìš©í•´ Read&lt;/li>
&lt;li>ì¡°íšŒìˆ˜ëŠ” Redisì— ìºì‹œëœ ê°’ì„ MGETì„ í†µí•´ ë°°ì¹˜(ë²Œí¬)ë¡œ ì¡°íšŒí•´ì™€ì„œ ì´ìš©&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;strong>Select í•˜ë©° Columnì— ìºì‹œëœ ì¡°íšŒìˆ˜ ì´ìš©&lt;/strong>
&lt;ul>
&lt;li>ì˜ìƒ ì •ë³´ì™€ ì¡°íšŒìˆ˜ ëª¨ë‘ Video í…Œì´ë¸”ì„ í†µí•´ ë°”ë¡œ Read&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;strong>Select í›„ Batchë¡œ In-Query&lt;/strong>
&lt;ul>
&lt;li>JPAë¥¼ ì´ìš©í•˜ë©´ì„œ í”íˆ ë°œìƒí–ˆë˜ N+1 ì¿¼ë¦¬ë¥¼ Batchë¡œ í•´ê²°í•  ë•Œì™€ ë™ì¼í•˜ê²Œ Video í…Œì´ë¸” ì¡°íšŒ í›„ View í…Œì´ë¸”ì—ì„œ view.id in (?,?,&amp;hellip;) ì˜ í˜•íƒœë¡œ In-Queryë¥¼ ì´ìš©&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;strong>Select í›„ ë‚˜ì¤‘ì— ê°ê°ì„ Join&lt;/strong>
&lt;ul>
&lt;li>N+1 ì¿¼ë¦¬ ë¬¸ì œ ê·¸ ìì²´..!&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="ì‹¤í—˜-ê²°ê³¼">ì‹¤í—˜ ê²°ê³¼&lt;/h3>
&lt;p>&lt;img src="https://umi0410.github.io/blog/optimizing-count-query-strategy/result-1.png"
width="2520"
height="783"
srcset="https://umi0410.github.io/blog/optimizing-count-query-strategy/result-1_hu2b8142f32263cafd399ddd7e1ab96ace_456229_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/optimizing-count-query-strategy/result-1_hu2b8142f32263cafd399ddd7e1ab96ace_456229_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="ì‹¤í—˜ ê²°ê³¼ 1"
class="gallery-image"
data-flex-grow="321"
data-flex-basis="772px"
>&lt;/p>
&lt;ol>
&lt;li>ğŸ¥‡ &lt;strong>Select í•˜ë©° Columnì— ìºì‹œëœ ì¡°íšŒìˆ˜ ì´ìš©&lt;/strong>&lt;/li>
&lt;li>ğŸ¥ˆ &lt;strong>Select í›„ Redisì— ìºì‹œëœ ì¡°íšŒìˆ˜ ì´ìš©&lt;/strong>&lt;/li>
&lt;li>ğŸ¥‰ &lt;strong>Select í›„ ë‚˜ì¤‘ì— ê°ê°ì„ Join&lt;/strong>&lt;/li>
&lt;li>&lt;strong>Select í›„ Batchë¡œ In-Query&lt;/strong>&lt;/li>
&lt;/ol>
&lt;p>ìš°ì„ ì€ ì–´ë–¤ ìª½ìœ¼ë¡œë“  ìºì‹±ì„ ì´ìš©í•˜ëŠ” ê²Œ ì°¸ ë¹ ë¥´êµ¬ë‚˜ ì‹¶ì—ˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ì¡°ê¸ˆ ì˜ì•„í•  ìˆ˜ ìˆëŠ” ë¶€ë¶„ë“¤ë„ ì¡´ì¬í•˜ëŠ”ë°ìš”.&lt;/p>
&lt;ol>
&lt;li>&lt;strong>Redisì— ì¡°íšŒìˆ˜ë¥¼ ìºì‹±í•œ ê²½ìš°ë³´ë‹¤ MySQLì— ìºì‹±í•œ ê²½ìš°ê°€ ë” ë¹ ë¥´ë„¤..?&lt;/strong>&lt;/li>
&lt;/ol>
&lt;p>ì–´ë–»ê²Œë³´ë©´ ë‹¹ì—°í•˜ê² ì§€ë§Œ &lt;strong>MySQLì—ì„œ Join ì—†ì´ view_countë¥¼ ì¡°íšŒí•  ìˆ˜ë§Œ ìˆë‹¤ë©´ Redisë¥¼ ê±°ì¹˜ëŠ” ê²ƒë³´ë‹¤ MySQLë§Œìœ¼ë¡œ ì²˜ë¦¬í•˜ëŠ” ê²ƒì´ ë” ë¹ ë¥¼ ê²ƒ&lt;/strong>ì…ë‹ˆë‹¤.&lt;/p>
&lt;p>í•˜ì§€ë§Œ Redisë¥¼ ì‚¬ìš©í•˜ëŠ” ì´ìœ ê°€ Read ì†ë„ë•Œë¬¸ë§Œì€ ì•„ë‹ ê²ƒì…ë‹ˆë‹¤. ì•ì„œ ë§ì”€ë“œë¦° ëŒ€ë¡œ &lt;strong>ì‹±ê¸€ ìŠ¤ë ˆë“œ ê¸°ë°˜ì˜ ì •í™•í•œ count&lt;/strong>ê°€ ê°€ëŠ¥í•  ê²ƒì´ê³ , RDBì˜ &lt;strong>í…Œì´ë¸” ìŠ¤í‚¤ë§ˆë¥¼ ë³€ê²½í•  í•„ìš”ë„ ì—†ì£ &lt;/strong>.&lt;/p>
&lt;p>ê·¸ë¦¬ê³  ë¬´ì—‡ë³´ë‹¤ ì˜ìƒ ì¡°íšŒ ì´ë²¤íŠ¸ ë°œìƒë§ˆë‹¤ RDBì˜ íŠ¹ì • rowì˜ ì¡°íšŒìˆ˜ë¥¼ +1 í•˜ì—¬ update í•˜ëŠ” ê²ƒë³´ë‹¤ëŠ” redisì—ì„œ incrementí•˜ëŠ” ê²ƒì´ ë¹ ë¥¼ ê²ƒì…ë‹ˆë‹¤! ì¦‰, &lt;strong>writeê¹Œì§€ ê³ ë ¤í•˜ë©´ ì†ë„ ì¸¡ë©´ì—ì„œë„ redisê°€ ë¹ ë¥¼ ê²ƒ&lt;/strong>ì…ë‹ˆë‹¤.&lt;/p>
&lt;ol start="2">
&lt;li>&lt;strong>N+1 ì¿¼ë¦¬ ë¬¸ì œë¥¼ ì•¼ê¸°í•˜ëŠ” ë°©ì‹ì´ Batchë¡œ In-Queryí•˜ëŠ” ë°©ì‹ë³´ë‹¤ ë¹ ë¥´ë„¤..?&lt;/strong>&lt;/li>
&lt;/ol>
&lt;p>ì´ ë¶€ë¶„ì€ ì •í™•í•œ ì›ì¸ì€ ëª¨ë¥´ê² ì§€ë§Œ ì•„ë§ˆ ì¶”ì¸¡ì»¨ëŒ€ Batch ë°©ì‹ìœ¼ë¡œ í•œ ë²ˆì— ëª‡ ë§Œê°œ ìˆ˜ì¤€ì˜ ë„ˆë¬´ë‚˜ ë§ì€ ë°ì´í„°ë¥¼ ì¹´í‹°ì…˜ ê³±ìœ¼ë¡œ ì¡°íšŒí•œ ë’¤ ê° videoì˜ ì¡°íšŒìˆ˜ ë‚´ì—­ìœ¼ë¡œ ë„£ì–´ì£¼ë ¤ë‹¤ë³´ë‹ˆ ì¡°íšŒ í›„ ì—°ì‚°ì´ ë§ì€ ì‹œê°„ì„ ì¡ì•„ë¨¹ì€ ê²Œ ì•„ë‹ê¹Œ ì‹¶ìŠµë‹ˆë‹¤.
ë°˜ë©´ N+1 ì¿¼ë¦¬ ë°©ì‹ì€ ê° videoì— ëŒ€í•´ í•œ ë²ˆì”© ì¿¼ë¦¬í•œ ë’¤ ë°”ë¡œ ê·¸ ê²°ê³¼ count í•  ìˆ˜ ìˆìœ¼ë‹ˆ ì´ëŸ° íŠ¹ìˆ˜í•œ ê²½ìš°(ë°ì´í„°ê°€ ì—„~ì²­ ë§ì€ ê²½ìš°)ì—ëŠ” ì˜¤íˆë ¤ Batch ë°©ì‹ì´ ëŠë¦´ ìˆ˜ ìˆëŠ” ê²Œ ì•„ë‹ê¹Œ ì‹¶ìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>ì‹¤ì œë¡œ ì¡°íšŒìˆ˜ê°€ ì•½ 10ê°œ ì •ë„ì¸ ì˜ìƒì„ ë˜‘ê°™ì´ 5ê°œ ì¡°íšŒí•´ë³´ë‹ˆ ìš°ë¦¬ì˜ ì¼ë°˜ì ì¸ ì˜ˆìƒëŒ€ë¡œ Batch ë°©ì‹ì´ N+1 ì¿¼ë¦¬ë³´ë‹¤ ë¹¨ëëŠ”ë°ìš”! ì•„ë§ˆ ì¹´í‹°ì…˜ ê³±ì´ ì¼ì–´ë‚¬ì§€ë§Œ ì–‘ ìì²´ê°€ ì ì€ ì¿¼ë¦¬ ê²°ê³¼ë¥¼ ì²˜ë¦¬í•˜ëŠ” ê²ƒì´ redisì™€ì˜ Në²ˆì˜ í†µì‹ ì´ ë” ëŠë¦¬ê¸° ë•Œë¬¸ì´ ì•„ë‹ê¹Œ ì‹¶ìŠµë‹ˆë‹¤.&lt;/p>
&lt;h2 id="ì¡°íšŒìˆ˜ë¥¼-ìœ„í•´-ê°€ì¥-ì´ìƒì ì¸-ì•„í‚¤í…ì³ëŠ”">ì¡°íšŒìˆ˜ë¥¼ ìœ„í•´ ê°€ì¥ ì´ìƒì ì¸ ì•„í‚¤í…ì³ëŠ”?!&lt;/h2>
&lt;p>&lt;img src="https://umi0410.github.io/blog/optimizing-count-query-strategy/architecture.png"
width="1315"
height="1236"
srcset="https://umi0410.github.io/blog/optimizing-count-query-strategy/architecture_hu2e0266c55b356006b8efd84bbe6e386e_394889_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/optimizing-count-query-strategy/architecture_hu2e0266c55b356006b8efd84bbe6e386e_394889_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="ìƒìƒ ì† ì•„í‚¤í…ì³"
class="gallery-image"
data-flex-grow="106"
data-flex-basis="255px"
>&lt;/p>
&lt;p>ì‹¤í—˜ ê²°ê³¼ì—ì„œë„ Redisë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ë‚˜ì˜ì§€ ì•Šì€ ê²ƒìœ¼ë¡œ ë³´ì—¬ì§‘ë‹ˆë‹¤. ê·¸ë˜ì„œ ì €ë¼ë©´ ì •ë§ ì´ëŸ° ì‹ìœ¼ë¡œ &lt;strong>ìµœì í™”ë¥¼ í•´ë³¼ ìˆ˜ ìˆëŠ” ê¸°íšŒê°€ ìˆë‹¤ë©´ Redisë¥¼ ë„ì…&lt;/strong>í•´ë³¼ ê²ƒ ê°™ìŠµë‹ˆë‹¤. ê·¸ ë™ì•ˆ ìˆ˜ì—†ì´ ê³ í†µë°›ì•„ì™”ë˜ N+1 ì¿¼ë¦¬ ë¬¸ì œë„ ì–´ëŠ ì •ë„ í•´ê²°í•  ìˆ˜ ìˆê² ì£ ?!
&lt;strong>ë¶ˆí•„ìš”í•œ ì–‘ë°©í–¥ ì—°ê´€ ê´€ê³„ëŠ” ìµœëŒ€í•œ ë‹¨ë°©í–¥ ì—°ê´€ ê´€ê³„ë¡œ ì œí•œí•˜ê³ , Countê°€ í•„ìš”í•  ë•Œ ê° ì—”í‹°í‹°ë§ˆë‹¤ì˜ íŠ¹ì • Count ê°’ì„ ìœ„í•´ Në²ˆì˜ ì¿¼ë¦¬ë¥¼ ìˆ˜í–‰í•  í•„ìš”ë„ ì—†ì–´ì§ˆ ê²ƒ&lt;/strong>ì…ë‹ˆë‹¤.&lt;/p>
&lt;p>í•˜ì§€ë§Œ Redisë¥¼ ë„ì…í•œë‹¤ê³  ë§Œì‚¬ê°€ í•´ê²°ë˜ëŠ” ê²ƒì€ ì•„ë‹ ê²ƒì…ë‹ˆë‹¤. RedisëŠ” ì˜ì†ì„±ì´ ë³´ì¥ë˜ì§€ ì•Šìœ¼ë¯€ë¡œ ì˜ìƒ ì¡°íšŒ ë‚´ì—­ì´ ì¦ë°œí•´ë²„ë¦´ ìˆ˜ë„ ìˆê³ , ì–‘ì´ í•œì •ì ì¼ ìˆ˜ ìˆì£ . ê·¸ë˜ì„œ ì €ëŠ” ë‹¨ìˆœ Redis ë¿ë§Œ ì•„ë‹ˆë¼ ë‹¤ìŒê³¼ ê°™ì€ ë°©ì‹ì€ ì–´ë–¨ê¹Œ ìƒê°í•´ë³´ê³  ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;ul>
&lt;li>&lt;strong>ìµœê·¼ ì˜ìƒ ì¡°íšŒ ë‚´ì—­&lt;/strong>ì€ &lt;code>view_histories:{{username}}&lt;/code> í˜•íƒœì˜ key, &lt;code>{{video_id}}&lt;/code> í˜•íƒœì˜ valueë¡œ 1ì°¨ì ìœ¼ë¡œ Redisì— ì €ì¥í•œë‹¤. &lt;strong>ì¡°íšŒìˆ˜&lt;/strong>ëŠ” &lt;code>view_count:{{vide_id}}&lt;/code> í˜•íƒœì˜ key, &lt;code>{{view_count}}&lt;/code> í˜•íƒœì˜ valueë¡œ Redisì— ìºì‹œí•œë‹¤.
&lt;ul>
&lt;li>ìµœê·¼ ì˜ìƒ ì¡°íšŒ ë‚´ì—­ì„ redisë¥¼ í†µí•´ ë¹ ë¥´ê²Œ ì½ê³  ì“¸ ìˆ˜ ìˆë‹¤.&lt;/li>
&lt;li>ì˜ìƒ ì¡°íšŒìˆ˜ë¥¼ Redisì˜ Incrementë¡œ ë¹„êµì  ì •í™•í•˜ê²Œ ê³„ì‚°í•  ìˆ˜ ìˆë‹¤.&lt;/li>
&lt;li>ìœ ì €ì˜ ìµœê·¼ ì˜ìƒ ì¡°íšŒ ë‚´ì—­ì„ ê° ìœ ì €ë³„ë¡œ TTLì„ ê±¸ ìˆ˜ ìˆë‹¤. =&amp;gt; Redis ë©”ëª¨ë¦¬ ì ˆì•½&lt;/li>
&lt;li>ì˜ìƒì˜ ì¡°íšŒìˆ˜ë¥¼ ì˜ìƒë³„ë¡œ TTL ê±¸ ìˆ˜ ìˆë‹¤ =&amp;gt; Redis ë©”ëª¨ë¦¬ ì ˆì•½&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>ì˜ìƒ ì¡°íšŒ ì´ë²¤íŠ¸ ì €ì¥ ì‹œ Redisì˜ &lt;code>event:video_viewed&lt;/code> ë¼ëŠ” keyì˜ Listì— ì•ì„œ ì–¸ê¸‰í•œ ì¡°íšŒ ë‚´ì—­ê³¼ ë™ì¼í•œ ì¡°íšŒ ë‚´ì—­ì„ ì €ì¥í•œë‹¤.(ë©”ì‹œì§€ íì— Enqueueí•˜ëŠ” ëŠë‚Œ)
&lt;ul>
&lt;li>SQS ê°™ì€ Message queueëŠ” ì¡°íšŒìˆ˜ ì´ë²¤íŠ¸ê°€ ìŸì•„ì§€ëŠ” ê²ƒì— ë¹„í•´ latencyê°€ ëŠë¦¼. ë”°ë¼ì„œ Redisë¥¼ íë¡œ ì‚¬ìš©í•˜ëŠ” ê²ƒë„ ê´œì°®ì•„ë³´ì„.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Redis &lt;code>event:video_viewed&lt;/code> ë¼ëŠ” Listì—ì„œ ì¡°íšŒ ì´ë²¤íŠ¸ë¥¼ ë½‘ì•„ ì„œë²„ë¦¬ìŠ¤í•œ NoSQLì¸ DynamoDBì— ìœ ì €ì˜ ì¡°íšŒ ë‚´ì—­ì„ ì˜êµ¬ì ìœ¼ë¡œ ì €ì¥í•œë‹¤.
&lt;ul>
&lt;li>ì˜ìƒ ì¡°íšŒ ë‚´ì—­ì„ redisì— ìºì‹œí•  ë¿ë§Œ ì•„ë‹ˆë¼ ì˜êµ¬ì ìœ¼ë¡œ ì €ì¥í•˜ê¸° ìœ„í•¨.&lt;/li>
&lt;li>ë§ˆì¹˜ Redisë¥¼ ë²„í¼, Write-back cacheë¡œ ì´ìš©í•˜ëŠ” ëŠë‚Œì¸ë° NoSQLì´ë¼í•´ë„ ì£¼ê¸°ì ì¸ Bulk writeì€ ì£¼ê¸°ë•Œë§ˆë‹¤ ë¶€ë‹´ë  ìˆ˜ ìˆìŒ. ê·¸ë¦¬ê³  ì¡°íšŒ ì´ë²¤íŠ¸ëŠ” ê³„ì† ê³„ì† ë¹ ë¥´ê²Œ í™•ì¥ë  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— NoSQL ì¤‘ì—ë„ ì„œë²„ë¦¬ìŠ¤ì¸ DynamoDBë¥¼ ì‚¬ìš©í•˜ë©´ ì–´ë–¨ê¹Œ ì‹¶ìŒ. (ì£¼ì˜: DynamoDB ì•ˆì¨ë´„&amp;hellip;)&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;p>(ë‹¨ ìœ„ì˜ ì•„í‚¤í…ì³ëŠ” ì œ ê°œì¸ì ì¸ ìƒê°ì¼ ë¿, ì‹¤ì œë¡œëŠ” ì–´ë–»ê²Œë“¤ ì‚¬ìš©í•˜ì‹œëŠ”ì§€ ê¶ê¸ˆí•˜ë„¤ìš”..! ì´ë ‡ê²Œ ì§ì ‘ í•œ í•„ë“œì— ëŒ€í•´ ë³µì¡í•œ ë°©ì‹ì„ ì´ìš©í•˜ê¸°ë³´ë‹¨ ì¢€ ë” ë‹¨ìˆœíˆ ìºì‹± í”„ë ˆì„ì›Œí¬ë¥¼ ì´ìš©í•˜ëŠ” ê²ƒë„ ì¢‹ì€ ì„ íƒì§€ì¼ ìˆ˜ë„ ìˆì„ ê²ƒ ê°™êµ¬ìš”.)&lt;/p>
&lt;h2 id="ë§ˆì¹˜ë©°">ë§ˆì¹˜ë©°&lt;/h2>
&lt;p>ì´ë ‡ê²Œ Count ì„±í–¥ì˜ ì‘ì—…ì„ ì–´ë–»ê²Œ ìµœì í™”í•  ìˆ˜ ìˆì„ì§€ ìƒìƒê³¼ ì‹¤í—˜ì„ í†µí•´ ì •ë¦¬í•´ë´¤ìŠµë‹ˆë‹¤. ì¤‘ìš”í•œ ê²ƒì€ í•˜ë‚˜ì˜ ì •ë‹µì´ ì¡´ì¬í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆê³ , ì²˜í•œ ìƒí™©ë§ˆë‹¤ ì²œì°¨ë§Œë³„ì˜ ì†”ë£¨ì…˜ë“¤ì´ ìˆì„í…Œë‹ˆ ê°ê°ì„ ì˜ ë¹„êµí•´ë³´ê³  ì˜ PoC í•œ ë’¤ ì‚¬ìš©í•˜ëŠ” ê²ƒì¸ ë“¯í•©ë‹ˆë‹¤.&lt;/p>
&lt;p>ìºì‹œë‚˜ Redisì— ëŒ€í•´ ê´€ì‹¬ì´ ë§ì€ í¸ì´ì§€ë§Œ, ì•„ì§ ë§ì´ ë¶€ì¡±í•˜ë‹¤ë³´ë‹ˆ ì¢‹ì€ ë§ì”€ ëŒ“ê¸€ë¡œ ë‹¬ì•„ì£¼ì‹œë©´ ê°ì‚¬íˆ ë°°ì›Œë‚˜ê°€ê² ìŠµë‹ˆë‹¤~! ê°ì‚¬í•©ë‹ˆë‹¤.&lt;/p></description></item><item><title>AWS Lambda + API Gatewayë¥¼ í†µí•´ SSRë¡œ OpenGraph ë©”íƒ€ë°ì´í„° ì œê³µí•˜ê¸°</title><link>https://umi0410.github.io/blog/ssr-serverless-og/</link><pubDate>Sun, 07 Nov 2021 03:46:54 +0900</pubDate><guid>https://umi0410.github.io/blog/ssr-serverless-og/</guid><description>&lt;img src="https://umi0410.github.io/blog/ssr-serverless-og/architecture.png" alt="Featured image of post AWS Lambda + API Gatewayë¥¼ í†µí•´ SSRë¡œ OpenGraph ë©”íƒ€ë°ì´í„° ì œê³µí•˜ê¸°" />&lt;h2 id="ì‹œì‘í•˜ë©°">ì‹œì‘í•˜ë©°&lt;/h2>
&lt;p>&lt;img src="https://umi0410.github.io/blog/ssr-serverless-og/slack.png"
width="625"
height="123"
srcset="https://umi0410.github.io/blog/ssr-serverless-og/slack_hudb8034cbbfca01c01c6729f95196f0c8_28468_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/ssr-serverless-og/slack_hudb8034cbbfca01c01c6729f95196f0c8_28468_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="&amp;ldquo;ì˜¤í”ˆ ê·¸ë˜í”„ ì§€ì›í•´ì£¼ì„¸ìš”.&amp;rdquo;"
class="gallery-image"
data-flex-grow="508"
data-flex-basis="1219px"
>&lt;/p>
&lt;p>&lt;img src="https://umi0410.github.io/blog/ssr-serverless-og/examples.png"
width="2376"
height="966"
srcset="https://umi0410.github.io/blog/ssr-serverless-og/examples_hu6e9e1789e6f5add8639186b233630288_1362646_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/ssr-serverless-og/examples_hu6e9e1789e6f5add8639186b233630288_1362646_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="ì˜¤í”ˆê·¸ë˜í”„ê°€ ì‚¬ìš©ëœ ì¸ìŠ¤íƒ€ DM, í˜ë¶ ë©”ì‹ ì €, ì¹´í†¡ ì˜ˆì‹œ"
class="gallery-image"
data-flex-grow="245"
data-flex-basis="590px"
>&lt;/p>
&lt;p>ì„œë¹„ìŠ¤ ì¶œì‹œë¥¼ ì•ë‘ê³  ë§ˆë¬´ë¦¬ ì‘ì—…ì„ í•˜ë˜ ì¤‘ ìŠê³  ìˆì—ˆë˜ SNS ê´€ë ¨ ê¸°ëŠ¥ë“¤ì´ ìˆì—ˆìŠµë‹ˆë‹¤. ê·¸ ì¤‘ OpenGraphë¥¼ í†µí•´ &amp;ldquo;ê³µìœ í•˜ê¸°&amp;rdquo; ê¸°ëŠ¥ ìˆ˜í–‰ ì‹œì—
ì ì ˆí•œ ë©”íƒ€ë°ì´í„°ë¥¼ ì œê³µí•´ì¤˜ì•¼ í–ˆìŠµë‹ˆë‹¤. ë³„ë¡œ ì–´ë ¤ìš´ ê¸°ëŠ¥ì€ ì•„ë‹ˆì§€ë§Œ ì´ë¥¼ ì œê³µí•˜ê¸° ìœ„í•´ ì ì ˆí•œ ë°©í–¥ì„ ì°¾ê¸°ê°€ ì‰½ì§€ ì•Šì•˜ë˜ ê²ƒ ê°™ìŠµë‹ˆë‹¤.
ê³ ë¯¼ê³¼ ì‚½ì§ˆ ëì— ì €ëŠ” CloudFront, API Gateway, Lambda ì„œë¹„ìŠ¤ë“¤ì„ ì´ìš©í•˜ê¸°ë¡œ ê²°ì •í–ˆê³ , Serverless frameworkë¥¼ ì´ìš©í•´ Golang ë°”íƒ•ì˜
ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ë¥¼ ê°œë°œí–ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;h2 id="opengraph-ssr">OpenGraph? SSR?&lt;/h2>
&lt;blockquote>
&lt;p>ë³¸ ê¸€ì€ ì•„í‚¤í…ì³ë‚˜ ê¸°ìˆ  ì„ ì •ì— ëŒ€í•œ ë‚´ìš©ì„ ë§ì´ ë‹´ì„ ê²ƒì´ë¼ì„œ ì •ì˜ì— ëŒ€í•œ ìì„¸í•œ ì„¤ëª…ì€ ìƒëµí•˜ê² ìŠµë‹ˆë‹¤.&lt;/p>
&lt;/blockquote>
&lt;p>&lt;code>OpenGraph&lt;/code>ëŠ” &lt;code>&amp;lt;head&amp;gt;&lt;/code> íƒœê·¸ ì•ˆì— &lt;code>&amp;lt;meta property=&amp;quot;og:title&amp;quot; content=&amp;quot;ë°°í‹€íŒ¡::ì§§ê³  ì¬ë°ŒëŠ” ë™ì˜ìƒ ë°°í‹€&amp;quot; /&amp;gt;&lt;/code> ê³¼ ê°™ì€ í˜•íƒœë¡œ &lt;strong>ë©”íƒ€ë°ì´í„°ë“¤ì„ ì •ì˜í•´
SNSë‚˜ í¬ë¡¤ë§ ë´‡ë“¤ì´ ì‚¬ì´íŠ¸ì˜ ì •ë³´ë¥¼ ì¢€ ë” í†µì¼ëœ ë°©ë²•ìœ¼ë¡œ ë°ì´í„°ë¥¼ ìˆ˜ì§‘&lt;/strong>í•  ìˆ˜ ìˆê²Œ í•˜ëŠ” ê²ƒê³¼ ê´€ë ¨ëœ ê°œë…ì…ë‹ˆë‹¤. ê·¸ë¦¬ê³  &lt;code>SSR&lt;/code>(Server Side Rendering)ì€ &lt;strong>í´ë¼ì´ì–¸íŠ¸ê°€ ì„œë²„ì—ê²ŒëŠ” ê»ë°ê¸° ê°™ì€ íŒŒì¼ë§Œ ì œê³µë°›ê³ 
ì‹¤ì œ í˜ì´ì§€ì˜ ë‚´ìš©ì€ Client ì¸¡ì—ì„œ APIì™€ js ë“±ì„ ì´ìš©í•´ ë§Œë“¤ì–´ë‚˜ê°€ëŠ” ë°©ì‹&lt;/strong>ì…ë‹ˆë‹¤. ì•„ë§ˆ ëŒ€ë¶€ë¶„ì˜ SPA ì•±ë“¤ì€ CSRë¡œ ë°°í¬/ê°œë°œ ë˜ê³  ìˆëŠ” ê²ƒ ê°™ì€ë°ìš”. ê·¸ ì´ìœ ëŠ” í”„ë¡ íŠ¸ì—”ë“œë¥¼ ì œê³µí•  ë•Œ
S3ë‚˜ CloudFront, Github Page ë“± ì„œë²„ì˜ ê¸°ëŠ¥ê³¼ ì™„ì „íˆ ë¶„ë¦¬í•˜ì—¬ ì œê³µí•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì´ë¼ëŠ” ì ì´ í¬ê²Œ ì‘ìš©í•˜ì§€ ì•Šì„ê¹Œ ì‹¶ìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;strong>&amp;ldquo;ì™œ OpenGraphë¥¼ ì œê³µí•˜ëŠ”ë° SSRì´ í•„ìš”í•´?&amp;rdquo;&lt;/strong>&lt;/p>
&lt;p>í¬ë¡¤ë§ ë´‡ë“¤ì€ JSë¥¼ ì‹¤í–‰í•˜ì§€ ì•ŠëŠ” ê²½ìš°ê°€ ëŒ€ë‹¤ìˆ˜ì…ë‹ˆë‹¤. ë°˜ë©´ ì¼ë°˜ì ì¸ CSR ë°©ì‹ì˜ SPA ì•±ë“¤ì€ JSë¥¼ ì´ìš©í•´ ì„œë²„ì—ê²Œ APIë¥¼ í˜¸ì¶œí•´ ê·¸ ì‘ë‹µìœ¼ë¡œ í˜ì´ì§€ë¥¼ ë§Œë“¤ì£ .
ë”°ë¼ì„œ &lt;strong>JSë¥¼ ì‹¤í–‰í•˜ì§€ ì•ŠëŠ” í¬ë¡¤ë§ ë´‡ì€ ê¸°ëŒ€ë˜ëŠ” ë°ì´í„°ê°€ ì„œë²„ë¡œë¶€í„° ì œê³µë˜ê¸° ì´ì „ì¸ ë¹ˆ ê»ë°ê¸°ì˜ íŒŒì¼ë§Œ ì œê³µë°›ê²Œ ë©ë‹ˆë‹¤.&lt;/strong> ë”°ë¼ì„œ &amp;ldquo;ê³µìœ í•˜ê¸° ë§í¬&amp;quot;ëŠ” &lt;strong>í¬ë¡¤ë§ ë´‡ì´ ì˜¤í”ˆê·¸ë˜í”„ë¥¼ ì½ì„ ìˆ˜ ìˆë„ë¡
SSRë¡œ ì˜¤í”ˆ ê·¸ë˜í”„ ë©”íƒ€ë°ì´í„°ë“¤ì´ ë‹´ê¸´ HTMLì„ ì œê³µ&lt;/strong>í•´ì¤˜ì•¼í•˜ëŠ” ê²ƒì´ì£ !&lt;/p>
&lt;h2 id="ì˜¤í”ˆ-ê·¸ë˜í”„-ì œê³µì„-ìœ„í•œ-ssrserver-side-rendering-ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤">ì˜¤í”ˆ ê·¸ë˜í”„ ì œê³µì„ ìœ„í•œ SSR(Server Side Rendering) ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤&lt;/h2>
&lt;p>ê·¸ë˜ì„œ &lt;strong>ì˜¤í”ˆ ê·¸ë˜í”„ë¥¼ ìœ„í•œ ì •ë³´ë§Œì„ SSRë¡œ ì œê³µí•˜ëŠ” ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤&lt;/strong>ë¥¼ ë§Œë“¤ê³ ìí–ˆìŠµë‹ˆë‹¤. HTML íŒŒì¼ì„ ì œê³µí•˜ëŠ” ì‹œì ì— ë‹¨ìˆœ ì •ì  íŒŒì¼ ì œê³µì´ ì•„ë‹Œ
ë¡œì§ ìˆ˜í–‰ í›„ ë™ì ìœ¼ë¡œ íŒŒì¼ì„ ì œê³µí•´ì•¼í•œë‹¤ë©´ ì‚¬ì‹¤ ê°œë°œ ì¤‘ì´ë˜ Spring ì„œë²„ì—ì„œ ì—”ë“œí¬ì¸íŠ¸ í•˜ë‚˜ë§Œ ë” íŒŒì„œ ê°œë°œì„ í•˜ë©´ ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
í•˜ì§€ë§Œ ì´ë ‡ê²Œ ë˜ë©´ ë©”ì¸ ë°±ì—”ë“œ ì½”ë“œì— SSR ê´€ë ¨ í˜ì´ì§€ ì œê³µ ê¸°ëŠ¥ì´ ì¶”ê°€ë˜ì–´ì•¼í•˜ëŠ”ë° &lt;strong>API ì„œë²„ì™€ ê°™ì€ ê³³ì—ì„œ ì¼ì¢…ì˜ í”„ë¡ íŠ¸ì˜ ê¸°ëŠ¥ì„ í•˜ëŠ” SSRì´ ê³µì¡´í•˜ëŠ” í˜•íƒœëŠ” ì„ í˜¸í•˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤&lt;/strong>.
ê²Œë‹¤ê°€ ë°±ì—”ë“œì¸ Spring bootì—ì„œë„ ì–´ë–¤ ìš”ì²­ì— ëŒ€í•´ ì—ëŸ¬ë¡œ ì‘ë‹µí•  ë•Œ SSRì— ëŒ€í•œ ì—ëŸ¬ ì²˜ë¦¬ë¡œ í•´ì¤˜ì•¼í•  ì§€ APIì— ëŒ€í•œ ì—ëŸ¬ ì²˜ë¦¬ë¡œ í•´ì¤˜ì•¼í•  ì§€ ë“±ë“± ê½¤ë‚˜ ê°œë°œì ìœ¼ë¡œ ê³¨ì¹˜ê°€ ì•„í”ˆ ë¶€ë¶„ì´ ë§ì•˜ìŠµë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-json" data-lang="json">&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;message&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;ì˜¬ë°”ë¥´ì§€ ì•Šì€ í˜ì´ì§€ì…ë‹ˆë‹¤.&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;error&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;NotFound&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ì˜ˆë¥¼ ë“¤ë©´ APIì— ëŒ€í•œ ì—ëŸ¬ ì‘ë‹µì€ ìœ„ì™€ ê°™ì€ í˜•íƒœë¥¼ ë„ëŠ” ê²ƒì´ ì¢‹ì„ ê²ƒì´ê³ , ê·¸ë˜ì•¼ í”„ë¡ íŠ¸ì—”ë“œì—ì„œë„ ì²˜ë¦¬ë¥¼ í•˜ê¸° í¸í•  ê²ƒì…ë‹ˆë‹¤. ë°˜ë©´ SSRì— ëŒ€í•œ ì—ëŸ¬ ì‘ë‹µì€ ì–´ì¨Œë“  ì‚¬ìš©ìê°€ ì§ì ‘ ëŒ€ë©´í•˜ëŠ” í˜ì´ì§€ì´ë‹¤ë³´ë‹ˆ
ê²°êµ­ ë©”ì¸ ì„œë¹„ìŠ¤ì˜ í”„ë¡ íŠ¸ì—”ë“œë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸ê°€ ë˜ì–´ ë©”ì¸ ì„œë¹„ìŠ¤ì˜ í”„ë¡ íŠ¸ì—”ë“œê°€ ì²˜ë¦¬í•  ìˆ˜ ìˆê²Œ í•´ì¤˜ì•¼í•  ê²ƒì´êµ¬ìš”.&lt;/p>
&lt;p>&amp;lsquo;ì´ê²Œ ë¬´ìŠ¨ ì†Œë¦¬ì§€?&amp;rsquo; ë¼ê³  ìƒê°í•˜ì‹¤ ìˆ˜ ìˆëŠ”ë°, SSRë¡œ ì œê³µëœ í˜ì´ì§€ëŠ” ê²°êµ­ &lt;strong>&amp;ldquo;ê³µìœ í•˜ê¸°&amp;quot;ë¥¼ í†µí•´ ë§í¬ë¥¼ ì „ë‹¬ ë°›ì€ ì‚¬ìš©ìê°€ ì§ì ‘ ì ‘ì†í•˜ëŠ” í˜ì´ì§€&lt;/strong>ì´ë©´ì„œ ë™ì‹œì— &lt;strong>í¬ë¡¤ë§ ë´‡ì´ ì˜¤í”ˆ ê·¸ë˜í”„ë¥¼ í†µí•´ ë°ì´í„°ë¥¼ ìˆ˜ì§‘í•´ê°€ëŠ” í˜ì´ì§€&lt;/strong>ì´ê¸°ë„ í•©ë‹ˆë‹¤.&lt;/p>
&lt;ul>
&lt;li>í¬ë¡¤ë§ ë´‡ì€ JSë¥¼ ìˆ˜í–‰í•˜ì§€ ì•ŠëŠ”ë‹¤&lt;/li>
&lt;li>ë”°ë¼ì„œ ì˜¬ë°”ë¥¸ ë©”íƒ€ë°ì´í„°ê°€ ë‹´ê¸´ HTML ë§Œë“¤ê¸° ìœ„í•´ì„  SSRì´ í•„ìš”í•˜ë‹¤.&lt;/li>
&lt;li>SSRë¡œ ì œê³µëœ í˜ì´ì§€ë¡œ ìœ ì €ê°€ ì ‘ì†í–ˆì„ ë•Œ ì„œë¹„ìŠ¤ë¡œ ì˜¬ë°”ë¥´ê²Œ ì ‘ì†í•  ìˆ˜ ìˆì–´ì•¼í•œë‹¤. í•˜ì§€ë§Œ ì„œë¹„ìŠ¤ ìì²´ë¥¼ SSR ë°©ì‹ìœ¼ë¡œ ë³€ê²½í•˜ê¸°ì—ëŠ” ë¬´ë¦¬ê°€ ìˆë‹¤!&lt;/li>
&lt;/ul>
&lt;p>ìœ„ì™€ ê°™ì€ íŠ¹ì§•ë“¤ë¡œ ì¸í•´ &lt;strong>ì˜¤í”ˆ ê·¸ë˜í”„ ì œê³µì„ ìœ„í•œ SSR ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ëŠ” ë‹¤ìŒê³¼ ê°™ì´ ë™ì‘í•˜ë©´ ì¢‹ì§€ ì•Šì„ê¹Œ?!&lt;/strong> ì‹¶ì—ˆì–´ìš”.&lt;/p>
&lt;ul>
&lt;li>&lt;strong>ì˜¤í”ˆê·¸ë˜í”„ ì •ë³´ê°€ ë‹´ê¸´ ë™ì ìœ¼ë¡œ ìƒì„±ëœ HTMLì€ SSR ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤&lt;/strong>ì— ì˜í•´ ì œê³µëœë‹¤. SSR ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ëŠ” ìš”ì²­ì´ ë“¤ì–´ì™”ì„ ë•Œ API ì„œë²„ì—ê²Œ í•´ë‹¹ ìš”ì²­ê³¼ ê´€ë ¨ëœ ì •ë³´ë¥¼ ì§ˆì˜í•œë‹¤.
&lt;ul>
&lt;li>ì´ë•Œ SSRì´ ì§ì ‘ DB(ìŠ¤í”„ë§ì´ ì´ìš© ì¤‘ì¸ DB)ë¥¼ ì´ìš©í•˜ì§€ ì•ŠëŠ” ê²Œ ì¢‹ì€ ì´ìœ ëŠ” ì •ë§ ë§ê² ì§€ë§Œ ìš°ì„ ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.
&lt;ul>
&lt;li>SSR ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ê°€ ì§€ì§€ê³  ë³¶ê³  ë­˜ í•´ë„ ìŠ¤í”„ë§ì˜ DB ì„¤ê³„ì—ëŠ” ì˜í–¥ì„ ì£¼ì§€ ì•ŠëŠ”ë‹¤. SSRë¡œ ì¸í•´ ë©”ì¸ ìŠ¤í”„ë§ì´ í”ë“¤ë¦¬ëŠ” ê²ƒì„ ë°©ì§€í•´ì¤€ë‹¤.&lt;/li>
&lt;li>ì¼ë‹¨ ê°„ë‹¨í•˜ë‹¤. ê°„ë‹¨í•œ ì¡°íšŒë§Œì„ ìœ„í•´ DBë¥¼ ì„¤ì •í•˜ëŠ” ê²ƒë³´ë‹¤ëŠ” í•„ìš”í•œ APIì˜ í•„ìš”í•œ í•„ë“œë“¤ë§Œ ì •ì˜í•´ì„œ APIë¡œ ì¡°íšŒí•˜ëŠ” ê²Œ ë” ì‰¬ìš¸ ê²ƒì´ë‹¤.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>ë°˜ë©´ ìŠ¤í”„ë§ì´ API ìŠ¤í™ì„ ë³€ê²½í•  ë•Œ SSRì—ë„ ì˜í–¥ì´ ìˆì„ì§€ë¥¼ ê³ ë ¤í•´ì•¼í•œë‹¤ëŠ” ê²ƒê³¼ ì¶”ê°€ì ì¸ ì¸í”„ë¼ ê´€ë¦¬ê°€ í•„ìš”í•˜ë‹¤ëŠ” ë‹¨ì ë„ ìˆê¸´í•˜ë‹¤.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="ê³ ë ¤í–ˆë˜-ì¸í”„ë¼-ë°-ì„¤ê³„">ê³ ë ¤í–ˆë˜ ì¸í”„ë¼ ë° ì„¤ê³„&lt;/h2>
&lt;ol>
&lt;li>&lt;code>ElasticBeanstalk&lt;/code>&lt;/li>
&lt;li>&lt;code>Lambda&lt;/code> + &lt;code>ALB&lt;/code>&lt;/li>
&lt;li>&lt;code>Lambda&lt;/code> + &lt;code>API Gateway&lt;/code> + &lt;code>CloudFront&lt;/code>&lt;/li>
&lt;/ol>
&lt;p>ê³ ë ¤í–ˆë˜ ì¸í”„ë¼ëŠ” ìœ„ì™€ ê°™ì•˜ê³  ê²°êµ­ì—ëŠ” 1, 2ë²ˆ ë°©ì‹ì€ ë‹¨ì ë“¤ì´ ì¡´ì¬í•´ì„œ 3ë²ˆìœ¼ë¡œ ì„ íƒí–ˆìŠµë‹ˆë‹¤!&lt;/p>
&lt;h3 id="option-1-elasticbeanstalk-ë°”íƒ•ì˜-ì¸í”„ë¼">Option 1) ElasticBeanstalk ë°”íƒ•ì˜ ì¸í”„ë¼&lt;/h3>
&lt;p>&lt;img src="https://umi0410.github.io/blog/ssr-serverless-og/beanstalk.png"
width="777"
height="494"
srcset="https://umi0410.github.io/blog/ssr-serverless-og/beanstalk_hu7f84c1f69f7b8edb6973eb99a7a91a71_186084_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/ssr-serverless-og/beanstalk_hu7f84c1f69f7b8edb6973eb99a7a91a71_186084_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="ë¹ˆìŠ¤í†¡ ë°”íƒ•ì˜ ì¸í”„ë¼"
class="gallery-image"
data-flex-grow="157"
data-flex-basis="377px"
>&lt;/p>
&lt;p>&lt;code>ElasticBeanstalk&lt;/code>ì€ &lt;code>eb cli&lt;/code>ë¥¼ í†µí•´ í¸ë¦¬í•˜ê²Œ ë°°í¬ë¥¼ í•  ìˆ˜ ìˆê³ , auto scaling groupë„ í¸ë¦¬í•˜ê²Œ ê´€ë¦¬í•  ìˆ˜ ìˆë‹¤ëŠ” ì¥ì ì´ ìˆìŠµë‹ˆë‹¤.
ì† ì‰¬ìš°ë©´ì„œë„ ì•ˆì •ì ìœ¼ë¡œ ê´€ë¦¬í•˜ê¸°ëŠ” ë”±ì´ì£ . ê·¸ë¦¬ê³  ê¸°ì¡´ ë©”ì¸ ì„œë²„ì¸ ìŠ¤í”„ë§ ì„œë²„ë„ ë¹ˆìŠ¤í†¡ìœ¼ë¡œ ê´€ë¦¬ë¥¼ í•˜ê³  ìˆì—ˆê¸° ë•Œë¬¸ì— ë¹ˆìŠ¤í†¡ì— ìµìˆ™í•˜ë‹¤ëŠ” ì¥ì ë„ ìˆì—ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>ë‚´ë¶€ì ìœ¼ë¡œ ë¹ˆìŠ¤í†¡ì˜ &lt;code>ë„ì»¤ í”Œë«í¼&lt;/code>ì— ëŒ€í•œ ê¶ê¸ˆì¦ë„ ìˆì—ˆê³  Goë¼ë©´ &lt;code>nano&lt;/code> ì¸ìŠ¤í„´ìŠ¤ë¡œë„ ì–´ë–»ê²Œ ì˜ êµ´ë ¤ë³¼ ìˆ˜ ìˆì§€ ì•Šì„ê¹Œ ì‹¶ì€ ë§ˆìŒì— &lt;code>fiber&lt;/code> í”„ë ˆì„ì›Œí¬ë¥¼ ë°”íƒ•ìœ¼ë¡œ ê°œë°œì„ í–ˆìŠµë‹ˆë‹¤.
í•˜ì§€ë§Œ ì•„ë¬´ë¦¬ Goë¼ë„ ìƒê°ë³´ë‹¤ nano ì¸ìŠ¤í„´ìŠ¤ë¡œ êµ´ë¦¬ê¸°ëŠ” í˜ë“¤ì—ˆê³ , &lt;code>micro&lt;/code>ë„ ì•„ìŠ¬ì•„ìŠ¬í•˜ë”ë¼êµ¬ìš”.(microë„ ë¹Œë“œí•  ë•Œ OOMìœ¼ë¡œ ì‹¤íŒ¨í•¨.)&lt;/p>
&lt;p>ë¹ˆìŠ¤í†¡ ì¸ìŠ¤í„´ìŠ¤ ë‚´ë¶€ì—ì„œ ì´ë¯¸ì§€ë¥¼ ë¹Œë“œí•˜ê³  íƒœê·¸ë¥¼ ìˆ˜ì •í•´ì„œ ë°°í¬ë¥¼ íŠ¸ë¦¬ê±° ì‹œí‚¤ëŠ” ë°©ì‹ì„ ì´ìš©í•˜ë©´ ë¹Œë“œ ë„ì¤‘ì˜ OOM ì´ìŠˆëŠ” ì—†ê² ì§€ë§Œ ECRì„ í†µí•´ ì´ë¯¸ì§€ ë ˆì§€ìŠ¤íŠ¸ë¦¬ë¥¼ ê´€ë¦¬í•´ì¤˜ì•¼í•˜ê³ ,
ë¹Œë“œí•  ë•Œë§ˆë‹¤ docker-compose.ymlì—ì„œ ì´ë¯¸ì§€ íƒœê·¸ë¥¼ ì˜¬ë°”ë¥´ê²Œ ì—…ë°ì´íŠ¸ ì‹œì¼œì£¼ëŠ” ê³¼ì •ë„ ë²ˆê±°ë¡œìš¸ ê²ƒ ê°™ì•˜ì£ .&lt;/p>
&lt;p>ìŠ¤í”„ë§ì´ t3.smallë¡œ ëŒì•„ê°€ê³  ìˆëŠ”ë°(ìŠ¤í”„ë§ì€ JARë¥¼ ì  í‚¨ìŠ¤ì—ì„œ ë¹Œë“œ) Goë¥¼ ì“°ë©´ì„œ t3.smallì„ ì“°ìë‹ˆ ì´ê±´ ì›¬ ê³µìœ í•˜ê¸° ê¸°ëŠ¥í•˜ë‚˜ì— ë³¸ ì„œë²„ì˜ ëª‡ ë¶„ì˜ 1ì— í•´ë‹¹í•˜ëŠ” ë¦¬ì†ŒìŠ¤ë¥¼
ì‚¬ìš©í•´ì•¼í•˜ëŠ” ì´ìƒí•œ ì•„í‚¤í…ì³ê°€ ë˜ì–´ë²„ë¦´ ê²ƒë§Œ ê°™ì•˜ì£ . ë¹„ìš©ë„ ë¹„ìš©ì´êµ¬ìš”.&lt;/p>
&lt;p>ê·¸ë˜ì„œ &lt;code>fiber&lt;/code> ê°œë°œí•œ SSR ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ë¥¼ ElasticBeanstalkì— ë°°í¬í•˜ëŠ” ë°©ì‹ì€ ê¸°ê°ë˜ì—ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;h3 id="option-2-lambda--alb">Option 2) &lt;code>Lambda&lt;/code> + &lt;code>ALB&lt;/code>&lt;/h3>
&lt;p>&amp;lsquo;&lt;em>SSRì„ ìœ„í•´ ì„œë²„ë¥¼ ê´€ë¦¬í•˜ëŠ” ê±´ ë„ˆë¬´ ë‚­ë¹„ê°€ í¬ë‹¤.&lt;/em>&amp;lsquo;ëŠ” ìƒê°ì— ì„œë²„ë¦¬ìŠ¤ë¡œ ë°©í–¥ì„ ëŒë ¸ìŠµë‹ˆë‹¤. &lt;code>serverless&lt;/code> í”„ë ˆì„ì›Œí¬ë¥¼ ê¸°ì¡´ì— ì´ìš©í•˜ê³  ìˆì—ˆê¸° ë•Œë¬¸ì— í¬ê²Œ ë‚¯ì„  ê¸°ìˆ ì€ ì•„ë‹ˆê¸°ë„ í–ˆêµ¬ìš”.&lt;/p>
&lt;p>&lt;code>Lambda&lt;/code>ë¥¼ ì´ìš©í•  ë•Œ Goì–¸ì–´ ê°™ì€ ê²½ìš°ì—ëŠ” AWS Lambdaì˜ ì½˜ì†” ì—ë””í„° í™”ë©´ì´ ì œê³µë˜ì§€ ì•Šì•„ ì¢€ ë¶ˆí¸í•´ íŒŒì´ì¬ìœ¼ë¡œ ê°œë°œì„ í• ê¹Œ ì‹¶ì—ˆëŠ”ë°, ë‹¨ë°©í–¥ì´ê¸´ í•˜ì§€ë§Œ APIë¡œ ë°€ì ‘í•˜ê²Œ ë©”ì¸ API ì„œë²„ë‘ í†µì‹ ì„ í•´ì•¼í•˜ëŠ” SSR ì„œë¹„ìŠ¤ì˜
íŠ¹ì„±ìƒ typeì„ ëª…í™•íˆ ì •ì˜í•´ì„œ API ìŠ¤í™ê³¼ ë¹„êµí•˜ê¸°ë„ í¸í•˜ê³ , ê°œë°œ/ë™ì‘ë„ ì•ˆì •ì ìœ¼ë¡œ í•  ìˆ˜ ìˆëŠ” &lt;code>Go&lt;/code>ë¥¼ ì„ íƒí–ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;code>íŒŒì´ì¬&lt;/code>ì€ APIì—ê²Œ ì‘ë‹µë°›ì€ jsonì„ ì–´ë–»ê²Œ ì—­ì§ë ¬í™”í• ê¹Œë¶€í„°ë„ ê³ ë¯¼ì´ì—ˆê³ , ê·€ì°®ì•„ì„œ ê·¸ëƒ¥ jsonì´ë‚˜ dictionaryë¡œ
ìš°ê²¨ë„£ì–´ì„œ ê°œë°œì„ í•˜ë©´ ë‹¹ì‹œì—ëŠ” í¸í•˜ì§€ë§Œ ì¼ì£¼ì¼ë§Œ ì§€ë‚˜ë„ ë¬´ìŠ¨ ì½”ë“œì¸ì§€ ì•Œì•„ë³´ê¸° í˜ë“¤ê³  API ìŠ¤í™ì´ ë³€ê²½ë˜ëŠ” ê²½ìš°ì˜ ë””ë²„ê¹…ì€ ê±°ì˜ ê·¹ì•…ì˜ ë‚œì´ë„ì´ê¸° ë•Œë¬¸ì— íŒŒì´ì¬ë„ ë°°ì œí–ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>í•˜ì§€ë§Œ &lt;code>ALB&lt;/code> =&amp;gt; &lt;code>Lambda&lt;/code>ë¡œ ìš”ì²­ì„ ë°”ë¡œ ë„˜ê¸°ëŠ” ê²½ìš°, ALBì—ì„œ ë„˜ì–´ì˜¨ ìš”ì²­ì„ ì²˜ë¦¬í•˜ëŠ” ë°©ì‹ì´ ë„ˆë¬´ ê°„ë‹¨í•´ ì»¤ìŠ¤í„°ë§ˆì´ì§•í•˜ê¸°ê°€ ë” ê¹Œë‹¤ë¡œìš´ í˜•íƒœì˜€ìŠµë‹ˆë‹¤.
ì˜ˆë¥¼ ë“¤ë©´ ê²½ë¡œë¥¼ ë°”íƒ•ìœ¼ë¡œ ë¼ìš°íŒ…í•˜ëŠ” ë¡œì§ì„ ì§ì ‘ êµ¬í˜„í•´ì•¼í–ˆì—ˆëŠ”ë°ìš”. ë³´í†µì˜ ì›¹ í”„ë ˆì„ì›Œí¬ì—ì„œ ì œê³µí•˜ëŠ” &lt;code>/*&lt;/code>, &lt;code>/b/*&lt;/code> ì´ëŸ° í‘œí˜„ë“¤ì„ ë°”íƒ•ìœ¼ë¡œ í•œ ê²½ë¡œì™€ í•¸ë“¤ëŸ¬ê°„ì˜ ë§µí•‘ì´ ë¶ˆê°€ëŠ¥í–ˆë˜ ê²ƒì…ë‹ˆë‹¤.
ì´ìœ ëŠ” ì‰½ê²Œ ë§í•´ Lambdaì—ëŠ” stringìœ¼ë¡œ pathê°€ ë“¤ì–´ì˜¤ê³  ì‘ë‹µë„ stringìœ¼ë¡œ ì¤˜ì•¼í•˜ëŠ” ê²ë‹ˆë‹¤. ì´ ë°©ì‹ì€ ê¸°ì¡´ì˜ ì›¹í”„ë ˆì„ì›Œí¬ë¥¼ ì´ìš©í•´ ê°œë°œí•˜ë˜ ë°©ì‹ê³¼ëŠ” ê±°ë¦¬ê°€ ë©€ì£ .&lt;/p>
&lt;p>ë”°ë¼ì„œ ì´ ë°©ì‹ë„ ê¸°ê°ë˜ì—ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;h3 id="option-3-lambda--api-gateway--cloudfront">Option 3) &lt;code>Lambda&lt;/code> + &lt;code>API Gateway&lt;/code> + &lt;code>CloudFront&lt;/code>&lt;/h3>
&lt;p>&lt;img src="https://umi0410.github.io/blog/ssr-serverless-og/lambda.png"
width="638"
height="467"
srcset="https://umi0410.github.io/blog/ssr-serverless-og/lambda_hued4c382ead438bad8f94a28a2a155ee2_136294_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/ssr-serverless-og/lambda_hued4c382ead438bad8f94a28a2a155ee2_136294_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="Lambda ë°”íƒ•ì˜ ì¸í”„ë¼"
class="gallery-image"
data-flex-grow="136"
data-flex-basis="327px"
>&lt;/p>
&lt;p>ë“œë””ì–´ ìµœì¢… ì±„íƒì•ˆ! &lt;strong>&amp;quot;&lt;code>CloudFront&lt;/code>ë¡œ HTTP/S ê´€ë ¨ ê¸°ëŠ¥ì„ ì²˜ë¦¬í•˜ê³ , ê·¸ Originì„ &lt;code>API Gateway&lt;/code>ë¡œ ë‘” ë’¤ &lt;code>Lambda&lt;/code>ë¡œ ìš”ì²­ ì²˜ë¦¬í•˜ê¸°&amp;rdquo;&lt;/strong> ì…ë‹ˆë‹¤. ì‚¬ì‹¤ API Gatewayì˜ ì´ëŸ° ì €ëŸ° ê¸°ëŠ¥ì´ ë³„ë¡œ í•„ìš” ì—†ì—ˆê¸°ì—
&amp;lsquo;&lt;em>Lambdaë¥¼ ALBë¡œ ë…¸ì¶œì‹œí‚¬ ìˆ˜ ìˆìœ¼ë©´ ê°„ë‹¨í•˜ê²Œ ê·¸ë ‡ê²Œ í•˜ì&lt;/em>&amp;lsquo;ë¼ê³  ìƒê°í–ˆë˜ ë°©ì‹ì´ Option 1ì´ì—ˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ëŒë‹¤ë¡œ ALB TargetGroupì— ëŒ€í•œ ìš”ì²­ì„ ì§ì ‘ ì²˜ë¦¬í•˜ê¸°ì—ëŠ” ê°œë°œì ìœ¼ë¡œ ë§ì€ ë¶ˆí¸íˆ ìˆì—ˆì–´ìš”. ì •ë§ ê°„ë‹¨í•œ ì‘ì—…ìš© ê°™ì€ ëŠë‚Œ!&lt;/p>
&lt;p>ë°˜ë©´ Lambdaê°€ APIGatewayì—ê²Œì„œ ìš”ì²­ì„ ì „ë‹¬ë°›ìœ¼ë©´ ì•„ì£¼ í¸ë¦¬í•˜ê³  ìµìˆ™í•œ ë°©ì‹ìœ¼ë¡œ ê°œë°œì„ í•  ìˆ˜ê°€ ìˆì—ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// ì½”ë“œ ì¼ë¶€ë¥¼ ì˜ˆì‹œë¡œ ê°€ì ¸ì™”ìŠµë‹ˆë‹¤.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">func&lt;/span> &lt;span class="nf">init&lt;/span>&lt;span class="p">(){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">app&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">fiber&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">New&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">app&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Use&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">logger&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">New&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">app&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;/health&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">ctx&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">fiber&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Ctx&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="kt">error&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">ctx&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SendString&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;OK&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">app&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;/&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">handleIndex&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">app&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;/c/:clipId&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">handleClip&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">app&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;/b/:battleId/:clipId&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">handleBattleWithClips&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">app&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;/*&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">handleDefaultNotFound&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ëŒë‹¤ê°€ ì‹¤í–‰ëœë‹¤.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">// ìš”ì²­ë§ˆë‹¤ Handlerë¥¼ í˜¸ì¶œí•œë‹¤.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">lambda&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Start&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">Handler&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">Handler&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">ctx&lt;/span> &lt;span class="nx">context&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Context&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">req&lt;/span> &lt;span class="nx">events&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">APIGatewayV2HTTPRequest&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">events&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">APIGatewayV2HTTPResponse&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">error&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">fiberadapter&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">New&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">app&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">ProxyWithContextV2&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">ctx&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">req&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ìœ„ì™€ ê°™ì´ ëŒë‹¤ë¡œ ë“¤ì–´ì˜¤ëŠ” ìš”ì²­ì„ ì²˜ë¦¬í•˜ê¸° ìœ„í•œ í•¸ë“¤ëŸ¬ë¥¼ ì°¾ì•„ í˜¸ì¶œí•˜ëŠ” ë¡œì§ì„ ì§ì ‘ êµ¬í˜„í•˜ì§€ ì•Šê³  ê¸°ì¡´ì˜ ìœ ëª…í•œ ì›¹ í”„ë ˆì„ì›Œí¬ë“¤ê³¼ ê·¸ì— ëŒ€í•œ ì–´ëŒ‘í„°ë¥¼ í†µí•´ ê°œë°œí•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤! (ì°¸ê³ : &lt;a class="link" href="https://github.com/awslabs/aws-lambda-go-api-proxy" target="_blank" rel="noopener"
>aws-lambda-go-api-proxy&lt;/a>)
ëŒë‹¤ì˜ í•¸ë“¤ëŸ¬ê°€ &lt;code>fiber&lt;/code> ì•±ì—ê²Œ ìš”ì²­ì„ ë„˜ê²¨ì„œ ê·¸ ì‘ë‹µì„ ë¦¬í„´í•˜ëŠ” í˜•íƒœì£ . fiber ì•±ì˜ &lt;strong>í•¸ë“¤ëŸ¬ë“¤ì€ SSR ë°©ì‹ì˜ ë™ì ìœ¼ë¡œ ìƒì„±ëœ HTMLë“¤ì„ ë¦¬í„´&lt;/strong>í•´ì¤¬ìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://umi0410.github.io/blog/ssr-serverless-og/awslabs.png"
width="1163"
height="728"
srcset="https://umi0410.github.io/blog/ssr-serverless-og/awslabs_hucebe86c00a0fac0cd2e2c5a874c5ec8d_132590_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/ssr-serverless-og/awslabs_hucebe86c00a0fac0cd2e2c5a874c5ec8d_132590_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="awslabs Github - https://github.com/awslabs/aws-lambda-go-api-proxy"
class="gallery-image"
data-flex-grow="159"
data-flex-basis="383px"
>&lt;/p>
&lt;p>AWSì—ì„œ ê°œë°œ ì¤‘ì¸ ì˜¤í”ˆì†ŒìŠ¤ ê°™ìŠµë‹ˆë‹¤. ìµœê·¼ ì»¤ë°‹ë„ 6ì¼ ì „ì¸ í™œë°œí•œ í”„ë¡œì íŠ¸ì¸ê°€ë´ìš”! (ê·¼ë° ì™œ &lt;code>ALB(TargetGroup) - Lambda&lt;/code>ì— ëŒ€í•œ ì–´ëŒ‘í„°ë‚˜ í”„ë¡ì‹œ ì˜¤í”ˆì†ŒìŠ¤ëŠ” ê°œë°œì„ í•´ì£¼ì§€ ì•Šì€ ê±¸ê¹Œìš”.. ê¶ê¸ˆí•©ë‹ˆë‹¤.)&lt;/p>
&lt;p>ì–´ì¨Œë“  &lt;code>Lambda&lt;/code> + &lt;code>API Gateway&lt;/code>ë¥¼ ì´ìš©í•˜ë©´ì„œ ì €ë ´í•˜ë©´ì„œë„ í¸ë¦¬í•˜ê²Œ ê°œë°œì„ í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤. ì—¬ê¸°ì„œ ëë‚˜ë©´ ì¢‹ì•˜ê² ì§€ë§Œ ë‹¤ìŒ ì‚½ì§ˆì´ ìˆì—ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;a class="link" href="https://docs.aws.amazon.com/ko_kr/apigateway/latest/developerguide/http-api-custom-domain-names.html" target="_blank" rel="noopener"
>API Gatewayë¥¼ ì»¤ìŠ¤í…€ ë„ë©”ì¸ ë„¤ì„ìœ¼ë¡œ ì´ìš©í•˜ê¸°&lt;/a>. ì¦‰ ê¸°ë³¸ì ìœ¼ë¡œ API GatewayëŠ” AWS ìì²´ì ì¸
ë„ë©”ì¸ ë„¤ì„ì„ í†µí•´ ì œê³µë˜ê³ , ì¸ì¦ì„œë„ AWS ì¸¡ì—ì„œ ì œê³µì„ í•´ì¤ë‹ˆë‹¤. í•˜ì§€ë§Œ &lt;strong>Custom domainì„ ì´ìš©í•˜ê³  ì‹¶ë‹¤ë©´&lt;/strong>? ìš°ë¦¬ì˜ ë„ë©”ì¸ì„ ì¸ì¦í•´ì¤˜ì•¼ê² ì§€ìš”. í•˜ì§€ë§Œ ê¸°ë³¸ì ìœ¼ë¡œëŠ” ê·¸ë ‡ê²Œ í•  ìˆ˜ ì—†ê³  ìœ„ì˜ ë§í¬ì˜ ë°©ë²•ì„ í†µí•´ì„œëŠ” ê°€ëŠ¥í•©ë‹ˆë‹¤.
API Gatewayì— Custom domain nameì„ ë‹¬ê¸° ìœ„í•œ ì¶”ê°€ì ì¸ ë°©ë²•ë“¤ì´ì—ìš”.&lt;/p>
&lt;blockquote>
&lt;p>API Gateway doesn&amp;rsquo;t directly support http without TLS, presumably as a security feature &amp;hellip; - &amp;ldquo;&lt;a class="link" href="https://stackoverflow.com/questions/47311081/redirect-http-requests-to-https-on-aws-api-gateway-using-custom-domains" target="_blank" rel="noopener"
>Redirect http:// requests to https:// on AWS API Gateway (using Custom Domains)&lt;/a>&amp;rdquo;&lt;/p>
&lt;/blockquote>
&lt;p>í•˜ì§€ë§Œ ì´ë ‡ê²Œ API Gatewayë¥¼ Custom Domain nameìœ¼ë¡œ ì´ìš©í•  ìˆ˜ ìˆê²Œ í–ˆë”ë‹ˆ ì´ë²ˆì—” ë˜ ë‹¤ë¥¸ ì´ìŠˆê°€ ì¡´ì¬í–ˆì£ . ì¦‰, API GatewayëŠ” 443 HTTPSë§Œì„ ì§€ì›í•˜ê³  &lt;strong>80 HTTPëŠ” ì§€ì›ì„ í•˜ì§€ ì•Šê³  HTTP-&amp;gt;HTTPSë¡œì˜ ë¦¬ë‹¤ì´ë ‰ì…˜ë„ ì§€ì›í•˜ì§€ ì•ŠëŠ”ë‹¤&lt;/strong>ëŠ” ê²ƒì´ì—ˆìŠµë‹ˆë‹¤ ã„±-&amp;hellip;
ê·¸ëŸ¼ ì–´ë–¤ ë¬¸ì œëƒ ìˆëƒ&amp;hellip; í•´ë‹¹ HTTPë¡œ ë§í¬ë¥¼ ì ‘ì†í•˜ë©´ ì•„ë¬´ëŸ° ì‘ë‹µì´ ì—†ìŠµë‹ˆë‹¤. ì¹˜ëª…ì ì´ì£ . ë”°ë¼ì„œ HTTPS Redirectë¥¼ ìˆ˜í–‰í•  ìˆ˜ ìˆëŠ” CloudFrontë¥¼ ì•ë‹¨ì— ë¶™ì´ê³  API Gatewayë¥¼ Originìœ¼ë¡œ ì„¤ì •í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ê°œì„ í–ˆìŠµë‹ˆë‹¤.
ê·¸ ìµœì¢… ì•„í‚¤í…ì³ê°€ ìœ„ì˜ ê·¸ë¦¼ê³¼ ê°™êµ¬ìš”.&lt;/p>
&lt;p>&lt;img src="https://umi0410.github.io/blog/ssr-serverless-og/results.png"
width="2218"
height="667"
srcset="https://umi0410.github.io/blog/ssr-serverless-og/results_hu71c370d5cd569ef3fd2ca7048de84a72_1123081_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/ssr-serverless-og/results_hu71c370d5cd569ef3fd2ca7048de84a72_1123081_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="ê²°ê³¼"
class="gallery-image"
data-flex-grow="332"
data-flex-basis="798px"
>&lt;/p>
&lt;p>ê²°ê³¼ì ìœ¼ë¡œ ìœ„ì™€ ê°™ì´ URLì´ HTTP ì´ê±´ HTTPS ì´ê±´ ìƒê´€ ì—†ì´ ì›í™œíˆ ì˜¤í”ˆ ê·¸ë˜í”„ë¥¼ í†µí•´ ì ì ˆí•œ ì •ë³´ë¥¼ ì œê³µí•  ìˆ˜ ìˆì—ˆê³ , ì´ì œ ì •ë§ ì¶œì‹œê°€ ë‹¤ê°€ì˜¤ëŠ” ê²ƒ ê°™ì•„ ê±±ì • ë°˜ ì„¤ë ˜ ë°˜ì´ê¸°ë„ í•©ë‹ˆë‹¤.&lt;/p>
&lt;h2 id="ë§ˆì¹˜ë©°">ë§ˆì¹˜ë©°&lt;/h2>
&lt;p>SSRë¡œ ì˜¤í”ˆ ê·¸ë˜í”„ í•˜ë‚˜ ì œê³µí•˜ê² ë‹¤ê³  ì¼ìš”ì¼ ë‚´ë‚´ ì‚½ì§ˆì„ í•˜ê²Œ ëœ ê²ƒ ê°™ìŠµë‹ˆë‹¤. í‰ì†Œì— ì„œë²„ë¦¬ìŠ¤ëŠ” ì•„ë¬´ë˜ë„ ë²¤ë” lock-in ì´ìŠˆë‚˜ ê°œë°œ/ë””ë²„ê¹… ê³¼ì •ì—ì„œ ë¡œì»¬ê³¼ ì‹¤ì œ í´ë¼ìš°ë“œ í™˜ê²½ì˜ ì°¨ì´ë¡œ ì¸í•œ ë¶ˆí¸ ë“±ë“±ìœ¼ë¡œ ì¸í•´
ë³„ë¡œ ì„ í˜¸í•˜ì§€ ì•Šì•˜ëŠ”ë° ê·¸ë˜ë„ ê³µìœ í•˜ê¸° ê¸°ëŠ¥ì€ ì´ì œ ì•ìœ¼ë¡œ íŠ¸ë˜í”½ ê±±ì •ì„ í¬ê²Œ í•˜ì§€ ì•Šê³  ê°€ë³ê²Œ ì˜ ì‚¬ìš©í•  ìˆ˜ ìˆì„ ê²ƒ ê°™ì•„ ì¢‹ìŠµë‹ˆë‹¤ ã…ã…&lt;/p>
&lt;p>ì•„ì‰¬ìš´ ì ì€ ì¢€ ë” &lt;strong>ê° ì„œë¹„ìŠ¤ë¥¼ ê° ì„œë¹„ìŠ¤ì˜ ì—­í• ì´ë‚˜ íŠ¹ì„±ì— ë§ì¶° ì‚¬ìš©í•  ìˆ˜ ìˆì—ˆìœ¼ë©´ ì¢‹ì•˜ì„í…ë°, ë‹¨ìˆœíˆ íŠ¹ì • ìƒí™©ì„ í•´ê²°í•˜ê¸° ìœ„í•œ ìˆ˜ë‹¨ìœ¼ë¡œ ì´ìš©í•˜ê²Œ ëœ ì ì´ ì¡°ê¸ˆ ì•„ì‰½ìŠµë‹ˆë‹¤&lt;/strong>.&lt;/p>
&lt;p>ì˜ˆë¥¼ ë“¤ì–´ Lambdaë¥¼ ë…¸ì¶œì‹œí‚¤ê¸° ìœ„í•´ êµ³ì´ API Gatewayë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šì•„ë„ ALBë¡œ ê°„ë‹¨í•˜ê²Œ ì¶©ë¶„íˆ ë…¸ì¶œ ì‹œí‚¬ ìˆ˜ ìˆì—ˆì§€ë§Œ, ê°œë°œì ìœ¼ë¡œ API Gateway-Lambdaê°„ì˜ ì‘ì—…ì´ Adpater frameworkì„ í†µí•´ ê°œë°œí•˜ê¸° í¸í•´ì„œ API Gatewayë¥¼
ì´ìš©í•˜ê²Œ ëì£ . API Gatewayì˜ API Keyë¥¼ ì´ìš©í•˜ëŠ” ì¸ì¦/ì¸ê°€ ê¸°ëŠ¥ì´ë‚˜ ì“°ë¡œí‹€ë§ ì œí•œê³¼ ê°™ì€ ê¸°ëŠ¥ë“¤ì€ í•˜ë‚˜ë„ í•„ìš”ê°€ ì—†ëŠ”ë° ë§ì´ì£ .&lt;/p>
&lt;p>ê±°ê¸°ì— CloudFrontëŠ” ì‚¬ì‹¤ìƒ Content Deliveryë‚˜ ìºì‹±ì´ë¼ëŠ” ì£¼ìš©ë„ë¡œ ì‚¬ìš©ë˜ë©´ ì¢‹ì•˜ê² ì§€ë§Œ ë‹¨ìˆœíˆ API Gatewayë¥¼ ì‚¬ìš©í•˜ë©´ì„œ HTTPSë¡œì˜ ë¦¬ë‹¤ì´ë ‰íŠ¸ë¥¼ ìœ„í•´ì„œ ì‚¬ìš©ëì„ ë¿ì´ë¼ëŠ” ì ì´ ì•„ì‰½ìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>ë¬¼ë¡  CloudFrontë‚˜ API Gateway ê°™ì€ ì„œë¹„ìŠ¤ë“¤ë„ ê¸°ë³¸ì ìœ¼ë¡œ ì¼  ë§Œí¼ ëˆì´ ë‚˜ê°€ëŠ” ê²Œ ì•„ë‹ˆë¼ í˜¸ì¶œí•œ ë§Œí¼ ëˆì´ ë‚˜ê°€ëŠ” í˜•íƒœì´ë©´ì„œë„ ë§¤ìš° ì €ë ´í•œ ì„œë¹„ìŠ¤ë“¤ì´ê¸° ë•Œë¬¸ì— ì§€ê¸ˆì€ ë¶ˆí•„ìš”í•˜ì§€ë§Œ íŠ¹ì • ìƒí™©ì„ í•´ê²°í•˜ê¸° ìœ„í•œ ì„œë¹„ìŠ¤ë“¤ì²˜ëŸ¼ ëŠê»´ì§€ë”ë¼ë„
í›„ì— ì €í¬ ì„œë¹„ìŠ¤ê°€ ì„±ì¥í•˜ë©´ ë¶„ëª…íˆ CloudFrontì˜ ì£¼ê¸°ëŠ¥ì¸ ìºì‹± ìì²´ì˜ ì¤‘ìš”ì„±ë„ ì¦ê°€í•  ìˆ˜ë„ ìˆì„ ê²ƒì´ê³ , ê·¸ ì •ë„ ê·œëª¨ê°€ ëœë‹¤ë©´ ê°„ë‹¨í•œ ì„œë²„ë¦¬ìŠ¤ ì•„í‚¤í…ì³ê°€ ì•„ë‹Œ ì¢€ ë” ì •êµí•œ êµ¬ì¶•í˜• ì•„í‚¤í…ì³ë¡œ ê°œì„ í•  ìˆ˜ë„ ìˆì„ ê²ƒ ê°™ìŠµë‹ˆë‹¤!&lt;/p>
&lt;p>ì´ìƒ ì˜¤í”ˆ ê·¸ë˜í”„ë¥¼ ìœ„í•œ SSR ì„œë¹„ìŠ¤ êµ¬ì¶•ê¸°ì˜€ìŠµë‹ˆë‹¤~!&lt;/p></description></item><item><title>2020 ì¹´ì¹´ì˜¤ ì¸í„´ì‰½ ì½”ë”© í…ŒìŠ¤íŠ¸ - ë³´ì„ ì‡¼í•‘ í’€ì´</title><link>https://umi0410.github.io/blog/algorithm/kakao-gem-shopping/</link><pubDate>Sun, 06 Sep 2020 19:11:07 +0900</pubDate><guid>https://umi0410.github.io/blog/algorithm/kakao-gem-shopping/</guid><description>&lt;img src="https://umi0410.github.io/blog/algorithm/kakao-gem-shopping/illust.jpg" alt="Featured image of post 2020 ì¹´ì¹´ì˜¤ ì¸í„´ì‰½ ì½”ë”© í…ŒìŠ¤íŠ¸ - ë³´ì„ ì‡¼í•‘ í’€ì´" />&lt;h2 id="ë¬¸ì œ-ì„¤ëª…">ë¬¸ì œ ì„¤ëª…&lt;/h2>
&lt;p>ë¬¸ì œ ì¶œì²˜: &lt;a class="link" href="https://programmers.co.kr/learn/courses/30/lessons/67258" target="_blank" rel="noopener"
>https://programmers.co.kr/learn/courses/30/lessons/67258&lt;/a>&lt;/p>
&lt;ul>
&lt;li>ê°ê°ì˜ ë³´ì„ìƒì€ í•˜ë‚˜ì˜ ë³´ì„ì„ íŒë§¤&lt;/li>
&lt;li>ì—°ì†ëœ ë³´ì„ìƒë“¤ì„ ì‡¼í•‘í•˜ë©´ì„œ ë°©ë¬¸í•  ë•Œë§ˆë‹¤ ë³´ì„ì„ êµ¬ë§¤&lt;/li>
&lt;li>ëª¨ë“  ì¢…ë¥˜ì˜ ë³´ì„ì„ êµ¬ë§¤í•  ë•Œê¹Œì§€ ì§„í–‰&lt;/li>
&lt;li>ëª¨ë“  ì¢…ë¥˜ì˜ ë³´ì„ì„ êµ¬ë§¤í•˜ëŠ” ê²½ìš° ì¤‘ ê°€ì¥ ì¡°ê¸ˆì˜ ë³´ì„ì„ ê°€ì¥ ì•ì„  ë³´ì„ìƒì—ì„œ êµ¬ë§¤í•˜ëŠ” ê²½ìš°ë¥¼ êµ¬í•˜ê¸°&lt;/li>
&lt;/ul>
&lt;h2 id="ë¬¸ì œ-ì ‘ê·¼">ë¬¸ì œ ì ‘ê·¼&lt;/h2>
&lt;p>&lt;img src="https://umi0410.github.io/home/jinsu/workspace/umi0410/umi0410.github.io/content/blog/algorithm/kakao-gem-shopping/illust.jpg"
loading="lazy"
alt="illust.jpg"
>&lt;/p>
&lt;p>ìš°ì„  ë‹¨ìˆœí•˜ê²Œ ë¬¸ì œì˜ ì¡°ê±´ì„ ê·¸ë¦¼ìœ¼ë¡œ ë‚˜íƒ€ë‚´ë©´ ìœ„ì™€ ê°™ë‹¤. ê²°êµ­ 1ë²ˆ ìƒì ë¶€í„° ë°©ë¬¸í•˜ëŠ” ê²½ìš°, 2ë²ˆ ìƒì ë¶€í„° ë°©ë¬¸í•˜ëŠ” ê²½ìš°, &amp;hellip; ì´ëŸ° ì‹ìœ¼ë¡œ ì§„í–‰í•´ë‚˜ê°„ ë’¤ ê°€ì¥ ë³´ì„ì„ ì ê²Œ, ì•ì˜ ìƒì ì—ì„œ ì‚¬ëŠ” ê²½ìš°ë¥¼ êµ¬í•˜ë©´ ëœë‹¤.&lt;/p>
&lt;h3 id="-ì²«-ë²ˆì§¸-ì ‘ê·¼">ğŸ‘ ì²« ë²ˆì§¸ ì ‘ê·¼&lt;/h3>
&lt;p>&lt;em>&amp;lsquo;&amp;lsquo;ê° ê²½ìš°ë§ˆë‹¤ ì§ì ‘ êµ¬í•´ë³¼ê¹Œ?&amp;rsquo;&lt;/em>&lt;/p>
&lt;p>í—ˆê±±.. ë³´ì„ìƒì€ ìµœëŒ€ 10ë§Œê°œë¥¼ ì…ë ¥ìœ¼ë¡œ ì¤€ë‹¤. ê° ê²½ìš°ë¥¼ ë§¤ë²ˆ ì§ì ‘ Në²ˆ ìƒì ë¶€í„° ì‹œì‘í•´ì„œ ëª¨ë“  ì¢…ë¥˜ì˜ ë³´ì„ì„ ì‚¬ëŠ” ê²½ìš°ë¥¼ êµ¬í•˜ëŠ” ê²ƒì€ ë„ˆë¬´ ë¹„íš¨ìœ¨ì ì¼ ê²ƒ ê°™ë‹¤.&lt;/p>
&lt;h3 id="-ë‘-ë²ˆì§¸-ì ‘ê·¼">ğŸ‘ ë‘ ë²ˆì§¸ ì ‘ê·¼&lt;/h3>
&lt;p>&lt;em>&amp;ldquo;ê·¸ëŸ¬ê³ ë³´ë‹ˆ ì•ì˜ ê²½ìš°ì™€ ë¹„êµí•˜ë©´ì„œ ë°©ê¸ˆ ì œì™¸ëœ ë³´ì„ë§Œ ì¶”ê°€ë˜ëŠ” ê²½ìš°ë¥¼ ì°¸ê³ í•˜ë©° êµ¬í•˜ë©´ ë˜ì§€ ì•Šì„ê¹Œ?&amp;rdquo;&lt;/em>&lt;/p>
&lt;p>ì¦‰ ê·¸ë¦¼ì„ ë³´ë©´ ë‘ ë²ˆì§¸ ê²½ìš°ëŠ” ì•ì˜ ê²½ìš°(ì²« ë²ˆì§¸ ê²½ìš°)ì™€ ë¹„êµí–ˆì„ ë•Œ Aê°€ ì¤„ì—ˆê³ , ë‚´ê°€ ë°©ë¬¸í•œ ë³´ì„ìƒ ì¤‘ Aê°€ ì—†ë‹¤ë©´ Aë¥¼ êµ¬ë§¤í•  ë•Œê¹Œì§€ ë³´ì„ìƒì„ ë°©ë¬¸í•˜ë©´ ëœë‹¤. ì„¸ ë²ˆì§¸ ê²½ìš°ëŠ” ê·¸ì™€ ë°˜ëŒ€ë¡œ ì•ì˜ ê²½ìš°(ë‘ ë²ˆì§¸ ê²½ìš°)ì™€ ë¹„êµí–ˆì„ ë•Œ Bê°€ ì¤„ì—ˆì§€ë§Œ ë‚´ê°€ ë°©ë¬¸í•œ ë³´ì„ìƒ ì¤‘ Bë¥¼ íŒë§¤í•˜ëŠ” ê³³ì´ ìˆê¸°ì— ìƒˆë¡œìš´ ë³´ì„ìƒì„ ë°©ë¬¸í•  í•„ìš”ê°€ ì—†ë‹¤.&lt;/p>
&lt;p>=&amp;gt; ì˜¤í˜¸ë¼&amp;hellip; ì¶”ìƒì ìœ¼ë¡œ ì ‘ê·¼ ë°©ì‹ì„ ë°”ë¼ë´¤ì„ ë•ŒëŠ” íš¨ìœ¨ì ì¸ ê²ƒ ê°™ë‹¤! ì´ì œ êµ¬í˜„ì—ì„œë§Œ ì˜ êµ¬í˜„í•˜ë©´ ë˜ê² ë‹¤.&lt;/p>
&lt;h2 id="êµ¬í˜„">êµ¬í˜„&lt;/h2>
&lt;h3 id="-ì˜¬ë°”ë¥¸-êµ¬í˜„">ğŸ‘ ì˜¬ë°”ë¥¸ êµ¬í˜„&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># í’€ì´ë²•ì´ ë– ì˜¤ë¥´ì§€ ì•ŠëŠ”ë‹¤. ì²˜ìŒ ë³´ëŠ” ìœ í˜•ì´ë‹¤...&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ê·¸ëƒ¥ 1ë²ˆì—ì„œ ì‹œì‘í•´ì„œ ë‹¤ í¬í•¨í•˜ëŠ” ê²½ìš°&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 2ë²ˆì—ì„œ ì‹œì‘í•´ì„œ ë‹¤ í¬í•¨í•˜ëŠ” ê²½ìš° ì´ë ‡ê²Œ ë‹¤ ì„¸ë³´ë©´ íš¨ìœ¨ì„±ì´ ì˜¤ë°”ì¼ê¹Œ..? ìµœëŒ€ 10ë§Œì¹¸ì„...&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ì•½ê°„ dpìŠ¤ëŸ½ê²Œ ì „êº¼ë¥¼ ë°”íƒ•ìœ¼ë¡œ ìƒê°í•˜ëŠ” ê²Œ ì¢‹ê² ë‹¤.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ì „êº¼ë¥¼ ì—†ì•¤ ëŒ€ì‹  ê±”ê°€ í¬í•¨ë˜ì–´ìˆìœ¼ë©´ ã„±ã…Šì€ ê±°ë‹ˆê¹Œ.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">solution&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">gems&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">end&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">gems_set&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">set&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">gems&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">shopping_bag&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">{}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="n">gem&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">gems_set&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">shopping_bag&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">gem&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="nb">range&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">len&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">gems&lt;/span>&lt;span class="p">)):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">gem&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">gems&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">gems_set&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">discard&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">gem&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">shopping_bag&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">gem&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nb">len&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">gems_set&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">end&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">i&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">break&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">answers&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[(&lt;/span>&lt;span class="n">end&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">end&lt;/span>&lt;span class="p">)]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="nb">range&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nb">len&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">gems&lt;/span>&lt;span class="p">)):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">found&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">end&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">shop&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">gems&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">end&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">shopping_bag&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="ow">not&lt;/span> &lt;span class="n">found&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">break&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">length&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">end&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">length&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="n">answers&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">]:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">answers&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">append&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="n">length&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">end&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">elif&lt;/span> &lt;span class="n">length&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="n">answers&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">]:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">answers&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[(&lt;/span>&lt;span class="n">length&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">end&lt;/span>&lt;span class="p">)]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># print(answers)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">answer&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">sorted&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">answers&lt;/span>&lt;span class="p">)[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">answer&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">answer&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># end í¬í•¨&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">shop&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">gems&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">start&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">end&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">shopping_bag&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">left_gem&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">gems&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">start&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">is_complete&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">False&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">new_end&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">shopping_bag&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">left_gem&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">-=&lt;/span> &lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">shopping_bag&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">left_gem&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="nb">range&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">end&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nb">len&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">gems&lt;/span>&lt;span class="p">)):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">shopping_bag&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">gems&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">]]&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># ì´ì „ì— ëº¸ ë…€ì„ì„ ì°¾ì€ ê²½ìš°&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">gems&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="n">left_gem&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">is_complete&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">True&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">new_end&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">i&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">break&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">else&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">is_complete&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">True&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">new_end&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">is_complete&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">new_end&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ë‚´ê°€ ë°©ë¬¸í•˜ë©´ì„œ êµ¬ë§¤í•œ ë³´ì„ë“¤ì˜ ê°ê°ì˜ ê°œìˆ˜ë¥¼ ë”•ì…”ë„ˆë¦¬ë¥¼ í†µí•´ ê´€ë¦¬í–ˆë‹¤.&lt;/p>
&lt;p>ì´ì „ ì‹œë„ ë•Œ êµ¬ë§¤í•œ ë³´ì„ë“¤ì˜ ê°ê°ì˜ ê°œìˆ˜ë¥¼ ì°¸ê³ í•´ ë§Œì•½ ì´ì „ì— 1ë²ˆ ë³´ì„ìƒì—ì„œ A ë³´ì„ì„ êµ¬ë§¤í•˜ëŠ” ê²ƒì„ ì‹œì‘ìœ¼ë¡œ í–ˆë‹¤ë©´ ì´ë²ˆ ì‹œë„ì—ëŠ” 2ë²ˆ ë³´ì„ìƒì—ì„œ ì–´ë–¤ ë³´ì„ì„ êµ¬ë§¤í•˜ê²Œ ë  ê²ƒì´ë‹¤. ì´ ê²½ìš° ì´ì   1ë²ˆ ë³´ì„ìƒì—ì„œ A ë³´ì„ì„ êµ¬ë§¤í•  ì¼ì´ ì—†ìœ¼ë‹ˆ ë”•ì…”ë„ˆë¦¬ì—ì„œ A ë³´ì„ì˜ ê°œìˆ˜ë¥¼ 1ê°œ ì¤„ì—¬ì£¼ê³  ì‹œì‘ì„ í•˜ëŠ” ê²ƒì´ë‹¤. ì´í›„ êµ¬ë§¤ ê°œìˆ˜ê°€ 0ê°œê°€ ë˜ëŠ” ë³´ì„ì´ ì—†ëŠ”ì§€ í™•ì¸í•˜ê³  ì¡´ì¬í•œë‹¤ë©´ í•´ë‹¹ ë³´ì„ì„ êµ¬ë§¤í•  ë•Œê¹Œì§€ ê³„ì†í•´ì„œ ë³´ì„ìƒì„ ë°©ë¬¸í•´ë‚˜ê°€ë©´ ëœë‹¤.&lt;/p>
&lt;ul>
&lt;li>ë³´ì„ì˜ ëª¨ë“  ì¢…ë¥˜ë¥¼ êµ¬í•˜ê¸° ìœ„í•´ì„œëŠ” Set ìë£Œ êµ¬ì¡°ë¥¼ ì´ìš©í–ˆë‹¤.&lt;/li>
&lt;li>êµ¬ë§¤í•œ ë³´ì„ì„ ìˆœì„œëŒ€ë¡œ ë¦¬ìŠ¤íŠ¸ë¡œ ê´€ë¦¬í•˜ë©° ë¦¬ìŠ¤íŠ¸ì— ë‚´ê°€ êµ¬ë§¤í•œ ë³´ì„ì´ ìˆëŠ”ì§€ ì°¾ëŠ” ë°©ì‹ì€ &lt;code>__contains__&lt;/code> ë¥¼ ì´ìš©í•˜ê²Œ ë˜ê³  ì´ ì‘ì—…ë§Œ ë†“ê³  ë³´ë©´ ì‹œê°„ ë³µì¡ë„ê°€ O(n)ì´ë‹¤. ë°˜ë©´ ë”•ì…”ë„ˆë¦¬ì— ê° ë³´ì„ì˜ êµ¬ë§¤ ê°œìˆ˜ë¥¼ ì´ìš©í•´ êµ¬ë§¤í•˜ì§€ ì•Šì€ ë³´ì„ì´ ìˆëŠ”ì§€ í™•ì¸í•˜ëŠ” ì‘ì—…ì€ O(1)ì´ë‹¤. ë”°ë¼ì„œ ë”•ì…”ë„ˆë¦¬ë¥¼ ì´ìš©í•´ ë³´ì„ì„ êµ¬ë§¤í–ˆëŠ”ì§€ë¥¼ í™•ì¸í•˜ëŠ” ë°©ì‹ì„ ì´ìš©í–ˆë‹¤.&lt;/li>
&lt;/ul>
&lt;h3 id="-ì‹¤íŒ¨í–ˆë˜-êµ¬í˜„">ğŸ‘ ì‹¤íŒ¨í–ˆë˜ êµ¬í˜„&lt;/h3>
&lt;blockquote>
&lt;p>ì´ ë¶€ë¶„ì€ ê°œì¸ì ìœ¼ë¡œ ê¸°ì–µí•˜ë ¤ëŠ” ì˜ë„ë¡œ ì‘ì„±í•œ ê²ƒì´ê¸° ë•Œë¬¸ì— ì„¤ëª…ì´ ì´ìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;/blockquote>
&lt;ol>
&lt;li>listë¥¼ ì´ìš©í•´ ë‚´ê°€ êµ¬ë§¤í•œ ë³´ì„ì„ ìˆœì„œëŒ€ë¡œ ë‹´ì•˜ë˜ ë°©ì‹&lt;/li>
&lt;/ol>
&lt;p>ìœ„ì—ì„œë„ ì–¸ê¸‰ì€ í–ˆì§€ë§Œ listë¥¼ ì´ìš©í•´ ë‚´ê°€ êµ¬ë§¤í•œ ë³´ì„ì„ ìˆœì„œëŒ€ë¡œ ë‹´ì€ ë’¤ ì–´ë–¤ ë³´ì„ì„ ì ì–´ë„ í•œ ë²ˆ êµ¬ë§¤í•œ ì ì´ ìˆëŠ”ì§€ë¥¼ &lt;code>in&lt;/code> ìœ¼ë¡œ ì°¾ëŠ” ë°©ì‹ì„ ì´ìš©í•œ ê²½ìš°ì´ë‹¤. ê²Œë‹¤ê°€ ì´ì „ ì‹œë„ì—ì„œ left_gemì„ ì œê±°í•œ ë’¤ ìƒˆë¡œìš´ &lt;code>shopping_bag&lt;/code>ì„ ëŒ€ì…í•˜ëŠ” ê³¼ì •ì—ì„œ ì•„ë˜ì™€ ê°™ì´ O(n)ì˜ ë³µì¡ë„ë¥¼ ê°–ëŠ” list slicingì„ ì´ìš©í•˜ë‹¤ë³´ë‹ˆ ë”ìš± ë¹„íš¨ìœ¨ì ì´ì—ˆë‹¤. í”„ë¡œê·¸ë˜ë¨¸ìŠ¤ì˜ íš¨ìœ¨ì„± í…ŒìŠ¤íŠ¸ë¥¼ 5ê°œ ì‹¤íŒ¨í–ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="n">shopping_bag&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">shopping_bag&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">:]&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ol start="2">
&lt;li>1ë²ˆ ë°©ì‹ì„ ê°œì„ í•´ list slicingì´ ì•„ë‹Œ dequeue ìë£Œêµ¬ì¡° ì´ìš©í•˜ê¸°&lt;/li>
&lt;/ol>
&lt;p>list slicing ì‹œ O(n)ì˜ ì‹œê°„ ë³µì¡ë„ë¥¼ ê°–ëŠ” listê°€ ì•„ë‹Œ ì•ì˜ ìš”ì†Œë¥¼ ì œê±°í•˜ë©´ì„œë„ O(1)ì˜ ì‹œê°„ ë³µì¡ë„ë¥¼ ê°–ëŠ” dequeue ìë£Œêµ¬ì¡°ë¥¼ ì´ìš©í–ˆë‹¤. í•˜ì§€ë§Œ í”„ë¡œê·¸ë˜ë¨¸ìŠ¤ íš¨ìœ¨ì„± í…ŒìŠ¤íŠ¸ë¥¼ 2ê°œ ì‹¤íŒ¨í–ˆë‹¤.&lt;/p>
&lt;p>ì¦‰ ìš”ì ì€ listë“  dequeueë“  ë‘˜ ì¤‘ ë¬´ì—‡ì„ ì´ìš©í•˜ë”ë¼ë„ O(n)ì˜ ì‹œê°„ ë³µì¡ë„ë¥¼ ê°–ëŠ” &lt;code>in&lt;/code>ì„ í†µí•´ íŠ¹ì • ìš”ì†Œê°€ collection ë‚´ì— ì¡´ì¬í•˜ëŠ” ê²ƒì´ ë¹„íš¨ìœ¨ì ì´ë¯€ë¡œ ë”•ì…”ë„ˆë¦¬ë¥¼ ì´ìš©í•´ O(1)ì˜ ì‹œê°„ ë³µì¡ë„ë¥¼ ê°–ëŠ” ë°©ì‹ì„ ì´ìš©í•˜ëŠ” ê²ƒì´ë‹¤.&lt;/p></description></item><item><title>EKS K8sì—ì„œ ELB(ALB, NLB) ì œëŒ€ë¡œ ì„¤ì •í•˜ë©° ì‚¬ìš©í•˜ê¸°</title><link>https://umi0410.github.io/blog/aws/aws_eks_elb/</link><pubDate>Sun, 06 Sep 2020 19:11:07 +0900</pubDate><guid>https://umi0410.github.io/blog/aws/aws_eks_elb/</guid><description>&lt;img src="https://umi0410.github.io/blog/aws/aws_eks_elb/preview.png" alt="Featured image of post EKS K8sì—ì„œ ELB(ALB, NLB) ì œëŒ€ë¡œ ì„¤ì •í•˜ë©° ì‚¬ìš©í•˜ê¸°" />&lt;h2 id="-ì‹œì‘í•˜ë©°">ğŸ¶ ì‹œì‘í•˜ë©°&lt;/h2>
&lt;blockquote>
&lt;p>ë³¸ ê²Œì‹œê¸€ì€ AWS ëŒ€í•™ìƒ ìœ ì €ê·¸ë£¹ì¸ &lt;a class="link" href="https://velog.io/@ausg" target="_blank" rel="noopener"
>AUSG&lt;/a>ì˜ í™œë™ ì¤‘
í•˜ë‚˜ë¡œì„œ ë³¸ì¸(ë°•ì§„ìˆ˜)ì´ ì‘ì„±í•œ ê²Œì‹œë¬¼ì„ í¬ì›Œë”©í•œ ê²ƒì…ë‹ˆë‹¤.&lt;/p>
&lt;/blockquote>
&lt;p>&lt;img src="https://umi0410.github.io/blog/aws/aws_eks_elb/preview.png"
width="2032"
height="1097"
srcset="https://umi0410.github.io/blog/aws/aws_eks_elb/preview_huc38b74e19f60c2848e88837c4c6920fa_1709468_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/aws/aws_eks_elb/preview_huc38b74e19f60c2848e88837c4c6920fa_1709468_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="preview.png"
class="gallery-image"
data-flex-grow="185"
data-flex-basis="444px"
>&lt;/p>
&lt;p>&lt;code>ë°ë¸Œì˜µìŠ¤&lt;/code> ì¸í„´ìœ¼ë¡œ ê·¼ë¬´í•œ ì§€ê°€ ë²Œì¨ ë‘ ë‹¬ì´ ë˜ì–´ê°‘ë‹ˆë‹¤. ì´ê²ƒ ì €ê²ƒ ë°°ìš´ ê²ƒì´ ë§ì•˜ë˜ ì‹œê°„ì´ì—ˆëŠ”ë°, ê·¸ ì¤‘ ê½¤ë‚˜ ì‚½ì§ˆì„ í–ˆë˜ &lt;code>Kubernetes&lt;/code> ì™€ &lt;code>ELB&lt;/code>ë¥¼ ì´ìš©í•˜ëŠ” ë¶€ë¶„ì— ëŒ€í•´ ì •ë¦¬ë¥¼ í•´ë³¼ê¹Œí•©ë‹ˆë‹¤. &lt;code>jenkins&lt;/code>, &lt;code>spinnaker&lt;/code>, &lt;code>argo&lt;/code>, &lt;code>terraform&lt;/code>, &lt;code>ansible&lt;/code>, &lt;code>github action&lt;/code>, &amp;hellip; ë“±ë“± ë‹¤ì–‘í•œ ë‚´ìš©ì„ ê²½í—˜í•  ìˆ˜ ìˆë˜ ì‹œê°„ì´ì—ˆì§€ë§Œ, ê·¸ ì¤‘ kubernetesì—ì„œ ë¬´ìŠ¨ ì‘ì—…ì„ í•˜ë˜ ë¹¼ë†“ì„ ìˆ˜ ì—†ìœ¼ë©´ì„œ ì–´ë”˜ê°€ ê¹”ë”íˆ ê·¸ íë¦„ì´ ì •ë¦¬ëœ ê³³ì„ ë³´ê¸° í˜ë“¤ì—ˆë˜ &lt;strong>serviceë¥¼ ELBì— ì—°ê²°&lt;/strong>í•˜ê¸°ì— ëŒ€í•œ ë‚´ìš©ì„ ì •ë¦¬í•´ë³´ê² ìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;em>ë³¸ í¬ìŠ¤íŠ¸ëŠ” EKSë¥¼ í†µí•´ K8së¥¼ ì´ìš©í•  ë•Œë¥¼ ê¸°ì¤€ìœ¼ë¡œ ì„¤ëª…í•©ë‹ˆë‹¤.&lt;/em>&lt;/p>
&lt;h2 id="-eks-ì—ì„œ-elbë¥¼-ì‚¬ìš©í•´-ì„œë¹„ìŠ¤ë¥¼-ë…¸ì¶œí‚¬-ë•Œ-ìœ ì˜ì‚¬í•­ë“¤">ğŸ’ğŸ»â€â™‚ï¸ EKS ì—ì„œ ELBë¥¼ ì‚¬ìš©í•´ ì„œë¹„ìŠ¤ë¥¼ ë…¸ì¶œí‚¬ ë•Œ ìœ ì˜ì‚¬í•­ë“¤&lt;/h2>
&lt;blockquote>
&lt;p>ğŸ§ : &amp;quot; &lt;code>ELB&lt;/code>, &lt;code>NLB&lt;/code>, &lt;code>ALB&lt;/code> ëŒ€ì²´ ë­ê°€ ë‹¤ë¥¸ ê±°ì•¼..?ã…œã…œ &lt;strong>ì¿ ë²„ë„¤í‹°ìŠ¤&lt;/strong>ë¥¼ ì“¸ ë•ŒëŠ” ì–´ë–»ê²Œ ì–˜ë„¤ë¥¼ ì§€ì •í•˜ëŠ” ê±°ì§€..? &lt;code>kubectl expose deploy {{deployment_name}} --type=LoadBalancer&lt;/code> í•˜ë©´ ê·¸ëƒ¥ ì‘ë™ì€ í•˜ë˜ë°&amp;hellip;&amp;quot;&lt;/p>
&lt;/blockquote>
&lt;p>&lt;code>EKS&lt;/code>ì—ì„œ ì£¼ë¡œ ì‚¬ìš©í•˜ëŠ” &lt;code>ELB&lt;/code>ëŠ” L4ì˜ &lt;code>NLB&lt;/code>ì™€ L7ì˜ &lt;code>ALB&lt;/code> ì…ë‹ˆë‹¤. ALBê°€ L7ì— ëŒ€í•œ ì¢€ ë” ë‹¤ì–‘í•œ ì„¤ì •ì´ ê°€ëŠ¥í•˜ê¸° ë•Œë¬¸ì— ì¡°ê±´ì´ ë§ê¸°ë„ í•˜ê³ , AWSì˜ ALBë§Œì„ ìœ„í•œ &lt;code>alb-ingress-controller&lt;/code>ë¼ëŠ” ë…€ì„ì´ ì§ì ‘ &lt;code>Ingress&lt;/code>ì˜ ì„¤ì •ë“¤ì„ ê´€ë¦¬í•´ì£¼ê¸° ë•Œë¬¸ì— ì„¤ì •í•  ìˆ˜ ìˆëŠ” ì˜µì…˜ë„ ë§ìŠµë‹ˆë‹¤. ì¢‹ê²Œ ë³´ë©´ ë§ì€ ì„¤ì •ì„ í•  ìˆ˜ ìˆê³ , ë‚˜ì˜ê²Œ ë³´ë©´ ì´ˆë³´ìì—ê² ê·€ì°®ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. &lt;code>NLB&lt;/code>ëŠ” ë¹„êµì  ì„¤ì •ì´ ì ê³  ë”°ë¼ì„œ ì„¤ì •í•´ì¤„ ìˆ˜ ìˆëŠ” í•­ëª©ë„ ì ìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>ì¿ ë²„ë„¤í‹°ìŠ¤ì—ì„œ ë‹¤ì–‘í•œ ì‘ì—…ì„ í•˜ë©´ì„œ ë‹¤ì–‘í•œ controllerì„ ì ‘í•˜ê²Œ ë˜ê³ , ê·¸ë ‡ê²Œ ë  ìˆ˜ë¡ &lt;code>annotation&lt;/code>ìœ¼ë¡œ ë§ì€ ì„¤ì •ì„ í•˜ê²Œ ë©ë‹ˆë‹¤. k8së¥¼ ì²˜ìŒ ì ‘í•  ë•Œì—ëŠ” annotationì— ëŒ€í•œ ì •ì˜ë¡œì„œ ì•„ë˜ì™€ ê°™ì€ ë¬¸ì¥ì„ ì ‘í•  ìˆ˜ ìˆê³ , ë§ˆì¹˜ ê¸°ëŠ¥ê³¼ í¬ê²Œ ìƒê´€ì´ ì—†ì„ ê²ƒì²˜ëŸ¼ ëŠê»´ì§€ê¸°ë„ í•˜ì§€ë§Œ ì‚¬ì‹¤ EKSë¥¼ ë¹„ë¡¯í•œ ì—¬ëŸ¬ ì„œë¹„ìŠ¤ì—ì„œëŠ” annotationì„ ì´ìš©í•´ ì¤‘ìš”í•œ ì„¤ì • ë“±ì„ ê¸°ì…í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ì˜ ì„¤ì •í•´ì£¼ì–´ì•¼í•©ë‹ˆë‹¤. ELBë˜í•œ ëª¨ë“  ì„¤ì •ì´ annotationìœ¼ë¡œ ë™ì‘í•œë‹¤.&lt;/p>
&lt;blockquote>
&lt;p>&amp;quot; &lt;code>Label&lt;/code>ì„ ì‚¬ìš©í•˜ì—¬ ì˜¤ë¸Œì íŠ¸ë¥¼ ì„ íƒí•˜ê³ , íŠ¹ì • ì¡°ê±´ì„ ë§Œì¡±í•˜ëŠ” ì˜¤ë¸Œì íŠ¸ ì»¬ë ‰ì…˜ì„ ì°¾ì„ ìˆ˜ ìˆë‹¤. ë°˜ë©´ì—, &lt;code>annotation&lt;/code>ì€ ì˜¤ë¸Œì íŠ¸ë¥¼ ì‹ë³„í•˜ê³  ì„ íƒí•˜ëŠ”ë° ì‚¬ìš©ë˜ì§€ ì•ŠëŠ”ë‹¤. ì–´ë…¸í…Œì´ì…˜ì˜ ë©”íƒ€ë°ì´í„°ëŠ” ì‘ê±°ë‚˜ í¬ê³ , êµ¬ì¡°ì ì´ê±°ë‚˜ êµ¬ì¡°ì ì´ì§€ ì•Šì„ ìˆ˜ ìˆìœ¼ë©°, ë ˆì´ë¸”ì—ì„œ í—ˆìš©ë˜ì§€ ì•ŠëŠ” ë¬¸ìë¥¼ í¬í•¨í•  ìˆ˜ ìˆë‹¤.&amp;quot;&lt;/p>
&lt;/blockquote>
&lt;h3 id="-albë¥¼-ì‚¬ìš©í• -ë•Œ-ìœ ì˜í• -ì ">âš ï¸ ALBë¥¼ ì‚¬ìš©í•  ë•Œ ìœ ì˜í•  ì &lt;/h3>
&lt;blockquote>
&lt;p>ì–´ë–¤ ì˜µì…˜ë“¤ì´ ìˆê³ , ê¸°ë³¸ì ìœ¼ë¡œëŠ” ì–´ë–»ê²Œ ì„¤ì •ë˜ëŠ” ì§€ì— ëŒ€í•œ ì´í•´ê°€ ìˆì–´ì•¼ ì˜¤ë¥˜ ê³¼ì •ì„ ì¶”ì í•˜ê¸° ì‰¬ìš°ë¯€ë¡œ ê¸°ë³¸ì ìœ¼ë¡œ ALBë¥¼ AWS Consoleì—ì„œ ì‚¬ìš©í•´ë³¸ ë’¤ì— ì„¤ì •í•  ê²ƒì„ ì¶”ì²œí•©ë‹ˆë‹¤.&lt;/p>
&lt;/blockquote>
&lt;ul>
&lt;li>&lt;code>alb ingress controller&lt;/code>ê°€ ìƒì„±í•  ALBê°€ ì‚¬ìš©í•  ì„œë¸Œë„·ì„ discoverí•˜ê¸° ìœ„í•´ì„œëŠ” &lt;strong>ì˜¬ë°”ë¥¸ íƒœê·¸ê°€ ë‹¬ë¦° subnet&lt;/strong>ì´ ì¡´ì¬í•´ì•¼í•œë‹¤.&lt;/li>
&lt;li>node í˜¹ì€ &lt;code>alb ingress controller&lt;/code>ì— ì—°ê²°ëœ service accountê°€ albë¥¼ ì œì–´í•˜ê¸° ìœ„í•œ &lt;strong>iam permission&lt;/strong>ì´ ë¶€ì—¬ë˜ì–´ì•¼í•œë‹¤.&lt;/li>
&lt;li>internet facingí•œ albë¥¼ ë§Œë“¤ì§€ internalí•œ albë¥¼ ë§Œë“¤ì§€ ê³ ë¯¼í•´ë´ì•¼í•œë‹¤.&lt;/li>
&lt;li>&lt;code>alb ingress controller&lt;/code>ì˜ logë¥¼ í†µí•´ ì‘ì—…ì— ëŒ€í•œ logë¥¼ ë³¼ ìˆ˜ ìˆë‹¤.&lt;/li>
&lt;/ul>
&lt;h3 id="-nlb-clbë¥¼-ì‚¬ìš©í• -ë•Œ-ìœ ì˜í• -ì ">âš ï¸ NLB, CLBë¥¼ ì‚¬ìš©í•  ë•Œ ìœ ì˜í•  ì &lt;/h3>
&lt;p>&lt;a class="link" href="https://kubernetes.io/ko/docs/concepts/services-networking/service/#aws-nlb-support" target="_blank" rel="noopener"
>https://kubernetes.io/ko/docs/concepts/services-networking/service/#aws-nlb-support&lt;/a>&lt;/p>
&lt;p>&lt;a class="link" href="https://docs.aws.amazon.com/ko_kr/eks/latest/userguide/load-balancing.html" target="_blank" rel="noopener"
>https://docs.aws.amazon.com/ko_kr/eks/latest/userguide/load-balancing.html&lt;/a>&lt;/p>
&lt;ul>
&lt;li>&lt;code>NLB&lt;/code>, &lt;code>CLB&lt;/code>ê°€ ì‚¬ìš©í•  ì„œë¸Œë„·ì„ ì„¤ì •í•˜ê¸° ìœ„í•´ì„œëŠ” &lt;strong>ì˜¬ë°”ë¥¸ íƒœê·¸ê°€ ë‹¬ë¦° subnet&lt;/strong>ì´ ì¡´ì¬í•´ì•¼í•œë‹¤.&lt;/li>
&lt;li>ì–´ëŠ ë¶€ë¶„ì—ì„ ê°€ NLB, CLBë¥¼ ì œì–´í•˜ê¸° ìœ„í•œ &lt;strong>iam permission&lt;/strong>ì´ ë¶€ì—¬ë˜ì–´ì•¼í•œë‹¤. (ì–´ëŠ ë¶€ë¶„ì¸ì§€ í™•ì‹¤íˆëŠ” ëª¨ë¥´ê² ìŒ. ë”°ë¡œ ì„¤ì •ì•ˆí•´ë„ ë™ì‘í•˜ëŠ” ê²ƒì„ ë³´ì•„ worker nodeê°€ ê°–ëŠ” iam roleì— permissionì´ ë¶™ì–´ìˆì„ ê²ƒìœ¼ë¡œ ì˜ˆìƒë¨)&lt;/li>
&lt;/ul>
&lt;h2 id="-albë¥¼-ì‚¬ìš©í•´-ì„œë¹„ìŠ¤ë¥¼-ë…¸ì¶œì‹œí‚¤ëŠ”-ë°©ë²•">ğŸŒ ALBë¥¼ ì‚¬ìš©í•´ ì„œë¹„ìŠ¤ë¥¼ ë…¸ì¶œì‹œí‚¤ëŠ” ë°©ë²•&lt;/h2>
&lt;blockquote>
&lt;p>ğŸ˜Š &lt;code>ALB&lt;/code>ëŠ” K8sì— ì¹œìˆ™í•˜ì§€ ì•Šìœ¼ì‹  ë¶„ë“¤ê»˜ëŠ” ë‹¤ì†Œ ì§„ì…ì¥ë²½ì´ ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê·¸ëƒ¥ ì„œë¹„ìŠ¤ë¥¼ ë…¸ì¶œì‹œí‚¬ ë•ŒëŠ” êµ³ì´ ì‚¬ìš©í•  í•„ìš” ì—†ëŠ” &lt;code>Ingress&lt;/code> ë¼ëŠ” ì˜¤ë¸Œì íŠ¸ë„ ê´€ë¦¬í•´ì•¼í•˜ê³ , &lt;code>alb-ingress-contoller&lt;/code>ë¼ëŠ” ë…€ì„ë„ ë°°í¬í•´ì•¼í•˜ë©° ì„¤ì •ì´ ë‹¤ì–‘í•˜ê¸° ë•Œë¬¸ì´ì£ ! ğŸ’¦&lt;/p>
&lt;/blockquote>
&lt;p>K8sì—ì„œ EKSë¥¼ ì‚¬ìš©í•´ &lt;code>ALB&lt;/code>ë¥¼ ì´ìš©í•˜ê³ ì‹¶ì€ ê²½ìš° &lt;code>alb-ingress-controller&lt;/code>ì„ ë°°í¬í•œ ë’¤, &lt;code>Ingress&lt;/code>ë¥¼ í†µí•´ ì‚¬ìš©í•  albì— ëŒ€í•œ ruleì„ ì„¤ì •ì„ í•´ì£¼ì–´ì•¼í•©ë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;a class="link" href="https://kubernetes-sigs.github.io/aws-alb-ingress-controller/guide/controller/setup/" target="_blank" rel="noopener"
>https://kubernetes-sigs.github.io/aws-alb-ingress-controller/guide/controller/setup/&lt;/a> ì˜ ë‚´ìš©ì„ ë²„ë¦´ ë¶€ë¶„ì´ í•˜ë‚˜ë„ ì—†ìŠµë‹ˆë‹¤. ìœ„ ë§í¬ë¥¼ í†µí•´ alb-ingress-controllerì— ëŒ€í•œ ê°œë…ì„ ì¡ê³  ë°°í¬í•´ë´…ë‹ˆë‹¤. &lt;code>alb-ingress-controller.yaml&lt;/code>ì˜ ì¸ìë¥¼ ì ì ˆíˆ ìˆ˜ì •í•´ì£¼ì–´ì•¼í•©ë‹ˆë‹¤.&lt;/p>
&lt;p>ALBê°€ ì•„ë‹Œ k8s cluster ìƒì—ì„œ L7 LoadBalancerë¥¼ ì´ìš©í•˜ëŠ” ê²½ìš°ì—ëŠ” nginx ingress controllerë“±ì„ ì´ìš©í•˜ë©° nginx ì— ì ìš©í•  ruleì„ &lt;code>Ingress&lt;/code>ë¼ëŠ” K8s Objectë¥¼ í†µí•´ ì„¤ì •í•©ë‹ˆë‹¤. ingress controllerì˜ ì„¤ì •ì—ì„œ ìì‹ ì˜ class nameì„ ì ì–´ì£¼ê³ , &lt;code>Ingress&lt;/code>ì—ì„œëŠ” ì–´ë–¤ class nameì˜ ingress controllerì—ì„œ ìì‹ (Ingressì´ì Rule)ì„ ì ìš©í•˜ë„ë¡ í•  ì§€ë¥¼ annotationì„ í†µí•´ ì„¤ì •í•˜ê±°ë‚˜ ingressClassNameì´ë¼ëŠ” í•„ë“œë¥¼ í†µí•´ ì„¤ì •í•©ë‹ˆë‹¤.(ingress ì„¤ì •ì— ëŒ€í•œ ì°¸ê³  - &lt;a class="link" href="https://kubernetes.io/ko/docs/concepts/services-networking/ingress/#%EC%9D%B8%EA%B7%B8%EB%A0%88%EC%8A%A4-%ED%81%B4%EB%9E%98%EC%8A%A4" target="_blank" rel="noopener"
>https://kubernetes.io/ko/docs/concepts/services-networking/ingress/#ì¸ê·¸ë ˆìŠ¤-í´ë˜ìŠ¤&lt;/a>)&lt;/p>
&lt;p>ì´ì™€ ê°™ì€ ê²½ìš°ì—ëŠ” ingress controllerê°€ ì§ì ‘ ingressì— ëª…ì‹œëœ ruleì„ ì´ìš©í–ˆì§€ë§Œ, &lt;strong>alb-ingress-controller&lt;/strong>ì˜ ê²½ìš°ëŠ” alb-ingress-controllerê°€ nginx-ingress-controllerì²˜ëŸ¼ &lt;strong>ì§ì ‘ ì›¹ì„œë²„ì˜ ì—­í• ì„ í•˜ëŠ” ê²ƒì´ ì•„ë‹Œ&lt;/strong>, ingressì— ëª…ì‹œëœ ruleì„ ì´ìš©í•˜ëŠ” &lt;strong>ALBë¥¼ ìƒì„±í•˜ê³  ê´€ë¦¬&lt;/strong>í•˜ëŠ” ì—­í• ì„ í•œë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤. ì´ ë¶€ë¶„ì´ ì²˜ìŒì—ëŠ” ë‹¤ì†Œ í—·ê°ˆë¦¬ê²Œ ëŠê»´ì§ˆ ìˆ˜ ìˆê¸°ì— ê¸¸ê²Œ ì„œìˆ í•´ë³´ì•˜ìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>ì‹¤ì œë¡œ ingressë¥¼ ìƒì„±í•œ ë’¤ ì•ì—ì„œ ë°°í¬í•œ alb-ingress-controllerì˜ logë¥¼ ë³´ë©´ albë¥¼ ê´€ë¦¬í•˜ê¸°ìœ„í•œ ì—¬ëŸ¬ ì‘ì—…ì„ ìˆ˜í–‰ì¤‘ì¸ ëª¨ìŠµì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>ê·¸ëŸ¼ ì´ì œ ì‹¤ì œë¡œ alb ingress controllerì„ í†µí•´ albë¥¼ ì´ìš©í•´ë³´ê² ìŠµë‹ˆë‹¤.&lt;/p>
&lt;h3 id="albë¥¼-ì›í™œíˆ-ì œì–´í•˜ê¸°-ìœ„í•œ-permission-ë¶€ì—¬">ALBë¥¼ ì›í™œíˆ ì œì–´í•˜ê¸° ìœ„í•œ permission ë¶€ì—¬&lt;/h3>
&lt;ul>
&lt;li>ALB iam ì •ì±… ì°¸ê³ 
&lt;ul>
&lt;li>&lt;a class="link" href="https://docs.aws.amazon.com/ko_kr/eks/latest/userguide/alb-ingress.html" target="_blank" rel="noopener"
>https://docs.aws.amazon.com/ko_kr/eks/latest/userguide/alb-ingress.html&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://raw.githubusercontent.com/kubernetes-sigs/aws-alb-ingress-controller/v1.1.2/docs/examples/iam-policy.json" target="_blank" rel="noopener"
>https://raw.githubusercontent.com/kubernetes-sigs/aws-alb-ingress-controller/v1.1.2/docs/examples/iam-policy.json&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;p>&lt;code>ALB&lt;/code>ë¥¼ ì œì–´í•˜ê¸° ìœ„í•´ì„œëŠ” awsì˜ ë¦¬ì†ŒìŠ¤ì— ëŒ€í•œ ì–´ë– í•œ permissionì´ í•„ìš”í•©ë‹ˆë‹¤. &lt;code>node&lt;/code>ì— ë¶€ì—¬í•  ìˆ˜ë„ ìˆê³ , IAM Userì— ë¶€ì—¬í•œ ë’¤ &lt;code>alb ingress controller&lt;/code>ì˜ ì„¤ì •ì—ì„œ í•´ë‹¹ IAM Userì˜ Keyë¥¼ ë¶€ì—¬í•  ìˆ˜ë„ ìˆê³ , Service accountì™€ IAM Roleì„ &lt;code>OIDC&lt;/code>(OpenID Connectë¥¼ ì´ìš©í•´ Service accountì™€ IAM Roleì„ ì—°ê²°ì‹œí‚¤ëŠ” ì‘ì—…)ë¥¼ ì´ìš©í•´ ì—®ì€ ë’¤, alb ingress controller podì— í•´ë‹¹ Service Accountë¥¼ ë¶€ì—¬í•  ìˆ˜ë„ ìˆì§€ë§Œ ë’¤ì˜ ë°©ë²•ë“¤ì€ ì¢€ íŠœí† ë¦¬ì–¼ì¹˜ê³  íˆ¬ë¨¸ì¹˜í•œ ê°ì´ ìˆê¸°ë•Œë¬¸ì—, ê°„ë‹¨íˆ nodeì— Permissionì„ ë¶€ì—¬í•˜ë„ë¡í•˜ê² ìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://umi0410.github.io/blog/aws/aws_eks_elb/iam.png"
width="797"
height="532"
srcset="https://umi0410.github.io/blog/aws/aws_eks_elb/iam_hu9ac6964ec6844f4165a3f6a7be3b3a23_55018_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/aws/aws_eks_elb/iam_hu9ac6964ec6844f4165a3f6a7be3b3a23_55018_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="iam.png"
class="gallery-image"
data-flex-grow="149"
data-flex-basis="359px"
>&lt;/p>
&lt;p>worker nodeë“¤ì´ ì´ìš©í•˜ëŠ” IAM Roleì— Policyë¥¼ ì¶”ê°€í•œ ëª¨ìŠµ.&lt;/p>
&lt;h3 id="albê°€-ì‚¬ìš©í• -subnetì—-ì ì ˆí•œ-íƒœê·¸-ë‹¬ê¸°">albê°€ ì‚¬ìš©í•  subnetì— ì ì ˆí•œ íƒœê·¸ ë‹¬ê¸°&lt;/h3>
&lt;p>&lt;a class="link" href="https://docs.aws.amazon.com/ko_kr/eks/latest/userguide/alb-ingress.html" target="_blank" rel="noopener"
>https://docs.aws.amazon.com/ko_kr/eks/latest/userguide/alb-ingress.html&lt;/a> ì— ë‚˜ì™€ìˆë“¯ì´ ELBê°€ ì´ìš©í•˜ëŠ” ì„œë¸Œë„·ì„ ìë™ìœ¼ë¡œ ì„¤ì •ë˜ë„ë¡ í•˜ê¸° ìœ„í•´ì„œëŠ” ì‚¬ìš©í•˜ê³ ì í•˜ëŠ” ì„œë¸Œë„·ì— ì•„ë˜ì™€ ê°™ì€ íƒœê·¸ë“¤ì„ ë‹¬ì•„ì£¼ì–´ì•¼í•œë‹¤.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-jsx" data-lang="jsx">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">kubernetes&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">io&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">cluster&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">cluster&lt;/span>&lt;span class="err">-&lt;/span>&lt;span class="na">name&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">shared&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="nx">owned&lt;/span> &lt;span class="err">#&lt;/span> &lt;span class="nx">Required&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">kubernetes&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">io&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">role&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">internal&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">elb&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span> &lt;span class="err">#&lt;/span> &lt;span class="nx">Optional&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="nx">internal&lt;/span> &lt;span class="nx">alb&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">kubernetes&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">io&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">role&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">elb&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span> &lt;span class="err">#&lt;/span> &lt;span class="nx">Optional&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="nx">internet&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">facing&lt;/span> &lt;span class="nx">alb&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;code>a | b&lt;/code>ì™€ ê°™ì€ í‘œí˜„ì€ a ë‚˜ bì¤‘ í•œ ê°’ì„ ê°€ì ¸ì•¼í•œë‹¤ëŠ” ì˜ë¯¸ë¡œ í‘œí˜„í•œ ê²ƒì…ë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://umi0410.github.io/blog/aws/aws_eks_elb/tag.png"
width="714"
height="435"
srcset="https://umi0410.github.io/blog/aws/aws_eks_elb/tag_hu2bbb23500c440a1ae11b9e8cf9268536_37002_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/aws/aws_eks_elb/tag_hu2bbb23500c440a1ae11b9e8cf9268536_37002_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="tag.png"
class="gallery-image"
data-flex-grow="164"
data-flex-basis="393px"
>&lt;/p>
&lt;p>internet facing ALBë§Œ ì´ìš©í•  ê²ƒì´ê¸° ë•Œë¬¸ì— &lt;a class="link" href="http://kubernetes.io/role/internal-elb" target="_blank" rel="noopener"
>&lt;code>kubernetes.io/role/internal-elb&lt;/code>&lt;/a> tagëŠ” ìƒëµí•˜ê³  íƒœê·¸ë¥¼ ë‹¬ì•„ì¤€ ëª¨ìŠµ.&lt;/p>
&lt;p>subnetì— ALBë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•œ íƒœê·¸ë¥¼ ì œëŒ€ë¡œ ë‹¬ì•„ì£¼ì§€ ì•Šì„ ê²½ìš° alb-ingress-controller ì—ì„œ ì•„ë˜ì™€ ê°™ì€ ë¡œê·¸ë¥¼ ë³´ê²Œ ë©ë‹ˆë‹¤. ALBê°€ ìƒì„±ë˜ì§€ë„ ì•ŠìŠµë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-jsx" data-lang="jsx">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">controller&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">go&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="mi">217&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="nx">kubebuilder&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">controller&lt;/span> &lt;span class="s2">&amp;#34;msg&amp;#34;&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;Reconciler error&amp;#34;&lt;/span> &lt;span class="s2">&amp;#34;error&amp;#34;&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="err">&amp;#34;&lt;/span>&lt;span class="nx">failed&lt;/span> &lt;span class="nx">to&lt;/span> &lt;span class="nx">build&lt;/span> &lt;span class="nx">LoadBalancer&lt;/span> &lt;span class="nx">configuration&lt;/span> &lt;span class="nx">due&lt;/span> &lt;span class="nx">to&lt;/span> &lt;span class="nx">failed&lt;/span> &lt;span class="nx">to&lt;/span> &lt;span class="nx">resolve&lt;/span> &lt;span class="mi">2&lt;/span> &lt;span class="nx">qualified&lt;/span> &lt;span class="nx">subnet&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="nx">ALB&lt;/span>&lt;span class="p">.&lt;/span> &lt;span class="nx">Subnets&lt;/span> &lt;span class="nx">must&lt;/span> &lt;span class="nx">contains&lt;/span> &lt;span class="nx">these&lt;/span> &lt;span class="nx">tags&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s1">&amp;#39;kubernetes.io/cluster/umi-dev&amp;#39;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;shared&amp;#39;&lt;/span> &lt;span class="nx">or&lt;/span> &lt;span class="s1">&amp;#39;owned&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="nx">and&lt;/span> &lt;span class="s1">&amp;#39;kubernetes.io/role/internal-elb&amp;#39;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;&amp;#39;&lt;/span> &lt;span class="nx">or&lt;/span> &lt;span class="s1">&amp;#39;1&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="alb-ingress-controller-ë°°í¬í•˜ê¸°">alb ingress controller ë°°í¬í•˜ê¸°.&lt;/h3>
&lt;blockquote>
&lt;p>ìŠ¬ìŠ¬ ì½ê¸° ê·€ì°®ì•„ì§ˆ íƒ€ì´ë°ì…ë‹ˆë‹¤. &amp;lsquo;&lt;em>ìš”ë†ˆì´ IAM policyë„ ë§Œë“¤ê³ , ì„œë¸Œë„·ì— ì—„í•œ íƒœê·¸ë¥¼ ë‹¬ë”ë‹ˆ ì´ì œëŠ” í•˜,,, ë­˜ ë˜ ë°°í¬í•˜ë¼ê³  í•˜ëŠ”êµ¬ë‚˜ ì•„ì´ê³  ë‚´ ëˆˆì•„,,,&lt;/em>&amp;rsquo; ì‹¶ê² ì§€ë§Œ, ì¢€ ë” í˜ì„ ë‚´ì–´ë´…ì‹œë‹¤ ğŸ»&lt;/p>
&lt;/blockquote>
&lt;p>&lt;a class="link" href="https://kubernetes-sigs.github.io/aws-alb-ingress-controller/guide/controller/setup/" target="_blank" rel="noopener"
>https://kubernetes-sigs.github.io/aws-alb-ingress-controller/guide/controller/setup/&lt;/a> ë¥¼ ì°¸ê³ í•˜ì—¬ &lt;code>Deployment&lt;/code> ë‚´ì˜ containerì˜ &lt;code>args&lt;/code>ë¥¼ ìì‹ ì˜ ìƒí™©ì— ë§ê²Œ ìˆ˜ì •í•œ ë’¤ ë°°í¬í•´ì¤ë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-jsx" data-lang="jsx">&lt;span class="line">&lt;span class="cl">&lt;span class="p">...&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">args&lt;/span>&lt;span class="o">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="nx">ingress&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="kr">class&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="nx">alb&lt;/span> &lt;span class="err">#&lt;/span> &lt;span class="nx">ingressì˜&lt;/span> &lt;span class="nx">annotationì—&lt;/span> &lt;span class="nx">ëª…ì‹œí• &lt;/span> &lt;span class="kr">class&lt;/span> &lt;span class="nx">name&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="nx">cluster&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">name&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="nx">umi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">dev&lt;/span> &lt;span class="err">#&lt;/span> &lt;span class="nx">eks&lt;/span> &lt;span class="nx">cluster&lt;/span> &lt;span class="nx">name&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="nx">aws&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">region&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="nx">ap&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">northeast&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="nx">aws&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">api&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">debug&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="kc">true&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ì €ëŠ” ìœ„ì™€ ê°™ì€ ì‹ìœ¼ë¡œ ì„¤ì •í•´ì£¼ì—ˆê³ , ì˜ ë°°í¬ë˜ì—ˆëŠ”ì§€ í™•ì¸í•´ë´…ë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-jsx" data-lang="jsx">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">$&lt;/span> &lt;span class="nx">kubectl&lt;/span> &lt;span class="nx">get&lt;/span> &lt;span class="nx">po&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="nx">A&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="nx">grep&lt;/span> &lt;span class="nx">alb&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">system&lt;/span> &lt;span class="nx">alb&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">ingress&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">controller&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">594&lt;/span>&lt;span class="nx">f84b465&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">q4qjb&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="nx">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">106&lt;/span>&lt;span class="nx">m&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="ë…¸ì¶œì‹œí‚¬-ì„œë¹„ìŠ¤-ë°°í¬í•˜ê¸°">ë…¸ì¶œì‹œí‚¬ ì„œë¹„ìŠ¤ ë°°í¬í•˜ê¸°&lt;/h3>
&lt;p>ê°„ë‹¨í•˜ê²Œ &lt;code>Nginx&lt;/code>ë¥¼ ë°°í¬í•´ë³´ë¡í•˜ê² ìŠµë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-jsx" data-lang="jsx">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">apiVersion&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="nx">v1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">kind&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="nx">Service&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">metadata&lt;/span>&lt;span class="o">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">name&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="nx">ingress&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">test&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">spec&lt;/span>&lt;span class="o">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">selector&lt;/span>&lt;span class="o">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">app&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="nx">nginx&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">ports&lt;/span>&lt;span class="o">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span> &lt;span class="nx">protocol&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="nx">TCP&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">port&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="mi">80&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">targetPort&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="mi">80&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">nodePort&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="mi">30010&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">type&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="nx">NodePort&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">---&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">apiVersion&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="nx">apps&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">v1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">kind&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="nx">Deployment&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">metadata&lt;/span>&lt;span class="o">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">name&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="nx">ingress&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">test&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">labels&lt;/span>&lt;span class="o">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">app&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="nx">nginx&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">spec&lt;/span>&lt;span class="o">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">replicas&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="mi">3&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">selector&lt;/span>&lt;span class="o">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">matchLabels&lt;/span>&lt;span class="o">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">app&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="nx">nginx&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">template&lt;/span>&lt;span class="o">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">metadata&lt;/span>&lt;span class="o">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">labels&lt;/span>&lt;span class="o">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">app&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="nx">nginx&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">spec&lt;/span>&lt;span class="o">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">containers&lt;/span>&lt;span class="o">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span> &lt;span class="nx">name&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="nx">nginx&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">image&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="nx">nginx&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">ports&lt;/span>&lt;span class="o">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span> &lt;span class="nx">containerPort&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="mi">80&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ALBëŠ” ê¸°ë³¸ì ìœ¼ë¡œ &lt;strong>nodeì˜ Port&lt;/strong>ë¥¼ AWS ìƒì˜ &lt;code>target group&lt;/code>ìœ¼ë¡œì„œ ì´ìš©í•˜ê¸° ë•Œë¬¸ì—, ingressë¥¼ í†µí•´ ë…¸ì¶œì‹œì¼œì¤„ ì„œë¹„ìŠ¤ëŠ” ì ì–´ë„ &lt;code>NodePort&lt;/code> íƒ€ì…ìœ¼ë¡œ ë…¸ì¶œë˜ì–´ìˆì–´ì•¼ &lt;code>ALB ingress controller&lt;/code>ê°€ í•´ë‹¹ ì„œë¹„ìŠ¤ë¥¼ ë…¸ì¶œì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.(target typeì„ ê¸°ë³¸ê°’ì¸ &lt;code>instance&lt;/code>ê°€ ì•„ë‹ˆë¼ &lt;code>IP&lt;/code>ë¡œ ì„¤ì •í•˜ë©´, Podì˜ IPë¡œ íŠ¸ë˜í”½ì´ í˜ëŸ¬ê°€ê²Œ í•  ìˆ˜ëŠ” ìˆìŠµë‹ˆë‹¤.)&lt;/p>
&lt;p>ì‘ë™ë°©ì‹ì„ ì„¤ëª…í•´ë³´ìë©´ ingress ëŠ” service nameê³¼ service portë¥¼ ì„¤ì •ìœ¼ë¡œ ë°›ìŠµë‹ˆë‹¤. alb-ingress-controllerëŠ” ê·¸ëŸ¬ë©´ í•´ë‹¹ service name, service portì™€ ì—°ê²°ëœ NodePortë¥¼ ì°¾ì•„ì„œ ALBì˜ target groupìœ¼ë¡œ ë“±ë¡ì‹œí‚µë‹ˆë‹¤.&lt;/p>
&lt;h3 id="ingress-ë°°í¬í•˜ê¸°">Ingress ë°°í¬í•˜ê¸°&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-jsx" data-lang="jsx">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">apiVersion&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="nx">extensions&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">v1beta1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">kind&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="nx">Ingress&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">metadata&lt;/span>&lt;span class="o">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">name&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;ingress&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">annotations&lt;/span>&lt;span class="o">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">kubernetes&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">io&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">ingress&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="kr">class&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="nx">alb&lt;/span> &lt;span class="err">#&lt;/span> &lt;span class="nx">the&lt;/span> &lt;span class="nx">value&lt;/span> &lt;span class="nx">we&lt;/span> &lt;span class="nx">set&lt;/span> &lt;span class="k">in&lt;/span> &lt;span class="nx">alb&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">ingress&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">controller&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">alb&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">ingress&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">kubernetes&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">io&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">scheme&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="nx">internet&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">facing&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">spec&lt;/span>&lt;span class="o">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">rules&lt;/span>&lt;span class="o">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span> &lt;span class="nx">http&lt;/span>&lt;span class="o">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">paths&lt;/span>&lt;span class="o">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span> &lt;span class="nx">path&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="err">/*&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">backend&lt;/span>&lt;span class="o">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">serviceName&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;ingress-test&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">servicePort&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="mi">80&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;a class="link" href="https://kubernetes-sigs.github.io/aws-alb-ingress-controller/guide/ingress/annotation/" target="_blank" rel="noopener"
>https://kubernetes-sigs.github.io/aws-alb-ingress-controller/guide/ingress/annotation/&lt;/a> ì„ ì°¸ê³ í•˜ì—¬ &lt;code>Ingress&lt;/code>ë¥¼ ì‘ì„±í•´ì¤ë‹ˆë‹¤. &lt;code>[kubernetes.io/ingress.class&lt;/code>ëŠ”](&lt;a class="link" href="http://kubernetes.io/ingress.class" target="_blank" rel="noopener"
>http://kubernetes.io/ingress.class&lt;/a>ëŠ”) alb-ingress-controllerì—ì„œ ì„¤ì •í•œ &lt;code>ingress.class&lt;/code>ë¥¼ ì ì–´ì£¼ê³ , &lt;a class="link" href="http://alb.ingress.kubernetes.io/scheme%eb%8a%94" target="_blank" rel="noopener"
>&lt;code>alb.ingress.kubernetes.io/scheme&lt;/code>ëŠ”&lt;/a> ìš©ë„ì— ë”°ë¼ &lt;code>internet-facing&lt;/code> í˜¹ì€ &lt;code>internal&lt;/code>ì„ ì ì–´ì¤ë‹ˆë‹¤. ingress ë¥¼ ìƒì„±í•˜ê¸° ì „ì— &lt;code>kubectl logs -f {alb-ingress-controller pod name}&lt;/code>ì„ í•œ ì°½ì— ë„ì›Œë†“ìœ¼ë©´ ALB ìƒì„± ê´€ë ¨ ë¡œê·¸ë¥¼ ì­ˆë£¨ë£© ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://umi0410.github.io/blog/aws/aws_eks_elb/elb.png"
width="670"
height="166"
srcset="https://umi0410.github.io/blog/aws/aws_eks_elb/elb_huae6e8bb776e806d0d619a890a5bf58a9_19454_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/aws/aws_eks_elb/elb_huae6e8bb776e806d0d619a890a5bf58a9_19454_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="elb.png"
class="gallery-image"
data-flex-grow="403"
data-flex-basis="968px"
>&lt;/p>
&lt;p>ì˜ ì„¤ì •ë˜ì—ˆë‹¤ë©´ ìœ„ì™€ ê°™ì´ ALBê°€ ìƒì„±ë  ê²ƒ ì…ë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-jsx" data-lang="jsx">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">$&lt;/span> &lt;span class="nx">kubectl&lt;/span> &lt;span class="nx">get&lt;/span> &lt;span class="nx">ingress&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">NAME&lt;/span> &lt;span class="nx">HOSTS&lt;/span> &lt;span class="nx">ADDRESS&lt;/span> &lt;span class="nx">PORTS&lt;/span> &lt;span class="nx">AGE&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">ingress&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="nx">bf1e76be&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="k">default&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">ingress&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">e8c7&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">1351183883.&lt;/span>&lt;span class="nx">ap&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">northeast&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">2.&lt;/span>&lt;span class="nx">elb&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">amazonaws&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">com&lt;/span> &lt;span class="mi">80&lt;/span> &lt;span class="mi">30&lt;/span>&lt;span class="nx">s&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="ì¸ì¦ì„œ-ì„¤ì •ì„-í†µí•´-https-ê¹Œì§€">ì¸ì¦ì„œ ì„¤ì •ì„ í†µí•´ HTTPS ê¹Œì§€?!&lt;/h3>
&lt;blockquote>
&lt;p>â¤ï¸ AWS &lt;code>Certificate Manager&lt;/code>ì™€ &lt;code>Ingress&lt;/code>ì— ëŒ€í•œ &lt;code>annotation&lt;/code>ì„ ì´ìš©í•´ ê°„ë‹¨í•˜ê²Œ &lt;code>HTTPS&lt;/code>ë¥¼ ì´ìš©í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤! ì§ì ‘í•˜ë ¤ë©´ ë„ë©”ì¸ ì†Œìœ  ì¸ì¦ê³¼ ì¸ì¦ì„œ, ë¹„ë°€í‚¤ ë“±ì„ ëª¨ë‘ ê´€ë¦¬í•´ì•¼í–ˆëŠ”ë° ë§ì´ì§€ìš”! ğŸ¥&lt;/p>
&lt;/blockquote>
&lt;p>&lt;img src="https://umi0410.github.io/blog/aws/aws_eks_elb/cert.png"
width="1082"
height="317"
srcset="https://umi0410.github.io/blog/aws/aws_eks_elb/cert_hu285e592bed94d8c711caab941a928b85_40319_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/aws/aws_eks_elb/cert_hu285e592bed94d8c711caab941a928b85_40319_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="cert.png"
class="gallery-image"
data-flex-grow="341"
data-flex-basis="819px"
>&lt;/p>
&lt;p>ì´ëŸ°ì‹ìœ¼ë¡œ AWSì˜ &lt;code>Certificate Manager&lt;/code>ì„ í†µí•´ ë°œê¸‰ë°›ì€ ì¸ì¦ì„œê°€ ìˆë‹¤ë©´ ì´ë¥¼ alb ì—ì„œ ingressì— annotationì„ ì„¤ì •í•¨ìœ¼ë¡œì¨ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;strong>Ingressì˜ annotationì— HTTPSë° ì¸ì¦ì„œ ê´€ë ¨ ì„¤ì • ì¶”ê°€í•´ì£¼ê¸°&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-jsx" data-lang="jsx">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">apiVersion&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="nx">extensions&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">v1beta1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">kind&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="nx">Ingress&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">metadata&lt;/span>&lt;span class="o">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">name&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;ingress&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">annotations&lt;/span>&lt;span class="o">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">kubernetes&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">io&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">ingress&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="kr">class&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="nx">alb&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">alb&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">ingress&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">kubernetes&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">io&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">scheme&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="nx">internet&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">facing&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">alb&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">ingress&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">kubernetes&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">io&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">listen&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">ports&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s1">&amp;#39;[{&amp;#34;HTTP&amp;#34;: 80}, {&amp;#34;HTTPS&amp;#34;: 443}]&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">alb&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">ingress&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">kubernetes&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">io&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">actions&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">redirect&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">to&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">https&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="o">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>&lt;span class="s2">&amp;#34;Type&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="s2">&amp;#34;redirect&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s2">&amp;#34;RedirectConfig&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="s2">&amp;#34;Port&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="s2">&amp;#34;443&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s2">&amp;#34;Protocol&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="s2">&amp;#34;HTTPS&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s2">&amp;#34;StatusCode&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="s2">&amp;#34;HTTP_302&amp;#34;&lt;/span>&lt;span class="p">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">alb&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">ingress&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">kubernetes&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">io&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">certificate&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">arn&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="nx">Certificate&lt;/span> &lt;span class="nx">Mangerì˜&lt;/span> &lt;span class="nx">ì¸ì¦ì„œ&lt;/span> &lt;span class="nx">arn&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">...&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;em>http redirect ë° actionsì— ëŒ€í•œ ë‚´ìš©ì€ ì €ì˜ ì• êµì…ë‹ˆë‹¤.&lt;/em> ê¶ê¸ˆí•˜ì‹  ë¶„ë“¤ì€ í•œ ë²ˆ ì ìš©í•´ë³´ì‹œê±°ë‚˜ ì•Œì•„ë³´ì‹œë©´ ì–´ë µì§€ ì•Šê²Œ ì•Œì•„ë‚´ì‹¤ ìˆ˜ ìˆì„ ê²ë‹ˆë‹¤! ğŸ˜†&lt;/p>
&lt;p>&lt;strong>Route53ì— ALB ì¶”ê°€í•´ì£¼ê¸°&lt;/strong>&lt;/p>
&lt;p>EKSì—ì„œ ALBë¥¼ ì‚¬ìš©í•˜ëŠ” ë“±ì˜ ì‘ì—…ì„ í•˜ì‹œëŠ” ë¶„ì€ ì–´ëŠ ì •ë„ awsì— ëŒ€í•œ ì´í•´ê°€ ìˆìœ¼ë¦¬ë¼ ìƒê°í•˜ê³ , ALBë¥¼ Route53ì„ í†µí•´ ë ˆì½”ë“œë¡œ ì¶”ê°€í•˜ëŠ” ì‘ì—…ì— ëŒ€í•œ ì„¤ëª…ì€ ìƒëµí•˜ê² ìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://umi0410.github.io/blog/aws/aws_eks_elb/cert2.png"
width="1714"
height="605"
srcset="https://umi0410.github.io/blog/aws/aws_eks_elb/cert2_huff1102cf41f5fc11c3e61b957cd43eab_183400_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/aws/aws_eks_elb/cert2_huff1102cf41f5fc11c3e61b957cd43eab_183400_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="cert2.png"
class="gallery-image"
data-flex-grow="283"
data-flex-basis="679px"
>&lt;/p>
&lt;p>alb-ingress-controllerë¡œ AWS Certificate Managerì˜ ì¸ì¦ì„œê¹Œì§€ ì‚¬ìš©í•œ ëª¨ìŠµ.&lt;/p>
&lt;h2 id="-nlbë¥¼-ì‚¬ìš©í•´-ì„œë¹„ìŠ¤ë¥¼-ë…¸ì¶œì‹œí‚¤ëŠ”-ë°©ë²•">ğŸŒ NLBë¥¼ ì‚¬ìš©í•´ ì„œë¹„ìŠ¤ë¥¼ ë…¸ì¶œì‹œí‚¤ëŠ” ë°©ë²•&lt;/h2>
&lt;p>CLBëŠ” Deprecate ëŒ€ìƒì´ë¼ê³  ë“¤ì—ˆê¸°ë„ í•˜ê³ , êµ³ì´ ì¨ë³¸ ì ì´ ì—†ì–´ NLBë¡œë§Œ ì„¤ëª…í•©ë‹ˆë‹¤. NLBëŠ” ALBì— ë¹„í•´ ì‚¬ìš©ì´ ê°„ë‹¨í•©ë‹ˆë‹¤.&lt;/p>
&lt;p>Ingressì™€ alb-ingress-controllerë¥¼ ì‚¬ìš©í–ˆë˜ ALBì™€ ë‹¬ë¦¬ NLBëŠ” ì„œë¹„ìŠ¤ë¥¼ ì§ì ‘ ë…¸ì¶œì‹œí‚µë‹ˆë‹¤. ì£¼ë¡œ &lt;code>Nginx Ingress Controller&lt;/code>ì„ NLBì— ì—°ê²°í•´ì„œ ì‚¬ìš©í–ˆë˜ ê¸°ì–µì´ ë‚©ë‹ˆë‹¤. NLBëŠ” L4 LBë¡œ, Nginxë¥¼ ì£¼ë¡œ L7 LBë¡œ ì‚¬ìš©í•˜ëŠ” ê²½ìš° ì´ë ‡ê²Œ NLBë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. ALBì™€ Nginx ëª¨ë‘ L7 LBë¡œì„œ ì—­í• ì„ í•˜ê¸°ë•Œë¬¸ì— êµ³ì´ ALBë¥¼ ì‚¬ìš©í•  í•„ìš”ê°€ ì—†ëŠ” ê²½ìš°ê°€ ë§ì•˜ìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>NLBë¥¼ í†µí•´ ì„œë¹„ìŠ¤ë¥¼ ë…¸ì¶œì‹œí‚¤ê¸° ìœ„í•´ì„  annotaionì¤‘ì—ì„œë„ [&lt;code>service.beta.kubernetes.io](http://service.beta.kubernetes.io/)...&lt;/code>í˜•íƒœì˜ annotationì„ ì´ìš©í•©ë‹ˆë‹¤. ì‚¬ì‹¤ ì‹¤ì œë¡œ ì‹¤ë¬´í•´ì„œ ì‚¬ìš©í•´ë³¸ annotationì€ ê±°ì˜ [&lt;code>service.beta.kubernetes.io/aws-load-balancer-type:](http://service.beta.kubernetes.io/aws-load-balancer-type:) &amp;quot;nlb&amp;quot;&lt;/code> ë¿ì…ë‹ˆë‹¤. (ì´ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šì„ ê²½ìš° ë””í´íŠ¸ê°€ CLBì´ê¸° ë•Œë¬¸ì—&amp;hellip;)&lt;/p>
&lt;h3 id="nlbê°€-ì‚¬ìš©í• -subnetì—-ì ì ˆí•œ-íƒœê·¸-ë‹¬ê¸°">NLBê°€ ì‚¬ìš©í•  subnetì— ì ì ˆí•œ íƒœê·¸ ë‹¬ê¸°&lt;/h3>
&lt;p>ALBë¥¼ ì‚¬ìš©í–ˆì„ ë•Œì™€ ë§ˆì°¬ê°€ì§€ë¡œ NLBê°€ ì‚¬ìš©í•  ì„œë¸Œë„·ì— í•„ìˆ˜ íƒœê·¸ë¥¼ ë‹¬ì•„ì¤ë‹ˆë‹¤. ê¸°ì–µì´ ì•ˆë‚œ ë‹¤ë©´ ê¸€ì˜ ìƒë‹¨ ALB íŒŒíŠ¸ë¥¼ ì°¸ê³ !&lt;/p>
&lt;h3 id="nlbë¡œ-ë…¸ì¶œí• -ì„œë¹„ìŠ¤-ìƒì„±í•˜ê¸°">NLBë¡œ ë…¸ì¶œí•  ì„œë¹„ìŠ¤ ìƒì„±í•˜ê¸°&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-jsx" data-lang="jsx">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">apiVersion&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="nx">v1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">kind&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="nx">Service&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">metadata&lt;/span>&lt;span class="o">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">name&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="nx">nginx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">nlb&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">annotations&lt;/span>&lt;span class="o">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">service&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">beta&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">kubernetes&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">io&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">aws&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">load&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">balancer&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">type&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;nlb&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">spec&lt;/span>&lt;span class="o">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">selector&lt;/span>&lt;span class="o">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">app&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="nx">nginx&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">ports&lt;/span>&lt;span class="o">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span> &lt;span class="nx">protocol&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="nx">TCP&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">port&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="mi">80&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">targetPort&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="mi">80&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">nodePort&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="mi">30011&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">type&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="nx">LoadBalancer&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="https://umi0410.github.io/blog/aws/aws_eks_elb/terminal.png"
width="983"
height="223"
srcset="https://umi0410.github.io/blog/aws/aws_eks_elb/terminal_hua70a78035179ff73439578821520f3f3_51627_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/aws/aws_eks_elb/terminal_hua70a78035179ff73439578821520f3f3_51627_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="terminal.png"
class="gallery-image"
data-flex-grow="440"
data-flex-basis="1057px"
>&lt;/p>
&lt;p>&lt;img src="https://umi0410.github.io/blog/aws/aws_eks_elb/zzal.png"
width="420"
height="400"
srcset="https://umi0410.github.io/blog/aws/aws_eks_elb/zzal_hu70382f8ad38785a4d7f8dffcaf07bdc6_351117_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/aws/aws_eks_elb/zzal_hu70382f8ad38785a4d7f8dffcaf07bdc6_351117_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="zzal.png"
class="gallery-image"
data-flex-grow="105"
data-flex-basis="252px"
>&lt;/p>
&lt;p>ê°„ë‹¨íˆ typeì„ LoadBalancerë¡œ ë°”ê¾¸ì–´ì£¼ê³ , annotationì— ì–´ë–¤ ELBë¥¼ ì‚¬ìš©í• ì§€( NLB/CLB )ë§Œ ì ì–´ì£¼ë©´ ì•„ë˜ ê·¸ë¦¼ì²˜ëŸ¼ ì†ì‰½ê²Œ NLBë¡œ ì„œë¹„ìŠ¤ë¥¼ ë…¸ì¶œ ì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;h3 id="ì¸ì¦ì„œ-ì„¤ì •ì„-í†µí•´-httpsê¹Œì§€">ì¸ì¦ì„œ ì„¤ì •ì„ í†µí•´ HTTPSê¹Œì§€?!&lt;/h3>
&lt;blockquote>
&lt;p>ğŸŒ‹: &amp;ldquo;ê·¸ë§Œ&amp;hellip;. ì•„ë¬´ë„ ì•ˆ ê¶ê¸ˆí•´&amp;hellip;&amp;rdquo; - í•˜ì§€ë§Œ ë§ˆì§€ë§‰ê¹Œì§€ í˜ì„ ë‚´ì„œ EKSì—ì„œì˜ ELBë¥¼ ì •ë³µí•´ë´…ì‹œë‹¤!&lt;/p>
&lt;/blockquote>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-jsx" data-lang="jsx">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">apiVersion&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="nx">v1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">kind&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="nx">Service&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">metadata&lt;/span>&lt;span class="o">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">name&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="nx">nginx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">nlb&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">annotations&lt;/span>&lt;span class="o">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">service&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">beta&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">kubernetes&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">io&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">aws&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">load&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">balancer&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">type&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;nlb&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">service&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">beta&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">kubernetes&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">io&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">aws&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">load&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">balancer&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">backend&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">protocol&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="nx">tcp&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">service&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">beta&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">kubernetes&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">io&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">aws&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">load&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">balancer&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">ssl&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">ports&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;443&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">service&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">beta&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">kubernetes&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">io&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">aws&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">load&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">balancer&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">ssl&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">cert&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="nx">arn&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="nx">aws&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="nx">acm&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="nx">ap&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">northeast&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="p">{{&lt;/span>&lt;span class="nx">root&lt;/span>&lt;span class="p">}}&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="nx">certificate&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="p">{{&lt;/span>&lt;span class="nx">arn&lt;/span>&lt;span class="p">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">spec&lt;/span>&lt;span class="o">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">selector&lt;/span>&lt;span class="o">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">app&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="nx">nginx&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">ports&lt;/span>&lt;span class="o">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span> &lt;span class="nx">protocol&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="nx">TCP&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">port&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="mi">80&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">targetPort&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="mi">80&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">nodePort&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="mi">30011&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span> &lt;span class="nx">protocol&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="nx">TCP&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">port&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="mi">443&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">targetPort&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="mi">80&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">nodePort&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="mi">30012&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">type&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="nx">LoadBalancer&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;code>backend-protocol&lt;/code>ì€ &lt;code>tcp&lt;/code>|tls í˜¹ì€ https|httpë¡œ ì„¤ì •ì´ ë ëŠ” ë“¯í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ &lt;code>backend-protocol&lt;/code> ë¡œ &lt;code>tcp&lt;/code>ë¥¼ ì„¤ì •í•œ ë’¤ &lt;code>ssl-port&lt;/code>ë¡œ 443ì„ ì„¤ì •, ì„œë¹„ìŠ¤ì˜ &lt;code>spec&lt;/code>ì—ì„œì˜ í¬íŠ¸ë¡œëŠ” &lt;code>80&lt;/code>ê³¼ &lt;code>443&lt;/code>ì„ ì„¤ì •í•˜ë©´, ìë™ì ìœ¼ë¡œ &lt;code>80&lt;/code>ì€ &lt;code>tcp&lt;/code>, &lt;code>443&lt;/code>ì€ tlsë¥¼ ì´ìš©í•˜ëŠ” NLB listenerë¡œ ì„¤ì •ë˜ê²Œ ë˜ëŠ”ë° http,httpsë„ ë§ˆì°¬ê°€ì§€ë¡œ tcp,tlsë¡œ ì ì ˆíˆ ì„¤ì •ì´ ë©ë‹ˆë‹¤. ë‹¤ë§Œ http,httpsë¥¼ ì„¤ì •í•  ê²½ìš° &lt;code>X-Forwarded-For&lt;/code> í—¤ë”ê°€ ì‚½ì…ëœë‹¤ê³  í•©ë‹ˆë‹¤. (ì •í™•í•˜ì§€ëŠ” ì•Šì•„ìš”&amp;hellip; ë”±íˆ NLBì˜ backend protocolì„ L7ìœ¼ë¡œ ì„¤ì •í•˜ëŠ” ê²ƒì´ NLBì˜ ì›ë˜ ìŠ¤í™ì´ ì•„ë‹ˆì—ˆë˜ ì ë„ ìˆê³ , L7ì„ ì´ìš©í•˜ê³  ì‹¶ìœ¼ë©´, ALBë¥¼ ì´ìš©í•˜ëŠ” ê²ƒì´ ë” í¸í•˜ë‹¤ê³  ìƒê°ì´ ë“¤ì–´ì„œ ë”°ë¡œ ê²€ì¦í•´ë³¸ ì ì´ ì—†ê¸° ë•Œë¬¸ì—&amp;hellip; )&lt;/p>
&lt;p>âš ï¸&lt;strong>ë‹¨ì &lt;/strong>ì´ í•˜ë‚˜ ìˆë‹¤ë©´ ì•„ì§ &lt;strong>httpâ‡’https redirect&lt;/strong>ê°€ ë¶ˆê°€ëŠ¥í•˜ë‹¤ëŠ” ê²ƒì¸ë°, ì´ëŠ” ì• ì´ˆì— L4 LBë¥¼ ì´ìš©í•˜ëŠ” ê²ƒê³¼ L7 LBë¥¼ ì´ìš©í•˜ëŠ” ì“°ì„ì— ëŒ€í•œ ì°¨ì´ë¼ê³  ìƒê°ì„ í•˜ê¸° ë•Œë¬¸ì— ê°ìˆ˜ë¥¼ í•´ì•¼í•  ê²ƒ ê°™ìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ L4 NLBì— L7 nginx-ingress-controllerì„ ì—°ê²°í•˜ì—¬ redirectëŠ” nginxê°€ ë‹´ë‹¹í•˜ë„ë¡í•˜ëŠ” ë°©ì‹ì„ ë§ì´ ì´ìš©í•˜ëŠ” ê²ƒ ê°™ìŠµë‹ˆë‹¤. NLBì—ì„œëŠ” L4 ì˜ ë­”ê°€ SSL/TLSí•œ ì‘ì—…ì„ í•˜ê¸° ìœ„í•¨ì´ê³ , L7ì˜ https ì‘ì—…ì´ ì£¼ê°€ ë˜ëŠ” ê²ƒì€ ì•„ë‹ˆë¯€ë¡œ&amp;hellip;? &lt;em>ì‚¬ì‹¤ ì´ ë¶€ë¶„ì€ ì˜ ëª¨ë¥´ê² ìŠµë‹ˆë‹¤&amp;hellip;ğŸ’¦ğŸ’¦ ì˜ ì•„ì‹œëŠ” ë¶„ì´ ê³„ì‹œë‹¤ë©´ ì•Œë ¤ì£¼ì‹œë©´ ê°ì‚¬í•˜ê² ìŠµë‹ˆë‹¤. ã…œã…œã…œ&lt;/em>( NLBì—ì„œ HTTP, HTTPS redirectê°€ ì•ˆë˜ëŠ” ì´ìœ  ì°¸ê³  - &lt;a class="link" href="https://aws.amazon.com/premiumsupport/knowledge-center/redirect-http-https-elb/" target="_blank" rel="noopener"
>https://aws.amazon.com/premiumsupport/knowledge-center/redirect-http-https-elb/&lt;/a> )&lt;/p>
&lt;h3 id="-nlbë¥¼-í†µí•œ-https-ì„œë²„-êµ¬ì¶•-ê²°ê³¼">â­•ï¸ NLBë¥¼ í†µí•œ HTTPS ì„œë²„ êµ¬ì¶• ê²°ê³¼&lt;/h3>
&lt;p>ì–´ì¨Œë“  ìœ„ì˜ annotationì„ í†µí•´ ì˜¬ë°”ë¥´ê²Œ svcë¥¼ ì„¤ì •í•œë‹¤ë©´&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-jsx" data-lang="jsx">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">$&lt;/span> &lt;span class="nx">kubectl&lt;/span> &lt;span class="nx">get&lt;/span> &lt;span class="nx">svc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">nginx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">nlb&lt;/span> &lt;span class="nx">LoadBalancer&lt;/span> &lt;span class="mf">10.100.180.174&lt;/span> &lt;span class="nx">ae27784521c4f4bcd96b22f2cca2358b&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="nx">bffb166fafa47f2&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">elb&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">ap&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">northeast&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">2.&lt;/span>&lt;span class="nx">amazonaws&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">com&lt;/span> &lt;span class="mi">443&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="mi">30014&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">TCP&lt;/span> &lt;span class="mi">37&lt;/span>&lt;span class="nx">m&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>Route53 ì„¤ì •ì€ ì¶”ê°€ë¡œ í•´ì£¼ì–´ì•¼í•¨. - ì˜ˆì‹œ
&lt;a class="link" href="http://nlb.umidev.net" target="_blank" rel="noopener"
>nlb.umidev.net&lt;/a> - ALIAS ae2778452xxxxxxxxxxxxxx.elb.ap-northeast-2.amazonaws.com&lt;/li>
&lt;/ul>
&lt;p>ì´ë ‡ê²Œ serviceê°€ ìƒì„±ë  ê²ƒì´ê³ , (serviceì˜ portë¡œì„œ ì‚¬ìš©í•  80,443 ë“±ì€ service.specì—ì„œ ëª…ì‹œ) ìƒì„± í›„ &lt;code>A Record Alias&lt;/code>ë¡œì„œ NLBì˜ &lt;code>DNS&lt;/code> nameì„ ë„£ì–´ì£¼ë©´ ì‚¬ì§„ê³¼ ê°™ì´ &lt;code>HTTPS&lt;/code> ì ‘ì†ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤!&lt;/p>
&lt;p>&lt;img src="https://umi0410.github.io/blog/aws/aws_eks_elb/cert3.png"
width="1660"
height="605"
srcset="https://umi0410.github.io/blog/aws/aws_eks_elb/cert3_hu4f6093134f3fc61777b52e640067d7a7_152079_480x0_resize_box_3.png 480w, https://umi0410.github.io/blog/aws/aws_eks_elb/cert3_hu4f6093134f3fc61777b52e640067d7a7_152079_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="cert3.png"
class="gallery-image"
data-flex-grow="274"
data-flex-basis="658px"
>&lt;/p>
&lt;h2 id="-ë§ˆì¹˜ë©°">ğŸ³ ë§ˆì¹˜ë©°&lt;/h2>
&lt;p>ì–´ì°¨í”¼ í•œ ë²ˆì˜ ê²€ìƒ‰ì´ë©´ ì •ë³´ë¥¼ ì–»ì„ ìˆ˜ ìˆëŠ” ëª¨ë“  annotationì´ë‚˜ ê¸°íƒ€ ì„¤ì •ì— ëŒ€í•œ ë‚´ìš©ì„ ë‹¤ë£¨ê¸° ë³´ë‹¨ ë‚˜ë¦„ ì œê°€ &lt;strong>ì‹¤ì œë¡œ ì¿ ë²„ë„¤í‹°ìŠ¤ë¥¼ ê´€ë¦¬í•˜ëŠ”&lt;/strong> &lt;strong>ë°ë¸Œì˜µìŠ¤ ì¸í„´ë¡œì„œ ì¼ì„ í•˜ë©´ì„œ í—·ê°ˆë ¸ë˜ ë‚´ìš©&lt;/strong>ê³¼ &lt;strong>EKSì—ì„œì˜ ELB ê´€ë¦¬ì— ëŒ€í•œ íë¦„&lt;/strong>ì„ ìœ„ì£¼ë¡œ ì„¤ëª…í•˜ë ¤ ë…¸ë ¥í–ˆê³ , ì €ì˜ &lt;code>ì‚½ì§ˆ&lt;/code>ì´ ê¹ƒë“  ë‚´ìš©ë“¤ì…ë‹ˆë‹¤ ã…ã…ã…&lt;/p>
&lt;p>ì•„ëŠ” ë²”ìœ„ + ì¢€ ë” ì¡°ì‚¬í•˜ì—¬ ì—´ì‹¬íˆ ì •ë¦¬í•´ë³´ì•˜ì§€ë§Œ, ë¶€ì¡±í•œ ë¶€ë¶„ì´ ìˆì„ ìˆ˜ë„ ìˆê³  í‹€ë¦° ë¶€ë¶„ì´ ìˆì„ ìˆ˜ë„ ìˆì„í…ë°, ë³´ì™„í•´ì£¼ì‹¤ ë‚´ìš©ì´ ìˆë‹¤ë©´ ë§ì”€í•´ì£¼ì‹œë©´ ì—´ì‹¬íˆ ê²€í† í•´ë³´ê² ìŠµë‹ˆë‹¤~! ê°ì‚¬í•©ë‹ˆë‹¤.&lt;/p>
&lt;h2 id="ê¸€ì“´ì´">ğŸ§™â€â™‚ï¸ê¸€ì“´ì´&lt;/h2>
&lt;ul>
&lt;li>&lt;strong>ë°•ì§„ìˆ˜&lt;/strong> - ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘§&lt;code>AUSG&lt;/code> (AWS University Student Group) 3ê¸°ë¡œ í™œë™ ì¤‘&lt;/li>
&lt;li>&lt;strong>ê´€ì‹¬ì‚¬&lt;/strong>
&lt;ul>
&lt;li>&lt;code>Docker&lt;/code>, &lt;code>Kubernetes&lt;/code> ë“±ì˜ &lt;strong>ì»¨í…Œì´ë„ˆ ê¸°ìˆ &lt;/strong>&lt;/li>
&lt;li>&lt;code>Argo&lt;/code>, &lt;code>Spinnaker&lt;/code>, &lt;code>Github action&lt;/code> ë“±ì˜ &lt;strong>CI/CD íˆ´&lt;/strong>&lt;/li>
&lt;li>&lt;code>Terraform&lt;/code>, &lt;code>AWS&lt;/code>ë¥¼ í†µí•œ &lt;strong>í´ë¼ìš°ë“œ ì¸í”„ë¼ êµ¬ì¶•&lt;/strong>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;strong>Blog&lt;/strong> - &lt;a class="link" href="https://senticoding.tistory.com" target="_blank" rel="noopener"
>https://senticoding.tistory.com&lt;/a>&lt;/li>
&lt;li>&lt;strong>Email&lt;/strong> - &lt;a class="link" href="mailto:bo314@naver.com" >bo314@naver.com&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="-ì°¸ê³ -references">ğŸ“š ì°¸ê³  (References)&lt;/h2>
&lt;ul>
&lt;li>EKSì˜ Required subnet tags
&lt;ul>
&lt;li>&lt;a class="link" href="https://docs.aws.amazon.com/ko_kr/eks/latest/userguide/load-balancing.html" target="_blank" rel="noopener"
>https://docs.aws.amazon.com/ko_kr/eks/latest/userguide/load-balancing.html&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://docs.aws.amazon.com/ko_kr/eks/latest/userguide/alb-ingress.html" target="_blank" rel="noopener"
>https://docs.aws.amazon.com/ko_kr/eks/latest/userguide/alb-ingress.html&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Kubernetes Cloud provider aws - &lt;a class="link" href="https://kubernetes.io/docs/concepts/cluster-administration/cloud-providers/#aws" target="_blank" rel="noopener"
>https://kubernetes.io/docs/concepts/cluster-administration/cloud-providers/#aws&lt;/a>&lt;/li>
&lt;li>ALB ingress controller install - &lt;a class="link" href="https://kubernetes-sigs.github.io/aws-alb-ingress-controller/guide/controller/setup/" target="_blank" rel="noopener"
>https://kubernetes-sigs.github.io/aws-alb-ingress-controller/guide/controller/setup/&lt;/a>&lt;/li>
&lt;li>ALB ingress Annotation &lt;a class="link" href="https://kubernetes-sigs.github.io/aws-alb-ingress-controller/guide/ingress/annotation/" target="_blank" rel="noopener"
>https://kubernetes-sigs.github.io/aws-alb-ingress-controller/guide/ingress/annotation/&lt;/a>&lt;/li>
&lt;li>NLBì˜ HTTPS redirectê°€ ë¶ˆê°€ëŠ¥í•œ ì´ìœ  -&lt;a class="link" href="https://aws.amazon.com/premiumsupport/knowledge-center/redirect-http-https-elb/" target="_blank" rel="noopener"
>https://aws.amazon.com/premiumsupport/knowledge-center/redirect-http-https-elb/&lt;/a>&lt;/li>
&lt;li>NLB service Annotations - &lt;a class="link" href="https://kubernetes.io/ko/docs/concepts/services-networking/service/#aws-nlb-support" target="_blank" rel="noopener"
>https://kubernetes.io/ko/docs/concepts/services-networking/service/#aws-nlb-support&lt;/a>&lt;/li>
&lt;li>Ingressì˜ classì— ëŒ€í•´ - &lt;a class="link" href="https://kubernetes.io/ko/docs/concepts/services-networking/ingress/#%EC%9D%B8%EA%B7%B8%EB%A0%88%EC%8A%A4-%ED%81%B4%EB%9E%98%EC%8A%A4" target="_blank" rel="noopener"
>https://kubernetes.io/ko/docs/concepts/services-networking/ingress/#ì¸ê·¸ë ˆìŠ¤-í´ë˜ìŠ¤&lt;/a>&lt;/li>
&lt;/ul></description></item></channel></rss>